"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1616],{7267:(e,t,a)=>{a.d(t,{Z:()=>h});var n,l=a(6252),o=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],s=function(e){return-1!==o.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},r=0,d=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++r+String(t)},i=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},c=function(){return{listeners:[],scriptId:d("tiny-script"),scriptLoaded:!1}},u=(n=c(),{load:function(e,t,a){n.scriptLoaded?a():(n.listeners.push(a),e.getElementById(n.scriptId)||function(e,t,a,l){var o=t.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=e,o.src=a;var s=function(){o.removeEventListener("load",s),n.listeners.forEach((function(e){return e()})),n.scriptLoaded=!0};o.addEventListener("load",s),t.head&&t.head.appendChild(o)}(n.scriptId,e,t))},reinitialize:function(){n=c()}}),m=function(){var e="undefined"!=typeof window?window:a.g;return e&&e.tinymce?e.tinymce:null},b={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},p=a(2262),_=function(){return _=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},_.apply(this,arguments)};const h=(0,l.aZ)({props:b,setup:function(e,t){var a=e.init?_({},e.init):{},n=(0,p.BK)(e),o=n.disabled,r=n.modelValue,c=n.tagName,b=(0,p.iH)(null),h=null,k=e.id||d("tiny-vue"),v=e.init&&e.init.inline||e.inline,f=!!t.attrs["onUpdate:modelValue"],g=!0,y=e.initialValue?e.initialValue:"",C="",w=function(){var n,o,d,c=(n=g,f?function(){return(null==r?void 0:r.value)?r.value:""}:function(){return n?y:C}),u=_(_({},a),{readonly:e.disabled,selector:"#"+k,plugins:(o=a.plugins,d=e.plugins,i(o).concat(i(d))),toolbar:e.toolbar||a.toolbar,inline:v,setup:function(n){h=n,n.on("init",(function(a){return function(e,t,a,n,o,r){n.setContent(r()),a.attrs["onUpdate:modelValue"]&&function(e,t,a,n){var o=e.modelEvents?e.modelEvents:null,s=Array.isArray(o)?o.join(" "):o;(0,l.YP)(n,(function(t,n){a&&"string"==typeof t&&t!==n&&t!==a.getContent({format:e.outputFormat})&&a.setContent(t)})),a.on(s||"change input undo redo",(function(){t.emit("update:modelValue",a.getContent({format:e.outputFormat}))}))}(t,a,n,o),function(e,t,a){Object.keys(t).filter(s).forEach((function(n){var l=t[n];"function"==typeof l&&("onInit"===n?l(e,a):a.on(n.substring(2),(function(e){return l(e,a)})))}))}(e,a.attrs,n)}(a,e,t,n,r,c)})),"function"==typeof a.setup&&a.setup(n)}});(function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()})(b.value)&&(b.value.style.visibility=""),m().init(u),g=!1};return(0,l.YP)(o,(function(e){null!==h&&h.setMode(e?"readonly":"design")})),(0,l.YP)(c,(function(e){var t;f||(C=h.getContent()),null===(t=m())||void 0===t||t.remove(h),(0,l.Y3)((function(){return w()}))})),(0,l.bv)((function(){if(null!==m())w();else if(b.value&&b.value.ownerDocument){var t=e.cloudChannel?e.cloudChannel:"5",a=e.apiKey?e.apiKey:"no-api-key",n=null==e.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+a+"/tinymce/"+t+"/tinymce.min.js":e.tinymceScriptSrc;u.load(b.value.ownerDocument,n,w)}})),(0,l.Jd)((function(){null!==m()&&m().remove(h)})),v||((0,l.dl)((function(){g||w()})),(0,l.se)((function(){var e;f||(C=h.getContent()),null===(e=m())||void 0===e||e.remove(h)}))),t.expose({rerender:function(e){var t;C=h.getContent(),null===(t=m())||void 0===t||t.remove(h),a=_(_({},a),e),(0,l.Y3)((function(){return w()}))}}),function(){return v?function(e,t,a,n){return e(n||"div",{id:t,ref:a})}(l.h,k,b,e.tagName):(0,l.h)("textarea",{id:k,visibility:"hidden",ref:b})}}})},8706:(e,t,a)=>{a.r(t),a.d(t,{default:()=>on});var n=a(6252),l=a(3577);const o={class:"kanban-header"},s=["href"];var r=a(5169),d=a(2516);const i={class:"modal fade",id:"archiveCardsModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},c={class:"modal-dialog"},u={class:"modal-content"},m={class:"modal-header"},b=(0,n._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Are you sure? ",-1),p=(0,n._)("div",{class:"modal-body"}," Are you sure you want to archive the cards? This can not be undone. ",-1),_={class:"modal-footer"};var h=a(4250),k=a(9669),v=a.n(k);const f={name:"ArchiveCards",data:()=>({archiveCardsModal:{}}),computed:{...(0,h.Se)({allCards:"getCards",archiveDestination:"getArchiveDestination",archiveDestinationString:"getArchiveDestinationString",rootUrl:"getRootUrl"})},watch:{archiveDestinationString(e){void 0!==e&&(this.archiveCardsModal=new r.u_("#archiveCardsModal"),this.archiveCardsModal.show())}},methods:{archiveCards(){let e=this.archiveDestination.column,t=this.archiveDestination.level;const a=new FormData;this.allCards.filter((a=>parseInt(a.fields.kanban_column)===e&&parseInt(a.fields.kanban_level)===t)).forEach((e=>{a.append("kanban_card_id",e.pk)})),this.$store.commit({type:"archiveCards",column:e,level:t}),this.archiveCardsModal.hide(),this.$store.commit({type:"updateArchiveDestination",column:"",level:""}),v().post(`${this.rootUrl}kanban_information/archive_kanban_cards/`,a).catch((e=>{}))},closeModal(){this.archiveCardsModal.hide(),this.$store.commit({type:"updateArchiveDestination",column:"",level:""})}}};var g=a(3744);const y=(0,g.Z)(f,[["render",function(e,t,a,l,o,s){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",c,[(0,n._)("div",u,[(0,n._)("div",m,[b,(0,n._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>s.closeModal&&s.closeModal(...e))})]),p,(0,n._)("div",_,[(0,n._)("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>s.closeModal&&s.closeModal(...e))}," No "),(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>s.archiveCards&&s.archiveCards(...e))}," Yes ")])])])])}]]),C={class:"modal fade",id:"blockedNotesModal",tabindex:"-1","aria-labelledby":"blockedNotesModal","aria-hidden":"true"},w={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},I={class:"modal-content"},D=(0,n._)("div",{class:"modal-header"},[(0,n._)("h2",null,"Blocked Card Notes"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"blockedNotesModalButton"},[(0,n._)("span",{"aria-hidden":"true"})])],-1),L={class:"modal-body"},M={class:"row"},S=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Blocked Card Notes"),(0,n._)("p",{class:"text-instructions"}," Please write a reason why this particular card is blocked at the moment. ")],-1),U={class:"col-md-8"},R={class:"modal-footer"},$=["disabled"];var E=a(7267);const N={name:"BlockedNotesModal",components:{editor:E.Z},props:{},data:()=>({noteModal:""}),computed:{...(0,h.Se)({cardId:"getCardId",rootUrl:"getRootUrl"})},methods:{addNote(){const e=new FormData;e.set("note",this.noteModal),v().post(`${this.rootUrl}object_data/kanban_card/${this.cardId}/add_notes/`,e).then((()=>{this.closeModal()}))},closeModal(){this.noteModal="",document.getElementById("blockedNotesModalButton").click()}}},B=(0,g.Z)(N,[["render",function(e,t,a,l,o,s){const r=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)("div",C,[(0,n._)("div",w,[(0,n._)("div",I,[D,(0,n._)("div",L,[(0,n._)("div",M,[S,(0,n._)("div",U,[(0,n.Wm)(r,{init:{file_picker_types:"image",height:250,menubar:!1,plugins:["lists","paste","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:o.noteModal,"onUpdate:modelValue":t[0]||(t[0]=e=>o.noteModal=e)},null,8,["modelValue"])])])]),(0,n._)("div",R,[(0,n._)("button",{class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>s.closeModal&&s.closeModal(...e))}," Close "),(0,n._)("button",{class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>s.addNote&&s.addNote(...e)),disabled:""===o.noteModal}," Add Note ",8,$)])])])])}]]),x={class:"kanban-header-row"},j={class:"kanban-header-row kanban-sticky-row",style:{display:"none"}},T={class:"kanban-level-header"},A={class:"kanban-level-div"};var q=a(5808);const K={key:0,class:"kanban-row"},P={key:1,class:"kanban-row"},Z=["id","data-level","data-column"],O=["id","data-sort-number","data-card-id"],W=(0,n._)("br",null,null,-1);var F=a(6542);const H={name:"KanbanColumn",components:{Icon:F.JO},props:{columnId:{type:Number,default:0},levelId:{type:Number,default:0},newCardInfo:{type:Array,default:()=>[]}},data:()=>({drag:!1}),computed:{...(0,h.Se)({allCards:"getCards",kanbanStatus:"getKanbanStatus",openCardOnLoad:"getOpenCardOnLoad",rootUrl:"getRootUrl"}),masterList(){let e=this.allCards.filter((e=>parseInt(e.fields.kanban_column)===this.columnId&&parseInt(e.fields.kanban_level)===this.levelId));return e=e.sort(((e,t)=>e.fields.kanban_card_sort_number-t.fields.kanban_card_sort_number)),e}},mixins:[q.Z],methods:{checkCardOrder(){if(0===this.masterList.length)return;const e=this.masterList.map((e=>e.fields.kanban_card_sort_number)),t=Math.min.apply(null,e),a=Math.max.apply(null,e);0===t&&a===this.masterList.length-1||(document.getElementById("sort_error").style.display="flex",this.masterList.forEach(((e,t)=>{const a=new FormData;a.set("new_card_column",this.columnId.toString()),a.set("new_card_level",this.levelId.toString()),a.set("new_card_sort_number",t.toString()),a.set("old_card_column",e.fields.kanban_column),a.set("old_card_level",e.fields.kanban_level),a.set("old_card_sort_number",e.fields.kanban_card_sort_number),a.set("card_id",e.pk),this.$store.commit({type:"updateKanbanCard",card_id:e.pk,kanban_column:this.columnId,kanban_level:this.levelId,kanban_card_sort_number:t}),v().post(`${this.rootUrl}kanban_information/${e.pk}/move_card/`,a)})),document.getElementById("sort_error").style.display="")},doubleClickCard(e){const t=this.masterList.filter((t=>t.pk==e.target.dataset.cardId))[0];this.sendDataUpstream(t)},sendDataUpstream(e){let t={};void 0!==e.fields.project?t={id:e.fields.project,hyperlink:`${this.rootUrl}project_information/${e.fields.project}/`,type:"Project"}:void 0!==e.fields.task?t={id:e.fields.task,hyperlink:`${this.rootUrl}task_information/${e.fields.task}/`,type:"Task"}:e.fields.requirement&&(t={id:e.fields.requirement,hyperlink:`${this.rootUrl}requirement_information/${e.fields.requirement}/`,type:"Requirement"}),this.$store.commit({type:"updateCard",cardId:e.pk,cardTitle:e.fields.kanban_card_text,cardDescription:e.fields.kanban_card_description,cardColumn:e.fields.kanban_column,cardLevel:e.fields.kanban_level,cardLink:t,cardPriority:e.fields.kanban_card_priority}),new r.u_(document.getElementById("cardInformationModal")).show()},singleClickCard(e){const t=this.masterList.filter((t=>t.pk==e))[0];this.sendDataUpstream(t)}},watch:{newCardInfo(){this.columnId==this.newCardInfo[0].fields.kanban_column&&this.levelId==this.newCardInfo[0].fields.kanban_level&&this.masterList.push(this.newCardInfo[0])}},mounted(){this.checkCardOrder(),this.masterList.filter((e=>e.pk==this.openCardOnLoad)).length>0&&this.singleClickCard(this.openCardOnLoad)}},V=(0,g.Z)(H,[["render",function(e,t,a,o,s,r){const d=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",{class:"list-group kanban-cell",id:`kanban_cell_${a.levelId}_${a.columnId}`,"data-level":a.levelId,"data-column":a.columnId},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.masterList,(a=>((0,n.wg)(),(0,n.iD)("div",{class:"list-group-item",key:a.pk,id:a.pk,"data-sort-number":a.fields.kanban_card_sort_number,"data-card-id":a.pk,onDblclick:t[0]||(t[0]=e=>r.doubleClickCard(e))},[(0,n._)("b",null,"#"+(0,l.toDisplayString)(a.pk),1),W,(0,n.Uk)(" "+(0,l.toDisplayString)(a.fields.kanban_card_text)+" ",1),(0,n.Wm)(d,{class:"kanban-card-info-icon",icon:e.icons.infoCircle,onClick:e=>r.singleClickCard(a.pk),onDblclick:e=>r.singleClickCard(a.pk)},null,8,["icon","onClick","onDblclick"])],40,O)))),128))],8,Z)}]]),Y=["id","data-sort-number","data-card-id"],z=(0,n._)("br",null,null,-1),J={class:"kanban-add-new-cards"};var G=a(9980),Q=a.n(G);const X={name:"kanbanColumnDraggable",components:{Icon:F.JO,draggable:Q()},props:{columnId:{type:Number,default:0},columnProperty:{type:String,default:"Normal"},levelId:{type:Number,default:0},newCardInfo:{type:Array,default:()=>[]}},data:()=>({drag:!1,priorityList:["highest","high","normal","low","lowest"]}),computed:{...(0,h.Se)({allCards:"getCards",kanbanStatus:"getKanbanStatus",openCardOnLoad:"getOpenCardOnLoad",rootUrl:"getRootUrl"}),masterList(){let e=this.allCards.filter((e=>parseInt(e.fields.kanban_column)===this.columnId&&parseInt(e.fields.kanban_level)===this.levelId));return e=e.sort(((e,t)=>e.fields.kanban_card_sort_number-t.fields.kanban_card_sort_number)),e}},mixins:[q.Z],methods:{addNewKanbanCard(){var e;(e=document.getElementById("addKanbanCardModal")).dataset.kanbanLevel=this.levelId,e.dataset.kanbanColumn=this.columnId,(e=new r.u_(e)).show()},addNewLink(){var e;(e=document.getElementById("newLinkModal")).dataset.kanbanLevel=this.levelId,e.dataset.kanbanColumn=this.columnId,(e=new r.u_(e)).show()},archiveCards(){this.$store.commit({type:"updateArchiveDestination",column:this.columnId,level:this.levelId})},checkCardOrder(){if(0===this.masterList.length)return;const e=this.masterList.map((e=>e.fields.kanban_card_sort_number)),t=Math.min.apply(null,e),a=Math.max.apply(null,e);0===t&&a===this.masterList.length-1||(document.getElementById("sort_error").style.display="flex",this.masterList.forEach(((e,t)=>{const a=new FormData;a.set("new_card_column",this.columnId.toString()),a.set("new_card_level",this.levelId.toString()),a.set("new_card_sort_number",t.toString()),a.set("old_card_column",e.fields.kanban_column),a.set("old_card_level",e.fields.kanban_level),a.set("old_card_sort_number",e.fields.kanban_card_sort_number),a.set("card_id",e.pk),this.$store.commit({type:"updateKanbanCard",card_id:e.pk,kanban_column:this.columnId,kanban_level:this.levelId,kanban_card_sort_number:t}),v().post(`${this.rootUrl}kanban_information/${e.pk}/move_card/`,a)})),document.getElementById("sort_error").style.display="")},doubleClickCard(e){const t=this.masterList.filter((t=>t.pk==e.target.dataset.cardId))[0];this.sendDataUpstream(t)},dragDifferentColumn(e){let t=e.get("new_card_column"),a=e.get("new_card_level"),n=parseInt(e.get("new_card_sort_number")),l=e.get("old_card_column"),o=e.get("old_card_level"),s=parseInt(e.get("old_card_sort_number")),r=e.get("card_id"),d=[];return this.allCards.filter((e=>e.fields.kanban_column==t&&e.fields.kanban_level==a&&e.fields.kanban_card_sort_number>=n)).forEach((e=>{d.push({card_id:e.pk,kanban_column:t,kanban_level:a,kanban_card_sort_number:e.fields.kanban_card_sort_number+1})})),this.allCards.filter((e=>e.fields.kanban_column==l&&e.fields.kanban_level==o&&e.fields.kanban_card_sort_number>=s)).forEach((e=>{e.pk==r?d.push({card_id:e.pk,kanban_column:t,kanban_level:a,kanban_card_sort_number:n}):d.push({card_id:e.pk,kanban_column:l,kanban_level:o,kanban_card_sort_number:e.fields.kanban_card_sort_number-1})})),d},dragSameColumn(e){let t=parseInt(e.get("new_card_sort_number")),a=parseInt(e.get("old_card_sort_number")),n=parseInt(e.get("new_card_column")),l=parseInt(e.get("new_card_level")),o=parseInt(e.get("card_id")),s=1-2*(a<t),r=(t>=a)*t+(t<a)*a,d=(t>=a)*a+(t<a)*t;if(r===d)return[];let i=this.allCards.filter((e=>parseInt(e.fields.kanban_column)===n&&parseInt(e.fields.kanban_level)===l&&e.fields.kanban_card_sort_number>=d&&e.fields.kanban_card_sort_number<=r)),c=[];return i.forEach((e=>{e.pk==o?c.push({card_id:e.pk,kanban_column:n,kanban_level:l,kanban_card_sort_number:t}):c.push({card_id:e.pk,kanban_column:n,kanban_level:l,kanban_card_sort_number:e.fields.kanban_card_sort_number+s})})),c},onEnd(e){var t=e.to,a=e.from,n=e.item.dataset.cardId;let l=t.dataset.column,o=t.dataset.level,s=e.newIndex,d=a.dataset.column,i=a.dataset.level,c=e.oldIndex,u=t.dataset.columnProperty;const m=new FormData;m.set("new_card_column",l),m.set("new_card_level",o),m.set("new_card_sort_number",s),m.set("old_card_column",d),m.set("old_card_level",i),m.set("old_card_sort_number",c),m.set("card_id",n);let b=[];b=l===d&&o===i?this.dragSameColumn(m):this.dragDifferentColumn(m),b.forEach((e=>{this.$store.commit({type:"updateKanbanCard",card_id:e.card_id,kanban_column:e.kanban_column,kanban_level:e.kanban_level,kanban_card_sort_number:e.kanban_card_sort_number})})),v().post(`${this.rootUrl}kanban_information/${n}/move_card/`,m).then((()=>{"Blocked"===u&&(this.$store.commit({type:"updateValue",field:"cardId",value:parseInt(n)}),new r.u_("#blockedNotesModal").show())}))},sendDataUpstream(e){let t={};void 0!==e.fields.project?t={id:e.fields.project,hyperlink:`${this.rootUrl}project_information/${e.fields.project}/`,type:"Project"}:void 0!==e.fields.task?t={id:e.fields.task,hyperlink:`${this.rootUrl}task_information/${e.fields.task}/`,type:"Task"}:e.fields.requirement&&(t={id:e.fields.requirement,hyperlink:`${this.rootUrl}requirement_information/${e.fields.requirement}/`,type:"Requirement"}),this.$store.commit({type:"updateCard",cardId:e.pk,cardTitle:e.fields.kanban_card_text,cardDescription:e.fields.kanban_card_description,cardColumn:e.fields.kanban_column,cardLevel:e.fields.kanban_level,cardLink:t,cardPriority:e.fields.kanban_card_priority}),new r.u_(document.getElementById("cardInformationModal")).show()},singleClickCard(e){const t=this.masterList.filter((t=>t.pk==e))[0];this.sendDataUpstream(t)}},watch:{newCardInfo(){this.columnId==this.newCardInfo[0].fields.kanban_column&&this.levelId==this.newCardInfo[0].fields.kanban_level&&this.masterList.push(this.newCardInfo[0])}},mounted(){this.checkCardOrder(),this.masterList.filter((e=>e.pk==this.openCardOnLoad)).length>0&&this.singleClickCard(this.openCardOnLoad)}},ee={name:"KanbanRow",components:{KanbanColumn:V,KanbanColumnDraggable:(0,g.Z)(X,[["render",function(e,t,a,o,s,r){const d=(0,n.up)("Icon"),i=(0,n.up)("draggable");return(0,n.wg)(),(0,n.j4)(i,{class:"list-group kanban-cell",id:`kanban_cell_${a.levelId}_${a.columnId}`,"data-level":a.levelId,"data-column":a.columnId,"data-column-property":a.columnProperty,disabled:"Closed"===e.kanbanStatus,group:"tasks",onEnd:t[4]||(t[4]=e=>r.onEnd(e)),modelValue:r.masterList,"onUpdate:modelValue":t[5]||(t[5]=e=>r.masterList=e),"item-key":"pk"},{item:(0,n.w5)((({element:a})=>[((0,n.wg)(),(0,n.iD)("div",{class:"list-group-item",key:a.pk,id:a.pk,"data-sort-number":a.fields.kanban_card_sort_number,"data-card-id":a.pk,onDblclick:t[0]||(t[0]=e=>r.doubleClickCard(e))},[(0,n._)("div",{class:(0,l.normalizeClass)(`card-priority-line priority-${s.priorityList[a.fields.kanban_card_priority]}`)},null,2),(0,n._)("b",null,"#"+(0,l.toDisplayString)(a.pk),1),z,(0,n.Uk)(" "+(0,l.toDisplayString)(a.fields.kanban_card_text)+" ",1),(0,n.Wm)(d,{class:"kanban-card-info-icon",icon:e.icons.infoCircle,onClick:e=>r.singleClickCard(a.pk),onDblclick:e=>r.singleClickCard(a.pk)},null,8,["icon","onClick","onDblclick"])],40,Y))])),footer:(0,n.w5)((()=>[(0,n._)("div",J,["Closed"!==a.columnProperty?((0,n.wg)(),(0,n.iD)("a",{key:0,class:"kanban-link btn btn-primary",href:"javascript:void(0)",onClick:t[1]||(t[1]=(...e)=>r.addNewKanbanCard&&r.addNewKanbanCard(...e))}," New Card ")):(0,n.kq)("v-if",!0),"Closed"!==a.columnProperty?((0,n.wg)(),(0,n.iD)("a",{key:1,class:"kanban-link btn btn-warning",href:"javascript:void(0)",onClick:t[2]||(t[2]=(...e)=>r.addNewLink&&r.addNewLink(...e))}," Link Object ")):(0,n.kq)("v-if",!0),r.masterList.length>0?((0,n.wg)(),(0,n.iD)("a",{key:2,class:"kanban-link btn btn-danger",href:"javascript:void(0)",onClick:t[3]||(t[3]=(...e)=>r.archiveCards&&r.archiveCards(...e))}," Archive Cards ")):(0,n.kq)("v-if",!0)])])),_:1},8,["id","data-level","data-column","data-column-property","disabled","modelValue"])}]])},props:{levelId:{type:Number,default:0},newCardInfo:{type:Array,default:()=>[]}},computed:{...(0,h.Se)({columnResults:"getColumnResults",userLevel:"getUserLevel"})},methods:{doubleClickedCard(e){this.$emit("double_clicked_card",e)}}},te={name:"KanbanBoard",components:{KanbanRow:(0,g.Z)(ee,[["render",function(e,t,a,l,o,s){const r=(0,n.up)("kanban-column-draggable"),d=(0,n.up)("kanban-column");return e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",K,[(0,n.kq)(" Users can edit kanban board - can drag "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.columnResults,(e=>((0,n.wg)(),(0,n.j4)(r,{key:e.pk,"level-id":a.levelId,"column-id":e.pk,"column-property":e.fields.kanban_column_property,"new-card-info":a.newCardInfo,onDouble_clicked_card:t[0]||(t[0]=e=>s.doubleClickedCard(e))},null,8,["level-id","column-id","column-property","new-card-info"])))),128))])):((0,n.wg)(),(0,n.iD)("div",P,[(0,n.kq)(" Read Only Users "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.columnResults,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.pk,"level-id":a.levelId,"column-id":e.pk,"new-card-info":a.newCardInfo,onDouble_clicked_card:t[1]||(t[1]=e=>s.doubleClickedCard(e))},null,8,["level-id","column-id","new-card-info"])))),128))]))}]])},props:{kanbanBoardResults:{type:Array,default:()=>[]},newCardInfo:{type:Array,default:()=>[]}},computed:{...(0,h.Se)({columnResults:"getColumnResults",levelResults:"getLevelResults"})},mixins:[q.Z],data:()=>({}),created(){window.addEventListener("resize",this.resizeProcedure),window.addEventListener("scroll",this.scrollProcedure)},destroyed(){window.removeEventListener("resize",this.resizeProcedure),window.removeEventListener("scroll",this.scrollProcedure)},methods:{doubleClickedCard(e){this.$emit("double_clicked_card",e)},resizeProcedure(){const e=400*this.columnResults.length;let t=document.getElementsByClassName("kanban-container");if(t=t[0].clientWidth,e<t){var a=document.getElementsByClassName("kanban-level-div");Array.from(a).forEach((t=>{t.style=`max-width: ${e}px;`}))}else{let e=document.getElementsByClassName("kanban-level-div");Array.from(e).forEach((e=>{e.style="max-width: null;"}))}},scrollProcedure(){var e=document.getElementsByClassName("kanban-sticky-row")[0],t=document.getElementsByClassName("kanban-container")[0];e.scrollLeft=t.scrollLeft;var a=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;e.style.display=a<90?"none":""}},mounted(){this.resizeProcedure(),this.$store.commit({type:"updateKanbanStatus",kanbanStatus:this.kanbanBoardResults[0].fields.kanban_board_status})}},ae=(0,g.Z)(te,[["render",function(e,t,a,o,s,r){const d=(0,n.up)("kanban-row");return(0,n.wg)(),(0,n.iD)("div",{class:"kanban-container",onScroll:t[1]||(t[1]=(...e)=>r.scrollProcedure&&r.scrollProcedure(...e))},[(0,n.kq)(" Render out the header "),(0,n._)("div",x,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.columnResults,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"kanban-column-header",key:e.pk},(0,l.toDisplayString)(e.fields.kanban_column_name),1)))),128))]),(0,n.kq)(" Render out the STICKY header "),(0,n._)("div",j,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.columnResults,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"kanban-column-header",key:e.pk},(0,l.toDisplayString)(e.fields.kanban_column_name),1)))),128))]),(0,n.kq)(" Render each row "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.levelResults,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.pk},[(0,n.kq)(" CREATE THE LEVEL HEADER "),(0,n._)("div",T,[(0,n._)("div",A,(0,l.toDisplayString)(e.fields.kanban_level_name),1)]),(0,n.kq)(" RENDER THE CELLS "),(0,n.Wm)(d,{"level-id":e.pk,"new-card-info":a.newCardInfo,onDouble_clicked_card:t[0]||(t[0]=e=>r.doubleClickedCard(e))},null,8,["level-id","new-card-info"])])))),128))],32)}]]);var ne=a(9963);const le=["data-kanban-level","data-kanban-column"],oe={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},se={class:"modal-content"},re={class:"modal-header"},de=(0,n.Uk)(" Add Kanban Card Wizard "),ie=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addKanbanCardCloseButton"},null,-1),ce={class:"modal-body"},ue={class:"row"},me=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Please note"),(0,n._)("p",{class:"text-instructions"}," The card names can not be the same as something that already exists on the board. ")],-1),be={class:"col-md-8"},pe=(0,n._)("label",null,"Kanban Card Text",-1),_e={class:"row"},he=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Priority"),(0,n._)("p",{class:"text-instructions"}," Please select the apprioriate card priority. ")],-1),ke={class:"col-md-8"},ve=(0,n._)("label",null,"Card Priority",-1),fe={class:"row"},ge=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Description"),(0,n._)("p",{class:"text-instructions"},' Fill out a detailed description for the card, then click on the "Update Card" button to update the card. ')],-1),ye={class:"col-md-8"},Ce={class:"modal-footer"},we=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Ie=["disabled"];var De=a(9860),Le=a(2299);const Me={name:"NewKanbanCard",components:{editor:E.Z,Icon:F.JO,NSelect:De.Z},props:{columnResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]}},mixins:[q.Z,Le.Z],data:()=>({disableAddButton:!0,kanbanCardDescriptionModel:"",kanbanCardTextModel:"",kanbanCardPriorityModal:2,listPriority:[{label:"Highest",value:0},{label:"High",value:1},{label:"Normal",value:2},{label:"Low",value:3},{label:"Lowest",value:4}]}),computed:{...(0,h.Se)({rootUrl:"getRootUrl"})},methods:{addKanbanCard(){var e=document.getElementById("addKanbanCardModal");const t=new FormData;t.set("kanban_card_text",this.kanbanCardTextModel),t.set("kanban_card_description",this.kanbanCardDescriptionModel),t.set("kanban_level",e.dataset.kanbanLevel),t.set("kanban_column",e.dataset.kanbanColumn),t.set("kanban_card_priority",this.kanbanCardPriorityModal),v().post(`${this.rootUrl}kanban_information/${this.kanbanBoardResults[0].pk}/new_card/`,t).then((e=>{this.$emit("new_card",e.data),this.kanbanCardTextModel="",this.kanbanCardDescriptionModel="",document.getElementById("addKanbanCardCloseButton").click()})).catch((e=>{}))}},watch:{kanbanCardTextModel(){this.disableAddButton=!1,0==this.kanbanCardTextModel.length&&(this.disableAddButton=!0),this.kanbanCardResults.filter((e=>e.fields.kanban_card_text==this.kanbanCardTextModel)).length>0&&(this.disableAddButton=!0),0!=this.columnResults.length&&0!=this.levelResults.length||(this.disableAddButton=!0)}}},Se=(0,g.Z)(Me,[["render",function(e,t,a,l,o,s){const r=(0,n.up)("Icon"),d=(0,n.up)("n-select"),i=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)("div",{class:"modal fade",id:"addKanbanCardModal",tabindex:"-1","aria-labelledby":"addKanbanCardModalLabel","aria-hidden":"true","data-kanban-level":a.levelResults[0].pk,"data-kanban-column":a.columnResults[0].pk},[(0,n._)("div",oe,[(0,n._)("div",se,[(0,n._)("div",re,[(0,n._)("h2",null,[(0,n.Wm)(r,{icon:e.icons.cardChecklist},null,8,["icon"]),de]),ie]),(0,n._)("div",ce,[(0,n._)("div",ue,[me,(0,n._)("div",be,[pe,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.kanbanCardTextModel=e),onKeydown:t[1]||(t[1]=(0,ne.withKeys)(((...e)=>s.addKanbanCard&&s.addKanbanCard(...e)),["enter"])),class:"form-control"},null,544),[[ne.vModelText,o.kanbanCardTextModel]])])]),(0,n.kq)(" CARD PRIORITY "),(0,n._)("div",_e,[he,(0,n._)("div",ke,[ve,(0,n.Wm)(d,{options:o.listPriority,value:o.kanbanCardPriorityModal,"onUpdate:value":t[2]||(t[2]=e=>o.kanbanCardPriorityModal=e)},null,8,["options","value"])])]),(0,n.kq)(" CARD DESCRIPTION "),(0,n._)("div",fe,[ge,(0,n._)("div",ye,[(0,n.Wm)(i,{init:{file_picker_types:"image",height:300,images_upload_handler:e.uploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","paste","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:o.kanbanCardDescriptionModel,"onUpdate:modelValue":t[3]||(t[3]=e=>o.kanbanCardDescriptionModel=e)},null,8,["init","modelValue"])])])]),(0,n._)("div",Ce,[we,(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>s.addKanbanCard&&s.addKanbanCard(...e)),disabled:o.disableAddButton}," Add Card ",8,Ie)])])])],8,le)}]]),Ue={class:"modal fade",id:"cardInformationModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Re={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},$e={class:"modal-content"},Ee={class:"modal-header"},Ne=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"cardInformationModalCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),Be=(0,n._)("br",null,null,-1),xe={class:"modal-body"},je=(0,n._)("ul",{id:"card_information_tabs",class:"nav nav-tabs",role:"tablist"},[(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link active",id:"details-tab","data-bs-toggle":"tab","data-bs-target":"#card_details",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Details ")]),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"description-tab","data-bs-toggle":"tab","data-bs-target":"#card_description",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false"}," Description ")]),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#card_notes",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Notes ")]),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"users-tab","data-bs-toggle":"tab","data-bs-target":"#user_permissions",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Users ")])],-1),Te=(0,n._)("hr",null,null,-1),Ae={class:"tab-content",id:"myTabContent"},qe={class:"tab-pane fade show active",id:"card_details",role:"tabpanel","aria-labelledby":"details-tab"},Ke={class:"tab-pane fade",id:"card_description",role:"tabpanel","aria-labelledby":"description-tab"},Pe={class:"tab-pane fade",id:"card_notes",role:"tabpanel","aria-labelledby":"notes-tab"},Ze={class:"tab-pane fade",id:"user_permissions",role:"tabpanel","aria-labelledby":"user-tab"},Oe={key:0,class:"row link-to-object"},We=(0,n._)("strong",null,"Object Link: ",-1),Fe=["href"],He={key:1},Ve={class:"row"},Ye=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Title"),(0,n._)("p",{class:"text-instructions"},' Write an appropriate name for the kanban card. To update click on the "Update" button. ')],-1),ze={class:"col-md-8"},Je=(0,n._)("label",null,"Card Title",-1),Ge=(0,n._)("hr",null,null,-1),Qe={class:"row"},Xe=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Priority"),(0,n._)("p",{class:"text-instructions"}," Define what the priority of the card is. ")],-1),et={class:"col-md-8"},tt=(0,n._)("label",null,"Card Priority",-1),at=(0,n._)("hr",null,null,-1),nt={class:"row"},lt=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Location"),(0,n._)("p",{class:"text-instructions"}," Select the appropriate location for this card. ")],-1),ot={class:"col-md-8"},st={class:"row"},rt={class:"col-md-12 mt-4"},dt=(0,n._)("label",null,"Card Column",-1),it={class:"col-md-12 mt-4"},ct=(0,n._)("label",null,"Card Level",-1),ut={key:2},mt={key:3,class:"row"},bt={class:"col-md-12"};a(9669);const pt={name:"CardDetails",components:{NSelect:De.Z},data:()=>({listPriority:[{label:"Highest",value:0},{label:"High",value:1},{label:"Normal",value:2},{label:"Low",value:3},{label:"Lowest",value:4}],tempModel:""}),computed:{...(0,h.Se)({cardId:"getCardId",cardLevel:"getCardLevel",cardLink:"getCardLink",cardTitle:"getCardTitle",kanbanStatus:"getKanbanStatus",listColumns:"getListColumns",listLevels:"getListLevels",userLevel:"getUserLevel"}),cardColumn:{get(){return this.$store.state.card.cardColumn},set(e){this.$store.commit({type:"updateValue",field:"cardColumn",value:e})}},cardPriority:{get(){return this.$store.state.card.cardPriority},set(e){this.$store.commit({type:"updateValue",field:"cardPriority",value:e})}}},methods:{archiveCard(){document.getElementById("cardInformationModalCloseButton").click(),new r.u_("#confirmCardArchiveModal").show()},closeModal(){document.getElementById("cardInformationModalCloseButton").click()},updateCard(){this.$store.commit({type:"updateKanbanCard",card_id:this.cardId,kanban_card_text:this.cardTitle,kanban_column:this.cardColumn,kanban_level:this.cardLevel}),this.$emit("update_card")}}},_t=(0,g.Z)(pt,[["render",function(e,t,a,o,s,r){const d=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",null,[void 0!==e.cardLink.id&&null!==e.cardLink.id?((0,n.wg)(),(0,n.iD)("div",Oe,[We,(0,n._)("a",{href:e.cardLink.hyperlink,target:"_blank",rel:"noopener noreferrer"},(0,l.toDisplayString)(e.cardLink.type)+" - "+(0,l.toDisplayString)(e.cardLink.id),9,Fe)])):(0,n.kq)("v-if",!0),void 0!==e.cardLink.id&&null!==e.cardLink.id?((0,n.wg)(),(0,n.iD)("hr",He)):(0,n.kq)("v-if",!0),(0,n.kq)(" Card Text "),(0,n._)("div",Ve,[Ye,(0,n._)("div",ze,[Je,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.cardTitle=t),class:"form-control"},null,512),[[ne.vModelText,e.cardTitle]])])]),Ge,(0,n._)("div",Qe,[Xe,(0,n._)("div",et,[tt,(0,n.Wm)(d,{options:s.listPriority,value:r.cardPriority,"onUpdate:value":t[1]||(t[1]=e=>r.cardPriority=e),disabled:"Closed"===e.kanbanStatus},null,8,["options","value","disabled"])])]),at,(0,n.kq)(" CARD LOCATION "),(0,n._)("div",nt,[lt,(0,n._)("div",ot,[(0,n._)("div",st,[(0,n._)("div",rt,[dt,(0,n.Wm)(d,{options:e.listColumns,label:"column",value:r.cardColumn,"onUpdate:value":t[2]||(t[2]=e=>r.cardColumn=e),disabled:"Closed"===e.kanbanStatus},null,8,["options","value","disabled"])]),(0,n._)("div",it,[ct,(0,n.Wm)(d,{options:e.listLevels,label:"level",value:e.cardLevel,"onUpdate:value":t[3]||(t[3]=t=>e.cardLevel=t),disabled:"Closed"===e.kanbanStatus},null,8,["options","value","disabled"])])])])]),e.userLevel>1?((0,n.wg)(),(0,n.iD)("hr",ut)):(0,n.kq)("v-if",!0),e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",mt,[(0,n._)("div",bt,[(0,n._)("button",{class:"btn btn-secondary",onClick:t[4]||(t[4]=(...e)=>r.closeModal&&r.closeModal(...e))}," Close "),"Closed"!==e.kanbanStatus?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-danger archive-card",onClick:t[5]||(t[5]=(...e)=>r.archiveCard&&r.archiveCard(...e))}," Archive Card ")):(0,n.kq)("v-if",!0),"Closed"!==e.kanbanStatus?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-primary save-changes",onClick:t[6]||(t[6]=(...e)=>r.updateCard&&r.updateCard(...e))}," Update Card ")):(0,n.kq)("v-if",!0)])])):(0,n.kq)("v-if",!0)])}]]),ht={key:0,class:"row"},kt=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Notes"),(0,n._)("p",{class:"text-instructions"},' To add a note - type your note in the Note Box and hit the "Submit Note" button. ')],-1),vt={class:"col-md-8"},ft=(0,n._)("label",null,"Note Box",-1),gt={key:1},yt={key:2,class:"row"},Ct={class:"col-md-12"},wt=["disabled"],It=(0,n._)("hr",null,null,-1);var Dt=a(6182);const Lt=a(9669),Mt={name:"CardNotes",components:{editor:E.Z,ListNotes:Dt.Z},props:{},data:()=>({cardNoteModel:""}),computed:{...(0,h.Se)({cardNotes:"getCardNotes",kanbanStatus:"getKanbanStatus",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{addNote(){const e=new FormData;e.set("note",this.cardNoteModel),Lt.post(`${this.rootUrl}object_data/kanban_card/${this.$store.state.card.cardId}/add_notes/`,e).then((e=>{this.$store.commit({type:"appendNote",newNote:e.data[0]}),this.cardNoteModel=""})).catch((e=>{}))},closeModal(){document.getElementById("cardInformationModalCloseButton").click()}}},St=(0,g.Z)(Mt,[["render",function(e,t,a,l,o,s){const r=(0,n.up)("editor"),d=(0,n.up)("list-notes");return(0,n.wg)(),(0,n.iD)("div",null,[e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",ht,[kt,(0,n._)("div",vt,[ft,(0,n.Wm)(r,{init:{height:250,menubar:!1,plugins:["lists","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:o.cardNoteModel,"onUpdate:modelValue":t[0]||(t[0]=e=>o.cardNoteModel=e),disabled:"Closed"===e.kanbanStatus},null,8,["modelValue","disabled"])])])):(0,n.kq)("v-if",!0),e.userLevel>1?((0,n.wg)(),(0,n.iD)("hr",gt)):(0,n.kq)("v-if",!0),e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",yt,[(0,n._)("div",Ct,[(0,n._)("button",{class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>s.closeModal&&s.closeModal(...e))}," Close "),(0,n._)("button",{class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>s.addNote&&s.addNote(...e)),disabled:""===o.cardNoteModel}," Add Note ",8,wt)])])):(0,n.kq)("v-if",!0),It,(0,n.kq)(" NOTE HISTORY "),(0,n.Wm)(d,{"note-history-results":e.cardNotes,destination:"card"},null,8,["note-history-results"])])}]]),Ut={class:"row"},Rt=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Card Description"),(0,n._)("p",{class:"text-instructions"},' Fill out a detailed description for the card, then click on the "Update Card" button to update the card. ')],-1),$t={class:"col-md-8"},Et=(0,n._)("hr",null,null,-1),Nt={key:0,class:"row"},Bt={class:"col-md-12"};a(9669);const xt={name:"CardDescription",components:{editor:E.Z},props:{},data:()=>({}),computed:{...(0,h.Se)({kanbanStatus:"getKanbanStatus",userLevel:"getUserLevel"}),cardDescription:{get(){return this.$store.state.card.cardDescription},set(e){this.$store.commit("updateValue",{field:"cardDescription",value:e})}}},mixins:[Le.Z],methods:{closeModal(){document.getElementById("cardInformationModalCloseButton").click()},updateCard(){this.$emit("update_card")}}},jt=(0,g.Z)(xt,[["render",function(e,t,a,l,o,s){const r=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Ut,[Rt,(0,n._)("div",$t,[(0,n.Wm)(r,{init:{file_picker_types:"image",height:300,images_upload_handler:e.uploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","paste","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:s.cardDescription,"onUpdate:modelValue":t[0]||(t[0]=e=>s.cardDescription=e),disabled:"Closed"===e.kanbanStatus},null,8,["init","modelValue","disabled"])])]),Et,e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",Nt,[(0,n._)("div",Bt,[(0,n._)("button",{class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>s.closeModal&&s.closeModal(...e))}," Close "),"Closed"!==e.kanbanStatus?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>s.updateCard&&s.updateCard(...e))}," Update Card ")):(0,n.kq)("v-if",!0)])])):(0,n.kq)("v-if",!0)])}]]),Tt={key:0,class:"alert alert-secondary"},At={key:1},qt={class:"table"},Kt=(0,n._)("td",{scope:"col"},"Username",-1),Pt=(0,n._)("td",{scope:"col"},"Name",-1),Zt={key:0,scope:"col"},Ot={key:0},Wt={key:2,class:"row"},Ft={class:"col-md-12"},Ht={name:"CardUsers",components:{Icon:F.JO},computed:{...(0,h.Se)({cardId:"getCardId",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel",userList:"getUserList"})},mixins:[q.Z],methods:{addUser(){document.getElementById("cardInformationModalCloseButton").click(),new r.u_("#addUserModal").show()},removeUser(e){const t=new FormData;t.set("username",e),v().post(`${this.rootUrl}object_data/kanban_card/${this.locationId}/remove_user/`,t).then((()=>{const t=this.userList.filter((t=>t.username!==e));this.$store.commit({type:"updateUserList",userList:t})}))}}},Vt={name:"CardInformation",components:{CardDescription:jt,CardDetails:_t,CardNotes:St,CardUsers:(0,g.Z)(Ht,[["render",function(e,t,a,o,s,r){const d=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)(n.HY,null,[0===e.userList.length?((0,n.wg)(),(0,n.iD)("div",Tt," Sorry, there are no users currently assigned to this card. ")):((0,n.wg)(),(0,n.iD)("div",At,[(0,n._)("table",qt,[(0,n._)("thead",null,[(0,n._)("tr",null,[Kt,Pt,4===e.userLevel?((0,n.wg)(),(0,n.iD)("td",Zt," Delete ")):(0,n.kq)("v-if",!0)])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.userList,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",null,(0,l.toDisplayString)(t.id)+" - "+(0,l.toDisplayString)(t.username),1),(0,n._)("td",null,(0,l.toDisplayString)(t.first_name)+" "+(0,l.toDisplayString)(t.last_name),1),e.userLevel>=2?((0,n.wg)(),(0,n.iD)("td",Ot,[(0,n.Wm)(d,{icon:e.icons.trashCan,onClick:e=>r.removeUser(t.username)},null,8,["icon","onClick"])])):(0,n.kq)("v-if",!0)])))),128))])])])),e.userLevel>1?((0,n.wg)(),(0,n.iD)("div",Wt,[(0,n._)("div",Ft,[(0,n._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>r.addUser&&r.addUser(...e))}," Add User ")])])):(0,n.kq)("v-if",!0)],64)}]]),Icon:F.JO},mixins:[q.Z],data:()=>({cardDescriptionModel:"",cardNoteModel:"",cardTitleModel:"",noteHistoryResults:[]}),computed:{...(0,h.Se)({cardId:"getCardId",rootUrl:"getRootUrl"})},methods:{updateCard(){const e=this.$store.getters.getAllCardData,t=new FormData;t.set("kanban_card_text",e.cardTitle),t.set("kanban_card_description",e.cardDescription),t.set("kanban_level",e.cardLevel),t.set("kanban_column",e.cardColumn),t.set("kanban_card_id",e.cardId),t.set("kanban_card_priority",e.cardPriority),v().post(`${this.rootUrl}kanban_information/update_card/`,t).then((()=>{this.$emit("update_card",{kanban_card_id:e.cardId,kanban_card_text:e.cardTitle,kanban_card_description:e.cardDescriptionModel,kanban_column:e.cardColumn,kanban_level:e.cardLevel,kanban_card_priority:e.cardPriority}),document.getElementById("cardInformationModalCloseButton").click()})).catch((e=>{}))}}},Yt=(0,g.Z)(Vt,[["render",function(e,t,a,o,s,r){const d=(0,n.up)("Icon"),i=(0,n.up)("card-details"),c=(0,n.up)("card-description"),u=(0,n.up)("card-notes"),m=(0,n.up)("card-users");return(0,n.wg)(),(0,n.iD)("div",Ue,[(0,n._)("div",Re,[(0,n._)("div",$e,[(0,n._)("div",Ee,[(0,n._)("h2",null,[(0,n.Wm)(d,{icon:e.icons.usersIcon},null,8,["icon"]),(0,n.Uk)(" Card Information - "+(0,l.toDisplayString)(e.cardId),1)]),Ne,Be]),(0,n._)("div",xe,[(0,n.kq)(" TAB MENU "),je,Te,(0,n.kq)(" CONTENT OF TABS "),(0,n._)("div",Ae,[(0,n._)("div",qe,[(0,n.Wm)(i,{onUpdate_card:r.updateCard},null,8,["onUpdate_card"])]),(0,n._)("div",Ke,[(0,n.Wm)(c,{onUpdate_card:r.updateCard},null,8,["onUpdate_card"])]),(0,n._)("div",Pe,[(0,n.Wm)(u)]),(0,n._)("div",Ze,[(0,n.Wm)(m)])])])])])])}]]),zt=["data-kanban-level","data-kanban-column"],Jt={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},Gt={class:"modal-content"},Qt={class:"modal-header"},Xt=(0,n.Uk)(" New Kanban Link Wizard "),ea=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementLinkCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),ta={class:"modal-body"},aa={class:"row"},na=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Object Selector"),(0,n._)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1),la={class:"col-md-8"},oa={key:1,class:"alert alert-success"},sa=(0,n._)("hr",null,null,-1),ra={class:"row"},da=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Select Links"),(0,n._)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1),ia={class:"col-md-8"},ca={key:0,id:"link_wizard_results"},ua=["src"],ma={key:1,class:"alert alert-warning"},ba={key:2,class:"form-group"},pa=(0,n._)("label",null,"Search Terms",-1),_a=(0,n._)("br",null,null,-1),ha={key:3,class:"table"},ka=(0,n._)("td",null,"Status",-1),va={key:0},fa={class:"form-check"},ga=["value","id"],ya=["for"],Ca=(0,n._)("div",{class:"spacer"},null,-1),wa={class:"small-text"},Ia={key:1},Da={class:"form-check"},La=["value","id"],Ma=["for"],Sa=(0,n._)("div",{class:"spacer"},null,-1),Ua={class:"small-text"},Ra={key:2},$a={class:"form-check"},Ea=["value","id"],Na=["for"],Ba=(0,n._)("div",{class:"spacer"},null,-1),xa={class:"small-text"},ja={class:"modal-footer"},Ta=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Aa=["disabled"];var qa=a(3058);const Ka={name:"NewKanbanLinkWizard",components:{Icon:F.JO,NSelect:De.Z},props:{columnResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},computed:{...(0,h.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[qa.Z,q.Z],data:()=>({isSearching:!1,linkModel:[],objectModel:null,objectFilteredResults:[],objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Requirement",label:"Requirement"},{value:"Task",label:"Task"}],searchTermModel:""}),methods:{saveLinks(){const e=new FormData;var t=document.getElementById("newLinkModal");e.set(`${this.objectModel.toLowerCase()}`,this.linkModel),e.set("kanban_level",t.dataset.kanbanLevel),e.set("kanban_column",t.dataset.kanbanColumn),v().post(`${this.rootUrl}kanban_information/${this.locationId}/${this.objectModel.toLowerCase()}/add_link/`,e).then((e=>{this.$emit("new_card",e.data),this.objectModel=null,document.getElementById("requirementLinkCloseButton").click()}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,v().post(`${this.rootUrl}kanban_information/${this.locationId}/${this.objectModel}/link_list/`).then((e=>{this.objectResults=e.data,this.objectFilteredResults=e.data,this.isSearching=!1,this.searchTermModel=""})).catch((e=>{this.showErrorModal(e,"kanban")}))):this.isSearching=!1},searchTermModel(){""!==this.searchTermModel&&null!==this.searchTermModel?this.objectFilteredResults=this.objectResults.filter((e=>{let t="";return t=void 0!==e.fields.project_description?e.fields.project_description.toLowerCase():e.fields.task_short_description.toLowerCase(),t.includes(this.searchTermModel.toLowerCase())})):this.objectFilteredResults=this.objectResults}}},Pa=(0,g.Z)(Ka,[["render",function(e,t,a,o,s,r){const d=(0,n.up)("Icon"),i=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",{class:"modal fade",id:"newLinkModal",tabindex:"-1","aria-labelledby":"kanbanLinkModal","aria-hidden":"true","data-kanban-level":a.levelResults[0].pk,"data-kanban-column":a.columnResults[0].pk},[(0,n._)("div",Jt,[(0,n._)("div",Gt,[(0,n._)("div",Qt,[(0,n._)("h2",null,[(0,n.Wm)(d,{icon:e.icons.linkOut},null,8,["icon"]),Xt]),ea]),(0,n._)("div",ta,[(0,n.kq)(" CHOOSING A OBJECT TYPE "),(0,n._)("div",aa,[na,(0,n._)("div",la,[s.isSearching?((0,n.wg)(),(0,n.iD)("div",oa," Searching for "+(0,l.toDisplayString)(s.objectModel)+"s ",1)):((0,n.wg)(),(0,n.j4)(i,{key:0,options:s.objectSelection,value:s.objectModel,"onUpdate:value":t[0]||(t[0]=e=>s.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),sa,(0,n.kq)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,n._)("div",ra,[da,(0,n._)("div",ia,[(0,n.kq)(" LOADING PLACEHOLDER "),s.isSearching||null==s.objectModel?((0,n.wg)(),(0,n.iD)("div",ca,[(0,n._)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,ua)])):(0,n.kq)("v-if",!0),0==s.objectResults.length&&null!=s.objectModel?((0,n.wg)(),(0,n.iD)("div",ma," Sorry - there are no results. ")):(0,n.kq)("v-if",!0),(0,n.kq)(" SEARCH RESULTS "),!s.isSearching&&s.objectResults.length>0&&null!=s.objectModel?((0,n.wg)(),(0,n.iD)("div",ba,[pa,(0,n.wy)((0,n._)("input",{id:"search_terms",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>s.searchTermModel=e),type:"text"},null,512),[[ne.vModelText,s.searchTermModel]])])):(0,n.kq)("v-if",!0),_a,(0,n.kq)(" TABLE CONTAINING RESULTS "),!s.isSearching&&s.objectFilteredResults.length>0&&null!=s.objectModel?((0,n.wg)(),(0,n.iD)("table",ha,[(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("td",null,(0,l.toDisplayString)(s.objectModel)+" Description",1),ka])]),(0,n.kq)(" PROJECTS "),"Project"==s.objectModel?((0,n.wg)(),(0,n.iD)("tbody",va,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.objectFilteredResults,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.pk},[(0,n._)("td",null,[(0,n._)("div",fa,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"link-option",value:e.pk,id:`radio_project_${e.pk}`,"onUpdate:modelValue":t[2]||(t[2]=e=>s.linkModel=e)},null,8,ga),[[ne.vModelRadio,s.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`radio_project_${e.pk}`},(0,l.toDisplayString)(e.fields.project_name),9,ya)]),Ca,(0,n._)("p",wa," Project "+(0,l.toDisplayString)(e.pk),1)]),(0,n._)("td",null,(0,l.toDisplayString)(e.fields.project_status),1)])))),128))])):(0,n.kq)("v-if",!0),(0,n.kq)(" REQUIREMENTS "),"Requirement"==s.objectModel?((0,n.wg)(),(0,n.iD)("tbody",Ia,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.objectFilteredResults,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.pk},[(0,n._)("td",null,[(0,n._)("div",Da,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"link-option",value:e.pk,id:`radio_requirement_${e.pk}`,"onUpdate:modelValue":t[3]||(t[3]=e=>s.linkModel=e)},null,8,La),[[ne.vModelRadio,s.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`radio_task_${e.pk}`},(0,l.toDisplayString)(e.fields.requirement_title),9,Ma)]),Sa,(0,n._)("p",Ua," Requirement "+(0,l.toDisplayString)(e.pk),1)]),(0,n._)("td",null,(0,l.toDisplayString)(e.fields.requirement_status),1)])))),128))])):(0,n.kq)("v-if",!0),(0,n.kq)(" TASKS "),"Task"==s.objectModel?((0,n.wg)(),(0,n.iD)("tbody",Ra,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.objectFilteredResults,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.pk},[(0,n._)("td",null,[(0,n._)("div",$a,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",value:e.pk,id:`radio_task_${e.pk}`,"onUpdate:modelValue":t[4]||(t[4]=e=>s.linkModel=e)},null,8,Ea),[[ne.vModelRadio,s.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`radio_task_${e.pk}`},(0,l.toDisplayString)(e.fields.task_short_description),9,Na)]),Ba,(0,n._)("p",xa," Task "+(0,l.toDisplayString)(e.pk),1)]),(0,n._)("td",null,(0,l.toDisplayString)(e.fields.task_status),1)])))),128))])):(0,n.kq)("v-if",!0)])):(0,n.kq)("v-if",!0)])])]),(0,n._)("div",ja,[Ta,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:0==s.linkModel.length,onClick:t[5]||(t[5]=(...e)=>r.saveLinks&&r.saveLinks(...e))}," Save changes ",8,Aa)])])])],8,zt)}]]),Za={class:"modal fade",id:"confirmCardArchiveModal",tabindex:"-1","aria-labelledby":"confirmCardArchiveModalLabel","aria-hidden":"true"},Oa={class:"modal-dialog modal-lg"},Wa={class:"modal-content"},Fa=(0,n._)("div",{class:"modal-header"},[(0,n._)("h2",null,"Card Information"),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmCardArchiveModalCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})])],-1),Ha={class:"modal-body"},Va=(0,n._)("div",{class:"alert alert-danger"}," Please note - archiving the card can not be undone. ",-1),Ya=(0,n._)("h3",null," Are you sure you want to archive the following card? ",-1),za={class:"row"},Ja={class:"col"},Ga=(0,n._)("br",null,null,-1),Qa={class:"row"},Xa={class:"col"},en={class:"modal-footer"},tn=a(9669),an={name:"ConfirmCardArchive",computed:{...(0,h.Se)({cardId:"getCardId",cardTitle:"getCardTitle",rootUrl:"getRootUrl"})},methods:{archiveCard(){const e=new FormData;e.append("kanban_card_id",this.cardId),this.$store.commit({type:"archiveCard",cardId:this.cardId}),document.getElementById("confirmCardArchiveModalCloseButton").click(),tn.post(`${this.rootUrl}kanban_information/archive_kanban_cards/`,e).catch((e=>{}))},goBack(){document.getElementById("confirmCardArchiveModalCloseButton").click(),new r.u_("#cardInformationModal").show()}}},nn=(0,g.Z)(an,[["render",function(e,t,a,o,s,r){return(0,n.wg)(),(0,n.iD)("div",Za,[(0,n._)("div",Oa,[(0,n._)("div",Wa,[Fa,(0,n._)("div",Ha,[Va,Ya,(0,n._)("div",za,[(0,n._)("div",Ja,"Card No. - "+(0,l.toDisplayString)(e.cardId),1)]),Ga,(0,n._)("div",Qa,[(0,n._)("div",Xa,"Card Title - "+(0,l.toDisplayString)(e.cardTitle),1)])]),(0,n._)("div",en,[(0,n._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>r.archiveCard&&r.archiveCard(...e))}," Yes Archive Card "),(0,n._)("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>r.goBack&&r.goBack(...e))}," No go back ")])])])])}]]),ln={name:"KanbanInformation",components:{AddUserWizard:d.Z,ArchiveCards:y,BlockedNotesModal:B,CardInformation:Yt,ConfirmCardArchive:nn,KanbanBoard:ae,NewKanbanCard:Se,NewKanbanLinkWizard:Pa},props:{columnResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},locationId:{type:Number,default:0},openCardOnLoad:{type:Number,default:0},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userLevel:{type:Number,default:0}},computed:{...(0,h.Se)({cardId:"getCardId"})},watch:{cardId(){this.refreshUserList=!0}},data(){return{cardInformation:{},localKanbanCardResults:this.kanbanCardResults,refreshUserList:!1,newCardInfo:[]}},methods:{doubleClickedCard(e){this.cardInformation=e},newCard(e){this.$store.commit({type:"addCard",newCard:e})},resetRefreshUserList(){this.refreshUserList=!1},updateCard(e){this.localKanbanCardResults.forEach(((t,a)=>{t.pk==e.kanban_card_id&&(this.localKanbanCardResults[a].fields.kanban_card_text=e.kanban_card_text,this.localKanbanCardResults[a].fields.kanban_card_description=e.kanban_card_description,this.localKanbanCardResults[a].fields.kanban_column=e.kanban_column,this.localKanbanCardResults[a].fields.kanban_level=e.kanban_level,this.localKanbanCardResults[a].fields.kanban_card_priority=e.kanban_card_priority)}))}},mounted(){this.$store.commit({type:"initPayload",kanbanCardResults:this.kanbanCardResults,levelResults:this.levelResults,columnResults:this.columnResults,openCardOnLoad:this.openCardOnLoad}),this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.$store.commit({type:"updateDestination",destination:"kanban_board",locationId:this.locationId}),this.$store.commit({type:"updateLists",columnResults:this.columnResults,levelResults:this.levelResults}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},on=(0,g.Z)(ln,[["render",function(e,t,a,r,d,i){const c=(0,n.up)("kanban-board"),u=(0,n.up)("add-user-wizard"),m=(0,n.up)("archive-cards"),b=(0,n.up)("blocked-notes-modal"),p=(0,n.up)("confirm-card-archive"),_=(0,n.up)("new-kanban-card"),h=(0,n.up)("card-information"),k=(0,n.up)("new-kanban-link-wizard");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h1",o,(0,l.toDisplayString)(a.kanbanBoardResults[0].fields.kanban_board_name),1),a.userLevel>=3?((0,n.wg)(),(0,n.iD)("a",{key:0,class:"kanban-edit-text",href:`${a.rootUrl}kanban_information/${a.kanbanBoardResults[0].pk}/edit_board/`}," Edit Kanban ",8,s)):(0,n.kq)("v-if",!0),(0,n.kq)(" Rendering the Kanban Container "),(0,n.Wm)(c,{"column-results":a.columnResults,"kanban-board-results":a.kanbanBoardResults,"kanban-card-results":d.localKanbanCardResults,"level-results":a.levelResults,"new-card-info":d.newCardInfo,onDouble_clicked_card:t[0]||(t[0]=e=>i.doubleClickedCard(e))},null,8,["column-results","kanban-board-results","kanban-card-results","level-results","new-card-info"]),(0,n.kq)(" MODALS "),(0,n.Wm)(u,{destination:"kanban_card","location-id":e.cardId,"refresh-user-list":d.refreshUserList,onReset_refresh_user_list:i.resetRefreshUserList},null,8,["location-id","refresh-user-list","onReset_refresh_user_list"]),(0,n.Wm)(m),(0,n.Wm)(b),(0,n.Wm)(p,{"card-information":d.cardInformation},null,8,["card-information"]),(0,n.Wm)(_,{"kanban-card-results":a.kanbanCardResults,"column-results":a.columnResults,"level-results":a.levelResults,"kanban-board-results":a.kanbanBoardResults,onNew_card:t[1]||(t[1]=e=>i.newCard(e))},null,8,["kanban-card-results","column-results","level-results","kanban-board-results"]),(0,n.Wm)(h,{"card-information":d.cardInformation,onUpdate_card:t[2]||(t[2]=e=>i.updateCard(e))},null,8,["card-information"]),(0,n.Wm)(k,{"location-id":a.locationId,"column-results":a.columnResults,"level-results":a.levelResults,onNew_card:t[3]||(t[3]=e=>i.newCard(e))},null,8,["location-id","column-results","level-results"])])}]])},6182:(e,t,a)=>{a.d(t,{Z:()=>p});var n=a(6252),l=a(3577);const o={key:0,class:"module-spacer"},s={class:"alert alert-dark"},r={key:1},d={class:"table"},i=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("td",null,"Note")])],-1),c=["innerHTML"],u=(0,n._)("div",{class:"spacer"},null,-1),m={class:"small-text"},b={name:"ListNotes",props:{destination:{type:String,default:""},noteHistoryResults:{type:Array,default:()=>[]}}},p=(0,a(3744).Z)(b,[["render",function(e,t,a,b,p,_){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.kq)(" NOTE HISTORY "),0==a.noteHistoryResults.length?((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",s," Sorry - but there are no notes for this "+(0,l.toDisplayString)(a.destination)+". ",1)])):((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("table",d,[i,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.noteHistoryResults,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.pk},[(0,n._)("td",null,[(0,n._)("div",{innerHTML:e.fields.object_note},null,8,c),u,(0,n._)("p",m,(0,l.toDisplayString)(e.fields.date_created),1)])])))),128))])])]))])}]])},2516:(e,t,a)=>{a.d(t,{Z:()=>A});var n=a(6252),l=a(3577);const o={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},s={class:"modal-dialog modal-lg"},r={class:"modal-content"},d={class:"modal-header"},i=(0,n.Uk)(" Add User Wizard "),c=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addUserCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),u={class:"modal-body"},m={key:0,class:"row"},b={class:"col-md-4"},p=(0,n._)("strong",null,"Add Users",-1),_={class:"text-instructions"},h={class:"text-instructions"},k={class:"col-md-8"},v={key:1,class:"row"},f={class:"col-md-6"},g=(0,n._)("strong",null,"Sorry - no results",-1),y=(0,n._)("p",{class:"text-instructions"}," This could be because ",-1),C={class:"text-instructions"},w=(0,n._)("li",null,"There are no more users left to add",-1),I={class:"col-md-6 no-search"},D=["src"],L={class:"modal-footer"},M=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),S=["disabled"];var U=a(9669),R=a.n(U),$=a(6542),E=a(9860),N=a(5169),B=a(4250),x=a(3058),j=a(5808);const T={name:"AddUserWizard",components:{Icon:$.JO,NSelect:E.Z},props:{destination:{type:String,default:""},locationId:{type:Number,default:0},refreshUserList:{type:Boolean,default:!1}},mixins:[x.Z,j.Z],computed:{...(0,B.Se)({rootUrl:"getRootUrl",staticURL:"getStaticUrl",userLevel:"getUserLevel"})},data:()=>({userFixList:[],userModel:[]}),methods:{addUser(){const e=new FormData;this.userModel.forEach((t=>{e.append("user_list",t)})),R().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_user/`,e).then((e=>{this.$emit("update_user_list",e.data),document.getElementById("addUserCloseButton").click(),this.userModel=[],this.getUserList(),"kanban_card"===this.destination&&(this.$store.commit({type:"updateUserList",userList:e.data}),new N.u_(document.getElementById("cardInformationModal")).show())})).catch((e=>{this.showErrorModal(e,this.destination)}))},getUserList(){if(""===this.destination||0===this.locationId||this.userLevel<=1)return;let e=`${this.rootUrl}object_data/${this.destination}/${this.locationId}/user_list_all/`;R().post(e).then((e=>{this.userFixList=e.data.map((e=>({value:e.id,label:`${e.username}: ${e.first_name} ${e.last_name}`})))}))}},watch:{refreshUserList(){this.refreshUserList&&this.getUserList(),this.$emit("reset_refresh_user_list")}},mounted(){setTimeout((()=>{this.getUserList()}),200)}},A=(0,a(3744).Z)(T,[["render",function(e,t,a,U,R,$){const E=(0,n.up)("Icon"),N=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",s,[(0,n._)("div",r,[(0,n._)("div",d,[(0,n._)("h2",null,[(0,n.Wm)(E,{icon:e.icons.userIcon},null,8,["icon"]),i]),c]),(0,n._)("div",u,[R.userFixList.length>0?((0,n.wg)(),(0,n.iD)("div",m,[(0,n._)("div",b,[p,(0,n._)("p",_," Use the following multiple select to select which users you want to add to this "+(0,l.toDisplayString)(a.destination)+". ",1),(0,n._)("p",h," Please note: A user's group has to be added to the "+(0,l.toDisplayString)(a.destination)+" before the user can be added. ",1)]),(0,n._)("div",k,[(0,n.Wm)(N,{options:R.userFixList,value:R.userModel,"onUpdate:value":t[0]||(t[0]=e=>R.userModel=e),multiple:""},null,8,["options","value"])])])):((0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",f,[g,y,(0,n._)("ul",C,[w,(0,n._)("li",null," The user you are after is in a group not current added to this "+(0,l.toDisplayString)(a.destination),1)])]),(0,n._)("div",I,[(0,n._)("img",{src:`${e.staticURL}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,D)])]))]),(0,n._)("div",L,[M,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:0===R.userModel.length,onClick:t[1]||(t[1]=(...e)=>$.addUser&&$.addUser(...e))}," Add User(s) ",8,S)])])])])}]])},3058:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(5169);const l={methods:{showErrorModal(e,t,a){new n.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${t}-${a}<hr>${e}`,new n.u_(document.getElementById("errorModal")).show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new n.u_(document.getElementById("errorModal")).show()}}}},5808:(e,t,a)=>{a.d(t,{Z:()=>S});var n=a(3985),l=a(5555),o=a(1826),s=a(6443),r=a(1327),d=a(8521),i=a(1056),c=a(4324),u=a(9672),m=a(9867),b=a(1239),p=a(5004),_=a(1321),h=a(1216),k=a(5550),v=a(7702),f=a(7903),g=a(2606),y=a(3843),C=a(2393),w=a(3360),I=a(9714),D=a(1323),L=a(2610),M=a(5968);const S={data:()=>({icons:{arrowUp:n.Z,bugIcon:l.Z,bxBriefcase:o.Z,cardChecklist:s.Z,clipboardIcon:r.Z,documentPdf:d.Z,documentText:i.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:m.Z,infoCircle:b.Z,linkIcon:p.Z,linkIcon2:_.Z,linkOut:h.Z,mailIcon:k.Z,microsoftExcel:v.Z,microsoftPowerpoint:f.Z,microsoftWord:g.Z,noteAdd:y.Z,objectStorage:C.Z,passwordIcon:w.Z,trashCan:I.Z,userIcon:D.Z,usersIcon:L.Z,xCircle:M.Z}})}},2299:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(9669),l=a.n(n),o=a(4250),s=a(3058);const r={computed:{...(0,o.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},mixins:[s.Z],methods:{uploadImage(e,t,a,n){const o=new FormData;o.set("document",e.blob(),e.filename()),o.set("document_description",e.filename());const s={onUploadProgress:e=>{parseFloat(e.loaded),parseFloat(e.total)}};l().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/upload/`,o,s).then((e=>{t(`/private/${e.data[0].document_key_id}`)})).catch((e=>{this.showErrorModal(e,"kanban item delete",this.kanbanBoardId)}))}}}}}]);