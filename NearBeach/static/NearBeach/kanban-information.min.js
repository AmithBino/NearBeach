"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1616],{5082:(e,a,t)=>{t.r(a),t.d(a,{default:()=>nl});var l=t(6252),n=t(3577);const s={class:"kanban-header"},o=["href"];var d=t(3138),r=t(5398);const i={class:"modal fade",id:"archiveCardsModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},c={class:"modal-dialog"},u={class:"modal-content"},m={class:"modal-header"},b=(0,l._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Are you sure? ",-1),_=(0,l._)("div",{class:"modal-body"}," Are you sure you want to archive the cards? This can not be undone. ",-1),p={class:"modal-footer"};var k=t(989),h=t(9669),v=t.n(h);const g={name:"ArchiveCards",data:()=>({archiveCardsModal:{}}),computed:{...(0,k.Se)({allCards:"getCards",archiveDestination:"getArchiveDestination",archiveDestinationString:"getArchiveDestinationString",rootUrl:"getRootUrl"})},watch:{archiveDestinationString(e){void 0!==e&&(this.archiveCardsModal=new d.u_("#archiveCardsModal"),this.archiveCardsModal.show())}},methods:{archiveCards(){let e=this.archiveDestination.column,a=this.archiveDestination.level;const t=new FormData;this.allCards.filter((t=>parseInt(t.fields.kanban_column)===e&&parseInt(t.fields.kanban_level)===a)).forEach((e=>{t.append("kanban_card_id",e.pk)})),this.$store.commit({type:"archiveCards",column:e,level:a}),this.archiveCardsModal.hide(),this.$store.commit({type:"updateArchiveDestination",column:"",level:""}),v().post(`${this.rootUrl}kanban_information/archive_kanban_cards/`,t).catch((e=>{}))},closeModal(){this.archiveCardsModal.hide(),this.$store.commit({type:"updateArchiveDestination",column:"",level:""})}}};var f=t(3744);const C=(0,f.Z)(g,[["render",function(e,a,t,n,s,o){return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",c,[(0,l._)("div",u,[(0,l._)("div",m,[b,(0,l._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:a[0]||(a[0]=(...e)=>o.closeModal&&o.closeModal(...e))})]),_,(0,l._)("div",p,[(0,l._)("button",{type:"button",class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," No "),(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=(...e)=>o.archiveCards&&o.archiveCards(...e))}," Yes ")])])])])}]]),y={class:"modal fade",id:"blockedNotesModal",tabindex:"-1","aria-labelledby":"blockedNotesModal","aria-hidden":"true"},w={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},I={class:"modal-content"},L=(0,l._)("div",{class:"modal-header"},[(0,l._)("h2",null,"Blocked Card Notes"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"blockedNotesModalButton"},[(0,l._)("span",{"aria-hidden":"true"})])],-1),D={class:"modal-body"},M={class:"row"},U=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Blocked Card Notes"),(0,l._)("p",{class:"text-instructions"}," Please write a reason why this particular card is blocked at the moment. ")],-1),S={class:"col-md-8"},R={class:"modal-footer"},$=["disabled"];var N=t(7267);const x={name:"BlockedNotesModal",components:{editor:N.Z},props:{},data:()=>({noteModal:""}),computed:{...(0,k.Se)({cardId:"getCardId",rootUrl:"getRootUrl"})},methods:{addNote(){const e=new FormData;e.set("note",this.noteModal),v().post(`${this.rootUrl}object_data/kanban_card/${this.cardId}/add_notes/`,e).then((()=>{this.closeModal()}))},closeModal(){this.noteModal="",document.getElementById("blockedNotesModalButton").click()}}},B=(0,f.Z)(x,[["render",function(e,a,t,n,s,o){const d=(0,l.up)("editor");return(0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("div",w,[(0,l._)("div",I,[L,(0,l._)("div",D,[(0,l._)("div",M,[U,(0,l._)("div",S,[(0,l.Wm)(d,{init:{file_picker_types:"image",height:250,menubar:!1,plugins:["lists","image","codesample","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat | image codesample"]},content_css:!1,skin:!1,modelValue:s.noteModal,"onUpdate:modelValue":a[0]||(a[0]=e=>s.noteModal=e)},null,8,["modelValue"])])])]),(0,l._)("div",R,[(0,l._)("button",{class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," Close "),(0,l._)("button",{class:"btn btn-primary save-changes",onClick:a[2]||(a[2]=(...e)=>o.addNote&&o.addNote(...e)),disabled:""===s.noteModal}," Add Note ",8,$)])])])])}]]),E={class:"kanban-header-row"},T={class:"kanban-header-row kanban-sticky-row",style:{display:"none"}},j={class:"kanban-level-header"},A={class:"kanban-level-div"};var q=t(5808);const K={key:0,class:"kanban-row"},P={key:1,class:"kanban-row"},O=["id","data-level","data-column"],Z=["id","data-sort-number","data-card-id"],W=(0,l._)("br",null,null,-1);var F=t(6542);const V={name:"KanbanColumn",components:{Icon:F.JO},props:{columnId:{type:Number,default:0},levelId:{type:Number,default:0},newCardInfo:{type:Array,default:()=>[]}},data:()=>({drag:!1}),computed:{...(0,k.Se)({allCards:"getCards",kanbanStatus:"getKanbanStatus",openCardOnLoad:"getOpenCardOnLoad",rootUrl:"getRootUrl"}),masterList(){let e=this.allCards.filter((e=>parseInt(e.fields.kanban_column)===this.columnId&&parseInt(e.fields.kanban_level)===this.levelId));return e=e.sort(((e,a)=>e.fields.kanban_card_sort_number-a.fields.kanban_card_sort_number)),e}},mixins:[q.Z],methods:{checkCardOrder(){if(0===this.masterList.length)return;const e=this.masterList.map((e=>e.fields.kanban_card_sort_number)),a=Math.min.apply(null,e),t=Math.max.apply(null,e);0===a&&t===this.masterList.length-1||(document.getElementById("sort_error").style.display="flex",this.masterList.forEach(((e,a)=>{const t=new FormData;t.set("new_card_column",this.columnId.toString()),t.set("new_card_level",this.levelId.toString()),t.set("new_card_sort_number",a.toString()),t.set("old_card_column",e.fields.kanban_column),t.set("old_card_level",e.fields.kanban_level),t.set("old_card_sort_number",e.fields.kanban_card_sort_number),t.set("card_id",e.pk),this.$store.commit({type:"updateKanbanCard",card_id:e.pk,kanban_column:this.columnId,kanban_level:this.levelId,kanban_card_sort_number:a}),v().post(`${this.rootUrl}kanban_information/${e.pk}/move_card/`,t)})),document.getElementById("sort_error").style.display="")},doubleClickCard(e){const a=this.masterList.filter((a=>a.pk==e.target.dataset.cardId))[0];this.sendDataUpstream(a)},sendDataUpstream(e){let a={};void 0!==e.fields.project?a={id:e.fields.project,hyperlink:`${this.rootUrl}project_information/${e.fields.project}/`,type:"Project"}:void 0!==e.fields.task?a={id:e.fields.task,hyperlink:`${this.rootUrl}task_information/${e.fields.task}/`,type:"Task"}:e.fields.requirement&&(a={id:e.fields.requirement,hyperlink:`${this.rootUrl}requirement_information/${e.fields.requirement}/`,type:"Requirement"}),this.$store.commit({type:"updateCard",cardId:e.pk,cardTitle:e.fields.kanban_card_text,cardDescription:e.fields.kanban_card_description,cardColumn:e.fields.kanban_column,cardLevel:e.fields.kanban_level,cardLink:a,cardPriority:e.fields.kanban_card_priority}),new d.u_(document.getElementById("cardInformationModal")).show()},singleClickCard(e){const a=this.masterList.filter((a=>a.pk==e))[0];this.sendDataUpstream(a)}},watch:{newCardInfo(){this.columnId==this.newCardInfo[0].fields.kanban_column&&this.levelId==this.newCardInfo[0].fields.kanban_level&&this.masterList.push(this.newCardInfo[0])}},mounted(){this.checkCardOrder(),this.masterList.filter((e=>e.pk==this.openCardOnLoad)).length>0&&this.singleClickCard(this.openCardOnLoad)}},H=(0,f.Z)(V,[["render",function(e,a,t,s,o,d){const r=(0,l.up)("Icon");return(0,l.wg)(),(0,l.iD)("div",{class:"list-group kanban-cell",id:`kanban_cell_${t.levelId}_${t.columnId}`,"data-level":t.levelId,"data-column":t.columnId},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.masterList,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"list-group-item",key:t.pk,id:t.pk,"data-sort-number":t.fields.kanban_card_sort_number,"data-card-id":t.pk,onDblclick:a[0]||(a[0]=e=>d.doubleClickCard(e))},[(0,l._)("b",null,"#"+(0,n.toDisplayString)(t.pk),1),W,(0,l.Uk)(" "+(0,n.toDisplayString)(t.fields.kanban_card_text)+" ",1),(0,l.Wm)(r,{class:"kanban-card-info-icon",icon:e.icons.infoCircle,onClick:e=>d.singleClickCard(t.pk),onDblclick:e=>d.singleClickCard(t.pk)},null,8,["icon","onClick","onDblclick"])],40,Z)))),128))],8,O)}]]),Y=["id","data-sort-number","data-card-id"],z=(0,l._)("br",null,null,-1),J={class:"kanban-add-new-cards"};var G=t(9980),Q=t.n(G);const X={name:"kanbanColumnDraggable",components:{Icon:F.JO,draggable:Q()},props:{columnId:{type:Number,default:0},columnProperty:{type:String,default:"Normal"},levelId:{type:Number,default:0},newCardInfo:{type:Array,default:()=>[]}},data:()=>({drag:!1,priorityList:["highest","high","normal","low","lowest"]}),computed:{...(0,k.Se)({allCards:"getCards",kanbanStatus:"getKanbanStatus",openCardOnLoad:"getOpenCardOnLoad",rootUrl:"getRootUrl"}),masterList(){let e=this.allCards.filter((e=>parseInt(e.fields.kanban_column)===this.columnId&&parseInt(e.fields.kanban_level)===this.levelId));return e=e.sort(((e,a)=>e.fields.kanban_card_sort_number-a.fields.kanban_card_sort_number)),e}},mixins:[q.Z],methods:{addNewKanbanCard(){var e;(e=document.getElementById("addKanbanCardModal")).dataset.kanbanLevel=this.levelId,e.dataset.kanbanColumn=this.columnId,(e=new d.u_(e)).show()},addNewLink(){var e;(e=document.getElementById("newLinkModal")).dataset.kanbanLevel=this.levelId,e.dataset.kanbanColumn=this.columnId,(e=new d.u_(e)).show()},archiveCards(){this.$store.commit({type:"updateArchiveDestination",column:this.columnId,level:this.levelId})},checkCardOrder(){if(0===this.masterList.length)return;const e=this.masterList.map((e=>e.fields.kanban_card_sort_number)),a=Math.min.apply(null,e),t=Math.max.apply(null,e);0===a&&t===this.masterList.length-1||(document.getElementById("sort_error").style.display="flex",this.masterList.forEach(((e,a)=>{const t=new FormData;t.set("new_card_column",this.columnId.toString()),t.set("new_card_level",this.levelId.toString()),t.set("new_card_sort_number",a.toString()),t.set("old_card_column",e.fields.kanban_column),t.set("old_card_level",e.fields.kanban_level),t.set("old_card_sort_number",e.fields.kanban_card_sort_number),t.set("card_id",e.pk),this.$store.commit({type:"updateKanbanCard",card_id:e.pk,kanban_column:this.columnId,kanban_level:this.levelId,kanban_card_sort_number:a}),v().post(`${this.rootUrl}kanban_information/${e.pk}/move_card/`,t)})),document.getElementById("sort_error").style.display="")},doubleClickCard(e){const a=this.masterList.filter((a=>a.pk==e.target.dataset.cardId))[0];this.sendDataUpstream(a)},dragDifferentColumn(e){let a=e.get("new_card_column"),t=e.get("new_card_level"),l=parseInt(e.get("new_card_sort_number")),n=e.get("old_card_column"),s=e.get("old_card_level"),o=parseInt(e.get("old_card_sort_number")),d=e.get("card_id"),r=[];return this.allCards.filter((e=>e.fields.kanban_column==a&&e.fields.kanban_level==t&&e.fields.kanban_card_sort_number>=l)).forEach((e=>{r.push({card_id:e.pk,kanban_column:a,kanban_level:t,kanban_card_sort_number:e.fields.kanban_card_sort_number+1})})),this.allCards.filter((e=>e.fields.kanban_column==n&&e.fields.kanban_level==s&&e.fields.kanban_card_sort_number>=o)).forEach((e=>{e.pk==d?r.push({card_id:e.pk,kanban_column:a,kanban_level:t,kanban_card_sort_number:l}):r.push({card_id:e.pk,kanban_column:n,kanban_level:s,kanban_card_sort_number:e.fields.kanban_card_sort_number-1})})),r},dragSameColumn(e){let a=parseInt(e.get("new_card_sort_number")),t=parseInt(e.get("old_card_sort_number")),l=parseInt(e.get("new_card_column")),n=parseInt(e.get("new_card_level")),s=parseInt(e.get("card_id")),o=1-2*(t<a),d=(a>=t)*a+(a<t)*t,r=(a>=t)*t+(a<t)*a;if(d===r)return[];let i=this.allCards.filter((e=>parseInt(e.fields.kanban_column)===l&&parseInt(e.fields.kanban_level)===n&&e.fields.kanban_card_sort_number>=r&&e.fields.kanban_card_sort_number<=d)),c=[];return i.forEach((e=>{e.pk==s?c.push({card_id:e.pk,kanban_column:l,kanban_level:n,kanban_card_sort_number:a}):c.push({card_id:e.pk,kanban_column:l,kanban_level:n,kanban_card_sort_number:e.fields.kanban_card_sort_number+o})})),c},onEnd(e){var a=e.to,t=e.from,l=e.item.dataset.cardId;let n=a.dataset.column,s=a.dataset.level,o=e.newIndex,r=t.dataset.column,i=t.dataset.level,c=e.oldIndex,u=a.dataset.columnProperty;const m=new FormData;m.set("new_card_column",n),m.set("new_card_level",s),m.set("new_card_sort_number",o),m.set("old_card_column",r),m.set("old_card_level",i),m.set("old_card_sort_number",c),m.set("card_id",l);let b=[];b=n===r&&s===i?this.dragSameColumn(m):this.dragDifferentColumn(m),b.forEach((e=>{this.$store.commit({type:"updateKanbanCard",card_id:e.card_id,kanban_column:e.kanban_column,kanban_level:e.kanban_level,kanban_card_sort_number:e.kanban_card_sort_number})})),v().post(`${this.rootUrl}kanban_information/${l}/move_card/`,m).then((()=>{"Blocked"===u&&(this.$store.commit({type:"updateValue",field:"cardId",value:parseInt(l)}),new d.u_("#blockedNotesModal").show())}))},sendDataUpstream(e){let a={};null!==e.fields.project?a={id:e.fields.project,hyperlink:`${this.rootUrl}project_information/${e.fields.project}/`,type:"Project"}:null!==e.fields.task?a={id:e.fields.task,hyperlink:`${this.rootUrl}task_information/${e.fields.task}/`,type:"Task"}:e.fields.requirement&&(a={id:e.fields.requirement,hyperlink:`${this.rootUrl}requirement_information/${e.fields.requirement}/`,type:"Requirement"}),this.$store.commit({type:"updateCard",cardId:e.pk,cardTitle:e.fields.kanban_card_text,cardDescription:e.fields.kanban_card_description,cardColumn:e.fields.kanban_column,cardLevel:e.fields.kanban_level,cardLink:a,cardPriority:e.fields.kanban_card_priority}),new d.u_(document.getElementById("cardInformationModal")).show()},singleClickCard(e){const a=this.masterList.filter((a=>a.pk==e))[0];this.sendDataUpstream(a)}},watch:{newCardInfo(){this.columnId==this.newCardInfo[0].fields.kanban_column&&this.levelId==this.newCardInfo[0].fields.kanban_level&&this.masterList.push(this.newCardInfo[0])}},mounted(){this.checkCardOrder(),this.masterList.filter((e=>e.pk==this.openCardOnLoad)).length>0&&this.singleClickCard(this.openCardOnLoad)}},ee={name:"KanbanRow",components:{KanbanColumn:H,KanbanColumnDraggable:(0,f.Z)(X,[["render",function(e,a,t,s,o,d){const r=(0,l.up)("Icon"),i=(0,l.up)("draggable");return(0,l.wg)(),(0,l.j4)(i,{class:"list-group kanban-cell",id:`kanban_cell_${t.levelId}_${t.columnId}`,"data-level":t.levelId,"data-column":t.columnId,"data-column-property":t.columnProperty,disabled:"Closed"===e.kanbanStatus,group:"tasks",onEnd:a[4]||(a[4]=e=>d.onEnd(e)),modelValue:d.masterList,"onUpdate:modelValue":a[5]||(a[5]=e=>d.masterList=e),"item-key":"pk"},{item:(0,l.w5)((({element:t})=>[((0,l.wg)(),(0,l.iD)("div",{class:"list-group-item",key:t.pk,id:t.pk,"data-sort-number":t.fields.kanban_card_sort_number,"data-card-id":t.pk,onDblclick:a[0]||(a[0]=e=>d.doubleClickCard(e))},[(0,l._)("div",{class:(0,n.normalizeClass)(`card-priority-line priority-${o.priorityList[t.fields.kanban_card_priority]}`)},null,2),(0,l._)("b",null,"#"+(0,n.toDisplayString)(t.pk),1),z,(0,l.Uk)(" "+(0,n.toDisplayString)(t.fields.kanban_card_text)+" ",1),(0,l.Wm)(r,{class:"kanban-card-info-icon",icon:e.icons.infoCircle,onClick:e=>d.singleClickCard(t.pk),onDblclick:e=>d.singleClickCard(t.pk)},null,8,["icon","onClick","onDblclick"])],40,Y))])),footer:(0,l.w5)((()=>[(0,l._)("div",J,["Closed"!==t.columnProperty?((0,l.wg)(),(0,l.iD)("a",{key:0,class:"kanban-link btn btn-primary",href:"javascript:void(0)",onClick:a[1]||(a[1]=(...e)=>d.addNewKanbanCard&&d.addNewKanbanCard(...e))}," New Card ")):(0,l.kq)("v-if",!0),"Closed"!==t.columnProperty?((0,l.wg)(),(0,l.iD)("a",{key:1,class:"kanban-link btn btn-warning",href:"javascript:void(0)",onClick:a[2]||(a[2]=(...e)=>d.addNewLink&&d.addNewLink(...e))}," Link Object ")):(0,l.kq)("v-if",!0),d.masterList.length>0?((0,l.wg)(),(0,l.iD)("a",{key:2,class:"kanban-link btn btn-danger",href:"javascript:void(0)",onClick:a[3]||(a[3]=(...e)=>d.archiveCards&&d.archiveCards(...e))}," Archive Cards ")):(0,l.kq)("v-if",!0)])])),_:1},8,["id","data-level","data-column","data-column-property","disabled","modelValue"])}]])},props:{levelId:{type:Number,default:0},newCardInfo:{type:Array,default:()=>[]}},computed:{...(0,k.Se)({columnResults:"getColumnResults",userLevel:"getUserLevel"})},methods:{doubleClickedCard(e){this.$emit("double_clicked_card",e)}}},ae={name:"KanbanBoard",components:{KanbanRow:(0,f.Z)(ee,[["render",function(e,a,t,n,s,o){const d=(0,l.up)("kanban-column-draggable"),r=(0,l.up)("kanban-column");return e.userLevel>1?((0,l.wg)(),(0,l.iD)("div",K,[(0,l.kq)(" Users can edit kanban board - can drag "),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columnResults,(e=>((0,l.wg)(),(0,l.j4)(d,{key:e.pk,"level-id":t.levelId,"column-id":e.pk,"column-property":e.fields.kanban_column_property,"new-card-info":t.newCardInfo,onDouble_clicked_card:a[0]||(a[0]=e=>o.doubleClickedCard(e))},null,8,["level-id","column-id","column-property","new-card-info"])))),128))])):((0,l.wg)(),(0,l.iD)("div",P,[(0,l.kq)(" Read Only Users "),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columnResults,(e=>((0,l.wg)(),(0,l.j4)(r,{key:e.pk,"level-id":t.levelId,"column-id":e.pk,"new-card-info":t.newCardInfo,onDouble_clicked_card:a[1]||(a[1]=e=>o.doubleClickedCard(e))},null,8,["level-id","column-id","new-card-info"])))),128))]))}]])},props:{kanbanBoardResults:{type:Array,default:()=>[]},newCardInfo:{type:Array,default:()=>[]}},computed:{...(0,k.Se)({columnResults:"getColumnResults",levelResults:"getLevelResults"})},mixins:[q.Z],data:()=>({}),created(){window.addEventListener("resize",this.resizeProcedure),window.addEventListener("scroll",this.scrollProcedure)},destroyed(){window.removeEventListener("resize",this.resizeProcedure),window.removeEventListener("scroll",this.scrollProcedure)},methods:{doubleClickedCard(e){this.$emit("double_clicked_card",e)},resizeProcedure(){const e=400*this.columnResults.length;let a=document.getElementsByClassName("kanban-container");if(a=a[0].clientWidth,e<a){var t=document.getElementsByClassName("kanban-level-div");Array.from(t).forEach((a=>{a.style=`max-width: ${e}px;`}))}else{let e=document.getElementsByClassName("kanban-level-div");Array.from(e).forEach((e=>{e.style="max-width: null;"}))}},scrollProcedure(){var e=document.getElementsByClassName("kanban-sticky-row")[0],a=document.getElementsByClassName("kanban-container")[0];e.scrollLeft=a.scrollLeft;var t=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;e.style.display=t<90?"none":""}},mounted(){this.resizeProcedure(),this.$store.commit({type:"updateKanbanStatus",kanbanStatus:this.kanbanBoardResults[0].fields.kanban_board_status})}},te=(0,f.Z)(ae,[["render",function(e,a,t,s,o,d){const r=(0,l.up)("kanban-row");return(0,l.wg)(),(0,l.iD)("div",{class:"kanban-container",onScroll:a[1]||(a[1]=(...e)=>d.scrollProcedure&&d.scrollProcedure(...e))},[(0,l.kq)(" Render out the header "),(0,l._)("div",E,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columnResults,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"kanban-column-header",key:e.pk},(0,n.toDisplayString)(e.fields.kanban_column_name),1)))),128))]),(0,l.kq)(" Render out the STICKY header "),(0,l._)("div",T,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columnResults,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"kanban-column-header",key:e.pk},(0,n.toDisplayString)(e.fields.kanban_column_name),1)))),128))]),(0,l.kq)(" Render each row "),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.levelResults,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.pk},[(0,l.kq)(" CREATE THE LEVEL HEADER "),(0,l._)("div",j,[(0,l._)("div",A,(0,n.toDisplayString)(e.fields.kanban_level_name),1)]),(0,l.kq)(" RENDER THE CELLS "),(0,l.Wm)(r,{"level-id":e.pk,"new-card-info":t.newCardInfo,onDouble_clicked_card:a[0]||(a[0]=e=>d.doubleClickedCard(e))},null,8,["level-id","new-card-info"])])))),128))],32)}]]);var le=t(9963);const ne=["data-kanban-level","data-kanban-column"],se={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},oe={class:"modal-content"},de={class:"modal-header"},re=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addKanbanCardCloseButton"},null,-1),ie={class:"modal-body"},ce={class:"row"},ue=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Please note"),(0,l._)("p",{class:"text-instructions"}," The card names can not be the same as something that already exists on the board. ")],-1),me={class:"col-md-8"},be=(0,l._)("label",null,"Kanban Card Text",-1),_e={class:"row"},pe=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Card Priority"),(0,l._)("p",{class:"text-instructions"}," Please select the apprioriate card priority. ")],-1),ke={class:"col-md-8"},he=(0,l._)("label",null,"Card Priority",-1),ve={class:"row"},ge=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Card Description"),(0,l._)("p",{class:"text-instructions"},' Fill out a detailed description for the card, then click on the "Update Card" button to update the card. ')],-1),fe={class:"col-md-8"},Ce={class:"modal-footer"},ye=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),we=["disabled"];var Ie=t(1317),Le=t(2299);const De={name:"NewKanbanCard",components:{editor:N.Z,Icon:F.JO,NSelect:Ie.Z},props:{columnResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]}},mixins:[q.Z,Le.Z],data:()=>({disableAddButton:!0,kanbanCardDescriptionModel:"",kanbanCardTextModel:"",kanbanCardPriorityModal:2,listPriority:[{label:"Highest",value:0},{label:"High",value:1},{label:"Normal",value:2},{label:"Low",value:3},{label:"Lowest",value:4}]}),computed:{...(0,k.Se)({rootUrl:"getRootUrl"})},methods:{addKanbanCard(){var e=document.getElementById("addKanbanCardModal");const a=new FormData;a.set("kanban_card_text",this.kanbanCardTextModel),a.set("kanban_card_description",this.kanbanCardDescriptionModel),a.set("kanban_level",e.dataset.kanbanLevel),a.set("kanban_column",e.dataset.kanbanColumn),a.set("kanban_card_priority",this.kanbanCardPriorityModal),v().post(`${this.rootUrl}kanban_information/${this.kanbanBoardResults[0].pk}/new_card/`,a).then((e=>{this.$emit("new_card",e.data),this.kanbanCardTextModel="",this.kanbanCardDescriptionModel="",document.getElementById("addKanbanCardCloseButton").click()})).catch((e=>{}))}},watch:{kanbanCardTextModel(){this.disableAddButton=!1,0==this.kanbanCardTextModel.length&&(this.disableAddButton=!0),this.kanbanCardResults.filter((e=>e.fields.kanban_card_text==this.kanbanCardTextModel)).length>0&&(this.disableAddButton=!0),0!=this.columnResults.length&&0!=this.levelResults.length||(this.disableAddButton=!0)}}},Me=(0,f.Z)(De,[["render",function(e,a,t,n,s,o){const d=(0,l.up)("Icon"),r=(0,l.up)("n-select"),i=(0,l.up)("editor");return(0,l.wg)(),(0,l.iD)("div",{class:"modal fade",id:"addKanbanCardModal",tabindex:"-1","aria-labelledby":"addKanbanCardModalLabel","aria-hidden":"true","data-kanban-level":t.levelResults[0].pk,"data-kanban-column":t.columnResults[0].pk},[(0,l._)("div",se,[(0,l._)("div",oe,[(0,l._)("div",de,[(0,l._)("h2",null,[(0,l.Wm)(d,{icon:e.icons.cardChecklist},null,8,["icon"]),(0,l.Uk)(" Add Kanban Card Wizard ")]),re]),(0,l._)("div",ie,[(0,l._)("div",ce,[ue,(0,l._)("div",me,[be,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.kanbanCardTextModel=e),onKeydown:a[1]||(a[1]=(0,le.withKeys)(((...e)=>o.addKanbanCard&&o.addKanbanCard(...e)),["enter"])),class:"form-control"},null,544),[[le.vModelText,s.kanbanCardTextModel]])])]),(0,l.kq)(" CARD PRIORITY "),(0,l._)("div",_e,[pe,(0,l._)("div",ke,[he,(0,l.Wm)(r,{options:s.listPriority,value:s.kanbanCardPriorityModal,"onUpdate:value":a[2]||(a[2]=e=>s.kanbanCardPriorityModal=e)},null,8,["options","value"])])]),(0,l.kq)(" CARD DESCRIPTION "),(0,l._)("div",ve,[ge,(0,l._)("div",fe,[(0,l.Wm)(i,{init:{file_picker_types:"image",height:300,images_upload_handler:e.uploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","image","codesample","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat | image codesample"]},content_css:!1,skin:!1,modelValue:s.kanbanCardDescriptionModel,"onUpdate:modelValue":a[3]||(a[3]=e=>s.kanbanCardDescriptionModel=e)},null,8,["init","modelValue"])])])]),(0,l._)("div",Ce,[ye,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:a[4]||(a[4]=(...e)=>o.addKanbanCard&&o.addKanbanCard(...e)),disabled:s.disableAddButton}," Add Card ",8,we)])])])],8,ne)}]]),Ue={class:"modal fade",id:"cardInformationModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Se={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},Re={class:"modal-content"},$e={class:"modal-header"},Ne=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"cardInformationModalCloseButton"},[(0,l._)("span",{"aria-hidden":"true"})],-1),xe=(0,l._)("br",null,null,-1),Be={class:"modal-body"},Ee=(0,l._)("ul",{id:"card_information_tabs",class:"nav nav-tabs",role:"tablist"},[(0,l._)("li",{class:"nav-item",role:"presentation"},[(0,l._)("button",{class:"nav-link active",id:"details-tab","data-bs-toggle":"tab","data-bs-target":"#card_details",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Details ")]),(0,l._)("li",{class:"nav-item",role:"presentation"},[(0,l._)("button",{class:"nav-link",id:"description-tab","data-bs-toggle":"tab","data-bs-target":"#card_description",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false"}," Description ")]),(0,l._)("li",{class:"nav-item",role:"presentation"},[(0,l._)("button",{class:"nav-link",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#card_notes",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Notes ")]),(0,l._)("li",{class:"nav-item",role:"presentation"},[(0,l._)("button",{class:"nav-link",id:"users-tab","data-bs-toggle":"tab","data-bs-target":"#user_permissions",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Users ")]),(0,l._)("li",{class:"nav-item",role:"presentation"},[(0,l._)("button",{class:"nav-link",id:"downloads-tab","data-bs-toggle":"tab","data-bs-target":"#downloads",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"}," Downloads ")])],-1),Te=(0,l._)("hr",null,null,-1),je={class:"tab-content",id:"myTabContent"},Ae={class:"tab-pane fade show active",id:"card_details",role:"tabpanel","aria-labelledby":"details-tab"},qe={class:"tab-pane fade",id:"card_description",role:"tabpanel","aria-labelledby":"description-tab"},Ke={class:"tab-pane fade",id:"card_notes",role:"tabpanel","aria-labelledby":"notes-tab"},Pe={class:"tab-pane fade",id:"user_permissions",role:"tabpanel","aria-labelledby":"user-tab"},Oe={class:"tab-pane fade",id:"downloads",role:"tabpanel","aria-labelledby":"user-tab"},Ze={key:0,class:"row link-to-object"},We=(0,l._)("strong",null,"Object Link: ",-1),Fe=["href"],Ve={key:1},He={class:"row"},Ye=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Card Title"),(0,l._)("p",{class:"text-instructions"},' Write an appropriate name for the kanban card. To update click on the "Update" button. ')],-1),ze={class:"col-md-8"},Je=(0,l._)("label",null,"Card Title",-1),Ge=(0,l._)("hr",null,null,-1),Qe={class:"row"},Xe=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Card Priority"),(0,l._)("p",{class:"text-instructions"}," Define what the priority of the card is. ")],-1),ea={class:"col-md-8"},aa=(0,l._)("label",null,"Card Priority",-1),ta=(0,l._)("hr",null,null,-1),la={class:"row"},na=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Card Location"),(0,l._)("p",{class:"text-instructions"}," Select the appropriate location for this card. ")],-1),sa={class:"col-md-8"},oa={class:"row"},da={class:"col-md-12 mt-4"},ra=(0,l._)("label",null,"Card Column",-1),ia={class:"col-md-12 mt-4"},ca=(0,l._)("label",null,"Card Level",-1),ua={key:2},ma={key:3,class:"row"},ba={class:"col-md-12"};t(9669);const _a={name:"CardDetails",components:{NSelect:Ie.Z},data:()=>({listPriority:[{label:"Highest",value:0},{label:"High",value:1},{label:"Normal",value:2},{label:"Low",value:3},{label:"Lowest",value:4}],tempModel:""}),computed:{...(0,k.Se)({cardId:"getCardId",cardLevel:"getCardLevel",cardLink:"getCardLink",cardTitle:"getCardTitle",kanbanStatus:"getKanbanStatus",listColumns:"getListColumns",listLevels:"getListLevels",userLevel:"getUserLevel"}),cardColumn:{get(){return this.$store.state.card.cardColumn},set(e){this.$store.commit({type:"updateValue",field:"cardColumn",value:e})}},cardPriority:{get(){return this.$store.state.card.cardPriority},set(e){this.$store.commit({type:"updateValue",field:"cardPriority",value:e})}}},methods:{archiveCard(){document.getElementById("cardInformationModalCloseButton").click(),new d.u_("#confirmCardArchiveModal").show()},closeModal(){document.getElementById("cardInformationModalCloseButton").click()},updateCard(){this.$store.commit({type:"updateKanbanCard",card_id:this.cardId,kanban_card_text:this.cardTitle,kanban_column:this.cardColumn,kanban_level:this.cardLevel}),this.$emit("update_card")}}},pa=(0,f.Z)(_a,[["render",function(e,a,t,s,o,d){const r=(0,l.up)("n-select");return(0,l.wg)(),(0,l.iD)("div",null,[void 0!==e.cardLink.id&&null!==e.cardLink.id?((0,l.wg)(),(0,l.iD)("div",Ze,[We,(0,l._)("a",{href:e.cardLink.hyperlink,target:"_blank",rel:"noopener noreferrer"},(0,n.toDisplayString)(e.cardLink.type)+" - "+(0,n.toDisplayString)(e.cardLink.id),9,Fe)])):(0,l.kq)("v-if",!0),void 0!==e.cardLink.id&&null!==e.cardLink.id?((0,l.wg)(),(0,l.iD)("hr",Ve)):(0,l.kq)("v-if",!0),(0,l.kq)(" Card Text "),(0,l._)("div",He,[Ye,(0,l._)("div",ze,[Je,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":a[0]||(a[0]=a=>e.cardTitle=a),class:"form-control"},null,512),[[le.vModelText,e.cardTitle]])])]),Ge,(0,l._)("div",Qe,[Xe,(0,l._)("div",ea,[aa,(0,l.Wm)(r,{options:o.listPriority,value:d.cardPriority,"onUpdate:value":a[1]||(a[1]=e=>d.cardPriority=e),disabled:"Closed"===e.kanbanStatus},null,8,["options","value","disabled"])])]),ta,(0,l.kq)(" CARD LOCATION "),(0,l._)("div",la,[na,(0,l._)("div",sa,[(0,l._)("div",oa,[(0,l._)("div",da,[ra,(0,l.Wm)(r,{options:e.listColumns,label:"column",value:d.cardColumn,"onUpdate:value":a[2]||(a[2]=e=>d.cardColumn=e),disabled:"Closed"===e.kanbanStatus},null,8,["options","value","disabled"])]),(0,l._)("div",ia,[ca,(0,l.Wm)(r,{options:e.listLevels,label:"level",value:e.cardLevel,"onUpdate:value":a[3]||(a[3]=a=>e.cardLevel=a),disabled:"Closed"===e.kanbanStatus},null,8,["options","value","disabled"])])])])]),e.userLevel>1?((0,l.wg)(),(0,l.iD)("hr",ua)):(0,l.kq)("v-if",!0),e.userLevel>1?((0,l.wg)(),(0,l.iD)("div",ma,[(0,l._)("div",ba,[(0,l._)("button",{class:"btn btn-secondary",onClick:a[4]||(a[4]=(...e)=>d.closeModal&&d.closeModal(...e))}," Close "),"Closed"!==e.kanbanStatus?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn btn-danger archive-card",onClick:a[5]||(a[5]=(...e)=>d.archiveCard&&d.archiveCard(...e))}," Archive Card ")):(0,l.kq)("v-if",!0),"Closed"!==e.kanbanStatus?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn btn-primary save-changes",onClick:a[6]||(a[6]=(...e)=>d.updateCard&&d.updateCard(...e))}," Update Card ")):(0,l.kq)("v-if",!0)])])):(0,l.kq)("v-if",!0)])}]]),ka={key:0,class:"row"},ha=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Notes"),(0,l._)("p",{class:"text-instructions"},' To add a note - type your note in the Note Box and hit the "Submit Note" button. ')],-1),va={class:"col-md-8"},ga=(0,l._)("label",null,"Note Box",-1),fa={key:1},Ca={key:2,class:"row"},ya={class:"col-md-12"},wa=["disabled"],Ia=(0,l._)("hr",null,null,-1);var La=t(1121);const Da=t(9669),Ma={name:"CardNotes",components:{editor:N.Z,ListNotes:La.Z},props:{},data:()=>({cardNoteModel:""}),computed:{...(0,k.Se)({cardNotes:"getCardNotes",kanbanStatus:"getKanbanStatus",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{addNote(){const e=new FormData;e.set("note",this.cardNoteModel),Da.post(`${this.rootUrl}object_data/kanban_card/${this.$store.state.card.cardId}/add_notes/`,e).then((e=>{this.$store.commit({type:"appendNote",newNote:e.data[0]}),this.cardNoteModel=""})).catch((e=>{}))},closeModal(){document.getElementById("cardInformationModalCloseButton").click()}}},Ua=(0,f.Z)(Ma,[["render",function(e,a,t,n,s,o){const d=(0,l.up)("editor"),r=(0,l.up)("list-notes");return(0,l.wg)(),(0,l.iD)("div",null,[e.userLevel>1?((0,l.wg)(),(0,l.iD)("div",ka,[ha,(0,l._)("div",va,[ga,(0,l.Wm)(d,{init:{height:250,menubar:!1,plugins:["lists","codesample","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat | image codesample"]},content_css:!1,skin:!1,modelValue:s.cardNoteModel,"onUpdate:modelValue":a[0]||(a[0]=e=>s.cardNoteModel=e),disabled:"Closed"===e.kanbanStatus},null,8,["modelValue","disabled"])])])):(0,l.kq)("v-if",!0),e.userLevel>1?((0,l.wg)(),(0,l.iD)("hr",fa)):(0,l.kq)("v-if",!0),e.userLevel>1?((0,l.wg)(),(0,l.iD)("div",Ca,[(0,l._)("div",ya,[(0,l._)("button",{class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," Close "),(0,l._)("button",{class:"btn btn-primary save-changes",onClick:a[2]||(a[2]=(...e)=>o.addNote&&o.addNote(...e)),disabled:""===s.cardNoteModel}," Add Note ",8,wa)])])):(0,l.kq)("v-if",!0),Ia,(0,l.kq)(" NOTE HISTORY "),(0,l.Wm)(r,{"note-history-results":e.cardNotes,destination:"card"},null,8,["note-history-results"])])}]]),Sa={class:"row"},Ra=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Card Description"),(0,l._)("p",{class:"text-instructions"},' Fill out a detailed description for the card, then click on the "Update Card" button to update the card. ')],-1),$a={class:"col-md-8"},Na=(0,l._)("hr",null,null,-1),xa={key:0,class:"row"},Ba={class:"col-md-12"};t(9669);const Ea={name:"CardDescription",components:{editor:N.Z},props:{},data:()=>({}),computed:{...(0,k.Se)({kanbanStatus:"getKanbanStatus",userLevel:"getUserLevel"}),cardDescription:{get(){return this.$store.state.card.cardDescription},set(e){this.$store.commit("updateValue",{field:"cardDescription",value:e})}}},mixins:[Le.Z],methods:{closeModal(){document.getElementById("cardInformationModalCloseButton").click()},updateCard(){this.$emit("update_card")}}},Ta=(0,f.Z)(Ea,[["render",function(e,a,t,n,s,o){const d=(0,l.up)("editor");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",Sa,[Ra,(0,l._)("div",$a,[(0,l.Wm)(d,{init:{file_picker_types:"image",height:300,images_upload_handler:e.uploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","image","codesample","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat | image codesample"]},content_css:!1,skin:!1,modelValue:o.cardDescription,"onUpdate:modelValue":a[0]||(a[0]=e=>o.cardDescription=e),disabled:"Closed"===e.kanbanStatus},null,8,["init","modelValue","disabled"])])]),Na,e.userLevel>1?((0,l.wg)(),(0,l.iD)("div",xa,[(0,l._)("div",Ba,[(0,l._)("button",{class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>o.closeModal&&o.closeModal(...e))}," Close "),"Closed"!==e.kanbanStatus?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn btn-primary save-changes",onClick:a[2]||(a[2]=(...e)=>o.updateCard&&o.updateCard(...e))}," Update Card ")):(0,l.kq)("v-if",!0)])])):(0,l.kq)("v-if",!0)])}]]),ja={key:0,class:"alert alert-secondary"},Aa={key:1},qa={class:"table"},Ka=(0,l._)("td",{scope:"col"},"Username",-1),Pa=(0,l._)("td",{scope:"col"},"Name",-1),Oa={key:0,scope:"col"},Za={key:0},Wa={key:2,class:"row"},Fa={class:"col-md-12"},Va={name:"CardUsers",components:{Icon:F.JO},computed:{...(0,k.Se)({cardId:"getCardId",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel",userList:"getUserList"})},mixins:[q.Z],methods:{addUser(){document.getElementById("cardInformationModalCloseButton").click(),new d.u_("#addUserModal").show()},removeUser(e){const a=new FormData;a.set("username",e),v().post(`${this.rootUrl}object_data/kanban_card/${this.locationId}/remove_user/`,a).then((()=>{const a=this.userList.filter((a=>a.username!==e));this.$store.commit({type:"updateUserList",userList:a})}))}}},Ha={name:"CardInformation",components:{CardDescription:Ta,CardDetails:pa,CardNotes:Ua,CardUsers:(0,f.Z)(Va,[["render",function(e,a,t,s,o,d){const r=(0,l.up)("Icon");return(0,l.wg)(),(0,l.iD)(l.HY,null,[0===e.userList.length?((0,l.wg)(),(0,l.iD)("div",ja," Sorry, there are no users currently assigned to this card. ")):((0,l.wg)(),(0,l.iD)("div",Aa,[(0,l._)("table",qa,[(0,l._)("thead",null,[(0,l._)("tr",null,[Ka,Pa,4===e.userLevel?((0,l.wg)(),(0,l.iD)("td",Oa," Delete ")):(0,l.kq)("v-if",!0)])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.userList,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.id},[(0,l._)("td",null,(0,n.toDisplayString)(a.id)+" - "+(0,n.toDisplayString)(a.username),1),(0,l._)("td",null,(0,n.toDisplayString)(a.first_name)+" "+(0,n.toDisplayString)(a.last_name),1),e.userLevel>=2?((0,l.wg)(),(0,l.iD)("td",Za,[(0,l.Wm)(r,{icon:e.icons.trashCan,onClick:e=>d.removeUser(a.username)},null,8,["icon","onClick"])])):(0,l.kq)("v-if",!0)])))),128))])])])),e.userLevel>1?((0,l.wg)(),(0,l.iD)("div",Wa,[(0,l._)("div",Fa,[(0,l._)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=(...e)=>d.addUser&&d.addUser(...e))}," Add User ")])])):(0,l.kq)("v-if",!0)],64)}]]),DocumentsModule:t(4587).Z,Icon:F.JO},mixins:[q.Z],data:()=>({cardDescriptionModel:"",cardNoteModel:"",cardTitleModel:"",noteHistoryResults:[]}),computed:{...(0,k.Se)({cardId:"getCardId",rootUrl:"getRootUrl"})},methods:{updateCard(){const e=this.$store.getters.getAllCardData,a=new FormData;a.set("kanban_card_text",e.cardTitle),a.set("kanban_card_description",e.cardDescription),a.set("kanban_level",e.cardLevel),a.set("kanban_column",e.cardColumn),a.set("kanban_card_id",e.cardId),a.set("kanban_card_priority",e.cardPriority),v().post(`${this.rootUrl}kanban_information/update_card/`,a).then((()=>{this.$emit("update_card",{kanban_card_id:e.cardId,kanban_card_text:e.cardTitle,kanban_card_description:e.cardDescriptionModel,kanban_column:e.cardColumn,kanban_level:e.cardLevel,kanban_card_priority:e.cardPriority}),document.getElementById("cardInformationModalCloseButton").click()})).catch((e=>{}))}}},Ya=(0,f.Z)(Ha,[["render",function(e,a,t,s,o,d){const r=(0,l.up)("Icon"),i=(0,l.up)("card-details"),c=(0,l.up)("card-description"),u=(0,l.up)("card-notes"),m=(0,l.up)("card-users"),b=(0,l.up)("documents-module");return(0,l.wg)(),(0,l.iD)("div",Ue,[(0,l._)("div",Se,[(0,l._)("div",Re,[(0,l._)("div",$e,[(0,l._)("h2",null,[(0,l.Wm)(r,{icon:e.icons.usersIcon},null,8,["icon"]),(0,l.Uk)(" Card Information - "+(0,n.toDisplayString)(e.cardId),1)]),Ne,xe]),(0,l._)("div",Be,[(0,l.kq)(" TAB MENU "),Ee,Te,(0,l.kq)(" CONTENT OF TABS "),(0,l._)("div",je,[(0,l._)("div",Ae,[(0,l.Wm)(i,{onUpdate_card:d.updateCard},null,8,["onUpdate_card"])]),(0,l._)("div",qe,[(0,l.Wm)(c,{onUpdate_card:d.updateCard},null,8,["onUpdate_card"])]),(0,l._)("div",Ke,[(0,l.Wm)(u)]),(0,l._)("div",Pe,[(0,l.Wm)(m)]),(0,l._)("div",Oe,[(0,l.Wm)(b,{"override-destination":"kanban_card","override-location-id":e.cardId},null,8,["override-location-id"])])])])])])])}]]),za=["data-kanban-level","data-kanban-column"],Ja={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},Ga={class:"modal-content"},Qa={class:"modal-header"},Xa=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementLinkCloseButton"},[(0,l._)("span",{"aria-hidden":"true"})],-1),et={class:"modal-body"},at={class:"row"},tt=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Object Selector"),(0,l._)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1),lt={class:"col-md-8"},nt={key:1,class:"alert alert-success"},st=(0,l._)("hr",null,null,-1),ot={class:"row"},dt=(0,l._)("div",{class:"col-md-4"},[(0,l._)("strong",null,"Select Links"),(0,l._)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1),rt={class:"col-md-8"},it={key:0,id:"link_wizard_results"},ct=["src"],ut={key:1,class:"alert alert-warning"},mt={key:2,class:"form-group"},bt=(0,l._)("label",null,"Search Terms",-1),_t=(0,l._)("br",null,null,-1),pt={key:3,class:"table"},kt=(0,l._)("td",null,"Status",-1),ht={key:0},vt={class:"form-check"},gt=["value","id"],ft=["for"],Ct=(0,l._)("div",{class:"spacer"},null,-1),yt={class:"small-text"},wt={key:1},It={class:"form-check"},Lt=["value","id"],Dt=["for"],Mt=(0,l._)("div",{class:"spacer"},null,-1),Ut={class:"small-text"},St={key:2},Rt={class:"form-check"},$t=["value","id"],Nt=["for"],xt=(0,l._)("div",{class:"spacer"},null,-1),Bt={class:"small-text"},Et={class:"modal-footer"},Tt=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),jt=["disabled"];var At=t(3058);const qt={name:"NewKanbanLinkWizard",components:{Icon:F.JO,NSelect:Ie.Z},props:{columnResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},computed:{...(0,k.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[At.Z,q.Z],data:()=>({isSearching:!1,linkModel:[],objectModel:null,objectFilteredResults:[],objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Requirement",label:"Requirement"},{value:"Task",label:"Task"}],searchTermModel:""}),methods:{saveLinks(){const e=new FormData;var a=document.getElementById("newLinkModal");e.set(`${this.objectModel.toLowerCase()}`,this.linkModel),e.set("kanban_level",a.dataset.kanbanLevel),e.set("kanban_column",a.dataset.kanbanColumn),v().post(`${this.rootUrl}kanban_information/${this.locationId}/${this.objectModel.toLowerCase()}/add_link/`,e).then((e=>{this.$emit("new_card",e.data),this.objectModel=null,document.getElementById("requirementLinkCloseButton").click()}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,v().post(`${this.rootUrl}kanban_information/${this.locationId}/${this.objectModel}/link_list/`).then((e=>{this.objectResults=e.data,this.objectFilteredResults=e.data,this.isSearching=!1,this.searchTermModel=""})).catch((e=>{this.showErrorModal(e,"kanban")}))):this.isSearching=!1},searchTermModel(){""!==this.searchTermModel&&null!==this.searchTermModel?this.objectFilteredResults=this.objectResults.filter((e=>{let a="";return a=void 0!==e.fields.project_description?e.fields.project_description.toLowerCase():e.fields.task_short_description.toLowerCase(),a.includes(this.searchTermModel.toLowerCase())})):this.objectFilteredResults=this.objectResults}}},Kt=(0,f.Z)(qt,[["render",function(e,a,t,s,o,d){const r=(0,l.up)("Icon"),i=(0,l.up)("n-select");return(0,l.wg)(),(0,l.iD)("div",{class:"modal fade",id:"newLinkModal",tabindex:"-1","aria-labelledby":"kanbanLinkModal","aria-hidden":"true","data-kanban-level":t.levelResults[0].pk,"data-kanban-column":t.columnResults[0].pk},[(0,l._)("div",Ja,[(0,l._)("div",Ga,[(0,l._)("div",Qa,[(0,l._)("h2",null,[(0,l.Wm)(r,{icon:e.icons.linkOut},null,8,["icon"]),(0,l.Uk)(" New Kanban Link Wizard ")]),Xa]),(0,l._)("div",et,[(0,l.kq)(" CHOOSING A OBJECT TYPE "),(0,l._)("div",at,[tt,(0,l._)("div",lt,[o.isSearching?((0,l.wg)(),(0,l.iD)("div",nt," Searching for "+(0,n.toDisplayString)(o.objectModel)+"s ",1)):((0,l.wg)(),(0,l.j4)(i,{key:0,options:o.objectSelection,value:o.objectModel,"onUpdate:value":a[0]||(a[0]=e=>o.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),st,(0,l.kq)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,l._)("div",ot,[dt,(0,l._)("div",rt,[(0,l.kq)(" LOADING PLACEHOLDER "),o.isSearching||null==o.objectModel?((0,l.wg)(),(0,l.iD)("div",it,[(0,l._)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,ct)])):(0,l.kq)("v-if",!0),0==o.objectResults.length&&null!=o.objectModel?((0,l.wg)(),(0,l.iD)("div",ut," Sorry - there are no results. ")):(0,l.kq)("v-if",!0),(0,l.kq)(" SEARCH RESULTS "),!o.isSearching&&o.objectResults.length>0&&null!=o.objectModel?((0,l.wg)(),(0,l.iD)("div",mt,[bt,(0,l.wy)((0,l._)("input",{id:"search_terms",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=e=>o.searchTermModel=e),type:"text"},null,512),[[le.vModelText,o.searchTermModel]])])):(0,l.kq)("v-if",!0),_t,(0,l.kq)(" TABLE CONTAINING RESULTS "),!o.isSearching&&o.objectFilteredResults.length>0&&null!=o.objectModel?((0,l.wg)(),(0,l.iD)("table",pt,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("td",null,(0,n.toDisplayString)(o.objectModel)+" Description",1),kt])]),(0,l.kq)(" PROJECTS "),"Project"==o.objectModel?((0,l.wg)(),(0,l.iD)("tbody",ht,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.objectFilteredResults,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.pk},[(0,l._)("td",null,[(0,l._)("div",vt,[(0,l.wy)((0,l._)("input",{class:"form-check-input",type:"radio",name:"link-option",value:e.pk,id:`radio_project_${e.pk}`,"onUpdate:modelValue":a[2]||(a[2]=e=>o.linkModel=e)},null,8,gt),[[le.vModelRadio,o.linkModel]]),(0,l._)("label",{class:"form-check-label",for:`radio_project_${e.pk}`},(0,n.toDisplayString)(e.fields.project_name),9,ft)]),Ct,(0,l._)("p",yt," Project "+(0,n.toDisplayString)(e.pk),1)]),(0,l._)("td",null,(0,n.toDisplayString)(e.fields.project_status),1)])))),128))])):(0,l.kq)("v-if",!0),(0,l.kq)(" REQUIREMENTS "),"Requirement"==o.objectModel?((0,l.wg)(),(0,l.iD)("tbody",wt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.objectFilteredResults,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.pk},[(0,l._)("td",null,[(0,l._)("div",It,[(0,l.wy)((0,l._)("input",{class:"form-check-input",type:"radio",name:"link-option",value:e.pk,id:`radio_requirement_${e.pk}`,"onUpdate:modelValue":a[3]||(a[3]=e=>o.linkModel=e)},null,8,Lt),[[le.vModelRadio,o.linkModel]]),(0,l._)("label",{class:"form-check-label",for:`radio_task_${e.pk}`},(0,n.toDisplayString)(e.fields.requirement_title),9,Dt)]),Mt,(0,l._)("p",Ut," Requirement "+(0,n.toDisplayString)(e.pk),1)]),(0,l._)("td",null,(0,n.toDisplayString)(e.fields.requirement_status),1)])))),128))])):(0,l.kq)("v-if",!0),(0,l.kq)(" TASKS "),"Task"==o.objectModel?((0,l.wg)(),(0,l.iD)("tbody",St,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.objectFilteredResults,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.pk},[(0,l._)("td",null,[(0,l._)("div",Rt,[(0,l.wy)((0,l._)("input",{class:"form-check-input",type:"radio",value:e.pk,id:`radio_task_${e.pk}`,"onUpdate:modelValue":a[4]||(a[4]=e=>o.linkModel=e)},null,8,$t),[[le.vModelRadio,o.linkModel]]),(0,l._)("label",{class:"form-check-label",for:`radio_task_${e.pk}`},(0,n.toDisplayString)(e.fields.task_short_description),9,Nt)]),xt,(0,l._)("p",Bt," Task "+(0,n.toDisplayString)(e.pk),1)]),(0,l._)("td",null,(0,n.toDisplayString)(e.fields.task_status),1)])))),128))])):(0,l.kq)("v-if",!0)])):(0,l.kq)("v-if",!0)])])]),(0,l._)("div",Et,[Tt,(0,l._)("button",{type:"button",class:"btn btn-primary",disabled:0==o.linkModel.length,onClick:a[5]||(a[5]=(...e)=>d.saveLinks&&d.saveLinks(...e))}," Save changes ",8,jt)])])])],8,za)}]]),Pt={class:"modal fade",id:"confirmCardArchiveModal",tabindex:"-1","aria-labelledby":"confirmCardArchiveModalLabel","aria-hidden":"true"},Ot={class:"modal-dialog modal-lg"},Zt={class:"modal-content"},Wt=(0,l._)("div",{class:"modal-header"},[(0,l._)("h2",null,"Card Information"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmCardArchiveModalCloseButton"},[(0,l._)("span",{"aria-hidden":"true"})])],-1),Ft={class:"modal-body"},Vt=(0,l._)("div",{class:"alert alert-danger"}," Please note - archiving the card can not be undone. ",-1),Ht=(0,l._)("h3",null," Are you sure you want to archive the following card? ",-1),Yt={class:"row"},zt={class:"col"},Jt=(0,l._)("br",null,null,-1),Gt={class:"row"},Qt={class:"col"},Xt={class:"modal-footer"},el=t(9669),al={name:"ConfirmCardArchive",computed:{...(0,k.Se)({cardId:"getCardId",cardTitle:"getCardTitle",rootUrl:"getRootUrl"})},methods:{archiveCard(){const e=new FormData;e.append("kanban_card_id",this.cardId),this.$store.commit({type:"archiveCard",cardId:this.cardId}),document.getElementById("confirmCardArchiveModalCloseButton").click(),el.post(`${this.rootUrl}kanban_information/archive_kanban_cards/`,e).catch((e=>{}))},goBack(){document.getElementById("confirmCardArchiveModalCloseButton").click(),new d.u_("#cardInformationModal").show()}}},tl=(0,f.Z)(al,[["render",function(e,a,t,s,o,d){return(0,l.wg)(),(0,l.iD)("div",Pt,[(0,l._)("div",Ot,[(0,l._)("div",Zt,[Wt,(0,l._)("div",Ft,[Vt,Ht,(0,l._)("div",Yt,[(0,l._)("div",zt,"Card No. - "+(0,n.toDisplayString)(e.cardId),1)]),Jt,(0,l._)("div",Gt,[(0,l._)("div",Qt,"Card Title - "+(0,n.toDisplayString)(e.cardTitle),1)])]),(0,l._)("div",Xt,[(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:a[0]||(a[0]=(...e)=>d.archiveCard&&d.archiveCard(...e))}," Yes Archive Card "),(0,l._)("button",{type:"button",class:"btn btn-secondary",onClick:a[1]||(a[1]=(...e)=>d.goBack&&d.goBack(...e))}," No go back ")])])])])}]]),ll={name:"KanbanInformation",components:{AddUserWizard:r.Z,ArchiveCards:C,BlockedNotesModal:B,CardInformation:Ya,ConfirmCardArchive:tl,KanbanBoard:te,NewKanbanCard:Me,NewKanbanLinkWizard:Kt},props:{columnResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]},kanbanCardResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},locationId:{type:Number,default:0},openCardOnLoad:{type:Number,default:0},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userLevel:{type:Number,default:0}},computed:{...(0,k.Se)({cardId:"getCardId"})},watch:{cardId(){this.refreshUserList=!0}},data(){return{cardInformation:{},localKanbanCardResults:this.kanbanCardResults,refreshUserList:!1,newCardInfo:[]}},methods:{doubleClickedCard(e){this.cardInformation=e},newCard(e){this.$store.commit({type:"addCard",newCard:e})},resetRefreshUserList(){this.refreshUserList=!1},updateCard(e){this.localKanbanCardResults.forEach(((a,t)=>{a.pk==e.kanban_card_id&&(this.localKanbanCardResults[t].fields.kanban_card_text=e.kanban_card_text,this.localKanbanCardResults[t].fields.kanban_card_description=e.kanban_card_description,this.localKanbanCardResults[t].fields.kanban_column=e.kanban_column,this.localKanbanCardResults[t].fields.kanban_level=e.kanban_level,this.localKanbanCardResults[t].fields.kanban_card_priority=e.kanban_card_priority)}))}},mounted(){this.$store.commit({type:"initPayload",kanbanCardResults:this.kanbanCardResults,levelResults:this.levelResults,columnResults:this.columnResults,openCardOnLoad:this.openCardOnLoad}),this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.$store.commit({type:"updateDestination",destination:"kanban_board",locationId:this.locationId}),this.$store.commit({type:"updateLists",columnResults:this.columnResults,levelResults:this.levelResults}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},nl=(0,f.Z)(ll,[["render",function(e,a,t,d,r,i){const c=(0,l.up)("kanban-board"),u=(0,l.up)("add-user-wizard"),m=(0,l.up)("archive-cards"),b=(0,l.up)("blocked-notes-modal"),_=(0,l.up)("confirm-card-archive"),p=(0,l.up)("new-kanban-card"),k=(0,l.up)("card-information"),h=(0,l.up)("new-kanban-link-wizard");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("h1",s,(0,n.toDisplayString)(t.kanbanBoardResults[0].fields.kanban_board_name),1),t.userLevel>=3?((0,l.wg)(),(0,l.iD)("a",{key:0,class:"kanban-edit-text",href:`${t.rootUrl}kanban_information/${t.kanbanBoardResults[0].pk}/edit_board/`}," Edit Kanban ",8,o)):(0,l.kq)("v-if",!0),(0,l.kq)(" Rendering the Kanban Container "),(0,l.Wm)(c,{"column-results":t.columnResults,"kanban-board-results":t.kanbanBoardResults,"kanban-card-results":r.localKanbanCardResults,"level-results":t.levelResults,"new-card-info":r.newCardInfo,onDouble_clicked_card:a[0]||(a[0]=e=>i.doubleClickedCard(e))},null,8,["column-results","kanban-board-results","kanban-card-results","level-results","new-card-info"]),(0,l.kq)(" MODALS "),(0,l.Wm)(u,{destination:"kanban_card","location-id":e.cardId,"refresh-user-list":r.refreshUserList,onReset_refresh_user_list:i.resetRefreshUserList},null,8,["location-id","refresh-user-list","onReset_refresh_user_list"]),(0,l.Wm)(m),(0,l.Wm)(b),(0,l.Wm)(_,{"card-information":r.cardInformation},null,8,["card-information"]),(0,l.Wm)(p,{"kanban-card-results":t.kanbanCardResults,"column-results":t.columnResults,"level-results":t.levelResults,"kanban-board-results":t.kanbanBoardResults,onNew_card:a[1]||(a[1]=e=>i.newCard(e))},null,8,["kanban-card-results","column-results","level-results","kanban-board-results"]),(0,l.Wm)(k,{"card-information":r.cardInformation,onUpdate_card:a[2]||(a[2]=e=>i.updateCard(e))},null,8,["card-information"]),(0,l.Wm)(h,{"location-id":t.locationId,"column-results":t.columnResults,"level-results":t.levelResults,onNew_card:a[3]||(a[3]=e=>i.newCard(e))},null,8,["location-id","column-results","level-results"])])}]])},5398:(e,a,t)=>{t.d(a,{Z:()=>j});var l=t(6252),n=t(3577);const s={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},o={class:"modal-dialog modal-lg"},d={class:"modal-content"},r={class:"modal-header"},i=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addUserCloseButton"},[(0,l._)("span",{"aria-hidden":"true"})],-1),c={class:"modal-body"},u={key:0,class:"row"},m={class:"col-md-4"},b=(0,l._)("strong",null,"Add Users",-1),_={class:"text-instructions"},p={class:"text-instructions"},k={class:"col-md-8"},h={key:1,class:"row"},v={class:"col-md-6"},g=(0,l._)("strong",null,"Sorry - no results",-1),f=(0,l._)("p",{class:"text-instructions"}," This could be because ",-1),C={class:"text-instructions"},y=(0,l._)("li",null,"There are no more users left to add",-1),w={class:"col-md-6 no-search"},I=["src"],L={class:"modal-footer"},D=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),M=["disabled"];var U=t(9669),S=t.n(U),R=t(6542),$=t(1317),N=t(3138),x=t(989),B=t(3058),E=t(5808);const T={name:"AddUserWizard",components:{Icon:R.JO,NSelect:$.Z},props:{destination:{type:String,default:""},locationId:{type:Number,default:0},refreshUserList:{type:Boolean,default:!1}},mixins:[B.Z,E.Z],computed:{...(0,x.Se)({rootUrl:"getRootUrl",staticURL:"getStaticUrl",userLevel:"getUserLevel"})},data:()=>({userFixList:[],userModel:[]}),methods:{addUser(){const e=new FormData;this.userModel.forEach((a=>{e.append("user_list",a)})),S().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_user/`,e).then((e=>{this.$emit("update_user_list",e.data),document.getElementById("addUserCloseButton").click(),this.userModel=[],this.getUserList(),"kanban_card"===this.destination&&(this.$store.commit({type:"updateUserList",userList:e.data}),new N.u_(document.getElementById("cardInformationModal")).show())})).catch((e=>{this.showErrorModal(e,this.destination)}))},getUserList(){if(""===this.destination||0===this.locationId||this.userLevel<=1)return;let e=`${this.rootUrl}object_data/${this.destination}/${this.locationId}/user_list_all/`;S().post(e).then((e=>{this.userFixList=e.data.map((e=>({value:e.id,label:`${e.username}: ${e.first_name} ${e.last_name}`})))}))}},watch:{refreshUserList(){this.refreshUserList&&this.getUserList(),this.$emit("reset_refresh_user_list")}},mounted(){setTimeout((()=>{this.getUserList()}),200)}},j=(0,t(3744).Z)(T,[["render",function(e,a,t,U,S,R){const $=(0,l.up)("Icon"),N=(0,l.up)("n-select");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",o,[(0,l._)("div",d,[(0,l._)("div",r,[(0,l._)("h2",null,[(0,l.Wm)($,{icon:e.icons.userIcon},null,8,["icon"]),(0,l.Uk)(" Add User Wizard ")]),i]),(0,l._)("div",c,[S.userFixList.length>0?((0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("div",m,[b,(0,l._)("p",_," Use the following multiple select to select which users you want to add to this "+(0,n.toDisplayString)(t.destination)+". ",1),(0,l._)("p",p," Please note: A user's group has to be added to the "+(0,n.toDisplayString)(t.destination)+" before the user can be added. ",1)]),(0,l._)("div",k,[(0,l.Wm)(N,{options:S.userFixList,value:S.userModel,"onUpdate:value":a[0]||(a[0]=e=>S.userModel=e),multiple:""},null,8,["options","value"])])])):((0,l.wg)(),(0,l.iD)("div",h,[(0,l._)("div",v,[g,f,(0,l._)("ul",C,[y,(0,l._)("li",null," The user you are after is in a group not current added to this "+(0,n.toDisplayString)(t.destination),1)])]),(0,l._)("div",w,[(0,l._)("img",{src:`${e.staticURL}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,I)])]))]),(0,l._)("div",L,[D,(0,l._)("button",{type:"button",class:"btn btn-primary",disabled:0===S.userModel.length,onClick:a[1]||(a[1]=(...e)=>R.addUser&&R.addUser(...e))}," Add User(s) ",8,M)])])])])}]])},2299:(e,a,t)=>{t.d(a,{Z:()=>d});var l=t(9669),n=t.n(l),s=t(989),o=t(3058);const d={computed:{...(0,s.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},mixins:[o.Z],methods:{uploadImage(e,a){const t=new FormData;t.set("document",e.blob(),e.filename()),t.set("document_description",e.filename());const l={onUploadProgress:e=>{parseFloat(e.loaded),parseFloat(e.total)}};return n().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/upload/`,t,l).then((e=>`/private/${e.data[0].document_key_id}`)).catch((e=>{this.showErrorModal(e,"Upload Image","")}))}}}}}]);