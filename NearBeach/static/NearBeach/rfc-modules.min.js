"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[645],{163:(t,e,a)=>{a.r(e),a.d(e,{default:()=>Ce});var s=a(6252);const n={class:"card"},l={class:"card-body"},o=(0,s._)("ul",{class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},[(0,s.kq)(" GROUPS AND USERS "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"group-and-users-tab","data-bs-toggle":"tab","data-bs-target":"#group-and-users",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Group and Users ")]),(0,s.kq)(" RISK "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-risk-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-risk",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Risk ")]),(0,s.kq)(" IMPLEMENTATION "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-implementation-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-implementation",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Implementation ")]),(0,s.kq)(" BACKOUT PLAN "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-backout-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-backout",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Backout Plan ")]),(0,s.kq)(" TEST PLAN "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-test-plan-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-test",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Test Plan ")]),(0,s.kq)(" RUN SHEET "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link active",id:"rfc-run-sheet-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-run-sheet",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Run Sheet ")])],-1),i=(0,s._)("hr",null,null,-1),r={class:"tab-content",id:"misc_module_content"},d={class:"tab-pane fade",id:"group-and-users",role:"tabpanel","aria-labelledby":"contact-tab"},c={class:"tab-pane fade",id:"rfc-risk",role:"tabpanel","aria-labelledby":"home-tab"},u={key:0},h={key:1,class:"row submit-row"},k={class:"col-md-12"},g={class:"tab-pane fade",id:"rfc-implementation",role:"tabpanel","aria-labelledby":"home-tab"},_={key:0},m={key:1,class:"row submit-row"},p={class:"col-md-12"},f={class:"tab-pane fade",id:"rfc-backout",role:"tabpanel","aria-labelledby":"home-tab"},b={key:0},v={key:1,class:"row submit-row"},y={class:"col-md-12"},w={class:"tab-pane fade",id:"rfc-test",role:"tabpanel","aria-labelledby":"home-tab"},D={key:0},C={key:1,class:"row submit-row"},T={class:"col-md-12"},S={class:"tab-pane fade active show",id:"rfc-run-sheet",role:"tabpanel","aria-labelledby":"home-tab"};var U=a(3577);const M=(0,s._)("div",{class:"row"},[(0,s._)("strong",null,"Run Sheet List"),(0,s._)("p",{class:"text-instructions"},[(0,s.Uk)(" The run sheet will specify specific tasks for each user to implement. Each run item can be specified to;"),(0,s._)("br"),(0,s.Uk)(" - Block other run items"),(0,s._)("br"),(0,s.Uk)(" - Block out downtime ")])],-1),I={key:0},R=["href"],q=["href"],L=["href"],E=(0,s.Uk)(" Assigned User: "),$={class:"small-text"},A=(0,s.Uk)(" QA User: "),P={class:"small-text"},Z={class:"change-task--status"},N=(0,s.Uk)(" Status: "),B={class:"small-text"},O={key:0},x={class:"change-task--blocked-by"},F=(0,s.Uk)(" Change task currently blocked by; "),W=["href"],V={key:1,class:"change-task--buttons"},j=["onClick"],H=["onClick"],K=["onClick"],Q=["onClick"],G=["onClick"],Y={key:1,class:"alert alert-primary"},z={class:"row"},J={key:0,class:"row submit-row"},X={class:"col-md-12"},tt={key:1,class:"row submit-row"},et={class:"col-md-12"};var at=a(5169);const st={class:"modal fade",id:"confirmChangeTaskClosure",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmChangeTaskClosure","aria-hidden":"true"},nt={class:"modal-dialog"},lt={class:"modal-content"},ot={class:"modal-header"},it={class:"modal-title",id:"confirmChangeTaskClosure"},rt=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmChangeTaskCloseButton"},null,-1),dt={class:"modal-body"},ct={class:"modal-footer"},ut={name:"ConfirmChangeTaskClosure",props:{closureId:{type:Number,default:0},closureStatus:{type:String,default:""},closureStatusId:{type:Number,default:0}},methods:{closeChangeTask(){this.$emit("close_change_task",{closureId:this.closureId,closureStatusId:this.closureStatusId}),this.closeModal()},closeModal(){document.getElementById("confirmChangeTaskCloseButton").click()}}};var ht=a(3744);const kt=(0,ht.Z)(ut,[["render",function(t,e,a,n,l,o){return(0,s.wg)(),(0,s.iD)("div",st,[(0,s._)("div",nt,[(0,s._)("div",lt,[(0,s._)("div",ot,[(0,s._)("h5",it," Set Task to "+(0,U.toDisplayString)(a.closureStatus),1),(0,s.kq)(" TASK INFORMATION "),rt]),(0,s._)("div",dt," Are you sure you want to close the Change Task "+(0,U.toDisplayString)(a.closureId)+" - with the status of "+(0,U.toDisplayString)(a.closureStatus)+"? ",1),(0,s._)("div",ct,[(0,s._)("button",{type:"button",class:"btn btn-secondary",onClick:e[0]||(e[0]=(...t)=>o.closeModal&&o.closeModal(...t))}," No "),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>o.closeChangeTask&&o.closeChangeTask(...t))}," Yes ")])])])])}]]);var gt=a(9963);const _t={class:"modal fade",id:"newRunItemModal",tabindex:"-1","aria-labelledby":"newRunItemModalLabel","aria-hidden":"true"},mt={class:"modal-dialog modal-xl modal-fullscreen-xl-down"},pt={class:"modal-content"},ft=(0,s._)("div",{class:"modal-header"},[(0,s._)("h2",{class:"modal-title",id:"newRunItemModalLabel"}," New Change Task "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newRunItemCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})])],-1),bt={class:"modal-body"},vt={class:"row"},yt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Change Task Title"),(0,s._)("p",{class:"text-instructions"}," Please write a short title of the description for this task. i.e Backup of Database ")],-1),wt={class:"col-md-8"},Dt={class:"form-group"},Ct=(0,s.Uk)(" Change Title: "),Tt=(0,s._)("hr",null,null,-1),St={class:"row"},Ut=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Between Dates"),(0,s._)("p",{class:"text-instructions"}," Choose the start and end date of the Change Task. Please note the end date can not be earlier than the start date and the start time has to be between the RFC's start and end date. This information is show below the dates ")],-1),Mt={class:"col-md-8"},It={class:"row"},Rt={class:"col-md-6"},qt={class:"form-group"},Lt=(0,s.Uk)(" Start Date: "),Et={class:"col-md-6"},$t={class:"form-group"},At=(0,s.Uk)(" End Date: "),Pt={key:0,class:"row"},Zt=(0,s._)("div",{class:"spacer"},null,-1),Nt={class:"alert alert-danger"},Bt={key:1,class:"row"},Ot=(0,s._)("div",{class:"spacer"},null,-1),xt={class:"alert alert-info"},Ft=(0,s._)("hr",null,null,-1),Wt={class:"row"},Vt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Implementation & QA User"),(0,s._)("p",{class:"text-instructions"}," Please indicate which user will be implementing the work, and the user who will QA. ")],-1),jt={class:"col-md-8"},Ht={class:"row"},Kt={class:"col-md-6"},Qt={class:"form-group"},Gt=(0,s.Uk)(" Implementation User "),Yt={class:"col-md-6"},zt={class:"form-group"},Jt=(0,s.Uk)(" QA User "),Xt={class:"modal-footer"},te=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var ee=a(7267),ae=a(9974),se=a(9860),ne=a(3058),le=a(4250),oe=a(4028),ie=a(2587),re=a(212);const de=a(9669),ce={name:"NewChangeTask",setup:()=>({v$:(0,oe.ZP)()}),components:{editor:ee.Z,NDatePicker:ae.Z,NSelect:se.Z,ValidationRendering:re.Z},props:{locationId:{type:Number,default:0},userList:{type:Array,default:()=>[]}},mixins:[ne.Z],data:()=>({assignedUserModel:null,changeEndDateModel:0,changeStartDateModel:0,changeTitleModel:"",qaUserModel:null,userListFixed:[]}),validations:{assignedUserModel:{required:ie.C1,numeric:ie.uR},changeEndDateModel:{required:ie.C1},changeStartDateModel:{required:ie.C1},changeTitleModel:{required:ie.C1},qaUserModel:{required:ie.C1,numeric:ie.uR}},computed:{...(0,le.Se)({rfcEndDate:"getEndDate",rfcStartDate:"getStartDate",rootUrl:"getRootUrl"})},methods:{formatDate(t){let e=new Date(t);e=e.toISOString().split("T");const a=e[1].split(".");return`${e[0]} ${a[0]}`},async submitAndClose(t){await this.v$.$validate()&&(this.submitChangeTask(t),document.getElementById("newRunItemCloseButton").click())},async submitChangeTask(t){t.preventDefault();const e=await this.v$.$validate();if(console.log("VALIDATION: ",this.v$),!e)return;var a=parseInt(this.changeEndDateModel)-parseInt(this.changeStartDateModel);const s=new FormData;s.set("request_for_change",this.locationId.toString()),s.set("change_task_title",this.changeTitleModel),s.set("change_task_start_date",new Date(this.changeStartDateModel).toISOString()),s.set("change_task_end_date",new Date(this.changeEndDateModel).toISOString()),s.set("change_task_seconds",a.toString()),s.set("change_task_assigned_user",this.assignedUserModel),s.set("change_task_qa_user",this.qaUserModel),de.post(`${this.rootUrl}rfc_information/${this.locationId}/new_change_task/`,s).then((t=>{this.$emit("update_change_task_list",t.data),this.changeTitleModel="",this.assignedUserModel="",this.qaUserModel=""})).catch((t=>{this.showErrorModal(t,"Change Task")}))}},mounted(){this.userListFixed=this.userList.map((t=>({label:`${t.username}: ${t.first_name} ${t.last_name}`,value:t.id}))),this.changeEndDateModel=this.rfcStartDate+9e5,this.changeStartDateModel=this.rfcStartDate}},ue=(0,ht.Z)(ce,[["render",function(t,e,a,n,l,o){const i=(0,s.up)("validation-rendering"),r=(0,s.up)("n-date-picker"),d=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",_t,[(0,s._)("div",mt,[(0,s._)("div",pt,[ft,(0,s._)("div",bt,[(0,s.kq)(" CHANGE TASK TITLE "),(0,s._)("div",vt,[yt,(0,s._)("div",wt,[(0,s._)("div",Dt,[(0,s._)("label",null,[Ct,(0,s.Wm)(i,{"error-list":n.v$.changeTitleModel.$errors},null,8,["error-list"])]),(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=e=>t.changeTitleModel=e)},null,512),[[gt.vModelText,t.changeTitleModel]])])])]),(0,s.kq)(" START DATE & END DATE "),Tt,(0,s._)("div",St,[Ut,(0,s._)("div",Mt,[(0,s._)("div",It,[(0,s._)("div",Rt,[(0,s._)("div",qt,[(0,s._)("label",null,[Lt,(0,s.Wm)(i,{"error-list":n.v$.changeStartDateModel.$errors},null,8,["error-list"])]),(0,s.Wm)(r,{type:"datetime",value:t.changeStartDateModel,"onUpdate:value":e[1]||(e[1]=e=>t.changeStartDateModel=e),class:"form-control"},null,8,["value"])])]),(0,s._)("div",Et,[(0,s._)("div",$t,[(0,s._)("label",null,[At,(0,s.Wm)(i,{"error-list":n.v$.changeEndDateModel.$errors},null,8,["error-list"])]),(0,s.Wm)(r,{type:"datetime",value:t.changeEndDateModel,"onUpdate:value":e[2]||(e[2]=e=>t.changeEndDateModel=e),class:"form-control"},null,8,["value"])])])]),t.changeStartDateModel<t.rfcStartDate?((0,s.wg)(),(0,s.iD)("div",Pt,[Zt,(0,s._)("div",Nt," The Start date can not be earlier than the start date of the RFC - "+(0,U.toDisplayString)(o.formatDate(t.rfcStartDate)),1)])):(0,s.kq)("v-if",!0),t.changeEndDateModel>t.rfcEndDate?((0,s.wg)(),(0,s.iD)("div",Bt,[Ot,(0,s._)("div",xt," The End date when saved will automatically update the End Date for the RFC - "+(0,U.toDisplayString)(o.formatDate(t.rfcEndDate)),1)])):(0,s.kq)("v-if",!0)])]),(0,s.kq)(" IMPLEMENTATION USER & QA USER "),Ft,(0,s._)("div",Wt,[Vt,(0,s._)("div",jt,[(0,s._)("div",Ht,[(0,s._)("div",Kt,[(0,s._)("div",Qt,[(0,s._)("label",null,[Gt,(0,s.Wm)(i,{"error-list":n.v$.assignedUserModel.$errors},null,8,["error-list"])]),(0,s.Wm)(d,{options:t.userListFixed,value:t.assignedUserModel,"onUpdate:value":e[3]||(e[3]=e=>t.assignedUserModel=e)},null,8,["options","value"])])]),(0,s._)("div",Yt,[(0,s._)("div",zt,[(0,s._)("label",null,[Jt,(0,s.Wm)(i,{"error-list":n.v$.qaUserModel.$errors},null,8,["error-list"])]),(0,s.Wm)(d,{value:t.qaUserModel,"onUpdate:value":e[4]||(e[4]=e=>t.qaUserModel=e),options:t.userListFixed},null,8,["value","options"])])])])])])]),(0,s._)("div",Xt,[te,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=t=>o.submitAndClose(t))}," Add & Close Modal "),(0,s._)("button",{type:"button",class:"btn btn-success",onClick:e[6]||(e[6]=t=>o.submitChangeTask(t))}," Add & Create another ")])])])])}]]);var he=a(431);const ke=a(9669),ge={name:"ChangeTaskList",components:{ConfirmChangeTaskClosure:kt,NewChangeTask:ue},props:{isReadOnly:{type:Boolean,default:!1},locationId:{type:Number,default:0},rfcId:{type:Number,default:0},rfcStatus:{type:Number,default:0},userList:{type:Array,default:()=>[]}},mixins:[he.Z,ne.Z],data:()=>({blockedTaskList:[],changeTaskList:[],closureId:0,closureStatus:"",closureStatusId:0}),computed:{...(0,le.Se)({userLevel:"getUserLevel",rootUrl:"getRootUrl"}),isCompleted(){return 0===this.changeTaskList.filter((t=>{const e=t.change_task_status;return 5!==e&&6!==e})).length&&(3===this.rfcStatus||4===this.rfcStatus)}},methods:{addNewChangeItem(){new at.u_(document.getElementById("newRunItemModal")).show()},blockedBy:function(t){var e=this.blockedTaskList.filter((e=>"change_task"===e.parent_link&e.meta_object===t)).map((t=>t.change_task_id)),a=this.blockedTaskList.filter((e=>"meta_object"===e.parent_link&e.change_task_id===t)).map((t=>t.meta_object));const s=[5,6];return e=this.changeTaskList.filter((t=>e.includes(t.change_task_id)&&!s.includes(t.change_task_status))).map((t=>({change_task_id:t.change_task_id,change_task_title:t.change_task_title}))),a=this.changeTaskList.filter((t=>a.includes(t.change_task_id)&&!s.includes(t.change_task_status))).map((t=>({change_task_id:t.change_task_id,change_task_title:t.change_task_title}))),e.concat(a)},closeChangeTask(t){this.updateChangeTaskStatus(t.closureId,t.closureStatusId)},closeRfc(){const t=new FormData;t.set("rfc_status",5),ke.post(`${this.rootUrl}rfc_information/${this.rfcId}/update_status/`,t).then((t=>{window.location.reload(!0)})).catch((t=>{this.showErrorModal(t,"request_for_change")}))},getRunSheetList(){ke.post(`${this.rootUrl}rfc_information/${this.locationId}/change_task_list/`).then((t=>{this.blockedTaskList=t.data.blocked_list,this.changeTaskList=t.data.change_tasks,this.$store.commit({type:"updateChangeTaskCount",changeTaskCount:t.data.change_tasks.length})})).catch((t=>{this.showErrorModal(t,"request_for_change")}))},getStatus(t){switch(t){case 1:return"Draft";case 2:return"Waiting for approval";case 3:return"Waiting to start";case 4:return"Task Started";case 5:return"Task Finished Successfully";case 6:return"Task FAILED";case 7:return"PAUSED Task";case 8:return"Ready for QA";default:return"---"}},getUserName(t){var e=this.userList.filter((e=>e.id==t));return 0==e.length?"---":`${e[0].username}: ${e[0].first_name} ${e[0].last_name}`},openConfirmModal(t,e,a){this.closureId=t,this.closureStatus=e,this.closureStatusId=a,new at.u_(document.getElementById("confirmChangeTaskClosure")).show()},updateChangeTaskList(t){this.blockedTaskList=t.blocked_list,this.changeTaskList=t.change_tasks,this.$store.commit({type:"updateChangeTaskCount",changeTaskCount:t.change_tasks.length})},updateChangeTaskStatus(t,e){const a=new FormData;a.set("change_task_status",e),ke.post(`${this.rootUrl}change_task_update_status/${t}/`,a).then((a=>{this.changeTaskList=this.changeTaskList.map((a=>a.change_task_id==t?(a.change_task_status=e,a):a))})).catch((t=>{this.showErrorModal(t,"request_for_change")}))}},mounted(){this.getRunSheetList()}},_e=(0,ht.Z)(ge,[["render",function(t,e,a,n,l,o){const i=(0,s.up)("new-change-task"),r=(0,s.up)("confirm-change-task-closure");return(0,s.wg)(),(0,s.iD)(s.HY,null,[M,(0,s.kq)(" LOOP FOR CHANGE TASKS "),t.changeTaskList.length>0?((0,s.wg)(),(0,s.iD)("div",I,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.changeTaskList,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.change_task_id,class:"row change-task--detail"},[(0,s._)("a",{class:"change-task--name",href:`${t.rootUrl}change_task_information/${e.change_task_id}/`},(0,U.toDisplayString)(e.change_task_title),9,R),(0,s._)("a",{class:"change-task--dates",href:`${t.rootUrl}change_task_information/${e.change_task_id}/`},(0,U.toDisplayString)(t.getNiceDate(e.change_task_start_date))+" - "+(0,U.toDisplayString)(t.getNiceDate(e.change_task_end_date)),9,q),(0,s._)("a",{class:"change-task--responsibility",href:`${t.rootUrl}change_task_information/${e.change_task_id}/`},[(0,s._)("div",null,[E,(0,s._)("span",$,(0,U.toDisplayString)(o.getUserName(e.change_task_assigned_user_id)),1)]),(0,s._)("div",null,[A,(0,s._)("span",P,(0,U.toDisplayString)(o.getUserName(e.change_task_qa_user_id)),1)])],8,L),(0,s._)("div",Z,[N,(0,s._)("span",B,(0,U.toDisplayString)(o.getStatus(e.change_task_status)),1)]),o.blockedBy(e.change_task_id).length>0?((0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("div",x,[F,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.blockedBy(e.change_task_id),(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.object_assignment_id},[(0,s._)("a",{href:`${this.rootUrl}change_task_information/${t.change_task_id}/`},(0,U.toDisplayString)(t.change_task_title),9,W)])))),128))])])])):t.userLevel>1?((0,s.wg)(),(0,s.iD)("div",V,[(0,s.kq)(" START TASK "),[3,7,8].includes(e.change_task_status)?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-primary",onClick:t=>o.updateChangeTaskStatus(e.change_task_id,4)}," Start Task ",8,j)):(0,s.kq)("v-if",!0),(0,s.kq)(" PAUSE "),[4].includes(e.change_task_status)?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn btn-secondary",onClick:t=>o.updateChangeTaskStatus(e.change_task_id,7)}," Pause Task ",8,H)):(0,s.kq)("v-if",!0),(0,s.kq)(" READY FOR QA "),[4].includes(e.change_task_status)?((0,s.wg)(),(0,s.iD)("button",{key:2,class:"btn btn-info",onClick:t=>o.updateChangeTaskStatus(e.change_task_id,8)}," Set Task Ready for QA ",8,K)):(0,s.kq)("v-if",!0),(0,s.kq)(" SUCCESS "),[8].includes(e.change_task_status)?((0,s.wg)(),(0,s.iD)("button",{key:3,class:"btn btn-success",onClick:t=>o.openConfirmModal(e.change_task_id,"Success",5)}," Set Task to Success ",8,Q)):(0,s.kq)("v-if",!0),(0,s.kq)(" FAIL "),[4,8].includes(e.change_task_status)?((0,s.wg)(),(0,s.iD)("button",{key:4,class:"btn btn-danger",onClick:t=>o.openConfirmModal(e.change_task_id,"Failure",6)}," Set Task to Fail ",8,G)):(0,s.kq)("v-if",!0)])):(0,s.kq)("v-if",!0)])))),128))])):((0,s.wg)(),(0,s.iD)("div",Y," Currently there are no Change Tasks associated with this Request for Change. Please add some by clicking on the button below. ")),(0,s._)("div",z,[(0,s.kq)(" ADD NEW CHANGE TASK TO RUN SHEET "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",J,[(0,s._)("div",X,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>o.addNewChangeItem&&o.addNewChangeItem(...t))},"New Change Item")):(0,s.kq)("v-if",!0)])])),(0,s.kq)(" If ALL Change Tasks have been completed - you can close the RFC "),o.isCompleted?((0,s.wg)(),(0,s.iD)("div",tt,[(0,s._)("div",et,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-warning save-changes",onClick:e[1]||(e[1]=(...t)=>o.closeRfc&&o.closeRfc(...t))},"Close Request for Change")):(0,s.kq)("v-if",!0)])])):(0,s.kq)("v-if",!0),(0,s.kq)(" Modal "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.j4)(i,{key:2,"location-id":a.locationId,"user-list":a.userList,onUpdate_change_task_list:e[2]||(e[2]=t=>o.updateChangeTaskList(t))},null,8,["location-id","user-list"]))]),(0,s.kq)(" Confirm Change Task Closure "),(0,s.Wm)(r,{"closure-id":t.closureId,"closure-status":t.closureStatus,"closure-status-id":t.closureStatusId,onClose_change_task:e[3]||(e[3]=t=>o.closeChangeTask(t))},null,8,["closure-id","closure-status","closure-status-id"])],64)}]]);var me=a(9077),pe=a(6700),fe=a(7601),be=a(2007),ve=a(7284),ye=a(8416);const we=a(9669),De={name:"RfcModules",components:{ChangeTaskList:_e,GroupsAndUsersModule:ve.Z,RfcBackoutPlan:me.Z,RfcImplementationPlan:pe.Z,RfcRisk:fe.Z,RfcTestPlan:be.Z},props:{locationId:{type:Number,default:0},destination:{type:String,default:"request_for_change"},isReadOnly:{type:Boolean,default:!1},rfcResults:{type:Array,default:[]},userList:{type:Array,default:()=>[]}},mixins:[ne.Z,ye.Z],data:()=>({rfcData:{rfcBackoutPlan:"",rfcImpactModel:{},rfcImplementationPlanModel:"",rfcPriorityModel:{},rfcRiskModel:{},rfcRiskSummaryModel:"",rfcTestPlanModel:"",rfcTypeModel:{}},validationData:{tab_2:!0,tab_3:!0,tab_4:!0,tab_5:!0}}),computed:{...(0,le.Se)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{sendData(t,e){this.showLoadingModal("Project"),we.post(e,t).then((t=>{this.closeLoadingModal()})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateBackoutPlan(){if(!1===this.validationData.tab_4)return void this.showErrorModal("Please fill out all data","Backout Plan","");const t=new FormData;t.set("text_input",this.rfcData.rfcBackoutPlan),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/backout/`)},updateImplementation(){if(!1===this.validationData.tab_3)return void this.showErrorModal("Please fill out all data","Implementation","");const t=new FormData;t.set("text_input",this.rfcData.rfcImplementationPlanModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/implementation/`)},updateRisk(){if(!1===this.validationData.tab_2)return void this.showErrorModal("Please fill out all data","Risk","");const t=new FormData;t.set("priority_of_change",this.rfcData.rfcPriorityModel),t.set("risk_of_change",this.rfcData.rfcRiskModel),t.set("impact_of_change",this.rfcData.rfcImpactModel),t.set("text_input",this.rfcData.rfcRiskSummaryModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/risk/`)},updateValidation(t){this.validationData[t.tab]=t.value},updateTestPlan(){if(!1===this.validationData.tab_5)return void this.showErrorModal("Please fill out all data","Test Plan","");const t=new FormData;t.set("text_input",this.rfcData.rfcTestPlanModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/test/`)},updateValues(t){this.rfcData[t.modelName]=t.modelValue}},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination,locationId:this.locationId})}},Ce=(0,ht.Z)(De,[["render",function(t,e,a,U,M,I){const R=(0,s.up)("groups-and-users-module"),q=(0,s.up)("rfc-risk"),L=(0,s.up)("rfc-implementation-plan"),E=(0,s.up)("rfc-backout-plan"),$=(0,s.up)("rfc-test-plan"),A=(0,s.up)("change-task-list");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",l,[o,i,(0,s._)("div",r,[(0,s._)("div",d,[(0,s.Wm)(R,{"location-id":a.locationId,destination:a.destination},null,8,["location-id","destination"])]),(0,s._)("div",c,[(0,s.Wm)(q,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[0]||(e[0]=t=>I.updateValidation(t)),onUpdate_values:e[1]||(e[1]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",u)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",k,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[2]||(e[2]=(...t)=>I.updateRisk&&I.updateRisk(...t))},"Update Risks")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",g,[(0,s.Wm)(L,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[3]||(e[3]=t=>I.updateValidation(t)),onUpdate_values:e[4]||(e[4]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",_)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",p,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[5]||(e[5]=(...t)=>I.updateImplementation&&I.updateImplementation(...t))},"Update Implementation Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",f,[(0,s.Wm)(E,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[6]||(e[6]=t=>I.updateValidation(t)),onUpdate_values:e[7]||(e[7]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",b)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("div",y,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[8]||(e[8]=(...t)=>I.updateBackoutPlan&&I.updateBackoutPlan(...t))},"Update Backout Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",w,[(0,s.Wm)($,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[9]||(e[9]=t=>I.updateValidation(t)),onUpdate_values:e[10]||(e[10]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",D)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("div",T,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[11]||(e[11]=(...t)=>I.updateTestPlan&&I.updateTestPlan(...t))},"Update Test Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",S,[(0,s.Wm)(A,{"is-read-only":a.isReadOnly,"location-id":a.locationId,"user-list":a.userList,"rfc-id":a.rfcResults[0].pk,"rfc-status":a.rfcResults[0].fields.rfc_status},null,8,["is-read-only","location-id","user-list","rfc-id","rfc-status"])])])])])}]])},5808:(t,e,a)=>{a.d(e,{Z:()=>M});var s=a(3985),n=a(5555),l=a(1826),o=a(6443),i=a(1327),r=a(8521),d=a(1056),c=a(4324),u=a(9672),h=a(9867),k=a(1239),g=a(5004),_=a(1321),m=a(1216),p=a(5550),f=a(7702),b=a(7903),v=a(2606),y=a(3843),w=a(2393),D=a(3360),C=a(9714),T=a(1323),S=a(2610),U=a(5968);const M={data:()=>({icons:{arrowUp:s.Z,bugIcon:n.Z,bxBriefcase:l.Z,cardChecklist:o.Z,clipboardIcon:i.Z,documentPdf:r.Z,documentText:d.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:h.Z,infoCircle:k.Z,linkIcon:g.Z,linkIcon2:_.Z,linkOut:m.Z,mailIcon:p.Z,microsoftExcel:f.Z,microsoftPowerpoint:b.Z,microsoftWord:v.Z,noteAdd:y.Z,objectStorage:w.Z,passwordIcon:D.Z,trashCan:C.Z,userIcon:T.Z,usersIcon:S.Z,xCircle:U.Z}})}},8416:(t,e,a)=>{a.d(e,{Z:()=>n});var s=a(5169);const n={methods:{closeLoadingModal(){const t=new s.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{t.hide()}),1e3)},showLoadingModal(t){new s.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${t} details`}}}}}]);