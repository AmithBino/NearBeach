"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[645],{3566:(t,e,a)=>{a.d(e,{Z:()=>v});var s=a(6252),l=a(3577);const n={class:"row"},i={class:"col-md-4"},o=(0,s._)("strong",null,"Between Dates",-1),r={class:"text-instructions"},d={class:"col-md-4"},c={class:"form-group"},u={key:0,class:"error"},h={class:"col-md-4"},p={class:"form-group"},m={key:0,class:"error"};var g=a(9974),k=a(4028),f=a(2587),_=a(431);const b={name:"BetweenDates",setup:()=>({v$:(0,k.ZP)()}),components:{NDatePicker:g.Z},mixins:[_.Z],props:{destination:{type:String,default:""},endDateModel:{type:Number,default:()=>{let t=new Date;return t.setHours(16),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),new Date(t.setDate(t.getDate()+14)),t.getTime()}},noBackDating:{type:Boolean,default:!0},startDateModel:{type:Number,default:()=>{let t=new Date;return t.setHours(9),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}}},validations:{localEndDateModel:{required:f.C1},localStartDateModel:{required:f.C1}},data(){return{localEndDateModel:this.endDateModel,localStartDateModel:this.startDateModel}},methods:{emitDates(){this.$emit("update_dates",{start_date:this.localStartDateModel,end_date:this.localEndDateModel})},endDateDisabled(t){let e=!1;return this.noBackDating||(e=this.disableDate(t)),t<=this.startDateModel-864e5||e},startDateDisabled(t){let e=!1;return this.noBackDating||(e=this.disableDate(t)),t>this.endDateModel||e}},watch:{localEndDateModel(){this.localEndDateModel<this.localStartDateModel&&(this.localEndDateModel=this.localStartDateModel()),this.emitDates()},localStartDateModel(){this.localEndDateModel<this.localStartDateModel&&(this.localStartDateModel=this.localEndDateModel()),this.emitDates()}},mounted(){this.emitDates()}},v=(0,a(3744).Z)(b,[["render",function(t,e,a,g,k,f){const _=(0,s.up)("n-date-picker");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",i,[o,(0,s._)("p",r," Choose the start and end date of the "+(0,l.toDisplayString)(a.destination)+". Please note the end date can not be earlier than the start date. They can be equal. ",1)]),(0,s._)("div",d,[(0,s._)("div",c,[(0,s._)("label",null,[(0,s.Uk)((0,l.toDisplayString)(a.destination)+" Start Date: ",1),g.v$.localStartDateModel.$error.length>0?((0,s.wg)(),(0,s.iD)("span",u," Please select a date.")):(0,s.kq)("v-if",!0)]),(0,s.Wm)(_,{type:"datetime",value:k.localStartDateModel,"onUpdate:value":e[0]||(e[0]=t=>k.localStartDateModel=t),class:"form-control","is-date-disabled":f.startDateDisabled,"is-time-disabled":f.startDateDisabled},null,8,["value","is-date-disabled","is-time-disabled"])])]),(0,s._)("div",h,[(0,s._)("div",p,[(0,s._)("label",null,[(0,s.Uk)((0,l.toDisplayString)(a.destination)+" End Date: ",1),g.v$.localEndDateModel.$error.length>0?((0,s.wg)(),(0,s.iD)("span",m," Please select a date.")):(0,s.kq)("v-if",!0)]),(0,s.Wm)(_,{type:"datetime",value:k.localEndDateModel,"onUpdate:value":e[1]||(e[1]=t=>k.localEndDateModel=t),class:"form-control","is-date-disabled":f.endDateDisabled,"is-time-disabled":f.endDateDisabled},null,8,["value","is-date-disabled","is-time-disabled"])])])])}]])},9809:(t,e,a)=>{a.r(e),a.d(e,{default:()=>he});var s=a(6252);const l={class:"card"},n={class:"card-body"},i=(0,s._)("ul",{class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},[(0,s.kq)(" GROUPS AND USERS "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"group-and-users-tab","data-bs-toggle":"tab","data-bs-target":"#group-and-users",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Group and Users ")]),(0,s.kq)(" RISK "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-risk-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-risk",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Risk ")]),(0,s.kq)(" IMPLEMENTATION "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-implementation-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-implementation",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Implementation ")]),(0,s.kq)(" BACKOUT PLAN "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-backout-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-backout",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Backout Plan ")]),(0,s.kq)(" TEST PLAN "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-test-plan-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-test",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Test Plan ")]),(0,s.kq)(" RUN SHEET "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link active",id:"rfc-run-sheet-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-run-sheet",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Run Sheet ")])],-1),o=(0,s._)("hr",null,null,-1),r={class:"tab-content",id:"misc_module_content"},d={class:"tab-pane fade",id:"group-and-users",role:"tabpanel","aria-labelledby":"contact-tab"},c={class:"tab-pane fade",id:"rfc-risk",role:"tabpanel","aria-labelledby":"home-tab"},u={key:0},h={key:1,class:"row submit-row"},p={class:"col-md-12"},m={class:"tab-pane fade",id:"rfc-implementation",role:"tabpanel","aria-labelledby":"home-tab"},g={key:0},k={key:1,class:"row submit-row"},f={class:"col-md-12"},_={class:"tab-pane fade",id:"rfc-backout",role:"tabpanel","aria-labelledby":"home-tab"},b={key:0},v={key:1,class:"row submit-row"},D={class:"col-md-12"},y={class:"tab-pane fade",id:"rfc-test",role:"tabpanel","aria-labelledby":"home-tab"},w={key:0},M={key:1,class:"row submit-row"},S={class:"col-md-12"},T={class:"tab-pane fade active show",id:"rfc-run-sheet",role:"tabpanel","aria-labelledby":"home-tab"};var R=a(2491),U=a(3809),C=a(9721),I=a(3577);const E=(0,s._)("div",{class:"row"},[(0,s._)("strong",null,"Run Sheet List"),(0,s._)("p",{class:"text-instructions"},[(0,s.Uk)(" The run sheet will specify specific tasks for each user to implement. Each run item can be specified to;"),(0,s._)("br"),(0,s.Uk)(" - Block other run items"),(0,s._)("br"),(0,s.Uk)(" - Block out downtime ")])],-1),q={key:0},L=["href"],P=["href"],A=["href"],N=(0,s.Uk)(" Assigned User: "),$={class:"small-text"},O=(0,s.Uk)(" QA User: "),B={class:"small-text"},x={class:"change-task--status"},F=(0,s.Uk)(" Status: "),Z={class:"small-text"},V={key:0,class:"change-task--buttons"},W=["onClick"],H=["onClick"],j=["onClick"],Q=["onClick"],K=["onClick"],G={key:1,class:"alert alert-primary"},Y={class:"row"},z={key:0,class:"row submit-row"},J={class:"col-md-12"},X={key:1,class:"row submit-row"},tt={class:"col-md-12"};var et=a(5169),at=a(9963);const st={class:"modal fade",id:"newRunItemModal",tabindex:"-1","aria-labelledby":"newRunItemModalLabel","aria-hidden":"true"},lt={class:"modal-dialog modal-xl modal-fullscreen-xl-down"},nt={class:"modal-content"},it=(0,s._)("div",{class:"modal-header"},[(0,s._)("h2",{class:"modal-title",id:"newRunItemModalLabel"}," New Change Task "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newRunItemCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})])],-1),ot={class:"modal-body"},rt={class:"row"},dt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Change Task Title"),(0,s._)("p",{class:"text-instructions"}," Please write a short title of the description for this task. i.e Backup of Database ")],-1),ct={class:"col-md-8"},ut={class:"form-group"},ht=(0,s._)("label",null,"Change Title:",-1),pt=(0,s._)("hr",null,null,-1),mt={class:"row"},gt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Date Restrictions"),(0,s._)("p",{class:"text-instructions"}," Start and End dates of the RFC ")],-1),kt={class:"col-md-4"},ft=(0,s.Uk)(" Start Date: "),_t={class:"col-md-4"},bt=(0,s.Uk)(" End Date: "),vt=(0,s._)("hr",null,null,-1),Dt=(0,s._)("hr",null,null,-1),yt={class:"row"},wt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Implementation & QA User"),(0,s._)("p",{class:"text-instructions"}," Please indicate which user will be implementing the work, and the user who will QA. ")],-1),Mt={class:"col-md-8"},St={class:"row"},Tt={class:"col-md-6"},Rt={class:"form-group"},Ut=(0,s._)("label",null,"Implementation User",-1),Ct={class:"col-md-6"},It={class:"form-group"},Et=(0,s._)("label",null,"QA User",-1),qt=(0,s._)("hr",null,null,-1),Lt={class:"row"},Pt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Description"),(0,s._)("p",{class:"text-instructions"}," Write a detail description of this particular task. ")],-1),At={class:"col-md-8"},Nt=(0,s._)("label",null,"Change Task Description (Optional):",-1),$t=(0,s._)("hr",null,null,-1),Ot={class:"row"},Bt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Misc"),(0,s._)("p",{class:"text-instructions"},' Please fill in the stakeholders for this particular change task. Default value will be "Stakeholders". '),(0,s._)("p",{class:"text-instructions"},' To state if there is downtime, please click the "No Downtime" to change it\'s statue. ')],-1),xt={class:"col-md-8"},Ft={class:"form-group"},Zt=(0,s._)("label",null,"Stakeholders:",-1),Vt=(0,s._)("br",null,null,-1),Wt={class:"btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},Ht={class:"btn btn-outline-primary",for:"isDowntime"},jt={class:"modal-footer"},Qt=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var Kt=a(7267),Gt=a(3566),Yt=a(9860),zt=a(3058),Jt=a(4250);const Xt=a(9669),te={name:"RfcNewRunItem",components:{BetweenDates:Gt.Z,editor:Kt.Z,NSelect:Yt.Z},props:{locationId:{type:Number,default:0},userList:{type:Array,default:()=>[]}},mixins:[zt.Z],data:()=>({assignedUserModel:"",changeDescriptionModel:"",changeEndDateModel:"",changeIsDowntimeModel:!1,changeStakeholderModel:"Stakeholder(s)",changeStartDateModel:"",changeTitleModel:"",qaUserModel:"",userListFixed:[]}),computed:{...(0,Jt.Se)({rfcEndDate:"getEndDate",rfcStartDate:"getStartDate",rootUrl:"getRootUrl"})},methods:{formatDate(t){let e=new Date(t);e=e.toISOString().split("T");const a=e[1].split(".");return`${e[0]} ${a[0]}`},isDowntime(){return this.changeIsDowntimeModel?"Downtime Scheduled":"No Downtime"},submitChangeTask(t){t.preventDefault();var e=parseInt(this.changeEndDateModel)-parseInt(this.changeStartDateModel);const a=new FormData;a.set("request_for_change",this.locationId.toString()),a.set("change_task_title",this.changeTitleModel),a.set("change_task_description",this.changeDescriptionModel),a.set("change_task_start_date",new Date(this.changeStartDateModel).toISOString()),a.set("change_task_end_date",new Date(this.changeEndDateModel).toISOString()),a.set("change_task_seconds",e.toString()),a.set("change_task_assigned_user",this.assignedUserModel),a.set("change_task_qa_user",this.qaUserModel),a.set("change_task_required_by",this.changeStakeholderModel),a.set("is_downtime",this.changeIsDowntimeModel),Xt.post(`${this.rootUrl}rfc_information/${this.locationId}/new_change_task/`,a).then((t=>{this.$emit("update_change_task_list",t.data),this.changeDescriptionModel="",this.changeIsDowntimeModel=!1,this.changeStakeholderModel="Stakeholder(s)",this.changeTitleModel="",document.getElementById("newRunItemCloseButton").click()})).catch((t=>{this.showErrorModal(t,"Change Task")}))},updateDates(t){this.changeStartDateModel=t.start_date,this.changeEndDateModel=t.end_date}},mounted(){this.userListFixed=this.userList.map((t=>({label:`${t.username}: ${t.first_name} ${t.last_name}`,value:t.id})))}};var ee=a(3744);const ae=(0,ee.Z)(te,[["render",function(t,e,a,l,n,i){const o=(0,s.up)("between-dates"),r=(0,s.up)("n-select"),d=(0,s.up)("editor");return(0,s.wg)(),(0,s.iD)("div",st,[(0,s._)("div",lt,[(0,s._)("div",nt,[it,(0,s._)("div",ot,[(0,s.kq)(" CHANGE TASK TITLE "),(0,s._)("div",rt,[dt,(0,s._)("div",ct,[(0,s._)("div",ut,[ht,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=e=>t.changeTitleModel=e)},null,512),[[at.vModelText,t.changeTitleModel]])])])]),(0,s.kq)(" NOTIFY USERS OF DATE RESTRICTIONS "),pt,(0,s._)("div",mt,[gt,(0,s._)("div",kt,[ft,(0,s._)("span",null,(0,I.toDisplayString)(i.formatDate(t.rfcStartDate)),1)]),(0,s._)("div",_t,[bt,(0,s._)("span",null,(0,I.toDisplayString)(i.formatDate(t.rfcEndDate)),1)])]),(0,s.kq)(" START DATE & END DATE "),vt,(0,s.Wm)(o,{destination:"Change Task",onUpdate_dates:e[1]||(e[1]=t=>i.updateDates(t)),"no-back-dating":!1}),(0,s.kq)(" IMPLEMENTATION USER & QA USER "),Dt,(0,s._)("div",yt,[wt,(0,s._)("div",Mt,[(0,s._)("div",St,[(0,s._)("div",Tt,[(0,s._)("div",Rt,[Ut,(0,s.Wm)(r,{options:t.userListFixed,value:t.assignedUserModel,"onUpdate:value":e[2]||(e[2]=e=>t.assignedUserModel=e)},null,8,["options","value"])])]),(0,s._)("div",Ct,[(0,s._)("div",It,[Et,(0,s.Wm)(r,{value:t.qaUserModel,"onUpdate:value":e[3]||(e[3]=e=>t.qaUserModel=e),options:t.userListFixed},null,8,["value","options"])])])])])]),(0,s.kq)(" DESCRIPTION OPTIONAL "),qt,(0,s._)("div",Lt,[Pt,(0,s._)("div",At,[Nt,(0,s.Wm)(d,{init:{height:300,menubar:!1,plugins:["lists","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:t.changeDescriptionModel,"onUpdate:modelValue":e[4]||(e[4]=e=>t.changeDescriptionModel=e)},null,8,["modelValue"])])]),(0,s.kq)(" MISC "),$t,(0,s._)("div",Ot,[Bt,(0,s._)("div",xt,[(0,s._)("div",Ft,[Zt,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=e=>t.changeStakeholderModel=e)},null,512),[[at.vModelText,t.changeStakeholderModel]])]),Vt,(0,s._)("div",Wt,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"isDowntime",class:"btn-check",autocomplete:"off","onUpdate:modelValue":e[6]||(e[6]=e=>t.changeIsDowntimeModel=e)},null,512),[[at.vModelCheckbox,t.changeIsDowntimeModel]]),(0,s._)("label",Ht,(0,I.toDisplayString)(i.isDowntime()),1)])])])]),(0,s._)("div",jt,[Qt,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=t=>i.submitChangeTask(t))}," Add Change Task ")])])])])}]]);var se=a(431);const le=a(9669),ne={name:"RfcRunSheetList",components:{RfcNewRunItem:ae},props:{isReadOnly:{type:Boolean,default:!1},locationId:{type:Number,default:0},rfcId:{type:Number,default:0},rfcStatus:{type:Number,default:0},userList:{type:Array,default:()=>[]}},mixins:[se.Z,zt.Z],data:()=>({changeTaskList:[]}),computed:{...(0,Jt.Se)({userLevel:"getUserLevel",rootUrl:"getRootUrl"}),isCompleted(){return 0===this.changeTaskList.filter((t=>{const e=t.fields.change_task_status;return 5!==e&&6!==e})).length&&(3===this.rfcStatus||4===this.rfcStatus)}},methods:{addNewChangeItem(){new et.u_(document.getElementById("newRunItemModal")).show()},closeRfc(){const t=new FormData;t.set("rfc_status",5),le.post(`${this.rootUrl}rfc_information/${this.rfcId}/update_status/`,t).then((t=>{window.location.reload(!0)})).catch((t=>{this.showErrorModal(t,"request_for_change")}))},getRunSheetList(){le.post(`${this.rootUrl}rfc_information/${this.locationId}/change_task_list/`).then((t=>{this.changeTaskList=t.data,this.$store.commit({type:"updateChangeTaskCount",changeTaskCount:t.data.length})})).catch((t=>{this.showErrorModal(t,"request_for_change")}))},getStatus(t){switch(t){case 1:return"Draft";case 2:return"Waiting for approval";case 3:return"Waiting to start";case 4:return"Task Started";case 5:return"Task Finished Successfully";case 6:return"Task FAILED";case 7:return"PAUSED Task";case 8:return"Ready for QA";default:return"---"}},getUserName(t){var e=this.userList.filter((e=>e.id==t));return 0==e.length?"---":`${e[0].username}: ${e[0].first_name} ${e[0].last_name}`},updateChangeTaskList(t){this.changeTaskList=t,this.$store.commit({type:"updateChangeTaskCount",changeTaskCount:t.length})},updateChangeTaskStatus(t,e){const a=new FormData;a.set("change_task_status",e),le.post(`${this.rootUrl}change_task_update_status/${t}/`,a).then((a=>{this.changeTaskList=this.changeTaskList.map((a=>a.pk==t?(a.fields.change_task_status=e,a):a))})).catch((t=>{this.showErrorModal(t,"request_for_change")}))}},mounted(){this.getRunSheetList()}},ie=(0,ee.Z)(ne,[["render",function(t,e,a,l,n,i){const o=(0,s.up)("rfc-new-run-item");return(0,s.wg)(),(0,s.iD)(s.HY,null,[E,(0,s.kq)(" LOOP FOR CHANGE TASKS "),t.changeTaskList.length>0?((0,s.wg)(),(0,s.iD)("div",q,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.changeTaskList,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.pk,class:"row change-task--detail"},[(0,s._)("a",{class:"change-task--name",href:`${t.rootUrl}change_task_information/${e.pk}/`},(0,I.toDisplayString)(e.fields.change_task_title),9,L),(0,s._)("a",{class:"change-task--dates",href:`${t.rootUrl}change_task_information/${e.pk}/`},(0,I.toDisplayString)(t.getNiceDate(e.fields.change_task_start_date))+" - "+(0,I.toDisplayString)(t.getNiceDate(e.fields.change_task_end_date)),9,P),(0,s._)("a",{class:"change-task--responsibility",href:`${t.rootUrl}change_task_information/${e.pk}/`},[(0,s._)("div",null,[N,(0,s._)("span",$,(0,I.toDisplayString)(i.getUserName(e.fields.change_task_assigned_user)),1)]),(0,s._)("div",null,[O,(0,s._)("span",B,(0,I.toDisplayString)(i.getUserName(e.fields.change_task_qa_user)),1)])],8,A),(0,s._)("div",x,[F,(0,s._)("span",Z,(0,I.toDisplayString)(i.getStatus(e.fields.change_task_status)),1)]),t.userLevel>1?((0,s.wg)(),(0,s.iD)("div",V,[(0,s.kq)(" START TASK "),[3,7,8].includes(e.fields.change_task_status)?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-primary",onClick:t=>i.updateChangeTaskStatus(e.pk,4)}," Start Task ",8,W)):(0,s.kq)("v-if",!0),(0,s.kq)(" PAUSE "),[4].includes(e.fields.change_task_status)?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn btn-secondary",onClick:t=>i.updateChangeTaskStatus(e.pk,7)}," Pause Task ",8,H)):(0,s.kq)("v-if",!0),(0,s.kq)(" READY FOR QA "),[4].includes(e.fields.change_task_status)?((0,s.wg)(),(0,s.iD)("button",{key:2,class:"btn btn-info",onClick:t=>i.updateChangeTaskStatus(e.pk,8)}," Set Task Ready for QA ",8,j)):(0,s.kq)("v-if",!0),(0,s.kq)(" SUCCESS "),[8].includes(e.fields.change_task_status)?((0,s.wg)(),(0,s.iD)("button",{key:3,class:"btn btn-success",onClick:t=>i.updateChangeTaskStatus(e.pk,5)}," Set Task to Success ",8,Q)):(0,s.kq)("v-if",!0),(0,s.kq)(" FAIL "),[4,8].includes(e.fields.change_task_status)?((0,s.wg)(),(0,s.iD)("button",{key:4,class:"btn btn-danger",onClick:t=>i.updateChangeTaskStatus(e.pk,6)}," Set Task to Fail ",8,K)):(0,s.kq)("v-if",!0)])):(0,s.kq)("v-if",!0)])))),128))])):((0,s.wg)(),(0,s.iD)("div",G," Currently there are no Change Tasks associated with this Request for Change. Please add some by clicking on the button below. ")),(0,s._)("div",Y,[(0,s.kq)(" ADD NEW CHANGE TASK TO RUN SHEET "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",z,[(0,s._)("div",J,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>i.addNewChangeItem&&i.addNewChangeItem(...t))},"New Change Item")):(0,s.kq)("v-if",!0)])])),(0,s.kq)(" If ALL Change Tasks have been completed - you can close the RFC "),i.isCompleted?((0,s.wg)(),(0,s.iD)("div",X,[(0,s._)("div",tt,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-warning save-changes",onClick:e[1]||(e[1]=(...t)=>i.closeRfc&&i.closeRfc(...t))},"Close Request for Change")):(0,s.kq)("v-if",!0)])])):(0,s.kq)("v-if",!0),(0,s.kq)(" Modal "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.j4)(o,{key:2,"location-id":a.locationId,"user-list":a.userList,onUpdate_change_task_list:e[2]||(e[2]=t=>i.updateChangeTaskList(t))},null,8,["location-id","user-list"]))])],64)}]]);var oe=a(6501),re=a(7284),de=a(8416);const ce=a(9669),ue={name:"RfcModules",components:{GroupsAndUsersModule:re.Z,RfcBackoutPlan:R.Z,RfcImplementationPlan:U.Z,RfcRisk:C.Z,RfcRunSheetList:ie,RfcTestPlan:oe.Z},props:{locationId:{type:Number,default:0},destination:{type:String,default:"request_for_change"},isReadOnly:{type:Boolean,default:!1},rfcResults:{type:Array,default:[]},userList:{type:Array,default:()=>[]}},mixins:[zt.Z,de.Z],data:()=>({rfcData:{rfcBackoutPlan:"",rfcImpactModel:{},rfcImplementationPlanModel:"",rfcPriorityModel:{},rfcRiskModel:{},rfcRiskSummaryModel:"",rfcTestPlanModel:"",rfcTypeModel:{}},validationData:{tab_2:!0,tab_3:!0,tab_4:!0,tab_5:!0}}),computed:{...(0,Jt.Se)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{sendData(t,e){this.showLoadingModal("Project"),ce.post(e,t).then((t=>{this.closeLoadingModal()})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateBackoutPlan(){if(!1===this.validationData.tab_4)return void this.showErrorModal("Please fill out all data","Backout Plan","");const t=new FormData;t.set("text_input",this.rfcData.rfcBackoutPlan),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/backout/`)},updateImplementation(){if(!1===this.validationData.tab_3)return void this.showErrorModal("Please fill out all data","Implementation","");const t=new FormData;t.set("text_input",this.rfcData.rfcImplementationPlanModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/implementation/`)},updateRisk(){if(!1===this.validationData.tab_2)return void this.showErrorModal("Please fill out all data","Risk","");const t=new FormData;t.set("priority_of_change",this.rfcData.rfcPriorityModel),t.set("risk_of_change",this.rfcData.rfcRiskModel),t.set("impact_of_change",this.rfcData.rfcImpactModel),t.set("text_input",this.rfcData.rfcRiskSummaryModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/risk/`)},updateValidation(t){this.validationData[t.tab]=t.value},updateTestPlan(){if(!1===this.validationData.tab_5)return void this.showErrorModal("Please fill out all data","Test Plan","");const t=new FormData;t.set("text_input",this.rfcData.rfcTestPlanModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/test/`)},updateValues(t){this.rfcData[t.modelName]=t.modelValue}},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination,locationId:this.locationId})}},he=(0,ee.Z)(ue,[["render",function(t,e,a,R,U,C){const I=(0,s.up)("groups-and-users-module"),E=(0,s.up)("rfc-risk"),q=(0,s.up)("rfc-implementation-plan"),L=(0,s.up)("rfc-backout-plan"),P=(0,s.up)("rfc-test-plan"),A=(0,s.up)("rfc-run-sheet-list");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",n,[i,o,(0,s._)("div",r,[(0,s._)("div",d,[(0,s.Wm)(I,{"location-id":a.locationId,destination:a.destination},null,8,["location-id","destination"])]),(0,s._)("div",c,[(0,s.Wm)(E,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[0]||(e[0]=t=>C.updateValidation(t)),onUpdate_values:e[1]||(e[1]=t=>C.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",u)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",p,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[2]||(e[2]=(...t)=>C.updateRisk&&C.updateRisk(...t))},"Update Risks")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",m,[(0,s.Wm)(q,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[3]||(e[3]=t=>C.updateValidation(t)),onUpdate_values:e[4]||(e[4]=t=>C.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",g)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("div",f,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[5]||(e[5]=(...t)=>C.updateImplementation&&C.updateImplementation(...t))},"Update Implementation Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",_,[(0,s.Wm)(L,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[6]||(e[6]=t=>C.updateValidation(t)),onUpdate_values:e[7]||(e[7]=t=>C.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",b)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("div",D,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[8]||(e[8]=(...t)=>C.updateBackoutPlan&&C.updateBackoutPlan(...t))},"Update Backout Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",y,[(0,s.Wm)(P,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[9]||(e[9]=t=>C.updateValidation(t)),onUpdate_values:e[10]||(e[10]=t=>C.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",w)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("div",S,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[11]||(e[11]=(...t)=>C.updateTestPlan&&C.updateTestPlan(...t))},"Update Test Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",T,[(0,s.Wm)(A,{"is-read-only":a.isReadOnly,"location-id":a.locationId,"user-list":a.userList,"rfc-id":a.rfcResults[0].pk,"rfc-status":a.rfcResults[0].fields.rfc_status,onUpdate_values:e[12]||(e[12]=t=>C.updateValues(t))},null,8,["is-read-only","location-id","user-list","rfc-id","rfc-status"])])])])])}]])},8416:(t,e,a)=>{a.d(e,{Z:()=>l});var s=a(5169);const l={methods:{closeLoadingModal(){const t=new s.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{t.hide()}),1e3)},showLoadingModal(t){new s.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${t} details`}}}}}]);