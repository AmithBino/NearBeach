"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6765],{8591:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U});var a=o(6252),r=o(3577);const n={class:"card"},s={class:"card-body"},l=(0,a._)("hr",null,null,-1),i={class:"row"},d=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Columns & Levels"),(0,a._)("p",{class:"text-instructions"}," Drag the cards around to sort out the columns how you want them. ")],-1),c={class:"col-md-4"},u={class:"col-md-4"},p=(0,a._)("hr",null,null,-1),h={class:"row submit-row"},m={class:"col-md-12"};var b=o(9742),y=o(4028),k=o(2587),f=o(3058),v=o(9113);const _=o(9669),w={name:"KanbanEditBoard",setup:()=>({v$:(0,y.ZP)()}),components:{KanbanPropertyOrder:b.Z},props:{columnResults:{type:Array,default:()=>[]},kanbanBoardResults:{type:Array,default:()=>[]},levelResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userLevel:{type:Number,default:0}},mixins:[f.Z,v.Z],data:()=>({columnModel:[],levelModel:[]}),validations:{columnModel:{required:k.C1},levelModel:{required:k.C1}},methods:{backToBoard:function(){window.location.href=`${this.rootUrl}kanban_information/${this.kanbanBoardResults[0].pk}/`},closeKanban:function(){_.post(`${this.rootUrl}kanban_information/${this.kanbanBoardResults[0].pk}/close_board/`).then((e=>{window.location.href=`${this.rootUrl}`})).catch((e=>{this.showErrorModal(e,this.destination)}))},updatePropertyList:function(e){this[e.source]=e.data}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel}),this.columnModel=this.columnResults.map((e=>({id:e.pk,property:e.fields.kanban_column_property,title:e.fields.kanban_column_name}))),this.levelModel=this.levelResults.map((e=>({id:e.pk,property:"",title:e.fields.kanban_level_name})))}},U=(0,o(3744).Z)(w,[["render",function(e,t,o,b,y,k){const f=(0,a.up)("kanban-property-order");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",s,[(0,a._)("h1",null,(0,r.toDisplayString)(o.kanbanBoardResults[0].fields.kanban_board_name),1),l,(0,a.kq)(" Properties for the drag and drop coloumns/levels "),(0,a._)("div",i,[d,(0,a._)("div",c,[(0,a.Wm)(f,{"property-name":"Column","property-list":y.columnModel,source:"columnModel","is-dirty":b.v$.columnModel.$dirty,"is-new-mode":!1,"kanban-board-id":o.kanbanBoardResults[0].pk,onUpdate_property_list:t[0]||(t[0]=e=>k.updatePropertyList(e))},null,8,["property-list","is-dirty","kanban-board-id"])]),(0,a._)("div",u,[(0,a.Wm)(f,{"property-name":"Level","property-list":y.levelModel,source:"levelModel","is-dirty":b.v$.columnModel.$dirty,"is-new-mode":!1,"kanban-board-id":o.kanbanBoardResults[0].pk,onUpdate_property_list:t[1]||(t[1]=e=>k.updatePropertyList(e))},null,8,["property-list","is-dirty","kanban-board-id"])])]),(0,a.kq)(" SAVE "),p,(0,a._)("div",h,[(0,a._)("div",m,[(0,a._)("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>k.closeKanban&&k.closeKanban(...e))}," Close Kanban Board "),(0,a._)("button",{class:"btn btn-primary save-changes",onClick:t[3]||(t[3]=(...e)=>k.backToBoard&&k.backToBoard(...e))}," Back to Kanban Board ")])])])])}]])},9113:(e,t,o)=>{o.d(t,{Z:()=>a});const a={methods:{searchTrigger:function(e){""!=e.searchTimeout&&clearTimeout(e.searchTimeout),void 0===e.search?this.searchUndefined(e):this.searchDefined(e)},searchDefined:function(e){e.search.length>=3&&(e.searchTimeout=setTimeout(e.return_function,500,e.search,e.loading))},searchUndefined:function(e){e.searchTimeout=setTimeout(e.return_function,500)}}}}}]);