"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[4544],{7267:(e,t,o)=>{o.d(t,{Z:()=>g});var n,i=o(6252),d=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],l=function(e){return-1!==d.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},r=0,a=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++r+String(t)},s=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},c=function(){return{listeners:[],scriptId:a("tiny-script"),scriptLoaded:!1}},u=(n=c(),{load:function(e,t,o){n.scriptLoaded?o():(n.listeners.push(o),e.getElementById(n.scriptId)||function(e,t,o,i){var d=t.createElement("script");d.referrerPolicy="origin",d.type="application/javascript",d.id=e,d.src=o;var l=function(){d.removeEventListener("load",l),n.listeners.forEach((function(e){return e()})),n.scriptLoaded=!0};d.addEventListener("load",l),t.head&&t.head.appendChild(d)}(n.scriptId,e,t))},reinitialize:function(){n=c()}}),p=function(){var e="undefined"!=typeof window?window:o.g;return e&&e.tinymce?e.tinymce:null},m={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},h=o(2262),f=function(){return f=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)};const g=(0,i.aZ)({props:m,setup:function(e,t){var o=e.init?f({},e.init):{},n=(0,h.BK)(e),d=n.disabled,r=n.modelValue,c=n.tagName,m=(0,h.iH)(null),g=null,_=e.id||a("tiny-vue"),y=e.init&&e.init.inline||e.inline,v=!!t.attrs["onUpdate:modelValue"],D=!0,b=e.initialValue?e.initialValue:"",k="",F=function(){var n,d,a,c=(n=D,v?function(){return(null==r?void 0:r.value)?r.value:""}:function(){return n?b:k}),u=f(f({},o),{readonly:e.disabled,target:m.value,plugins:(d=o.plugins,a=e.plugins,s(d).concat(s(a))),toolbar:e.toolbar||o.toolbar,inline:y,setup:function(n){g=n,n.on("init",(function(o){return function(e,t,o,n,d,r){n.setContent(r()),o.attrs["onUpdate:modelValue"]&&function(e,t,o,n){var d=e.modelEvents?e.modelEvents:null,l=Array.isArray(d)?d.join(" "):d;(0,i.YP)(n,(function(t,n){o&&"string"==typeof t&&t!==n&&t!==o.getContent({format:e.outputFormat})&&o.setContent(t)})),o.on(l||"change input undo redo",(function(){t.emit("update:modelValue",o.getContent({format:e.outputFormat}))}))}(t,o,n,d),function(e,t,o){Object.keys(t).filter(l).forEach((function(n){var i=t[n];"function"==typeof i&&("onInit"===n?i(e,o):o.on(n.substring(2),(function(e){return i(e,o)})))}))}(e,o.attrs,n)}(o,e,t,n,r,c)})),"function"==typeof o.setup&&o.setup(n)}});(function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()})(m.value)&&(m.value.style.visibility=""),p().init(u),D=!1};return(0,i.YP)(d,(function(e){var t;null!==g&&("function"==typeof(null===(t=g.mode)||void 0===t?void 0:t.set)?g.mode.set(e?"readonly":"design"):g.setMode(e?"readonly":"design"))})),(0,i.YP)(c,(function(e){var t;v||(k=g.getContent()),null===(t=p())||void 0===t||t.remove(g),(0,i.Y3)((function(){return F()}))})),(0,i.bv)((function(){if(null!==p())F();else if(m.value&&m.value.ownerDocument){var t=e.cloudChannel?e.cloudChannel:"6",o=e.apiKey?e.apiKey:"no-api-key",n=null==e.tinymceScriptSrc?"https://cdn.tiny.cloud/1/".concat(o,"/tinymce/").concat(t,"/tinymce.min.js"):e.tinymceScriptSrc;u.load(m.value.ownerDocument,n,F)}})),(0,i.Jd)((function(){null!==p()&&p().remove(g)})),y||((0,i.dl)((function(){D||F()})),(0,i.se)((function(){var e;v||(k=g.getContent()),null===(e=p())||void 0===e||e.remove(g)}))),t.expose({rerender:function(e){var t;k=g.getContent(),null===(t=p())||void 0===t||t.remove(g),o=f(f({},o),e),(0,i.Y3)((function(){return F()}))}}),function(){return y?function(e,t,o,n){return e(n||"div",{id:t,ref:o})}(i.h,_,m,e.tagName):(0,i.h)("textarea",{id:_,visibility:"hidden",ref:m})}}})},9667:(e,t,o)=>{o.d(t,{Z:()=>et});var n=o(6252),i=o(3577);const d=(0,n.Uk)(" Documents"),l={class:"text-instructions"},r={key:0,class:"module-spacer"},a=[(0,n._)("div",{class:"alert alert-dark"}," Sorry - there are no documents or folders uploaded. ",-1)],s={key:1,class:"document--widget"},c=(0,n._)("p",{class:"text-instructions"},"Go to Parent Directory...",-1),u=["onClick"],p={class:"text-instructions"},m=["href"],h={class:"text-instructions"},f={key:0,class:"document--remove"},g=(0,n._)("hr",null,null,-1),_={class:"btn-group save-changes"},y={key:0,class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},v={class:"dropdown-menu"};var D=o(9669),b=o.n(D),k=o(5169),F=o(6542),L=o(9963);const w={class:"modal fade",id:"addFolderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},M={class:"modal-dialog modal-lg"},U={class:"modal-content"},x={class:"modal-header"},I=(0,n.Uk)(" Add Folder Wizard "),S=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addFolderCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),C={class:"modal-body"},E={class:"row"},B=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Creating a folder"),(0,n._)("p",{class:"text-instructions"},' Give the folder an appropriate name. When done, click on the "Save" button. It will be added to the current folder. ')],-1),Z={class:"col-md-8"},A={class:"form-group"},O=(0,n._)("label",{for:"folder_description"},"Folder Name",-1),P={class:"modal-footer"},T=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),R=["disabled"];var $=o(4250),N=o(3058),W=o(5808);const z={name:"AddFolderWizard",components:{Icon:F.JO},props:{currentFolder:{type:String,default:"/"},destination:{type:String,default:"/"},existingFolders:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[N.Z,W.Z],data:()=>({disableAddFolderButton:!0,folderDescriptionModel:""}),computed:{...(0,$.Se)({rootUrl:"getRootUrl"})},methods:{addFolder(){const e=new FormData;e.set("folder_description",this.folderDescriptionModel),null!==this.currentFolder&&""!==this.currentFolder&&e.set("parent_folder",this.currentFolder),b().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_folder/`,e).then((e=>{this.$emit("update_folder_list",e.data),this.folderDescriptionModel="",document.getElementById("addFolderCloseButton").click()})).catch((e=>{this.showErrorModal(e,this.destination)}))}},updated(){const e=this.existingFolders.filter((e=>e.fields.folder_description===this.folderDescriptionModel));this.disableAddFolderButton=e.length>0||""===this.folderDescriptionModel||null===this.folderDescriptionModel}};var q=o(3744);const H=(0,q.Z)(z,[["render",function(e,t,o,i,d,l){const r=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",w,[(0,n._)("div",M,[(0,n._)("div",U,[(0,n._)("div",x,[(0,n._)("h2",null,[(0,n.Wm)(r,{icon:e.icons.userIcon},null,8,["icon"]),I]),S]),(0,n._)("div",C,[(0,n._)("div",E,[B,(0,n._)("div",Z,[(0,n._)("div",A,[O,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>d.folderDescriptionModel=e),class:"form-control",id:"folder_description",maxlength:"50"},null,512),[[L.vModelText,d.folderDescriptionModel]])])])])]),(0,n._)("div",P,[T,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:d.disableAddFolderButton,onClick:t[1]||(t[1]=(...e)=>l.addFolder&&l.addFolder(...e))}," Add Folder ",8,R)])])])])}]]),V={class:"modal fade",id:"addLinkModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},j={class:"modal-dialog modal-lg"},Y={class:"modal-content"},K={class:"modal-header"},G=(0,n.Uk)(" Add Link Wizard "),J=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addLinkCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),Q={class:"modal-body"},X={class:"row"},ee=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Add Link"),(0,n._)("p",{class:"text-instruction"}," Add hyperlinks to other documents and sources located in on the internet/cloud. ")],-1),te={class:"col-md-8"},oe={class:"form-group"},ne={for:"document_description"},ie=(0,n.Uk)(" Document Description "),de={key:0,class:"error"},le={class:"form-group"},re={for:"document_url_location"},ae=(0,n.Uk)(" Document URL "),se={class:"modal-footer"},ce=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),ue=["disabled"];var pe=o(4028),me=o(2587),he=o(212);const fe={name:"AddLinkWizard",setup:()=>({v$:(0,pe.ZP)()}),components:{Icon:F.JO,ValidationRendering:he.Z},props:{currentFolder:{type:String,default:"/"},destination:{type:String,default:"/"},excludeDocuments:{type:Array,default:()=>[]},existingFolders:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[N.Z,W.Z],data:()=>({linkModel:"",disableAddButton:!0,documentDescriptionModel:"",documentUrlLocationModel:"",duplicateDescription:!1}),validations:{documentDescriptionModel:{required:me.C1},documentUrlLocationModel:{required:me.C1,url:me.HQ}},computed:{...(0,$.Se)({rootUrl:"getRootUrl"})},methods:{addLink(){const e=new FormData;e.set("document_description",this.documentDescriptionModel),e.set("document_url_location",this.documentUrlLocationModel),null!==this.currentFolder&&""!==this.currentFolder&&e.set("parent_folder",this.currentFolder),b().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_link/`,e).then((e=>{this.$emit("update_document_list",e.data),this.documentDescriptionModel="",this.documentUrlLocationModel="",document.getElementById("addLinkCloseButton").click()})).catch((e=>{this.showErrorModal(e,this.destination)}))}},updated(){const e=this.excludeDocuments.filter((e=>e.document_key__document_description===this.documentDescriptionModel));this.duplicateDescription=e.length>0,this.v$.$touch(),this.disableAddButton=this.v$.$invalid||e.length>0}},ge=(0,q.Z)(fe,[["render",function(e,t,o,i,d,l){const r=(0,n.up)("Icon"),a=(0,n.up)("validation-rendering");return(0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("div",j,[(0,n._)("div",Y,[(0,n._)("div",K,[(0,n._)("h2",null,[(0,n.Wm)(r,{icon:e.icons.userIcon},null,8,["icon"]),G]),J]),(0,n._)("div",Q,[(0,n._)("div",X,[ee,(0,n._)("div",te,[(0,n._)("div",oe,[(0,n._)("label",ne,[ie,(0,n.Wm)(a,{"error-list":i.v$.documentDescriptionModel.$errors},null,8,["error-list"]),d.duplicateDescription?((0,n.wg)(),(0,n.iD)("span",de," Sorry - but this is a duplicated description.")):(0,n.kq)("v-if",!0)]),(0,n.wy)((0,n._)("input",{id:"document_description","onUpdate:modelValue":t[0]||(t[0]=e=>d.documentDescriptionModel=e),class:"form-control",maxlength:"50",placeholder:"NearBeach Homepage"},null,512),[[L.vModelText,d.documentDescriptionModel]])]),(0,n._)("div",le,[(0,n._)("label",re,[ae,(0,n.Wm)(a,{"error-list":i.v$.documentUrlLocationModel.$errors},null,8,["error-list"])]),(0,n.wy)((0,n._)("input",{id:"document_url_location","onUpdate:modelValue":t[1]||(t[1]=e=>d.documentUrlLocationModel=e),class:"form-control",placeholder:"https://nearbeach.org"},null,512),[[L.vModelText,d.documentUrlLocationModel]])])])])]),(0,n._)("div",se,[ce,(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>l.addLink&&l.addLink(...e)),disabled:d.disableAddButton}," Add Link ",8,ue)])])])])}]]),_e={class:"modal fade",id:"uploadDocumentModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ye={class:"modal-dialog modal-lg"},ve={class:"modal-content"},De={class:"modal-header"},be=(0,n.Uk)(" Upload Document Wizard "),ke=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"uploadDocumentCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),Fe={class:"modal-body"},Le={class:"row"},we={class:"col-md-4"},Me=(0,n._)("strong",null,"Uploading File",-1),Ue={class:"text-instructions"},xe={key:0},Ie={key:1},Se={key:2},Ce={class:"col-md-8"},Ee={key:0,class:"form-file"},Be={class:"mb-3"},Ze={for:"document",class:"form-label"},Ae=(0,n.Uk)(" Please upload a file"),Oe=(0,n._)("br",null,null,-1),Pe={key:0,class:"alert alert-warning"},Te=["accept"],Re={key:1,class:"form-group"},$e={class:"form-group"},Ne=(0,n._)("label",{for:"documentDescription"},"Document Description",-1),We=(0,n._)("br",null,null,-1),ze={class:"form-row"},qe={key:2},He={key:0,class:"alert alert-warning"},Ve=(0,n._)("div",{class:"spinner-border text-primary",role:"status"},[(0,n._)("span",{class:"sr-only"},"Loading...")],-1),je=(0,n._)("div",{class:"alert alert-success"}," The document has been uploaded. The server is currently writing the file to disk. Please be patient - this modal will close automatically. Thank you ",-1),Ye={class:"modal-footer"},Ke=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Ge=["disabled"],Je={name:"UploadDocumentWizard",components:{Icon:F.JO},props:{acceptedDocuments:{type:String,default:"image/*,text/*,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"},currentFolder:{type:String,default:""},destination:{type:String,default:""},excludeDocuments:{type:Array,default:()=>[]},locationId:{type:Number,default:0}},mixins:[N.Z,W.Z],data:()=>({disableUploadButton:!0,documentModel:[],documentDescriptionModel:"",uploadPercentage:"",maxUploadSize:0,maxUploadString:"No Upload Limit",maxUploadWarning:!1}),computed:{...(0,$.Se)({staticUrl:"getStaticUrl",rootUrl:"getRootUrl"})},methods:{handleFileUploads(e){e[0].size*(0!=this.maxUploadSize)>this.maxUploadSize?this.maxUploadWarning=!0:(this.maxUploadWarning=!1,this.documentModel=e[0],this.documentDescriptionModel=e[0].name)},resetForm(){this.documentModel="",this.documentDescriptionModel="",this.uploadPercentage=""},uploadFile(){const e=new FormData;e.set("document",this.documentModel,this.documentDescriptionModel),e.set("document_description",this.documentDescriptionModel),""!=this.currentFolder&&null!==this.currentFolder&&e.set("parent_folder",this.currentFolder);const t={onUploadProgress:e=>{this.uploadPercentage=parseFloat(e.loaded)/parseFloat(e.total)}};b().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/upload/`,e,t).then((e=>{this.$emit("update_document_list",e.data),document.getElementById("uploadDocumentCloseButton").click(),this.resetForm()})).catch((e=>{this.showErrorModal(e,this.destination)}))}},watch:{maxUploadSize(){if(0===this.maxUploadSize)return"No Upload Limit";const e=Math.floor(Math.log(this.maxUploadSize)/Math.log(1024));this.maxUploadString=`Max Upload Size: ${parseFloat((this.maxUploadSize/Math.pow(1024,e)).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}`}},updated(){var e=this.excludeDocuments.filter((e=>e.document_key__document_description==this.documentDescriptionModel));this.disableUploadButton=""==this.documentModel||0==this.documentDescriptionModel.length||e.length>0},mounted(){setTimeout((()=>{b().post(`${this.rootUrl}documentation/get/max_upload/`).then((e=>{this.maxUploadSize=e.data.max_upload_size})).catch((e=>{this.showErrorModal(e,this.destination)}))}),200)}},Qe=(0,q.Z)(Je,[["render",function(e,t,o,d,l,r){const a=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",_e,[(0,n._)("div",ye,[(0,n._)("div",ve,[(0,n._)("div",De,[(0,n._)("h2",null,[(0,n.Wm)(a,{icon:e.icons.userIcon},null,8,["icon"]),be]),ke]),(0,n._)("div",Fe,[(0,n._)("div",Le,[(0,n._)("div",we,[Me,(0,n._)("p",Ue," You will be able to upload a file against this "+(0,i.toDisplayString)(o.destination)+". It will appear in the current folder. ",1),0===l.documentModel.length?((0,n.wg)(),(0,n.iD)("p",xe,' 1. Please click on "Upload File" button to upload a file ')):""===l.uploadPercentage?((0,n.wg)(),(0,n.iD)("p",Ie,' 2. Please modify the document descript to be more human readable. Or click the "Reset" button to remove the uploaded file. ')):((0,n.wg)(),(0,n.iD)("p",Se," 3. Document is currently uploading. Please be patient. "))]),(0,n._)("div",Ce,[0===l.documentModel.length?((0,n.wg)(),(0,n.iD)("div",Ee,[(0,n._)("div",Be,[(0,n._)("label",Ze,[Ae,Oe,(0,n.Uk)(" "+(0,i.toDisplayString)(l.maxUploadString)+" ",1),l.maxUploadWarning?((0,n.wg)(),(0,n.iD)("div",Pe," Sorry - file too large ")):(0,n.kq)("v-if",!0)]),(0,n._)("input",{type:"file",class:"form-control",id:"document",accept:o.acceptedDocuments,onChange:t[0]||(t[0]=e=>r.handleFileUploads(e.target.files))},null,40,Te)])])):""==l.uploadPercentage?((0,n.wg)(),(0,n.iD)("div",Re,[(0,n.kq)(" DOCUMENT DESCRIPTION "),(0,n._)("div",$e,[Ne,(0,n.wy)((0,n._)("input",{id:"documentDescription","onUpdate:modelValue":t[1]||(t[1]=e=>l.documentDescriptionModel=e),type:"text",class:"form-control"},null,512),[[L.vModelText,l.documentDescriptionModel]])]),(0,n.kq)(" RESET FORM BUTTON "),We,(0,n._)("div",ze,[(0,n._)("button",{onClick:t[2]||(t[2]=(...e)=>r.resetForm&&r.resetForm(...e)),class:"btn btn-warning"}," Reset Form ")])])):((0,n.wg)(),(0,n.iD)("div",qe,[(0,n.kq)(" THE UPLOAD SPINNER "),parseFloat(l.uploadPercentage).toFixed(0)<1?((0,n.wg)(),(0,n.iD)("div",He,[(0,n.Uk)(" Uploading "+(0,i.toDisplayString)((100*parseFloat(l.uploadPercentage)).toFixed(2))+"% ",1),Ve])):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.kq)(" THE FINAL WRITING "),je],2112))]))])])]),(0,n._)("div",Ye,[Ke,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:l.disableUploadButton,onClick:t[3]||(t[3]=(...e)=>r.uploadFile&&r.uploadFile(...e))}," Upload File ",8,Ge)])])])])}]]),Xe={name:"DocumentsModule",components:{AddFolderWizard:H,AddLinkWizard:ge,Icon:F.JO,UploadDocumentWizard:Qe},props:{overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0}},data:()=>({currentFolder:null,documentList:[],documentFilteredList:[],folderList:[],folderFilteredList:[]}),mixins:[W.Z],computed:{...(0,$.Se)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},watch:{overrideLocationId(){this.getDocumentList(),this.getFolderList()}},methods:{addFolder(){new k.u_(document.getElementById("addFolderModal")).show()},addLink(){new k.u_(document.getElementById("addLinkModal")).show()},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getDocumentList(){0!==this.getLocationId()&&b().post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/list/files/`).then((e=>{this.documentList=e.data,this.updateDocumentFilteredList()}))},getFolderList(){0!==this.getLocationId()&&b().post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/list/folders/`).then((e=>{this.folderList=e.data,this.updateFolderFilteredList()}))},getIcon(e){if(""!=e.document_key__document_url_location&&null!==e.document_key__document_url_location)return this.icons.linkOut;var t=e.document_key__document.split(".");switch(t[t.length-1]){case"jpg":case"png":case"bmp":return this.icons.imageIcon;case"doc":case"docx":return this.icons.microsoftWord;case"xls":case"xlsx":return this.icons.microsoftExcel;case"ppt":case"pptx":return this.icons.microsoftPowerpoint;case"pdf":return this.icons.documentPdf;default:return this.icons.documentText}},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},goToParentDirectory(){var e=this.folderList.filter((e=>e.pk==this.currentFolder))[0];this.updateCurrentFolder(e.fields.parent_folder)},removeDocument(e){const t=new FormData;t.set("document_key",e),b().post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/remove/`,t).then((()=>{this.documentList=this.documentList.filter((t=>t.document_key_id!==e)),this.updateDocumentFilteredList()}))},shortName:e=>e.length<=50?e:`${e.substring(0,47)}...`,updateCurrentFolder(e){this.currentFolder=e,this.updateDocumentFilteredList(),this.updateFolderFilteredList()},updateDocumentList(e){this.documentList.push(e[0]),this.updateDocumentFilteredList()},updateDocumentFilteredList(){this.documentFilteredList=this.documentList.filter((e=>e.folder==this.currentFolder)).sort(((e,t)=>e.document_key__document_description>t.document_key__document_description))},updateFolderList(e){this.folderList.push(e[0]),this.updateFolderFilteredList()},updateFolderFilteredList(){this.folderFilteredList=this.folderList.filter((e=>e.fields.parent_folder==this.currentFolder)).sort(((e,t)=>e.fields.folder_description>t.fields.folder_description))},uploadDocument(){new k.u_(document.getElementById("uploadDocumentModal")).show()}},mounted(){setTimeout((()=>{this.getDocumentList(),this.getFolderList()}),200)}},et=(0,q.Z)(Xe,[["render",function(e,t,o,D,b,k){const F=(0,n.up)("Icon"),L=(0,n.up)("add-folder-wizard"),w=(0,n.up)("add-link-wizard"),M=(0,n.up)("upload-document-wizard");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h2",null,[(0,n.Wm)(F,{icon:e.icons.bxBriefcase},null,8,["icon"]),d]),(0,n._)("p",l," The following is a folder structure of all documents uploaded to this "+(0,i.toDisplayString)(this.getDestination()),1),(0,n.kq)(" DOCUMENT FOLDER TREE "),b.documentList.length+b.folderList.length==0?((0,n.wg)(),(0,n.iD)("div",r,a)):((0,n.wg)(),(0,n.iD)("div",s,[(0,n.kq)(" GO TO PARENT DIRECTORY "),null!=this.currentFolder?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:t[0]||(t[0]=e=>k.goToParentDirectory()),class:"document--child"},[(0,n.Wm)(F,{icon:e.icons.arrowUp,width:"80px",height:"80px"},null,8,["icon"]),c])):(0,n.kq)("v-if",!0),(0,n.kq)(" RENDER THE FOLDERS "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(b.folderFilteredList,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.pk,onClick:e=>k.updateCurrentFolder(t.pk),class:"document--child"},[(0,n.Wm)(F,{icon:e.icons.folderIcon,width:"80px",height:"80px"},null,8,["icon"]),(0,n._)("p",p,(0,i.toDisplayString)(k.shortName(t.fields.folder_description)),1)],8,u)))),128)),(0,n.kq)(" RENDER THE FILES "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(b.documentFilteredList,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.document_key_id,class:"document--child"},[(0,n._)("a",{href:`/private/${t.document_key_id}/`,rel:"noopener noreferrer",target:"_blank"},[(0,n.Wm)(F,{icon:k.getIcon(t),width:"80px",height:"80px"},null,8,["icon"]),(0,n._)("p",h,(0,i.toDisplayString)(k.shortName(t.document_key__document_description)),1)],8,m),(0,n.kq)(" REMOVE DOCUMENT "),e.userLevel>=2?((0,n.wg)(),(0,n.iD)("div",f,[(0,n.Wm)(F,{icon:e.icons.trashCan,onClick:e=>k.removeDocument(t.document_key_id)},null,8,["icon","onClick"])])):(0,n.kq)("v-if",!0)])))),128))])),(0,n.kq)(" ADD DOCUMENTS AND FOLDER BUTTON "),g,(0,n._)("div",_,[e.userLevel>1?((0,n.wg)(),(0,n.iD)("button",y," New Document/File ")):(0,n.kq)("v-if",!0),(0,n._)("ul",v,[(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[1]||(t[1]=(...e)=>k.uploadDocument&&k.uploadDocument(...e))}," Upload Document ")]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[2]||(t[2]=(...e)=>k.addLink&&k.addLink(...e))}," Add Link ")]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[3]||(t[3]=(...e)=>k.addFolder&&k.addFolder(...e))}," Add Folder ")])])]),(0,n.kq)(" MODALS "),(0,n.kq)(" ADD FOLDER ID "),(0,n.Wm)(L,{destination:k.getDestination(),"location-id":e.locationId,"current-folder":b.currentFolder,"existing-folders":b.folderFilteredList,onUpdate_folder_list:t[4]||(t[4]=e=>k.updateFolderList(e))},null,8,["destination","location-id","current-folder","existing-folders"]),(0,n.kq)(" ADD LINK WIZARD "),(0,n.Wm)(w,{destination:k.getDestination(),"location-id":e.locationId,"current-folder":b.currentFolder,"exclude-documents":b.documentFilteredList,onUpdate_document_list:t[5]||(t[5]=e=>k.updateDocumentList(e))},null,8,["destination","location-id","current-folder","exclude-documents"]),(0,n.kq)(" UPLOAD DOCUMENT WIZARD "),(0,n.Wm)(M,{destination:k.getDestination(),"location-id":e.locationId,"current-folder":b.currentFolder,"exclude-documents":b.documentFilteredList,onUpdate_document_list:t[6]||(t[6]=e=>k.updateDocumentList(e))},null,8,["destination","location-id","current-folder","exclude-documents"])])}]])},6182:(e,t,o)=>{o.d(t,{Z:()=>h});var n=o(6252),i=o(3577);const d={key:0,class:"module-spacer"},l={class:"alert alert-dark"},r={key:1},a={class:"table"},s=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("td",null,"Note")])],-1),c=["innerHTML"],u=(0,n._)("div",{class:"spacer"},null,-1),p={class:"small-text"},m={name:"ListNotes",props:{destination:{type:String,default:""},noteHistoryResults:{type:Array,default:()=>[]}}},h=(0,o(3744).Z)(m,[["render",function(e,t,o,m,h,f){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.kq)(" NOTE HISTORY "),0==o.noteHistoryResults.length?((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",l," Sorry - but there are no notes for this "+(0,i.toDisplayString)(o.destination)+". ",1)])):((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("table",a,[s,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.noteHistoryResults,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.pk},[(0,n._)("td",null,[(0,n._)("div",{innerHTML:e.fields.object_note},null,8,c),u,(0,n._)("p",p,(0,i.toDisplayString)(e.fields.date_created),1)])])))),128))])])]))])}]])},212:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(6252),i=o(3577);const d={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},l=(0,o(3744).Z)(d,[["render",function(e,t,o,d,l,r){return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.errorList,(e=>((0,n.wg)(),(0,n.iD)("span",{class:"error",key:e.$uid},(0,i.toDisplayString)(e.$message),1)))),128)}]])},3058:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(5169);const i={methods:{showErrorModal(e,t,o){new n.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${t}-${o}<hr>${e}`,new n.u_(document.getElementById("errorModal")).show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new n.u_(document.getElementById("errorModal")).show()}}}},5808:(e,t,o)=>{o.d(t,{Z:()=>x});var n=o(3985),i=o(5555),d=o(1826),l=o(6443),r=o(1327),a=o(8521),s=o(1056),c=o(4324),u=o(9672),p=o(9867),m=o(1239),h=o(5004),f=o(1321),g=o(1216),_=o(5550),y=o(7702),v=o(7903),D=o(2606),b=o(3843),k=o(2393),F=o(3360),L=o(9714),w=o(1323),M=o(2610),U=o(5968);const x={data:()=>({icons:{arrowUp:n.Z,bugIcon:i.Z,bxBriefcase:d.Z,cardChecklist:l.Z,clipboardIcon:r.Z,documentPdf:a.Z,documentText:s.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:p.Z,infoCircle:m.Z,linkIcon:h.Z,linkIcon2:f.Z,linkOut:g.Z,mailIcon:_.Z,microsoftExcel:y.Z,microsoftPowerpoint:v.Z,microsoftWord:D.Z,noteAdd:b.Z,objectStorage:k.Z,passwordIcon:F.Z,trashCan:L.Z,userIcon:w.Z,usersIcon:M.Z,xCircle:U.Z}})}}}]);