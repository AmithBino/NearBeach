"use strict";
(self["webpackChunknearbeach"] = self["webpackChunknearbeach"] || []).push([["vendors-node_modules_naive-ui_es_select_src_Select_js"],{

/***/ "./node_modules/naive-ui/es/_internal/clear/src/Clear.js":
/*!***************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/clear/src/Clear.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/vue/resolve-slot.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-style.js");
/* harmony import */ var _icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../icons */ "./node_modules/naive-ui/es/_internal/icons/Clear.js");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../icon */ "./node_modules/naive-ui/es/_internal/icon/src/Icon.js");
/* harmony import */ var _icon_switch_transition__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../icon-switch-transition */ "./node_modules/naive-ui/es/_internal/icon-switch-transition/src/IconSwitchTransition.js");
/* harmony import */ var _styles_index_cssr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles/index.cssr */ "./node_modules/naive-ui/es/_internal/clear/src/styles/index.cssr.js");







/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'BaseClear',
    props: {
        clsPrefix: {
            type: String,
            required: true
        },
        show: Boolean,
        onClear: Function
    },
    setup(props) {
        (0,_mixins__WEBPACK_IMPORTED_MODULE_1__["default"])('-base-clear', _styles_index_cssr__WEBPACK_IMPORTED_MODULE_2__["default"], (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'clsPrefix'));
        return {
            handleMouseDown(e) {
                e.preventDefault();
            }
        };
    },
    render() {
        const { clsPrefix } = this;
        return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-clear` },
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_icon_switch_transition__WEBPACK_IMPORTED_MODULE_3__["default"], null, {
                default: () => {
                    var _a, _b;
                    return this.show ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { key: "dismiss", class: `${clsPrefix}-base-clear__clear`, onClick: this.onClear, onMousedown: this.handleMouseDown, "data-clear": true }, (0,_utils__WEBPACK_IMPORTED_MODULE_4__.resolveSlot)(this.$slots.icon, () => [
                        (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_icon__WEBPACK_IMPORTED_MODULE_5__["default"], { clsPrefix: clsPrefix }, {
                            default: () => (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_icons__WEBPACK_IMPORTED_MODULE_6__["default"], null)
                        })
                    ]))) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { key: "icon", class: `${clsPrefix}-base-clear__placeholder` }, (_b = (_a = this.$slots).placeholder) === null || _b === void 0 ? void 0 : _b.call(_a)));
                }
            })));
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/clear/src/styles/index.cssr.js":
/*!***************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/clear/src/styles/index.cssr.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_cssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../_utils/cssr */ "./node_modules/naive-ui/es/_utils/cssr/index.js");
/* harmony import */ var _styles_transitions_icon_switch_cssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../_styles/transitions/icon-switch.cssr */ "./node_modules/naive-ui/es/_styles/transitions/icon-switch.cssr.js");


// vars:
// --n-bezier
// --n-clear-color
// --n-clear-size
// --n-clear-color-hover
// --n-clear-color-pressed
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-clear', `
 flex-shrink: 0;
 height: 1em;
 width: 1em;
 position: relative;
`, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('>', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('clear', `
 font-size: var(--n-clear-size);
 height: 1em;
 width: 1em;
 cursor: pointer;
 color: var(--n-clear-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:hover', `
 color: var(--n-clear-color-hover)!important;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:active', `
 color: var(--n-clear-color-pressed)!important;
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('placeholder', `
 display: flex;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('clear, placeholder', `
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `, [(0,_styles_transitions_icon_switch_cssr__WEBPACK_IMPORTED_MODULE_1__.iconSwitchTransition)({
  originalTransform: 'translateX(-50%) translateY(-50%)',
  left: '50%',
  top: '50%'
})])])]));

/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/close/src/Close.js":
/*!***************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/close/src/Close.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-style.js");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../icon */ "./node_modules/naive-ui/es/_internal/icon/src/Icon.js");
/* harmony import */ var _icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../icons */ "./node_modules/naive-ui/es/_internal/icons/Close.js");
/* harmony import */ var _styles_index_cssr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles/index.cssr */ "./node_modules/naive-ui/es/_internal/close/src/styles/index.cssr.js");





/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'BaseClose',
    props: {
        isButtonTag: {
            type: Boolean,
            default: true
        },
        clsPrefix: {
            type: String,
            required: true
        },
        disabled: {
            type: Boolean,
            default: undefined
        },
        focusable: {
            type: Boolean,
            default: true
        },
        round: Boolean,
        onClick: Function,
        absolute: Boolean
    },
    setup(props) {
        (0,_mixins__WEBPACK_IMPORTED_MODULE_1__["default"])('-base-close', _styles_index_cssr__WEBPACK_IMPORTED_MODULE_2__["default"], (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'clsPrefix'));
        return () => {
            const { clsPrefix, disabled, absolute, round, isButtonTag } = props;
            const Tag = isButtonTag ? 'button' : 'div';
            return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(Tag, { type: isButtonTag ? 'button' : undefined, tabindex: disabled || !props.focusable ? -1 : 0, "aria-disabled": disabled, "aria-label": "close", role: isButtonTag ? undefined : 'button', disabled: disabled, class: [
                    `${clsPrefix}-base-close`,
                    absolute && `${clsPrefix}-base-close--absolute`,
                    disabled && `${clsPrefix}-base-close--disabled`,
                    round && `${clsPrefix}-base-close--round`
                ], onMousedown: (e) => {
                    if (!props.focusable) {
                        e.preventDefault();
                    }
                }, onClick: props.onClick },
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_icon__WEBPACK_IMPORTED_MODULE_3__["default"], { clsPrefix: clsPrefix }, {
                    default: () => (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_icons__WEBPACK_IMPORTED_MODULE_4__["default"], null)
                })));
        };
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/close/src/styles/index.cssr.js":
/*!***************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/close/src/styles/index.cssr.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_cssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../_utils/cssr */ "./node_modules/naive-ui/es/_utils/cssr/index.js");

// vars:
// --n-close-border-radius
// --n-close-color-hover
// --n-close-color-pressed
// --n-close-icon-color
// --n-close-icon-color-hover
// --n-close-icon-color-pressed
// --n-close-icon-color-disabled
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-close', `
 display: flex;
 align-items: center;
 justify-content: center;
 cursor: pointer;
 background-color: transparent;
 color: var(--n-close-icon-color);
 border-radius: var(--n-close-border-radius);
 height: var(--n-close-size);
 width: var(--n-close-size);
 font-size: var(--n-close-icon-size);
 outline: none;
 border: none;
 position: relative;
 padding: 0;
`, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('absolute', `
 height: var(--n-close-icon-size);
 width: var(--n-close-icon-size);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&::before', `
 content: "";
 position: absolute;
 width: var(--n-close-size);
 height: var(--n-close-size);
 left: 50%;
 top: 50%;
 transform: translateY(-50%) translateX(-50%);
 transition: inherit;
 border-radius: inherit;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cNotM)('disabled', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:hover', `
 color: var(--n-close-icon-color-hover);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:hover::before', `
 background-color: var(--n-close-color-hover);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:focus::before', `
 background-color: var(--n-close-color-hover);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:active', `
 color: var(--n-close-icon-color-pressed);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:active::before', `
 background-color: var(--n-close-color-pressed);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('disabled', `
 cursor: not-allowed;
 color: var(--n-close-icon-color-disabled);
 background-color: transparent;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('round', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&::before', `
 border-radius: 50%;
 `)])]));

/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/focus-detector/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/focus-detector/index.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_FocusDetector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/FocusDetector */ "./node_modules/naive-ui/es/_internal/focus-detector/src/FocusDetector.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_src_FocusDetector__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/focus-detector/src/FocusDetector.js":
/*!********************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/focus-detector/src/FocusDetector.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    props: {
        onFocus: Function,
        onBlur: Function
    },
    setup(props) {
        return () => ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { style: "width: 0; height: 0", tabindex: 0, onFocus: props.onFocus, onBlur: props.onBlur }));
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/icons/Checkmark.js":
/*!***************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/icons/Checkmark.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'Checkmark',
    render() {
        return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 16 16" },
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("g", { fill: "none" },
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z", fill: "currentColor" }))));
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/icons/ChevronDown.js":
/*!*****************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/icons/ChevronDown.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'ChevronDown',
    render() {
        return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { viewBox: "0 0 16 16", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z", fill: "currentColor" })));
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/icons/Clear.js":
/*!***********************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/icons/Clear.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var _replaceable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./replaceable */ "./node_modules/naive-ui/es/_internal/icons/replaceable.js");


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_replaceable__WEBPACK_IMPORTED_MODULE_1__.replaceable)('clear', (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { viewBox: "0 0 16 16", version: "1.1", xmlns: "http://www.w3.org/2000/svg" },
    (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("g", { stroke: "none", "stroke-width": "1", fill: "none", "fill-rule": "evenodd" },
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("g", { fill: "currentColor", "fill-rule": "nonzero" },
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z" }))))));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/icons/Close.js":
/*!***********************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/icons/Close.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var _replaceable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./replaceable */ "./node_modules/naive-ui/es/_internal/icons/replaceable.js");


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_replaceable__WEBPACK_IMPORTED_MODULE_1__.replaceable)('close', (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { viewBox: "0 0 12 12", version: "1.1", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": true },
    (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("g", { stroke: "none", "stroke-width": "1", fill: "none", "fill-rule": "evenodd" },
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("g", { fill: "currentColor", "fill-rule": "nonzero" },
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z" }))))));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/icons/Empty.js":
/*!***********************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/icons/Empty.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'Empty',
    render() {
        return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { viewBox: "0 0 28 28", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z", fill: "currentColor" }),
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z", fill: "currentColor" })));
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/select-menu/src/SelectGroupHeader.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/select-menu/src/SelectGroupHeader.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/vue/render.js");
/* harmony import */ var _interface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interface */ "./node_modules/naive-ui/es/_internal/select-menu/src/interface.js");



/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'NBaseSelectGroupHeader',
    props: {
        clsPrefix: {
            type: String,
            required: true
        },
        tmNode: {
            type: Object,
            required: true
        }
    },
    setup() {
        const { renderLabelRef, renderOptionRef, labelFieldRef, nodePropsRef
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
         } = (0,vue__WEBPACK_IMPORTED_MODULE_0__.inject)(_interface__WEBPACK_IMPORTED_MODULE_1__.internalSelectionMenuInjectionKey);
        return {
            labelField: labelFieldRef,
            nodeProps: nodePropsRef,
            renderLabel: renderLabelRef,
            renderOption: renderOptionRef
        };
    },
    render() {
        const { clsPrefix, renderLabel, renderOption, nodeProps, tmNode: { rawNode } } = this;
        const attrs = nodeProps === null || nodeProps === void 0 ? void 0 : nodeProps(rawNode);
        const children = renderLabel
            ? renderLabel(rawNode, false)
            : (0,_utils__WEBPACK_IMPORTED_MODULE_2__.render)(rawNode[this.labelField], rawNode, false);
        const node = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", Object.assign({}, attrs, { class: [`${clsPrefix}-base-select-group-header`, attrs === null || attrs === void 0 ? void 0 : attrs.class] }), children));
        return rawNode.render
            ? rawNode.render({ node, option: rawNode })
            : renderOption
                ? renderOption({ node, option: rawNode, selected: false })
                : node;
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/select-menu/src/SelectMenu.js":
/*!**************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/select-menu/src/SelectMenu.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var treemate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! treemate */ "./node_modules/treemate/es/utils.js");
/* harmony import */ var vueuc__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! vueuc */ "./node_modules/vueuc/es/virtual-list/src/VirtualList.js");
/* harmony import */ var seemly__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! seemly */ "./node_modules/seemly/es/css/index.js");
/* harmony import */ var seemly__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! seemly */ "./node_modules/seemly/es/dom/happens-in.js");
/* harmony import */ var _empty__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../empty */ "./node_modules/naive-ui/es/empty/src/Empty.js");
/* harmony import */ var _scrollbar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../scrollbar */ "./node_modules/naive-ui/es/_internal/scrollbar/src/Scrollbar.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/composable/use-resize.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/vue/resolve-slot.js");
/* harmony import */ var _utils_cssr__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../_utils/cssr */ "./node_modules/naive-ui/es/_utils/cssr/create-key.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-theme.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-css-vars-class.js");
/* harmony import */ var _loading__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../loading */ "./node_modules/naive-ui/es/_internal/loading/src/Loading.js");
/* harmony import */ var _focus_detector__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../focus-detector */ "./node_modules/naive-ui/es/_internal/focus-detector/index.js");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles */ "./node_modules/naive-ui/es/_internal/select-menu/styles/light.js");
/* harmony import */ var _SelectOption__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./SelectOption */ "./node_modules/naive-ui/es/_internal/select-menu/src/SelectOption.js");
/* harmony import */ var _SelectGroupHeader__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./SelectGroupHeader */ "./node_modules/naive-ui/es/_internal/select-menu/src/SelectGroupHeader.js");
/* harmony import */ var _interface__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./interface */ "./node_modules/naive-ui/es/_internal/select-menu/src/interface.js");
/* harmony import */ var _styles_index_cssr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles/index.cssr */ "./node_modules/naive-ui/es/_internal/select-menu/src/styles/index.cssr.js");
















/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'InternalSelectMenu',
    props: Object.assign(Object.assign({}, _mixins__WEBPACK_IMPORTED_MODULE_1__["default"].props), { clsPrefix: {
            type: String,
            required: true
        }, scrollable: {
            type: Boolean,
            default: true
        }, treeMate: {
            type: Object,
            required: true
        }, multiple: Boolean, size: {
            type: String,
            default: 'medium'
        }, value: {
            type: [String, Number, Array],
            default: null
        }, autoPending: Boolean, virtualScroll: {
            type: Boolean,
            default: true
        }, 
        // show is used to toggle pending state initialization
        show: {
            type: Boolean,
            default: true
        }, labelField: {
            type: String,
            default: 'label'
        }, valueField: {
            type: String,
            default: 'value'
        }, loading: Boolean, focusable: Boolean, renderLabel: Function, renderOption: Function, nodeProps: Function, showCheckmark: { type: Boolean, default: true }, onMousedown: Function, onScroll: Function, onFocus: Function, onBlur: Function, onKeyup: Function, onKeydown: Function, onTabOut: Function, onMouseenter: Function, onMouseleave: Function, onResize: Function, resetMenuOnOptionsChange: {
            type: Boolean,
            default: true
        }, inlineThemeDisabled: Boolean, 
        // deprecated
        onToggle: Function }),
    setup(props) {
        const themeRef = (0,_mixins__WEBPACK_IMPORTED_MODULE_1__["default"])('InternalSelectMenu', '-internal-select-menu', _styles_index_cssr__WEBPACK_IMPORTED_MODULE_2__["default"], _styles__WEBPACK_IMPORTED_MODULE_3__["default"], props, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'clsPrefix'));
        const selfRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const virtualListRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const scrollbarRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const flattenedNodesRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => props.treeMate.getFlattenedNodes());
        const fIndexGetterRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => (0,treemate__WEBPACK_IMPORTED_MODULE_4__.createIndexGetter)(flattenedNodesRef.value));
        const pendingNodeRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        function initPendingNode() {
            const { treeMate } = props;
            let defaultPendingNode = null;
            const { value } = props;
            if (value === null) {
                defaultPendingNode = treeMate.getFirstAvailableNode();
            }
            else {
                if (props.multiple) {
                    defaultPendingNode = treeMate.getNode((value || [])[(value || []).length - 1]);
                }
                else {
                    defaultPendingNode = treeMate.getNode(value);
                }
                if (!defaultPendingNode || defaultPendingNode.disabled) {
                    defaultPendingNode = treeMate.getFirstAvailableNode();
                }
            }
            if (defaultPendingNode) {
                setPendingTmNode(defaultPendingNode);
            }
            else {
                setPendingTmNode(null);
            }
        }
        function clearPendingNodeIfInvalid() {
            const { value: pendingNode } = pendingNodeRef;
            if (pendingNode && !props.treeMate.getNode(pendingNode.key)) {
                pendingNodeRef.value = null;
            }
        }
        let initPendingNodeWatchStopHandle;
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)(() => props.show, (show) => {
            if (show) {
                initPendingNodeWatchStopHandle = (0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)(() => props.treeMate, () => {
                    if (props.resetMenuOnOptionsChange) {
                        if (props.autoPending) {
                            initPendingNode();
                        }
                        else {
                            clearPendingNodeIfInvalid();
                        }
                        void (0,vue__WEBPACK_IMPORTED_MODULE_0__.nextTick)(scrollToPendingNode);
                    }
                    else {
                        clearPendingNodeIfInvalid();
                    }
                }, {
                    immediate: true
                });
            }
            else {
                initPendingNodeWatchStopHandle === null || initPendingNodeWatchStopHandle === void 0 ? void 0 : initPendingNodeWatchStopHandle();
            }
        }, {
            immediate: true
        });
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.onBeforeUnmount)(() => {
            initPendingNodeWatchStopHandle === null || initPendingNodeWatchStopHandle === void 0 ? void 0 : initPendingNodeWatchStopHandle();
        });
        const itemSizeRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            return (0,seemly__WEBPACK_IMPORTED_MODULE_5__.depx)(themeRef.value.self[(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_6__.createKey)('optionHeight', props.size)]);
        });
        const paddingRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            return (0,seemly__WEBPACK_IMPORTED_MODULE_5__.getPadding)(themeRef.value.self[(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_6__.createKey)('padding', props.size)]);
        });
        const valueSetRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            if (props.multiple && Array.isArray(props.value)) {
                return new Set(props.value);
            }
            return new Set();
        });
        const emptyRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const tmNodes = flattenedNodesRef.value;
            return tmNodes && tmNodes.length === 0;
        });
        function doToggle(tmNode) {
            const { onToggle } = props;
            if (onToggle)
                onToggle(tmNode);
        }
        function doScroll(e) {
            const { onScroll } = props;
            if (onScroll)
                onScroll(e);
        }
        // required, scroller sync need to be triggered manually
        function handleVirtualListScroll(e) {
            var _a;
            (_a = scrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();
            doScroll(e);
        }
        function handleVirtualListResize() {
            var _a;
            (_a = scrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();
        }
        function getPendingTmNode() {
            const { value: pendingTmNode } = pendingNodeRef;
            if (pendingTmNode)
                return pendingTmNode;
            return null;
        }
        function handleOptionMouseEnter(e, tmNode) {
            if (tmNode.disabled)
                return;
            setPendingTmNode(tmNode, false);
        }
        function handleOptionClick(e, tmNode) {
            if (tmNode.disabled)
                return;
            doToggle(tmNode);
        }
        // keyboard related methods
        function handleKeyUp(e) {
            var _a;
            if ((0,seemly__WEBPACK_IMPORTED_MODULE_7__.happensIn)(e, 'action'))
                return;
            (_a = props.onKeyup) === null || _a === void 0 ? void 0 : _a.call(props, e);
        }
        function handleKeyDown(e) {
            var _a;
            if ((0,seemly__WEBPACK_IMPORTED_MODULE_7__.happensIn)(e, 'action'))
                return;
            (_a = props.onKeydown) === null || _a === void 0 ? void 0 : _a.call(props, e);
        }
        function handleMouseDown(e) {
            var _a;
            (_a = props.onMousedown) === null || _a === void 0 ? void 0 : _a.call(props, e);
            if (props.focusable)
                return;
            e.preventDefault();
        }
        function next() {
            const { value: pendingTmNode } = pendingNodeRef;
            if (pendingTmNode) {
                setPendingTmNode(pendingTmNode.getNext({ loop: true }), true);
            }
        }
        function prev() {
            const { value: pendingTmNode } = pendingNodeRef;
            if (pendingTmNode) {
                setPendingTmNode(pendingTmNode.getPrev({ loop: true }), true);
            }
        }
        function setPendingTmNode(tmNode, doScroll = false) {
            pendingNodeRef.value = tmNode;
            if (doScroll)
                scrollToPendingNode();
        }
        function scrollToPendingNode() {
            var _a, _b;
            const tmNode = pendingNodeRef.value;
            if (!tmNode)
                return;
            const fIndex = fIndexGetterRef.value(tmNode.key);
            if (fIndex === null)
                return;
            if (props.virtualScroll) {
                (_a = virtualListRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo({ index: fIndex });
            }
            else {
                (_b = scrollbarRef.value) === null || _b === void 0 ? void 0 : _b.scrollTo({
                    index: fIndex,
                    elSize: itemSizeRef.value
                });
            }
        }
        function handleFocusin(e) {
            var _a, _b;
            if ((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.target)) {
                (_b = props.onFocus) === null || _b === void 0 ? void 0 : _b.call(props, e);
            }
        }
        function handleFocusout(e) {
            var _a, _b;
            if (!((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))) {
                (_b = props.onBlur) === null || _b === void 0 ? void 0 : _b.call(props, e);
            }
        }
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.provide)(_interface__WEBPACK_IMPORTED_MODULE_8__.internalSelectionMenuInjectionKey, {
            handleOptionMouseEnter,
            handleOptionClick,
            valueSetRef,
            pendingTmNodeRef: pendingNodeRef,
            nodePropsRef: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'nodeProps'),
            showCheckmarkRef: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'showCheckmark'),
            multipleRef: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'multiple'),
            valueRef: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'value'),
            renderLabelRef: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'renderLabel'),
            renderOptionRef: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'renderOption'),
            labelFieldRef: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'labelField'),
            valueFieldRef: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'valueField')
        });
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.provide)(_interface__WEBPACK_IMPORTED_MODULE_8__.internalSelectionMenuBodyInjectionKey, selfRef);
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(() => {
            const { value } = scrollbarRef;
            if (value)
                value.sync();
        });
        const cssVarsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { size } = props;
            const { common: { cubicBezierEaseInOut }, self: { height, borderRadius, color, groupHeaderTextColor, actionDividerColor, optionTextColorPressed, optionTextColor, optionTextColorDisabled, optionTextColorActive, optionOpacityDisabled, optionCheckColor, actionTextColor, optionColorPending, optionColorActive, loadingColor, loadingSize, optionColorActivePending, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_6__.createKey)('optionFontSize', size)]: fontSize, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_6__.createKey)('optionHeight', size)]: optionHeight, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_6__.createKey)('optionPadding', size)]: optionPadding } } = themeRef.value;
            return {
                '--n-height': height,
                '--n-action-divider-color': actionDividerColor,
                '--n-action-text-color': actionTextColor,
                '--n-bezier': cubicBezierEaseInOut,
                '--n-border-radius': borderRadius,
                '--n-color': color,
                '--n-option-font-size': fontSize,
                '--n-group-header-text-color': groupHeaderTextColor,
                '--n-option-check-color': optionCheckColor,
                '--n-option-color-pending': optionColorPending,
                '--n-option-color-active': optionColorActive,
                '--n-option-color-active-pending': optionColorActivePending,
                '--n-option-height': optionHeight,
                '--n-option-opacity-disabled': optionOpacityDisabled,
                '--n-option-text-color': optionTextColor,
                '--n-option-text-color-active': optionTextColorActive,
                '--n-option-text-color-disabled': optionTextColorDisabled,
                '--n-option-text-color-pressed': optionTextColorPressed,
                '--n-option-padding': optionPadding,
                '--n-option-padding-left': (0,seemly__WEBPACK_IMPORTED_MODULE_5__.getPadding)(optionPadding, 'left'),
                '--n-option-padding-right': (0,seemly__WEBPACK_IMPORTED_MODULE_5__.getPadding)(optionPadding, 'right'),
                '--n-loading-color': loadingColor,
                '--n-loading-size': loadingSize
            };
        });
        const { inlineThemeDisabled } = props;
        const themeClassHandle = inlineThemeDisabled
            ? (0,_mixins__WEBPACK_IMPORTED_MODULE_9__.useThemeClass)('internal-select-menu', (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => props.size[0]), cssVarsRef, props)
            : undefined;
        const exposedProps = {
            selfRef,
            next,
            prev,
            getPendingTmNode
        };
        (0,_utils__WEBPACK_IMPORTED_MODULE_10__.useOnResize)(selfRef, props.onResize);
        return Object.assign({ mergedTheme: themeRef, virtualListRef,
            scrollbarRef, itemSize: itemSizeRef, padding: paddingRef, flattenedNodes: flattenedNodesRef, empty: emptyRef, virtualListContainer() {
                const { value } = virtualListRef;
                return value === null || value === void 0 ? void 0 : value.listElRef;
            },
            virtualListContent() {
                const { value } = virtualListRef;
                return value === null || value === void 0 ? void 0 : value.itemsElRef;
            },
            doScroll,
            handleFocusin,
            handleFocusout,
            handleKeyUp,
            handleKeyDown,
            handleMouseDown,
            handleVirtualListResize,
            handleVirtualListScroll, cssVars: inlineThemeDisabled ? undefined : cssVarsRef, themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass, onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender }, exposedProps);
    },
    render() {
        const { $slots, virtualScroll, clsPrefix, mergedTheme, themeClass, onRender } = this;
        onRender === null || onRender === void 0 ? void 0 : onRender();
        return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { ref: "selfRef", tabindex: this.focusable ? 0 : -1, class: [
                `${clsPrefix}-base-select-menu`,
                themeClass,
                this.multiple && `${clsPrefix}-base-select-menu--multiple`
            ], style: this.cssVars, onFocusin: this.handleFocusin, onFocusout: this.handleFocusout, onKeyup: this.handleKeyUp, onKeydown: this.handleKeyDown, onMousedown: this.handleMouseDown, onMouseenter: this.onMouseenter, onMouseleave: this.onMouseleave },
            this.loading ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-select-menu__loading` },
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_loading__WEBPACK_IMPORTED_MODULE_11__["default"], { clsPrefix: clsPrefix, strokeWidth: 20 }))) : !this.empty ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_scrollbar__WEBPACK_IMPORTED_MODULE_12__["default"], { ref: "scrollbarRef", theme: mergedTheme.peers.Scrollbar, themeOverrides: mergedTheme.peerOverrides.Scrollbar, scrollable: this.scrollable, container: virtualScroll ? this.virtualListContainer : undefined, content: virtualScroll ? this.virtualListContent : undefined, onScroll: virtualScroll ? undefined : this.doScroll }, {
                default: () => {
                    return virtualScroll ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(vueuc__WEBPACK_IMPORTED_MODULE_13__["default"], { ref: "virtualListRef", class: `${clsPrefix}-virtual-list`, items: this.flattenedNodes, itemSize: this.itemSize, showScrollbar: false, paddingTop: this.padding.top, paddingBottom: this.padding.bottom, onResize: this.handleVirtualListResize, onScroll: this.handleVirtualListScroll, itemResizable: true }, {
                        default: ({ item: tmNode }) => {
                            return tmNode.isGroup ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_SelectGroupHeader__WEBPACK_IMPORTED_MODULE_14__["default"], { key: tmNode.key, clsPrefix: clsPrefix, tmNode: tmNode })) : tmNode.ignored ? null : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_SelectOption__WEBPACK_IMPORTED_MODULE_15__["default"], { clsPrefix: clsPrefix, key: tmNode.key, tmNode: tmNode }));
                        }
                    })) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-select-menu-option-wrapper`, style: {
                            paddingTop: this.padding.top,
                            paddingBottom: this.padding.bottom
                        } }, this.flattenedNodes.map((tmNode) => tmNode.isGroup ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_SelectGroupHeader__WEBPACK_IMPORTED_MODULE_14__["default"], { key: tmNode.key, clsPrefix: clsPrefix, tmNode: tmNode })) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_SelectOption__WEBPACK_IMPORTED_MODULE_15__["default"], { clsPrefix: clsPrefix, key: tmNode.key, tmNode: tmNode })))));
                }
            })) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-select-menu__empty`, "data-empty": true }, (0,_utils__WEBPACK_IMPORTED_MODULE_16__.resolveSlot)($slots.empty, () => [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_empty__WEBPACK_IMPORTED_MODULE_17__["default"], { theme: mergedTheme.peers.Empty, themeOverrides: mergedTheme.peerOverrides.Empty })
            ]))),
            (0,_utils__WEBPACK_IMPORTED_MODULE_16__.resolveWrappedSlot)($slots.action, (children) => children && [
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-select-menu__action`, "data-action": true, key: "action" }, children),
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_focus_detector__WEBPACK_IMPORTED_MODULE_18__["default"], { onFocus: this.onTabOut, key: "focus-detector" })
            ])));
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/select-menu/src/SelectOption.js":
/*!****************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/select-menu/src/SelectOption.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var vooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! vooks */ "./node_modules/vooks/es/use-memo.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/vue/render.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/vue/merge-handlers.js");
/* harmony import */ var _icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../icons */ "./node_modules/naive-ui/es/_internal/icons/Checkmark.js");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../icon */ "./node_modules/naive-ui/es/_internal/icon/src/Icon.js");
/* harmony import */ var _interface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interface */ "./node_modules/naive-ui/es/_internal/select-menu/src/interface.js");






function renderCheckMark(show, clsPrefix) {
    return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(vue__WEBPACK_IMPORTED_MODULE_0__.Transition, { name: "fade-in-scale-up-transition" }, {
        default: () => show ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_icon__WEBPACK_IMPORTED_MODULE_1__["default"], { clsPrefix: clsPrefix, class: `${clsPrefix}-base-select-option__check` }, {
            default: () => (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_icons__WEBPACK_IMPORTED_MODULE_2__["default"])
        })) : null
    }));
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'NBaseSelectOption',
    props: {
        clsPrefix: {
            type: String,
            required: true
        },
        tmNode: {
            type: Object,
            required: true
        }
    },
    setup(props) {
        const { valueRef, pendingTmNodeRef, multipleRef, valueSetRef, renderLabelRef, renderOptionRef, labelFieldRef, valueFieldRef, showCheckmarkRef, nodePropsRef, handleOptionClick, handleOptionMouseEnter
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
         } = (0,vue__WEBPACK_IMPORTED_MODULE_0__.inject)(_interface__WEBPACK_IMPORTED_MODULE_3__.internalSelectionMenuInjectionKey);
        const isPendingRef = (0,vooks__WEBPACK_IMPORTED_MODULE_4__["default"])(() => {
            const { value: pendingTmNode } = pendingTmNodeRef;
            if (!pendingTmNode)
                return false;
            return props.tmNode.key === pendingTmNode.key;
        });
        function handleClick(e) {
            const { tmNode } = props;
            if (tmNode.disabled)
                return;
            handleOptionClick(e, tmNode);
        }
        function handleMouseEnter(e) {
            const { tmNode } = props;
            if (tmNode.disabled)
                return;
            handleOptionMouseEnter(e, tmNode);
        }
        function handleMouseMove(e) {
            const { tmNode } = props;
            const { value: isPending } = isPendingRef;
            if (tmNode.disabled || isPending)
                return;
            handleOptionMouseEnter(e, tmNode);
        }
        return {
            multiple: multipleRef,
            isGrouped: (0,vooks__WEBPACK_IMPORTED_MODULE_4__["default"])(() => {
                const { tmNode } = props;
                const { parent } = tmNode;
                return parent && parent.rawNode.type === 'group';
            }),
            showCheckmark: showCheckmarkRef,
            nodeProps: nodePropsRef,
            isPending: isPendingRef,
            isSelected: (0,vooks__WEBPACK_IMPORTED_MODULE_4__["default"])(() => {
                const { value } = valueRef;
                const { value: multiple } = multipleRef;
                if (value === null)
                    return false;
                const optionValue = props.tmNode.rawNode[valueFieldRef.value];
                if (multiple) {
                    const { value: valueSet } = valueSetRef;
                    return valueSet.has(optionValue);
                }
                else {
                    return value === optionValue;
                }
            }),
            labelField: labelFieldRef,
            renderLabel: renderLabelRef,
            renderOption: renderOptionRef,
            handleMouseMove,
            handleMouseEnter,
            handleClick
        };
    },
    render() {
        const { clsPrefix, tmNode: { rawNode }, isSelected, isPending, isGrouped, showCheckmark, nodeProps, renderOption, renderLabel, handleClick, handleMouseEnter, handleMouseMove } = this;
        const checkmark = renderCheckMark(isSelected, clsPrefix);
        const children = renderLabel
            ? [renderLabel(rawNode, isSelected), showCheckmark && checkmark]
            : [
                (0,_utils__WEBPACK_IMPORTED_MODULE_5__.render)(rawNode[this.labelField], rawNode, isSelected),
                showCheckmark && checkmark
            ];
        const attrs = nodeProps === null || nodeProps === void 0 ? void 0 : nodeProps(rawNode);
        const node = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", Object.assign({}, attrs, { class: [
                `${clsPrefix}-base-select-option`,
                rawNode.class,
                attrs === null || attrs === void 0 ? void 0 : attrs.class,
                {
                    [`${clsPrefix}-base-select-option--disabled`]: rawNode.disabled,
                    [`${clsPrefix}-base-select-option--selected`]: isSelected,
                    [`${clsPrefix}-base-select-option--grouped`]: isGrouped,
                    [`${clsPrefix}-base-select-option--pending`]: isPending,
                    [`${clsPrefix}-base-select-option--show-checkmark`]: showCheckmark
                }
            ], style: [(attrs === null || attrs === void 0 ? void 0 : attrs.style) || '', rawNode.style || ''], onClick: (0,_utils__WEBPACK_IMPORTED_MODULE_6__.mergeEventHandlers)([handleClick, attrs === null || attrs === void 0 ? void 0 : attrs.onClick]), onMouseenter: (0,_utils__WEBPACK_IMPORTED_MODULE_6__.mergeEventHandlers)([
                handleMouseEnter,
                attrs === null || attrs === void 0 ? void 0 : attrs.onMouseenter
            ]), onMousemove: (0,_utils__WEBPACK_IMPORTED_MODULE_6__.mergeEventHandlers)([handleMouseMove, attrs === null || attrs === void 0 ? void 0 : attrs.onMousemove]) }),
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-select-option__content` }, children)));
        return rawNode.render
            ? rawNode.render({ node, option: rawNode, selected: isSelected })
            : renderOption
                ? renderOption({ node, option: rawNode, selected: isSelected })
                : node;
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/select-menu/src/styles/index.cssr.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/select-menu/src/styles/index.cssr.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_cssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../_utils/cssr */ "./node_modules/naive-ui/es/_utils/cssr/index.js");
/* harmony import */ var _styles_transitions_fade_in_scale_up_cssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../_styles/transitions/fade-in-scale-up.cssr */ "./node_modules/naive-ui/es/_styles/transitions/fade-in-scale-up.cssr.js");


// --n-loading-color
// --n-loading-size
// --n-option-padding-right
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-select-menu', `
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--n-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-color);
`, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('scrollbar', `
 max-height: var(--n-height);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('virtual-list', `
 max-height: var(--n-height);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-select-option', `
 min-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 display: flex;
 align-items: center;
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('content', `
 z-index: 1;
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-select-group-header', `
 min-height: var(--n-option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-select-menu-option-wrapper', `
 position: relative;
 width: 100%;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('loading, empty', `
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('loading', `
 color: var(--n-loading-color);
 font-size: var(--n-loading-size);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('action', `
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-select-group-header', `
 position: relative;
 cursor: default;
 padding: var(--n-option-padding);
 color: var(--n-group-header-text-color);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-select-option', `
 cursor: pointer;
 position: relative;
 padding: var(--n-option-padding);
 transition:
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 box-sizing: border-box;
 color: var(--n-option-text-color);
 opacity: 1;
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('show-checkmark', `
 padding-right: calc(var(--n-option-padding-right) + 20px);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&::before', `
 content: "";
 position: absolute;
 left: 4px;
 right: 4px;
 top: 0;
 bottom: 0;
 border-radius: var(--n-border-radius);
 transition: background-color .3s var(--n-bezier);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:active', `
 color: var(--n-option-text-color-pressed);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('grouped', `
 padding-left: calc(var(--n-option-padding-left) * 1.5);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('pending', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&::before', `
 background-color: var(--n-option-color-pending);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('selected', `
 color: var(--n-option-text-color-active);
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&::before', `
 background-color: var(--n-option-color-active);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('pending', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&::before', `
 background-color: var(--n-option-color-active-pending);
 `)])]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('disabled', `
 cursor: not-allowed;
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cNotM)('selected', `
 color: var(--n-option-text-color-disabled);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('selected', `
 opacity: var(--n-option-opacity-disabled);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('check', `
 font-size: 16px;
 position: absolute;
 right: calc(var(--n-option-padding-right) - 4px);
 top: calc(50% - 7px);
 color: var(--n-option-check-color);
 transition: color .3s var(--n-bezier);
 `, [(0,_styles_transitions_fade_in_scale_up_cssr__WEBPACK_IMPORTED_MODULE_1__.fadeInScaleUpTransition)({
  enterScale: '0.5'
})])])]));

/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/select-menu/styles/_common.js":
/*!**************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/select-menu/styles/_common.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    height: 'calc(var(--n-option-height) * 7.6)',
    paddingSmall: '4px 0',
    paddingMedium: '4px 0',
    paddingLarge: '4px 0',
    paddingHuge: '4px 0',
    optionPaddingSmall: '0 12px',
    optionPaddingMedium: '0 12px',
    optionPaddingLarge: '0 12px',
    optionPaddingHuge: '0 12px',
    loadingSize: '18px'
});


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/select-menu/styles/light.js":
/*!************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/select-menu/styles/light.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   self: () => (/* binding */ self)
/* harmony export */ });
/* harmony import */ var _empty_styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../empty/styles */ "./node_modules/naive-ui/es/empty/styles/light.js");
/* harmony import */ var _scrollbar_styles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../scrollbar/styles */ "./node_modules/naive-ui/es/_internal/scrollbar/styles/light.js");
/* harmony import */ var _styles_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../_styles/common */ "./node_modules/naive-ui/es/_styles/common/light.js");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_common */ "./node_modules/naive-ui/es/_internal/select-menu/styles/_common.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-theme.js");





const self = (vars) => {
    const { borderRadius, popoverColor, textColor3, dividerColor, textColor2, primaryColorPressed, textColorDisabled, primaryColor, opacityDisabled, hoverColor, fontSizeSmall, fontSizeMedium, fontSizeLarge, fontSizeHuge, heightSmall, heightMedium, heightLarge, heightHuge } = vars;
    return Object.assign(Object.assign({}, _common__WEBPACK_IMPORTED_MODULE_0__["default"]), { optionFontSizeSmall: fontSizeSmall, optionFontSizeMedium: fontSizeMedium, optionFontSizeLarge: fontSizeLarge, optionFontSizeHuge: fontSizeHuge, optionHeightSmall: heightSmall, optionHeightMedium: heightMedium, optionHeightLarge: heightLarge, optionHeightHuge: heightHuge, borderRadius, color: popoverColor, groupHeaderTextColor: textColor3, actionDividerColor: dividerColor, optionTextColor: textColor2, optionTextColorPressed: primaryColorPressed, optionTextColorDisabled: textColorDisabled, optionTextColorActive: primaryColor, optionOpacityDisabled: opacityDisabled, optionCheckColor: primaryColor, optionColorPending: hoverColor, optionColorActive: 'rgba(0, 0, 0, 0)', optionColorActivePending: hoverColor, actionTextColor: textColor2, loadingColor: primaryColor });
};
const internalSelectMenuLight = (0,_mixins__WEBPACK_IMPORTED_MODULE_1__.createTheme)({
    name: 'InternalSelectMenu',
    common: _styles_common__WEBPACK_IMPORTED_MODULE_2__["default"],
    peers: {
        Scrollbar: _scrollbar_styles__WEBPACK_IMPORTED_MODULE_3__["default"],
        Empty: _empty_styles__WEBPACK_IMPORTED_MODULE_4__["default"]
    },
    self
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (internalSelectMenuLight);


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/selection/src/Selection.js":
/*!***********************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/selection/src/Selection.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var vueuc__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! vueuc */ "./node_modules/vueuc/es/overflow/src/index.js");
/* harmony import */ var _popover__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../popover */ "./node_modules/naive-ui/es/popover/src/Popover.js");
/* harmony import */ var _tag__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../tag */ "./node_modules/naive-ui/es/tag/src/Tag.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-theme.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-css-vars-class.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/vue/render.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/composable/use-resize.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/cssr/create-key.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/vue/wrapper.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../_utils */ "./node_modules/naive-ui/es/_utils/naive/attribute.js");
/* harmony import */ var _suffix__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../suffix */ "./node_modules/naive-ui/es/_internal/suffix/src/Suffix.js");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles */ "./node_modules/naive-ui/es/_internal/selection/styles/light.js");
/* harmony import */ var _styles_index_cssr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles/index.cssr */ "./node_modules/naive-ui/es/_internal/selection/src/styles/index.cssr.js");
/* eslint-disable @typescript-eslint/no-non-null-assertion */









/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'InternalSelection',
    props: Object.assign(Object.assign({}, _mixins__WEBPACK_IMPORTED_MODULE_1__["default"].props), { clsPrefix: {
            type: String,
            required: true
        }, bordered: {
            type: Boolean,
            default: undefined
        }, active: Boolean, pattern: {
            type: String,
            default: ''
        }, placeholder: String, selectedOption: {
            type: Object,
            default: null
        }, selectedOptions: {
            type: Array,
            default: null
        }, labelField: { type: String, default: 'label' }, valueField: {
            type: String,
            default: 'value'
        }, multiple: Boolean, filterable: Boolean, clearable: Boolean, disabled: Boolean, size: {
            type: String,
            default: 'medium'
        }, loading: Boolean, autofocus: Boolean, showArrow: {
            type: Boolean,
            default: true
        }, inputProps: Object, focused: Boolean, renderTag: Function, onKeydown: Function, onClick: Function, onBlur: Function, onFocus: Function, onDeleteOption: Function, maxTagCount: [String, Number], onClear: Function, onPatternInput: Function, onPatternFocus: Function, onPatternBlur: Function, renderLabel: Function, status: String, inlineThemeDisabled: Boolean, ignoreComposition: { type: Boolean, default: true }, onResize: Function }),
    setup(props) {
        const patternInputMirrorRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const patternInputRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const selfRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const multipleElRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const singleElRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const patternInputWrapperRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const counterRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const counterWrapperRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const overflowRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const inputTagElRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const showTagsPopoverRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);
        const patternInputFocusedRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);
        const hoverRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);
        const themeRef = (0,_mixins__WEBPACK_IMPORTED_MODULE_1__["default"])('InternalSelection', '-internal-selection', _styles_index_cssr__WEBPACK_IMPORTED_MODULE_2__["default"], _styles__WEBPACK_IMPORTED_MODULE_3__["default"], props, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'clsPrefix'));
        const mergedClearableRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            return (props.clearable && !props.disabled && (hoverRef.value || props.active));
        });
        const filterablePlaceholderRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            return props.selectedOption
                ? props.renderTag
                    ? props.renderTag({
                        option: props.selectedOption,
                        handleClose: () => { }
                    })
                    : props.renderLabel
                        ? props.renderLabel(props.selectedOption, true)
                        : (0,_utils__WEBPACK_IMPORTED_MODULE_4__.render)(props.selectedOption[props.labelField], props.selectedOption, true)
                : props.placeholder;
        });
        const labelRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const option = props.selectedOption;
            if (!option)
                return undefined;
            return option[props.labelField];
        });
        const selectedRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            if (props.multiple) {
                return !!(Array.isArray(props.selectedOptions) && props.selectedOptions.length);
            }
            else {
                return props.selectedOption !== null;
            }
        });
        function syncMirrorWidth() {
            var _a;
            const { value: patternInputMirrorEl } = patternInputMirrorRef;
            if (patternInputMirrorEl) {
                const { value: patternInputEl } = patternInputRef;
                if (patternInputEl) {
                    patternInputEl.style.width = `${patternInputMirrorEl.offsetWidth}px`;
                    if (props.maxTagCount !== 'responsive') {
                        (_a = overflowRef.value) === null || _a === void 0 ? void 0 : _a.sync();
                    }
                }
            }
        }
        function hideInputTag() {
            const { value: inputTagEl } = inputTagElRef;
            if (inputTagEl)
                inputTagEl.style.display = 'none';
        }
        function showInputTag() {
            const { value: inputTagEl } = inputTagElRef;
            if (inputTagEl)
                inputTagEl.style.display = 'inline-block';
        }
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)((0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'active'), (value) => {
            if (!value)
                hideInputTag();
        });
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)((0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'pattern'), () => {
            if (props.multiple) {
                void (0,vue__WEBPACK_IMPORTED_MODULE_0__.nextTick)(syncMirrorWidth);
            }
        });
        function doFocus(e) {
            const { onFocus } = props;
            if (onFocus)
                onFocus(e);
        }
        function doBlur(e) {
            const { onBlur } = props;
            if (onBlur)
                onBlur(e);
        }
        function doDeleteOption(value) {
            const { onDeleteOption } = props;
            if (onDeleteOption)
                onDeleteOption(value);
        }
        function doClear(e) {
            const { onClear } = props;
            if (onClear)
                onClear(e);
        }
        function doPatternInput(value) {
            const { onPatternInput } = props;
            if (onPatternInput)
                onPatternInput(value);
        }
        function handleFocusin(e) {
            var _a;
            if (!e.relatedTarget ||
                !((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))) {
                doFocus(e);
            }
        }
        function handleFocusout(e) {
            var _a;
            if ((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))
                return;
            doBlur(e);
        }
        function handleClear(e) {
            doClear(e);
        }
        function handleMouseEnter() {
            hoverRef.value = true;
        }
        function handleMouseLeave() {
            hoverRef.value = false;
        }
        function handleMouseDown(e) {
            if (!props.active || !props.filterable)
                return;
            if (e.target === patternInputRef.value)
                return;
            e.preventDefault();
        }
        function handleDeleteOption(option) {
            doDeleteOption(option);
        }
        function handlePatternKeyDown(e) {
            if (e.key === 'Backspace' && !isComposingRef.value) {
                if (!props.pattern.length) {
                    const { selectedOptions } = props;
                    if (selectedOptions === null || selectedOptions === void 0 ? void 0 : selectedOptions.length) {
                        handleDeleteOption(selectedOptions[selectedOptions.length - 1]);
                    }
                }
            }
        }
        const isComposingRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);
        // the composition end is later than its input so we can cached the event
        // and return the input event
        let cachedInputEvent = null;
        function handlePatternInputInput(e) {
            // we should sync mirror width here
            const { value: patternInputMirrorEl } = patternInputMirrorRef;
            if (patternInputMirrorEl) {
                const inputText = e.target.value;
                patternInputMirrorEl.textContent = inputText;
                syncMirrorWidth();
            }
            if (props.ignoreComposition) {
                if (!isComposingRef.value) {
                    doPatternInput(e);
                }
                else {
                    cachedInputEvent = e;
                }
            }
            else {
                doPatternInput(e);
            }
        }
        function handleCompositionStart() {
            isComposingRef.value = true;
        }
        function handleCompositionEnd() {
            isComposingRef.value = false;
            if (props.ignoreComposition) {
                doPatternInput(cachedInputEvent);
            }
            cachedInputEvent = null;
        }
        function handlePatternInputFocus(e) {
            var _a;
            patternInputFocusedRef.value = true;
            (_a = props.onPatternFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);
        }
        function handlePatternInputBlur(e) {
            var _a;
            patternInputFocusedRef.value = false;
            (_a = props.onPatternBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);
        }
        function blur() {
            var _a, _b;
            if (props.filterable) {
                patternInputFocusedRef.value = false;
                (_a = patternInputWrapperRef.value) === null || _a === void 0 ? void 0 : _a.blur();
                (_b = patternInputRef.value) === null || _b === void 0 ? void 0 : _b.blur();
            }
            else if (props.multiple) {
                const { value: multipleEl } = multipleElRef;
                multipleEl === null || multipleEl === void 0 ? void 0 : multipleEl.blur();
            }
            else {
                const { value: singleEl } = singleElRef;
                singleEl === null || singleEl === void 0 ? void 0 : singleEl.blur();
            }
        }
        function focus() {
            var _a, _b, _c;
            if (props.filterable) {
                patternInputFocusedRef.value = false;
                (_a = patternInputWrapperRef.value) === null || _a === void 0 ? void 0 : _a.focus();
            }
            else if (props.multiple) {
                (_b = multipleElRef.value) === null || _b === void 0 ? void 0 : _b.focus();
            }
            else {
                (_c = singleElRef.value) === null || _c === void 0 ? void 0 : _c.focus();
            }
        }
        function focusInput() {
            const { value: patternInputEl } = patternInputRef;
            if (patternInputEl) {
                showInputTag();
                patternInputEl.focus();
            }
        }
        function blurInput() {
            const { value: patternInputEl } = patternInputRef;
            if (patternInputEl) {
                patternInputEl.blur();
            }
        }
        function updateCounter(count) {
            const { value } = counterRef;
            if (value) {
                value.setTextContent(`+${count}`);
            }
        }
        function getCounter() {
            const { value } = counterWrapperRef;
            return value;
        }
        function getTail() {
            return patternInputRef.value;
        }
        let enterTimerId = null;
        function clearEnterTimer() {
            if (enterTimerId !== null)
                window.clearTimeout(enterTimerId);
        }
        function handleMouseEnterCounter() {
            if (props.disabled || props.active)
                return;
            clearEnterTimer();
            enterTimerId = window.setTimeout(() => {
                if (selectedRef.value) {
                    showTagsPopoverRef.value = true;
                }
            }, 100);
        }
        function handleMouseLeaveCounter() {
            clearEnterTimer();
        }
        function onPopoverUpdateShow(show) {
            if (!show) {
                clearEnterTimer();
                showTagsPopoverRef.value = false;
            }
        }
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)(selectedRef, (value) => {
            if (!value) {
                showTagsPopoverRef.value = false;
            }
        });
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(() => {
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.watchEffect)(() => {
                const patternInputWrapperEl = patternInputWrapperRef.value;
                if (!patternInputWrapperEl)
                    return;
                patternInputWrapperEl.tabIndex =
                    props.disabled || patternInputFocusedRef.value ? -1 : 0;
            });
        });
        (0,_utils__WEBPACK_IMPORTED_MODULE_5__.useOnResize)(selfRef, props.onResize);
        const { inlineThemeDisabled } = props;
        const cssVarsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { size } = props;
            const { common: { cubicBezierEaseInOut }, self: { borderRadius, color, placeholderColor, textColor, paddingSingle, paddingMultiple, caretColor, colorDisabled, textColorDisabled, placeholderColorDisabled, colorActive, boxShadowFocus, boxShadowActive, boxShadowHover, border, borderFocus, borderHover, borderActive, arrowColor, arrowColorDisabled, loadingColor, 
            // form warning
            colorActiveWarning, boxShadowFocusWarning, boxShadowActiveWarning, boxShadowHoverWarning, borderWarning, borderFocusWarning, borderHoverWarning, borderActiveWarning, 
            // form error
            colorActiveError, boxShadowFocusError, boxShadowActiveError, boxShadowHoverError, borderError, borderFocusError, borderHoverError, borderActiveError, 
            // clear
            clearColor, clearColorHover, clearColorPressed, clearSize, 
            // arrow
            arrowSize, [(0,_utils__WEBPACK_IMPORTED_MODULE_6__.createKey)('height', size)]: height, [(0,_utils__WEBPACK_IMPORTED_MODULE_6__.createKey)('fontSize', size)]: fontSize } } = themeRef.value;
            return {
                '--n-bezier': cubicBezierEaseInOut,
                '--n-border': border,
                '--n-border-active': borderActive,
                '--n-border-focus': borderFocus,
                '--n-border-hover': borderHover,
                '--n-border-radius': borderRadius,
                '--n-box-shadow-active': boxShadowActive,
                '--n-box-shadow-focus': boxShadowFocus,
                '--n-box-shadow-hover': boxShadowHover,
                '--n-caret-color': caretColor,
                '--n-color': color,
                '--n-color-active': colorActive,
                '--n-color-disabled': colorDisabled,
                '--n-font-size': fontSize,
                '--n-height': height,
                '--n-padding-single': paddingSingle,
                '--n-padding-multiple': paddingMultiple,
                '--n-placeholder-color': placeholderColor,
                '--n-placeholder-color-disabled': placeholderColorDisabled,
                '--n-text-color': textColor,
                '--n-text-color-disabled': textColorDisabled,
                '--n-arrow-color': arrowColor,
                '--n-arrow-color-disabled': arrowColorDisabled,
                '--n-loading-color': loadingColor,
                // form warning
                '--n-color-active-warning': colorActiveWarning,
                '--n-box-shadow-focus-warning': boxShadowFocusWarning,
                '--n-box-shadow-active-warning': boxShadowActiveWarning,
                '--n-box-shadow-hover-warning': boxShadowHoverWarning,
                '--n-border-warning': borderWarning,
                '--n-border-focus-warning': borderFocusWarning,
                '--n-border-hover-warning': borderHoverWarning,
                '--n-border-active-warning': borderActiveWarning,
                // form error
                '--n-color-active-error': colorActiveError,
                '--n-box-shadow-focus-error': boxShadowFocusError,
                '--n-box-shadow-active-error': boxShadowActiveError,
                '--n-box-shadow-hover-error': boxShadowHoverError,
                '--n-border-error': borderError,
                '--n-border-focus-error': borderFocusError,
                '--n-border-hover-error': borderHoverError,
                '--n-border-active-error': borderActiveError,
                // clear
                '--n-clear-size': clearSize,
                '--n-clear-color': clearColor,
                '--n-clear-color-hover': clearColorHover,
                '--n-clear-color-pressed': clearColorPressed,
                // arrow-size
                '--n-arrow-size': arrowSize
            };
        });
        const themeClassHandle = inlineThemeDisabled
            ? (0,_mixins__WEBPACK_IMPORTED_MODULE_7__.useThemeClass)('internal-selection', (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
                return props.size[0];
            }), cssVarsRef, props)
            : undefined;
        return {
            mergedTheme: themeRef,
            mergedClearable: mergedClearableRef,
            patternInputFocused: patternInputFocusedRef,
            filterablePlaceholder: filterablePlaceholderRef,
            label: labelRef,
            selected: selectedRef,
            showTagsPanel: showTagsPopoverRef,
            isComposing: isComposingRef,
            // dom ref
            counterRef,
            counterWrapperRef,
            patternInputMirrorRef,
            patternInputRef,
            selfRef,
            multipleElRef,
            singleElRef,
            patternInputWrapperRef,
            overflowRef,
            inputTagElRef,
            handleMouseDown,
            handleFocusin,
            handleClear,
            handleMouseEnter,
            handleMouseLeave,
            handleDeleteOption,
            handlePatternKeyDown,
            handlePatternInputInput,
            handlePatternInputBlur,
            handlePatternInputFocus,
            handleMouseEnterCounter,
            handleMouseLeaveCounter,
            handleFocusout,
            handleCompositionEnd,
            handleCompositionStart,
            onPopoverUpdateShow,
            focus,
            focusInput,
            blur,
            blurInput,
            updateCounter,
            getCounter,
            getTail,
            renderLabel: props.renderLabel,
            cssVars: inlineThemeDisabled ? undefined : cssVarsRef,
            themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,
            onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender
        };
    },
    render() {
        const { status, multiple, size, disabled, filterable, maxTagCount, bordered, clsPrefix, onRender, renderTag, renderLabel } = this;
        onRender === null || onRender === void 0 ? void 0 : onRender();
        const maxTagCountResponsive = maxTagCount === 'responsive';
        const maxTagCountNumeric = typeof maxTagCount === 'number';
        const useMaxTagCount = maxTagCountResponsive || maxTagCountNumeric;
        const suffix = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_utils__WEBPACK_IMPORTED_MODULE_8__.Wrapper, null, {
            default: () => ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_suffix__WEBPACK_IMPORTED_MODULE_9__["default"], { clsPrefix: clsPrefix, loading: this.loading, showArrow: this.showArrow, showClear: this.mergedClearable && this.selected, onClear: this.handleClear }, {
                default: () => { var _a, _b; return (_b = (_a = this.$slots).arrow) === null || _b === void 0 ? void 0 : _b.call(_a); }
            }))
        }));
        let body;
        if (multiple) {
            const { labelField } = this;
            const createTag = (option) => ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-tag-wrapper`, key: option.value }, renderTag ? (renderTag({
                option,
                handleClose: () => { this.handleDeleteOption(option); }
            })) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_tag__WEBPACK_IMPORTED_MODULE_10__["default"], { size: size, closable: !option.disabled, disabled: disabled, onClose: () => { this.handleDeleteOption(option); }, internalCloseIsButtonTag: false, internalCloseFocusable: false }, {
                default: () => renderLabel
                    ? renderLabel(option, true)
                    : (0,_utils__WEBPACK_IMPORTED_MODULE_4__.render)(option[labelField], option, true)
            }))));
            const createOriginalTagNodes = () => (maxTagCountNumeric
                ? this.selectedOptions.slice(0, maxTagCount)
                : this.selectedOptions).map(createTag);
            const input = filterable ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-input-tag`, ref: "inputTagElRef", key: "__input-tag__" },
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("input", Object.assign({}, this.inputProps, { ref: "patternInputRef", tabindex: -1, disabled: disabled, value: this.pattern, autofocus: this.autofocus, class: `${clsPrefix}-base-selection-input-tag__input`, onBlur: this.handlePatternInputBlur, onFocus: this.handlePatternInputFocus, onKeydown: this.handlePatternKeyDown, onInput: this.handlePatternInputInput, onCompositionstart: this.handleCompositionStart, onCompositionend: this.handleCompositionEnd })),
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("span", { ref: "patternInputMirrorRef", class: `${clsPrefix}-base-selection-input-tag__mirror` }, this.pattern))) : null;
            // May Overflow
            const renderCounter = maxTagCountResponsive
                ? () => ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-tag-wrapper`, ref: "counterWrapperRef" },
                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_tag__WEBPACK_IMPORTED_MODULE_10__["default"], { size: size, ref: "counterRef", onMouseenter: this.handleMouseEnterCounter, onMouseleave: this.handleMouseLeaveCounter, disabled: disabled })))
                : undefined;
            let counter;
            if (maxTagCountNumeric) {
                const rest = this.selectedOptions.length - maxTagCount;
                if (rest > 0) {
                    counter = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-tag-wrapper`, key: "__counter__" },
                        (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_tag__WEBPACK_IMPORTED_MODULE_10__["default"], { size: size, ref: "counterRef", onMouseenter: this.handleMouseEnterCounter, disabled: disabled }, {
                            default: () => `+${rest}`
                        })));
                }
            }
            const tags = maxTagCountResponsive ? (filterable ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(vueuc__WEBPACK_IMPORTED_MODULE_11__["default"], { ref: "overflowRef", updateCounter: this.updateCounter, getCounter: this.getCounter, getTail: this.getTail, style: {
                    width: '100%',
                    display: 'flex',
                    overflow: 'hidden'
                } }, {
                default: createOriginalTagNodes,
                counter: renderCounter,
                tail: () => input
            })) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(vueuc__WEBPACK_IMPORTED_MODULE_11__["default"], { ref: "overflowRef", updateCounter: this.updateCounter, getCounter: this.getCounter, style: {
                    width: '100%',
                    display: 'flex',
                    overflow: 'hidden'
                } }, {
                default: createOriginalTagNodes,
                counter: renderCounter
            }))) : maxTagCountNumeric ? (createOriginalTagNodes().concat(counter)) : (createOriginalTagNodes());
            const renderPopover = useMaxTagCount
                ? () => ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-popover` }, maxTagCountResponsive
                    ? createOriginalTagNodes()
                    : this.selectedOptions.map(createTag)))
                : undefined;
            const popoverProps = useMaxTagCount
                ? {
                    show: this.showTagsPanel,
                    trigger: 'hover',
                    overlap: true,
                    placement: 'top',
                    width: 'trigger',
                    onUpdateShow: this.onPopoverUpdateShow,
                    theme: this.mergedTheme.peers.Popover,
                    themeOverrides: this.mergedTheme.peerOverrides.Popover
                }
                : null;
            const showPlaceholder = this.selected
                ? false
                : this.active
                    ? !this.pattern && !this.isComposing
                    : true;
            const placeholder = showPlaceholder ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay` },
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-placeholder__inner` }, this.placeholder))) : null;
            const popoverTrigger = filterable ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { ref: "patternInputWrapperRef", class: `${clsPrefix}-base-selection-tags` },
                tags,
                maxTagCountResponsive ? null : input,
                suffix)) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { ref: "multipleElRef", class: `${clsPrefix}-base-selection-tags`, tabindex: disabled ? undefined : 0 },
                tags,
                suffix));
            body = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,
                useMaxTagCount ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_popover__WEBPACK_IMPORTED_MODULE_12__["default"], Object.assign({}, popoverProps, { scrollable: true, style: "max-height: calc(var(--v-target-height) * 6.6);" }), {
                    trigger: () => popoverTrigger,
                    default: renderPopover
                })) : (popoverTrigger),
                placeholder));
        }
        else {
            if (filterable) {
                const hasInput = this.pattern || this.isComposing;
                const showPlaceholder = this.active ? !hasInput : !this.selected;
                const showSelectedLabel = this.active ? false : this.selected;
                body = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { ref: "patternInputWrapperRef", class: `${clsPrefix}-base-selection-label` },
                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("input", Object.assign({}, this.inputProps, { ref: "patternInputRef", class: `${clsPrefix}-base-selection-input`, value: this.active ? this.pattern : '', placeholder: "", readonly: disabled, disabled: disabled, tabindex: -1, autofocus: this.autofocus, onFocus: this.handlePatternInputFocus, onBlur: this.handlePatternInputBlur, onInput: this.handlePatternInputInput, onCompositionstart: this.handleCompositionStart, onCompositionend: this.handleCompositionEnd })),
                    showSelectedLabel ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-label__render-label ${clsPrefix}-base-selection-overlay`, key: "input" },
                        (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-overlay__wrapper` }, renderTag
                            ? renderTag({
                                option: this.selectedOption,
                                handleClose: () => { }
                            })
                            : renderLabel
                                ? renderLabel(this.selectedOption, true)
                                : (0,_utils__WEBPACK_IMPORTED_MODULE_4__.render)(this.label, this.selectedOption, true)))) : null,
                    showPlaceholder ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`, key: "placeholder" },
                        (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-overlay__wrapper` }, this.filterablePlaceholder))) : null,
                    suffix));
            }
            else {
                body = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { ref: "singleElRef", class: `${clsPrefix}-base-selection-label`, tabindex: this.disabled ? undefined : 0 },
                    this.label !== undefined ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-input`, title: (0,_utils__WEBPACK_IMPORTED_MODULE_13__.getTitleAttribute)(this.label), key: "input" },
                        (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-input__content` }, renderTag
                            ? renderTag({
                                option: this.selectedOption,
                                handleClose: () => { }
                            })
                            : renderLabel
                                ? renderLabel(this.selectedOption, true)
                                : (0,_utils__WEBPACK_IMPORTED_MODULE_4__.render)(this.label, this.selectedOption, true)))) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`, key: "placeholder" },
                        (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection-placeholder__inner` }, this.placeholder))),
                    suffix));
            }
        }
        return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { ref: "selfRef", class: [
                `${clsPrefix}-base-selection`,
                this.themeClass,
                status && `${clsPrefix}-base-selection--${status}-status`,
                {
                    [`${clsPrefix}-base-selection--active`]: this.active,
                    [`${clsPrefix}-base-selection--selected`]: this.selected || (this.active && this.pattern),
                    [`${clsPrefix}-base-selection--disabled`]: this.disabled,
                    [`${clsPrefix}-base-selection--multiple`]: this.multiple,
                    // focus is not controlled by selection itself since it always need
                    // to be managed together with menu. provide :focus style will cause
                    // many redundant codes.
                    [`${clsPrefix}-base-selection--focus`]: this.focused
                }
            ], style: this.cssVars, onClick: this.onClick, onMouseenter: this.handleMouseEnter, onMouseleave: this.handleMouseLeave, onKeydown: this.onKeydown, onFocusin: this.handleFocusin, onFocusout: this.handleFocusout, onMousedown: this.handleMouseDown },
            body,
            bordered ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection__border` })) : null,
            bordered ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${clsPrefix}-base-selection__state-border` })) : null));
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/selection/src/styles/index.cssr.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/selection/src/styles/index.cssr.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_cssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../_utils/cssr */ "./node_modules/naive-ui/es/_utils/cssr/index.js");

// vars:
// --n-bezier
// --n-border
// --n-border-active
// --n-border-focus
// --n-border-hover
// --n-border-radius
// --n-box-shadow-active
// --n-box-shadow-focus
// --n-box-shadow-hover
// --n-caret-color
// --n-color
// --n-color-active
// --n-color-disabled
// --n-font-size
// --n-height
// --n-padding-single
// --n-padding-multiple
// --n-placeholder-color
// --n-placeholder-color-disabled
// --n-text-color
// --n-text-color-disabled
// --n-arrow-color
// --n-arrow-size
// --n-loading-color
// ...clear vars
// ...form item vars
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)([(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection', `
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--n-border-radius);
 min-height: var(--n-height);
 line-height: 1.5;
 font-size: var(--n-font-size);
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-loading', `
 color: var(--n-loading-color);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-tags', 'min-height: var(--n-height);'), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('border, state-border', `
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--n-border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('state-border', `
 z-index: 1;
 border-color: #0000;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-suffix', `
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('arrow', `
 font-size: var(--n-arrow-size);
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-overlay', `
 display: flex;
 align-items: center;
 white-space: nowrap;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--n-padding-single);
 transition: color .3s var(--n-bezier);
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('wrapper', `
 flex-basis: 0;
 flex-grow: 1;
 overflow: hidden;
 text-overflow: ellipsis;
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-placeholder', `
 color: var(--n-placeholder-color);
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('inner', `
 max-width: 100%;
 overflow: hidden;
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-tags', `
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: var(--n-padding-multiple);
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--n-color);
 border-radius: inherit;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-label', `
 height: var(--n-height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: inherit;
 background-color: var(--n-color);
 align-items: center;
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-input', `
 font-size: inherit;
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--n-padding-single);
 background-color: #0000;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 caret-color: var(--n-caret-color);
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('content', `
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('render-label', `
 color: var(--n-text-color);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cNotM)('disabled', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:hover', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('state-border', `
 box-shadow: var(--n-box-shadow-hover);
 border: var(--n-border-hover);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('focus', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('state-border', `
 box-shadow: var(--n-box-shadow-focus);
 border: var(--n-border-focus);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('active', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('state-border', `
 box-shadow: var(--n-box-shadow-active);
 border: var(--n-border-active);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-label', 'background-color: var(--n-color-active);'), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-tags', 'background-color: var(--n-color-active);')])]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('disabled', 'cursor: not-allowed;', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('arrow', `
 color: var(--n-arrow-color-disabled);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-label', `
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-input', `
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('render-label', `
 color: var(--n-text-color-disabled);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-tags', `
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-placeholder', `
 cursor: not-allowed;
 color: var(--n-placeholder-color-disabled);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-input-tag', `
 height: calc(var(--n-height) - 6px);
 line-height: calc(var(--n-height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('input', `
 font-size: inherit;
 font-family: inherit;
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('mirror', `
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 -webkit-user-select: none;
 opacity: 0;
 `)]), ['warning', 'error'].map(status => (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)(`${status}-status`, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('state-border', `border: var(--n-border-${status});`), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cNotM)('disabled', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:hover', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('state-border', `
 box-shadow: var(--n-box-shadow-hover-${status});
 border: var(--n-border-hover-${status});
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('active', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('state-border', `
 box-shadow: var(--n-box-shadow-active-${status});
 border: var(--n-border-active-${status});
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-label', `background-color: var(--n-color-active-${status});`), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-tags', `background-color: var(--n-color-active-${status});`)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('focus', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('state-border', `
 box-shadow: var(--n-box-shadow-focus-${status});
 border: var(--n-border-focus-${status});
 `)])])]))]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-popover', `
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 margin-right: -8px;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('base-selection-tag-wrapper', `
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:last-child', 'padding-right: 0;'), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('tag', `
 font-size: 14px;
 max-width: 100%;
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('content', `
 line-height: 1.25;
 text-overflow: ellipsis;
 overflow: hidden;
 `)])])]));

/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/selection/styles/_common.js":
/*!************************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/selection/styles/_common.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    paddingSingle: '0 26px 0 12px',
    paddingMultiple: '3px 26px 0 12px',
    clearSize: '16px',
    arrowSize: '16px'
});


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/selection/styles/light.js":
/*!**********************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/selection/styles/light.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var seemly__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! seemly */ "./node_modules/seemly/es/color/index.js");
/* harmony import */ var _styles_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../_styles/common */ "./node_modules/naive-ui/es/_styles/common/light.js");
/* harmony import */ var _popover_styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../popover/styles */ "./node_modules/naive-ui/es/popover/styles/light.js");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_common */ "./node_modules/naive-ui/es/_internal/selection/styles/_common.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-theme.js");





const self = (vars) => {
    const { borderRadius, textColor2, textColorDisabled, inputColor, inputColorDisabled, primaryColor, primaryColorHover, warningColor, warningColorHover, errorColor, errorColorHover, borderColor, iconColor, iconColorDisabled, clearColor, clearColorHover, clearColorPressed, placeholderColor, placeholderColorDisabled, fontSizeTiny, fontSizeSmall, fontSizeMedium, fontSizeLarge, heightTiny, heightSmall, heightMedium, heightLarge } = vars;
    return Object.assign(Object.assign({}, _common__WEBPACK_IMPORTED_MODULE_0__["default"]), { fontSizeTiny,
        fontSizeSmall,
        fontSizeMedium,
        fontSizeLarge,
        heightTiny,
        heightSmall,
        heightMedium,
        heightLarge,
        borderRadius, 
        // default
        textColor: textColor2, textColorDisabled,
        placeholderColor,
        placeholderColorDisabled, color: inputColor, colorDisabled: inputColorDisabled, colorActive: inputColor, border: `1px solid ${borderColor}`, borderHover: `1px solid ${primaryColorHover}`, borderActive: `1px solid ${primaryColor}`, borderFocus: `1px solid ${primaryColorHover}`, boxShadowHover: 'none', boxShadowActive: `0 0 0 2px ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(primaryColor, {
            alpha: 0.2
        })}`, boxShadowFocus: `0 0 0 2px ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(primaryColor, {
            alpha: 0.2
        })}`, caretColor: primaryColor, arrowColor: iconColor, arrowColorDisabled: iconColorDisabled, loadingColor: primaryColor, 
        // warning
        borderWarning: `1px solid ${warningColor}`, borderHoverWarning: `1px solid ${warningColorHover}`, borderActiveWarning: `1px solid ${warningColor}`, borderFocusWarning: `1px solid ${warningColorHover}`, boxShadowHoverWarning: 'none', boxShadowActiveWarning: `0 0 0 2px ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(warningColor, {
            alpha: 0.2
        })}`, boxShadowFocusWarning: `0 0 0 2px ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(warningColor, {
            alpha: 0.2
        })}`, colorActiveWarning: inputColor, caretColorWarning: warningColor, 
        // error
        borderError: `1px solid ${errorColor}`, borderHoverError: `1px solid ${errorColorHover}`, borderActiveError: `1px solid ${errorColor}`, borderFocusError: `1px solid ${errorColorHover}`, boxShadowHoverError: 'none', boxShadowActiveError: `0 0 0 2px ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(errorColor, {
            alpha: 0.2
        })}`, boxShadowFocusError: `0 0 0 2px ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(errorColor, {
            alpha: 0.2
        })}`, colorActiveError: inputColor, caretColorError: errorColor, clearColor,
        clearColorHover,
        clearColorPressed });
};
const internalSelectionLight = (0,_mixins__WEBPACK_IMPORTED_MODULE_2__.createTheme)({
    name: 'InternalSelection',
    common: _styles_common__WEBPACK_IMPORTED_MODULE_3__["default"],
    peers: {
        Popover: _popover_styles__WEBPACK_IMPORTED_MODULE_4__["default"]
    },
    self
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (internalSelectionLight);


/***/ }),

/***/ "./node_modules/naive-ui/es/_internal/suffix/src/Suffix.js":
/*!*****************************************************************!*\
  !*** ./node_modules/naive-ui/es/_internal/suffix/src/Suffix.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var _clear__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../clear */ "./node_modules/naive-ui/es/_internal/clear/src/Clear.js");
/* harmony import */ var _loading__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../loading */ "./node_modules/naive-ui/es/_internal/loading/src/Loading.js");
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../icon */ "./node_modules/naive-ui/es/_internal/icon/src/Icon.js");
/* harmony import */ var _icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../icons */ "./node_modules/naive-ui/es/_internal/icons/ChevronDown.js");
/* harmony import */ var _utils_vue__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../_utils/vue */ "./node_modules/naive-ui/es/_utils/vue/resolve-slot.js");






/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'InternalSelectionSuffix',
    props: {
        clsPrefix: {
            type: String,
            required: true
        },
        showArrow: {
            type: Boolean,
            default: undefined
        },
        showClear: {
            type: Boolean,
            default: undefined
        },
        loading: {
            type: Boolean,
            default: false
        },
        onClear: Function
    },
    setup(props, { slots }) {
        return () => {
            const { clsPrefix } = props;
            return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_loading__WEBPACK_IMPORTED_MODULE_1__["default"], { clsPrefix: clsPrefix, class: `${clsPrefix}-base-suffix`, strokeWidth: 24, scale: 0.85, show: props.loading }, {
                default: () => props.showArrow ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_clear__WEBPACK_IMPORTED_MODULE_2__["default"], { clsPrefix: clsPrefix, show: props.showClear, onClear: props.onClear }, {
                    placeholder: () => ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_icon__WEBPACK_IMPORTED_MODULE_3__["default"], { clsPrefix: clsPrefix, class: `${clsPrefix}-base-suffix__arrow` }, {
                        default: () => (0,_utils_vue__WEBPACK_IMPORTED_MODULE_4__.resolveSlot)(slots.default, () => [
                            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_icons__WEBPACK_IMPORTED_MODULE_5__["default"], null)
                        ])
                    }))
                })) : null
            }));
        };
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/_utils/composable/use-resize.js":
/*!******************************************************************!*\
  !*** ./node_modules/naive-ui/es/_utils/composable/use-resize.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   useOnResize: () => (/* binding */ useOnResize)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var vueuc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vueuc */ "./node_modules/vueuc/es/resize-observer/src/delegate.js");


function useOnResize(elRef, onResize) {
    // it needn't be reactive since it's for internal usage
    if (onResize) {
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(() => {
            const { value: el } = elRef;
            if (el) {
                vueuc__WEBPACK_IMPORTED_MODULE_1__["default"].registerHandler(el, onResize);
            }
        });
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.onBeforeUnmount)(() => {
            const { value: el } = elRef;
            if (el) {
                vueuc__WEBPACK_IMPORTED_MODULE_1__["default"].unregisterHandler(el);
            }
        });
    }
}


/***/ }),

/***/ "./node_modules/naive-ui/es/_utils/event/index.js":
/*!********************************************************!*\
  !*** ./node_modules/naive-ui/es/_utils/event/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   eventEffectNotPerformed: () => (/* binding */ eventEffectNotPerformed),
/* harmony export */   markEventEffectPerformed: () => (/* binding */ markEventEffectPerformed)
/* harmony export */ });
const eventSet = new WeakSet();
function markEventEffectPerformed(event) {
    eventSet.add(event);
}
function eventEffectNotPerformed(event) {
    return !eventSet.has(event);
}


/***/ }),

/***/ "./node_modules/naive-ui/es/_utils/naive/attribute.js":
/*!************************************************************!*\
  !*** ./node_modules/naive-ui/es/_utils/naive/attribute.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getTitleAttribute: () => (/* binding */ getTitleAttribute)
/* harmony export */ });
function getTitleAttribute(value) {
    switch (typeof value) {
        case 'string':
            // The empty string should also be reset to undefined.
            return value || undefined;
        case 'number':
            return String(value);
        default:
            return undefined;
    }
}


/***/ }),

/***/ "./node_modules/naive-ui/es/_utils/vue/merge-handlers.js":
/*!***************************************************************!*\
  !*** ./node_modules/naive-ui/es/_utils/vue/merge-handlers.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   mergeEventHandlers: () => (/* binding */ mergeEventHandlers)
/* harmony export */ });
function mergeEventHandlers(handlers) {
    const filteredHandlers = handlers.filter((handler) => handler !== undefined);
    if (filteredHandlers.length === 0)
        return undefined;
    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
    if (filteredHandlers.length === 1)
        return filteredHandlers[0];
    return (e) => {
        handlers.forEach((handler) => {
            if (handler) {
                handler(e);
            }
        });
    };
}


/***/ }),

/***/ "./node_modules/naive-ui/es/_utils/vue/render.js":
/*!*******************************************************!*\
  !*** ./node_modules/naive-ui/es/_utils/vue/render.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   render: () => (/* binding */ render)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");

const render = (r, ...args) => {
    if (typeof r === 'function') {
        return r(...args);
    }
    else if (typeof r === 'string') {
        return (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(r);
    }
    else if (typeof r === 'number') {
        return (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(String(r));
    }
    else {
        return null;
    }
};


/***/ }),

/***/ "./node_modules/naive-ui/es/empty/src/Empty.js":
/*!*****************************************************!*\
  !*** ./node_modules/naive-ui/es/empty/src/Empty.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   emptyProps: () => (/* binding */ emptyProps)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var _config_provider_src_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../config-provider/src/context */ "./node_modules/naive-ui/es/config-provider/src/context.js");
/* harmony import */ var _internal_icon__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../_internal/icon */ "./node_modules/naive-ui/es/_internal/icon/src/Icon.js");
/* harmony import */ var _internal_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../_internal/icons */ "./node_modules/naive-ui/es/_internal/icons/Empty.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-theme.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-config.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-locale.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-css-vars-class.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/cssr/create-key.js");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles */ "./node_modules/naive-ui/es/empty/styles/light.js");
/* harmony import */ var _styles_index_cssr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./styles/index.cssr */ "./node_modules/naive-ui/es/empty/src/styles/index.cssr.js");








const emptyProps = Object.assign(Object.assign({}, _mixins__WEBPACK_IMPORTED_MODULE_1__["default"].props), { description: String, showDescription: {
        type: Boolean,
        default: true
    }, showIcon: {
        type: Boolean,
        default: true
    }, size: {
        type: String,
        default: 'medium'
    }, renderIcon: Function });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'Empty',
    props: emptyProps,
    setup(props) {
        const { mergedClsPrefixRef, inlineThemeDisabled } = (0,_mixins__WEBPACK_IMPORTED_MODULE_2__["default"])(props);
        const themeRef = (0,_mixins__WEBPACK_IMPORTED_MODULE_1__["default"])('Empty', '-empty', _styles_index_cssr__WEBPACK_IMPORTED_MODULE_3__["default"], _styles__WEBPACK_IMPORTED_MODULE_4__["default"], props, mergedClsPrefixRef);
        const { localeRef } = (0,_mixins__WEBPACK_IMPORTED_MODULE_5__["default"])('Empty');
        const NConfigProvider = (0,vue__WEBPACK_IMPORTED_MODULE_0__.inject)(_config_provider_src_context__WEBPACK_IMPORTED_MODULE_6__.configProviderInjectionKey, null);
        const mergedDescriptionRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            var _a, _b, _c;
            return ((_a = props.description) !== null && _a !== void 0 ? _a : (_c = (_b = NConfigProvider === null || NConfigProvider === void 0 ? void 0 : NConfigProvider.mergedComponentPropsRef.value) === null || _b === void 0 ? void 0 : _b.Empty) === null || _c === void 0 ? void 0 : _c.description);
        });
        const mergedRenderIconRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            var _a, _b;
            return ((_b = (_a = NConfigProvider === null || NConfigProvider === void 0 ? void 0 : NConfigProvider.mergedComponentPropsRef.value) === null || _a === void 0 ? void 0 : _a.Empty) === null || _b === void 0 ? void 0 : _b.renderIcon) ||
                (() => (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_internal_icons__WEBPACK_IMPORTED_MODULE_7__["default"], null));
        });
        const cssVarsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { size } = props;
            const { common: { cubicBezierEaseInOut }, self: { [(0,_utils__WEBPACK_IMPORTED_MODULE_8__.createKey)('iconSize', size)]: iconSize, [(0,_utils__WEBPACK_IMPORTED_MODULE_8__.createKey)('fontSize', size)]: fontSize, textColor, iconColor, extraTextColor } } = themeRef.value;
            return {
                '--n-icon-size': iconSize,
                '--n-font-size': fontSize,
                '--n-bezier': cubicBezierEaseInOut,
                '--n-text-color': textColor,
                '--n-icon-color': iconColor,
                '--n-extra-text-color': extraTextColor
            };
        });
        const themeClassHandle = inlineThemeDisabled
            ? (0,_mixins__WEBPACK_IMPORTED_MODULE_9__.useThemeClass)('empty', (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
                let hash = '';
                const { size } = props;
                hash += size[0];
                return hash;
            }), cssVarsRef, props)
            : undefined;
        return {
            mergedClsPrefix: mergedClsPrefixRef,
            mergedRenderIcon: mergedRenderIconRef,
            localizedDescription: (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
                return mergedDescriptionRef.value || localeRef.value.description;
            }),
            cssVars: inlineThemeDisabled ? undefined : cssVarsRef,
            themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,
            onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender
        };
    },
    render() {
        const { $slots, mergedClsPrefix, onRender } = this;
        onRender === null || onRender === void 0 ? void 0 : onRender();
        return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: [`${mergedClsPrefix}-empty`, this.themeClass], style: this.cssVars },
            this.showIcon ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${mergedClsPrefix}-empty__icon` }, $slots.icon ? ($slots.icon()) : ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_internal_icon__WEBPACK_IMPORTED_MODULE_10__["default"], { clsPrefix: mergedClsPrefix }, { default: this.mergedRenderIcon })))) : null,
            this.showDescription ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${mergedClsPrefix}-empty__description` }, $slots.default ? $slots.default() : this.localizedDescription)) : null,
            $slots.extra ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${mergedClsPrefix}-empty__extra` }, $slots.extra())) : null));
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/empty/src/styles/index.cssr.js":
/*!*****************************************************************!*\
  !*** ./node_modules/naive-ui/es/empty/src/styles/index.cssr.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_cssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../_utils/cssr */ "./node_modules/naive-ui/es/_utils/cssr/index.js");

// vars:
// --n-font-size
// --n-icon-size
// --n-icon-color
// --n-bezier
// --n-text-color
// --n-extra-text-color
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('empty', `
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('icon', `
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('+', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('description', `
 margin-top: 8px;
 `)])]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('description', `
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('extra', `
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]));

/***/ }),

/***/ "./node_modules/naive-ui/es/empty/styles/_common.js":
/*!**********************************************************!*\
  !*** ./node_modules/naive-ui/es/empty/styles/_common.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    iconSizeSmall: '34px',
    iconSizeMedium: '40px',
    iconSizeLarge: '46px',
    iconSizeHuge: '52px'
});


/***/ }),

/***/ "./node_modules/naive-ui/es/empty/styles/light.js":
/*!********************************************************!*\
  !*** ./node_modules/naive-ui/es/empty/styles/light.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   self: () => (/* binding */ self)
/* harmony export */ });
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_common */ "./node_modules/naive-ui/es/empty/styles/_common.js");
/* harmony import */ var _styles_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../_styles/common */ "./node_modules/naive-ui/es/_styles/common/light.js");


const self = (vars) => {
    const { textColorDisabled, iconColor, textColor2, fontSizeSmall, fontSizeMedium, fontSizeLarge, fontSizeHuge } = vars;
    return Object.assign(Object.assign({}, _common__WEBPACK_IMPORTED_MODULE_0__["default"]), { fontSizeSmall,
        fontSizeMedium,
        fontSizeLarge,
        fontSizeHuge, textColor: textColorDisabled, iconColor, extraTextColor: textColor2 });
};
const emptyLight = {
    name: 'Empty',
    common: _styles_common__WEBPACK_IMPORTED_MODULE_1__["default"],
    self
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (emptyLight);


/***/ }),

/***/ "./node_modules/naive-ui/es/select/src/Select.js":
/*!*******************************************************!*\
  !*** ./node_modules/naive-ui/es/select/src/Select.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   selectProps: () => (/* binding */ selectProps)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var seemly__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! seemly */ "./node_modules/seemly/es/dom/get-precise-event-target.js");
/* harmony import */ var seemly__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! seemly */ "./node_modules/seemly/es/dom/happens-in.js");
/* harmony import */ var treemate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! treemate */ "./node_modules/treemate/es/create.js");
/* harmony import */ var vueuc__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! vueuc */ "./node_modules/vueuc/es/binder/src/Binder.js");
/* harmony import */ var vueuc__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! vueuc */ "./node_modules/vueuc/es/binder/src/Target.js");
/* harmony import */ var vueuc__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! vueuc */ "./node_modules/vueuc/es/binder/src/Follower.js");
/* harmony import */ var vooks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! vooks */ "./node_modules/vooks/es/use-merged-state.js");
/* harmony import */ var vooks__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! vooks */ "./node_modules/vooks/es/use-compitable.js");
/* harmony import */ var vooks__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! vooks */ "./node_modules/vooks/es/life-cycle/use-is-mounted.js");
/* harmony import */ var vdirs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! vdirs */ "./node_modules/vdirs/es/clickoutside.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-theme.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-config.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-locale.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-form-item.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-css-vars-class.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/composable/use-adjusted-to.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/naive/warn.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/vue/call.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/event/index.js");
/* harmony import */ var _internal__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../_internal */ "./node_modules/naive-ui/es/_internal/selection/src/Selection.js");
/* harmony import */ var _internal__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../_internal */ "./node_modules/naive-ui/es/_internal/select-menu/src/SelectMenu.js");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles */ "./node_modules/naive-ui/es/select/styles/light.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils */ "./node_modules/naive-ui/es/select/src/utils.js");
/* harmony import */ var _styles_index_cssr__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./styles/index.cssr */ "./node_modules/naive-ui/es/select/src/styles/index.cssr.js");












const selectProps = Object.assign(Object.assign({}, _mixins__WEBPACK_IMPORTED_MODULE_1__["default"].props), { to: _utils__WEBPACK_IMPORTED_MODULE_2__.useAdjustedTo.propTo, bordered: {
        type: Boolean,
        default: undefined
    }, clearable: Boolean, clearFilterAfterSelect: {
        type: Boolean,
        default: true
    }, options: {
        type: Array,
        default: () => []
    }, defaultValue: {
        type: [String, Number, Array],
        default: null
    }, keyboard: {
        type: Boolean,
        default: true
    }, value: [String, Number, Array], placeholder: String, menuProps: Object, multiple: Boolean, size: String, filterable: Boolean, disabled: {
        type: Boolean,
        default: undefined
    }, remote: Boolean, loading: Boolean, filter: Function, placement: {
        type: String,
        default: 'bottom-start'
    }, widthMode: {
        type: String,
        default: 'trigger'
    }, tag: Boolean, onCreate: Function, fallbackOption: {
        type: [Function, Boolean],
        default: undefined
    }, show: {
        type: Boolean,
        default: undefined
    }, showArrow: {
        type: Boolean,
        default: true
    }, maxTagCount: [Number, String], consistentMenuWidth: {
        type: Boolean,
        default: true
    }, virtualScroll: {
        type: Boolean,
        default: true
    }, labelField: {
        type: String,
        default: 'label'
    }, valueField: {
        type: String,
        default: 'value'
    }, childrenField: {
        type: String,
        default: 'children'
    }, renderLabel: Function, renderOption: Function, renderTag: Function, 'onUpdate:value': [Function, Array], inputProps: Object, nodeProps: Function, ignoreComposition: { type: Boolean, default: true }, showOnFocus: Boolean, 
    // for jsx
    onUpdateValue: [Function, Array], onBlur: [Function, Array], onClear: [Function, Array], onFocus: [Function, Array], onScroll: [Function, Array], onSearch: [Function, Array], onUpdateShow: [Function, Array], 'onUpdate:show': [Function, Array], displayDirective: {
        type: String,
        default: 'show'
    }, resetMenuOnOptionsChange: {
        type: Boolean,
        default: true
    }, status: String, showCheckmark: {
        type: Boolean,
        default: true
    }, 
    /** deprecated */
    onChange: [Function, Array], items: Array });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'Select',
    props: selectProps,
    setup(props) {
        if (true) {
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.watchEffect)(() => {
                if (props.items !== undefined) {
                    (0,_utils__WEBPACK_IMPORTED_MODULE_3__.warnOnce)('select', '`items` is deprecated, please use `options` instead.');
                }
                if (props.onChange !== undefined) {
                    (0,_utils__WEBPACK_IMPORTED_MODULE_3__.warnOnce)('select', '`on-change` is deprecated, please use `on-update:value` instead.');
                }
            });
        }
        const { mergedClsPrefixRef, mergedBorderedRef, namespaceRef, inlineThemeDisabled } = (0,_mixins__WEBPACK_IMPORTED_MODULE_4__["default"])(props);
        const themeRef = (0,_mixins__WEBPACK_IMPORTED_MODULE_1__["default"])('Select', '-select', _styles_index_cssr__WEBPACK_IMPORTED_MODULE_5__["default"], _styles__WEBPACK_IMPORTED_MODULE_6__["default"], props, mergedClsPrefixRef);
        const uncontrolledValueRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(props.defaultValue);
        const controlledValueRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'value');
        const mergedValueRef = (0,vooks__WEBPACK_IMPORTED_MODULE_7__["default"])(controlledValueRef, uncontrolledValueRef);
        const focusedRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);
        const patternRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)('');
        const treeMateRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { valueField, childrenField } = props;
            const options = (0,_utils__WEBPACK_IMPORTED_MODULE_8__.createTmOptions)(valueField, childrenField);
            return (0,treemate__WEBPACK_IMPORTED_MODULE_9__.createTreeMate)(filteredOptionsRef.value, options);
        });
        const valOptMapRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => (0,_utils__WEBPACK_IMPORTED_MODULE_8__.createValOptMap)(localOptionsRef.value, props.valueField, props.childrenField));
        const uncontrolledShowRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);
        const mergedShowRef = (0,vooks__WEBPACK_IMPORTED_MODULE_7__["default"])((0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'show'), uncontrolledShowRef);
        const triggerRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const followerRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const menuRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const { localeRef } = (0,_mixins__WEBPACK_IMPORTED_MODULE_10__["default"])('Select');
        const localizedPlaceholderRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            var _a;
            return (_a = props.placeholder) !== null && _a !== void 0 ? _a : localeRef.value.placeholder;
        });
        const compitableOptionsRef = (0,vooks__WEBPACK_IMPORTED_MODULE_11__["default"])(props, ['items', 'options']);
        const emptyArray = [];
        const createdOptionsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)([]);
        const beingCreatedOptionsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)([]);
        const memoValOptMapRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(new Map());
        const wrappedFallbackOptionRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { fallbackOption } = props;
            if (fallbackOption === undefined) {
                const { labelField, valueField } = props;
                return (value) => ({
                    [labelField]: String(value),
                    [valueField]: value
                });
            }
            if (fallbackOption === false)
                return false;
            return (value) => {
                return Object.assign(fallbackOption(value), {
                    value
                });
            };
        });
        const localOptionsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            return beingCreatedOptionsRef.value.concat(createdOptionsRef.value).concat(compitableOptionsRef.value);
        });
        const resolvedFilterRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { filter } = props;
            if (filter)
                return filter;
            const { labelField, valueField } = props;
            return (pattern, option) => {
                if (!option)
                    return false;
                const label = option[labelField];
                if (typeof label === 'string') {
                    return (0,_utils__WEBPACK_IMPORTED_MODULE_8__.patternMatched)(pattern, label);
                }
                const value = option[valueField];
                if (typeof value === 'string') {
                    return (0,_utils__WEBPACK_IMPORTED_MODULE_8__.patternMatched)(pattern, value);
                }
                if (typeof value === 'number') {
                    return (0,_utils__WEBPACK_IMPORTED_MODULE_8__.patternMatched)(pattern, String(value));
                }
                return false;
            };
        });
        const filteredOptionsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            if (props.remote) {
                return compitableOptionsRef.value;
            }
            else {
                const { value: localOptions } = localOptionsRef;
                const { value: pattern } = patternRef;
                if (!pattern.length || !props.filterable) {
                    return localOptions;
                }
                else {
                    return (0,_utils__WEBPACK_IMPORTED_MODULE_8__.filterOptions)(localOptions, resolvedFilterRef.value, pattern, props.childrenField);
                }
            }
        });
        function getMergedOptions(values) {
            const remote = props.remote;
            const { value: memoValOptMap } = memoValOptMapRef;
            const { value: valOptMap } = valOptMapRef;
            const { value: wrappedFallbackOption } = wrappedFallbackOptionRef;
            const options = [];
            values.forEach((value) => {
                if (valOptMap.has(value)) {
                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                    options.push(valOptMap.get(value));
                }
                else if (remote && memoValOptMap.has(value)) {
                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                    options.push(memoValOptMap.get(value));
                }
                else if (wrappedFallbackOption) {
                    const option = wrappedFallbackOption(value);
                    if (option) {
                        options.push(option);
                    }
                }
            });
            return options;
        }
        const selectedOptionsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            if (props.multiple) {
                const { value: values } = mergedValueRef;
                if (!Array.isArray(values))
                    return [];
                return getMergedOptions(values);
            }
            return null;
        });
        const selectedOptionRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { value: mergedValue } = mergedValueRef;
            if (!props.multiple && !Array.isArray(mergedValue)) {
                if (mergedValue === null)
                    return null;
                return getMergedOptions([mergedValue])[0] || null;
            }
            return null;
        });
        const formItem = (0,_mixins__WEBPACK_IMPORTED_MODULE_12__["default"])(props);
        const { mergedSizeRef, mergedDisabledRef, mergedStatusRef } = formItem;
        function doUpdateValue(value, option) {
            const { onChange, 'onUpdate:value': _onUpdateValue, onUpdateValue } = props;
            const { nTriggerFormChange, nTriggerFormInput } = formItem;
            if (onChange)
                (0,_utils__WEBPACK_IMPORTED_MODULE_13__.call)(onChange, value, option);
            if (onUpdateValue)
                (0,_utils__WEBPACK_IMPORTED_MODULE_13__.call)(onUpdateValue, value, option);
            if (_onUpdateValue) {
                (0,_utils__WEBPACK_IMPORTED_MODULE_13__.call)(_onUpdateValue, value, option);
            }
            uncontrolledValueRef.value = value;
            nTriggerFormChange();
            nTriggerFormInput();
        }
        function doBlur(e) {
            const { onBlur } = props;
            const { nTriggerFormBlur } = formItem;
            if (onBlur)
                (0,_utils__WEBPACK_IMPORTED_MODULE_13__.call)(onBlur, e);
            nTriggerFormBlur();
        }
        function doClear() {
            const { onClear } = props;
            if (onClear)
                (0,_utils__WEBPACK_IMPORTED_MODULE_13__.call)(onClear);
        }
        function doFocus(e) {
            const { onFocus, showOnFocus } = props;
            const { nTriggerFormFocus } = formItem;
            if (onFocus)
                (0,_utils__WEBPACK_IMPORTED_MODULE_13__.call)(onFocus, e);
            nTriggerFormFocus();
            if (showOnFocus) {
                openMenu();
            }
        }
        function doSearch(value) {
            const { onSearch } = props;
            if (onSearch)
                (0,_utils__WEBPACK_IMPORTED_MODULE_13__.call)(onSearch, value);
        }
        function doScroll(e) {
            const { onScroll } = props;
            if (onScroll)
                (0,_utils__WEBPACK_IMPORTED_MODULE_13__.call)(onScroll, e);
        }
        // remote related methods
        function updateMemorizedOptions() {
            var _a;
            const { remote, multiple } = props;
            if (remote) {
                const { value: memoValOptMap } = memoValOptMapRef;
                if (multiple) {
                    const { valueField } = props;
                    (_a = selectedOptionsRef.value) === null || _a === void 0 ? void 0 : _a.forEach((option) => {
                        memoValOptMap.set(option[valueField], option);
                    });
                }
                else {
                    const option = selectedOptionRef.value;
                    if (option) {
                        memoValOptMap.set(option[props.valueField], option);
                    }
                }
            }
        }
        // menu related methods
        function doUpdateShow(value) {
            const { onUpdateShow, 'onUpdate:show': _onUpdateShow } = props;
            if (onUpdateShow)
                (0,_utils__WEBPACK_IMPORTED_MODULE_13__.call)(onUpdateShow, value);
            if (_onUpdateShow)
                (0,_utils__WEBPACK_IMPORTED_MODULE_13__.call)(_onUpdateShow, value);
            uncontrolledShowRef.value = value;
        }
        function openMenu() {
            if (!mergedDisabledRef.value) {
                doUpdateShow(true);
                uncontrolledShowRef.value = true;
                if (props.filterable) {
                    focusSelectionInput();
                }
            }
        }
        function closeMenu() {
            doUpdateShow(false);
        }
        function handleMenuAfterLeave() {
            patternRef.value = '';
            beingCreatedOptionsRef.value = emptyArray;
        }
        const activeWithoutMenuOpenRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(false);
        function onTriggerInputFocus() {
            if (props.filterable) {
                activeWithoutMenuOpenRef.value = true;
            }
        }
        function onTriggerInputBlur() {
            if (props.filterable) {
                activeWithoutMenuOpenRef.value = false;
                if (!mergedShowRef.value) {
                    handleMenuAfterLeave();
                }
            }
        }
        function handleTriggerClick() {
            if (mergedDisabledRef.value)
                return;
            if (!mergedShowRef.value) {
                openMenu();
            }
            else {
                if (!props.filterable) {
                    // already focused, don't need to return focus
                    closeMenu();
                }
                else {
                    focusSelectionInput();
                }
            }
        }
        function handleTriggerBlur(e) {
            var _a, _b;
            if ((_b = (_a = menuRef.value) === null || _a === void 0 ? void 0 : _a.selfRef) === null || _b === void 0 ? void 0 : _b.contains(e.relatedTarget)) {
                return;
            }
            focusedRef.value = false;
            doBlur(e);
            // outside select, don't need to return focus
            closeMenu();
        }
        function handleTriggerFocus(e) {
            doFocus(e);
            focusedRef.value = true;
        }
        function handleMenuFocus(e) {
            focusedRef.value = true;
        }
        function handleMenuBlur(e) {
            var _a;
            if ((_a = triggerRef.value) === null || _a === void 0 ? void 0 : _a.$el.contains(e.relatedTarget))
                return;
            focusedRef.value = false;
            doBlur(e);
            // outside select, don't need to return focus
            closeMenu();
        }
        function handleMenuTabOut() {
            var _a;
            (_a = triggerRef.value) === null || _a === void 0 ? void 0 : _a.focus();
            closeMenu();
        }
        function handleMenuClickOutside(e) {
            var _a;
            if (mergedShowRef.value) {
                if (!((_a = triggerRef.value) === null || _a === void 0 ? void 0 : _a.$el.contains((0,seemly__WEBPACK_IMPORTED_MODULE_14__.getPreciseEventTarget)(e)))) {
                    // outside select, don't need to return focus
                    closeMenu();
                }
            }
        }
        function createClearedMultipleSelectValue(value) {
            if (!Array.isArray(value))
                return [];
            if (wrappedFallbackOptionRef.value) {
                // if option has a fallback, I can't help user to clear some unknown value
                return Array.from(value);
            }
            else {
                // if there's no option fallback, unappeared options are treated as invalid
                const { remote } = props;
                const { value: valOptMap } = valOptMapRef;
                if (remote) {
                    const { value: memoValOptMap } = memoValOptMapRef;
                    return value.filter((v) => valOptMap.has(v) || memoValOptMap.has(v));
                }
                else {
                    return value.filter((v) => valOptMap.has(v));
                }
            }
        }
        function handleToggleByTmNode(tmNode) {
            handleToggleByOption(tmNode.rawNode);
        }
        function handleToggleByOption(option) {
            if (mergedDisabledRef.value)
                return;
            const { tag, remote, clearFilterAfterSelect, valueField } = props;
            if (tag && !remote) {
                const { value: beingCreatedOptions } = beingCreatedOptionsRef;
                const beingCreatedOption = beingCreatedOptions[0] || null;
                if (beingCreatedOption) {
                    const createdOptions = createdOptionsRef.value;
                    if (!createdOptions.length) {
                        createdOptionsRef.value = [beingCreatedOption];
                    }
                    else {
                        createdOptions.push(beingCreatedOption);
                    }
                    beingCreatedOptionsRef.value = emptyArray;
                }
            }
            if (remote) {
                memoValOptMapRef.value.set(option[valueField], option);
            }
            if (props.multiple) {
                const changedValue = createClearedMultipleSelectValue(mergedValueRef.value);
                const index = changedValue.findIndex((value) => value === option[valueField]);
                if (~index) {
                    changedValue.splice(index, 1);
                    if (tag && !remote) {
                        const createdOptionIndex = getCreatedOptionIndex(option[valueField]);
                        if (~createdOptionIndex) {
                            createdOptionsRef.value.splice(createdOptionIndex, 1);
                            if (clearFilterAfterSelect)
                                patternRef.value = '';
                        }
                    }
                }
                else {
                    changedValue.push(option[valueField]);
                    if (clearFilterAfterSelect)
                        patternRef.value = '';
                }
                doUpdateValue(changedValue, getMergedOptions(changedValue));
            }
            else {
                if (tag && !remote) {
                    const createdOptionIndex = getCreatedOptionIndex(option[valueField]);
                    if (~createdOptionIndex) {
                        createdOptionsRef.value = [
                            createdOptionsRef.value[createdOptionIndex]
                        ];
                    }
                    else {
                        createdOptionsRef.value = emptyArray;
                    }
                }
                focusSelection();
                closeMenu();
                doUpdateValue(option[valueField], option);
            }
        }
        function getCreatedOptionIndex(optionValue) {
            const createdOptions = createdOptionsRef.value;
            return createdOptions.findIndex((createdOption) => createdOption[props.valueField] === optionValue);
        }
        function handlePatternInput(e) {
            if (!mergedShowRef.value) {
                openMenu();
            }
            const { value } = e.target;
            patternRef.value = value;
            const { tag, remote } = props;
            doSearch(value);
            if (tag && !remote) {
                if (!value) {
                    beingCreatedOptionsRef.value = emptyArray;
                    return;
                }
                const { onCreate } = props;
                const optionBeingCreated = onCreate
                    ? onCreate(value)
                    : { [props.labelField]: value, [props.valueField]: value };
                const { valueField } = props;
                if (compitableOptionsRef.value.some((option) => option[valueField] === optionBeingCreated[valueField]) ||
                    createdOptionsRef.value.some((option) => option[valueField] === optionBeingCreated[valueField])) {
                    beingCreatedOptionsRef.value = emptyArray;
                }
                else {
                    beingCreatedOptionsRef.value = [optionBeingCreated];
                }
            }
        }
        function handleClear(e) {
            e.stopPropagation();
            const { multiple } = props;
            if (!multiple && props.filterable) {
                closeMenu();
            }
            doClear();
            if (multiple) {
                doUpdateValue([], []);
            }
            else {
                doUpdateValue(null, null);
            }
        }
        function handleMenuMousedown(e) {
            if (!(0,seemly__WEBPACK_IMPORTED_MODULE_15__.happensIn)(e, 'action') && !(0,seemly__WEBPACK_IMPORTED_MODULE_15__.happensIn)(e, 'empty'))
                e.preventDefault();
        }
        // scroll events on menu
        function handleMenuScroll(e) {
            doScroll(e);
        }
        // keyboard events
        // also for menu keydown
        function handleKeydown(e) {
            var _a, _b, _c, _d, _e;
            if (!props.keyboard) {
                e.preventDefault();
                return;
            }
            switch (e.key) {
                case ' ':
                    if (props.filterable)
                        break;
                    else {
                        e.preventDefault();
                    }
                // eslint-disable-next-line no-fallthrough
                case 'Enter':
                    if (!((_a = triggerRef.value) === null || _a === void 0 ? void 0 : _a.isComposing)) {
                        if (mergedShowRef.value) {
                            const pendingTmNode = (_b = menuRef.value) === null || _b === void 0 ? void 0 : _b.getPendingTmNode();
                            if (pendingTmNode) {
                                handleToggleByTmNode(pendingTmNode);
                            }
                            else if (!props.filterable) {
                                closeMenu();
                                focusSelection();
                            }
                        }
                        else {
                            openMenu();
                            if (props.tag && activeWithoutMenuOpenRef.value) {
                                const beingCreatedOption = beingCreatedOptionsRef.value[0];
                                if (beingCreatedOption) {
                                    const optionValue = beingCreatedOption[props.valueField];
                                    const { value: mergedValue } = mergedValueRef;
                                    if (props.multiple) {
                                        if (Array.isArray(mergedValue) &&
                                            mergedValue.some((value) => value === optionValue)) {
                                            // do nothing
                                        }
                                        else {
                                            handleToggleByOption(beingCreatedOption);
                                        }
                                    }
                                    else {
                                        handleToggleByOption(beingCreatedOption);
                                    }
                                }
                            }
                        }
                    }
                    e.preventDefault();
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    if (props.loading)
                        return;
                    if (mergedShowRef.value) {
                        (_c = menuRef.value) === null || _c === void 0 ? void 0 : _c.prev();
                    }
                    break;
                case 'ArrowDown':
                    e.preventDefault();
                    if (props.loading)
                        return;
                    if (mergedShowRef.value) {
                        (_d = menuRef.value) === null || _d === void 0 ? void 0 : _d.next();
                    }
                    else {
                        openMenu();
                    }
                    break;
                case 'Escape':
                    if (mergedShowRef.value) {
                        (0,_utils__WEBPACK_IMPORTED_MODULE_16__.markEventEffectPerformed)(e);
                        closeMenu();
                    }
                    (_e = triggerRef.value) === null || _e === void 0 ? void 0 : _e.focus();
                    break;
            }
        }
        function focusSelection() {
            var _a;
            (_a = triggerRef.value) === null || _a === void 0 ? void 0 : _a.focus();
        }
        function focusSelectionInput() {
            var _a;
            (_a = triggerRef.value) === null || _a === void 0 ? void 0 : _a.focusInput();
        }
        function handleTriggerOrMenuResize() {
            var _a;
            if (!mergedShowRef.value)
                return;
            (_a = followerRef.value) === null || _a === void 0 ? void 0 : _a.syncPosition();
        }
        updateMemorizedOptions();
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)((0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'options'), updateMemorizedOptions);
        const exposedMethods = {
            focus: () => {
                var _a;
                (_a = triggerRef.value) === null || _a === void 0 ? void 0 : _a.focus();
            },
            blur: () => {
                var _a;
                (_a = triggerRef.value) === null || _a === void 0 ? void 0 : _a.blur();
            }
        };
        const cssVarsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { self: { menuBoxShadow } } = themeRef.value;
            return {
                '--n-menu-box-shadow': menuBoxShadow
            };
        });
        const themeClassHandle = inlineThemeDisabled
            ? (0,_mixins__WEBPACK_IMPORTED_MODULE_17__.useThemeClass)('select', undefined, cssVarsRef, props)
            : undefined;
        return Object.assign(Object.assign({}, exposedMethods), { mergedStatus: mergedStatusRef, mergedClsPrefix: mergedClsPrefixRef, mergedBordered: mergedBorderedRef, namespace: namespaceRef, treeMate: treeMateRef, isMounted: (0,vooks__WEBPACK_IMPORTED_MODULE_18__["default"])(), triggerRef,
            menuRef, pattern: patternRef, uncontrolledShow: uncontrolledShowRef, mergedShow: mergedShowRef, adjustedTo: (0,_utils__WEBPACK_IMPORTED_MODULE_2__.useAdjustedTo)(props), uncontrolledValue: uncontrolledValueRef, mergedValue: mergedValueRef, followerRef, localizedPlaceholder: localizedPlaceholderRef, selectedOption: selectedOptionRef, selectedOptions: selectedOptionsRef, mergedSize: mergedSizeRef, mergedDisabled: mergedDisabledRef, focused: focusedRef, activeWithoutMenuOpen: activeWithoutMenuOpenRef, inlineThemeDisabled,
            onTriggerInputFocus,
            onTriggerInputBlur,
            handleTriggerOrMenuResize,
            handleMenuFocus,
            handleMenuBlur,
            handleMenuTabOut,
            handleTriggerClick, handleToggle: handleToggleByTmNode, handleDeleteOption: handleToggleByOption, handlePatternInput,
            handleClear,
            handleTriggerBlur,
            handleTriggerFocus,
            handleKeydown,
            handleMenuAfterLeave,
            handleMenuClickOutside,
            handleMenuScroll, handleMenuKeydown: handleKeydown, handleMenuMousedown, mergedTheme: themeRef, cssVars: inlineThemeDisabled ? undefined : cssVarsRef, themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass, onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender });
    },
    render() {
        return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${this.mergedClsPrefix}-select` },
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(vueuc__WEBPACK_IMPORTED_MODULE_19__["default"], null, {
                default: () => [
                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(vueuc__WEBPACK_IMPORTED_MODULE_20__["default"], null, {
                        default: () => ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_internal__WEBPACK_IMPORTED_MODULE_21__["default"], { ref: "triggerRef", inlineThemeDisabled: this.inlineThemeDisabled, status: this.mergedStatus, inputProps: this.inputProps, clsPrefix: this.mergedClsPrefix, showArrow: this.showArrow, maxTagCount: this.maxTagCount, bordered: this.mergedBordered, active: this.activeWithoutMenuOpen || this.mergedShow, pattern: this.pattern, placeholder: this.localizedPlaceholder, selectedOption: this.selectedOption, selectedOptions: this.selectedOptions, multiple: this.multiple, renderTag: this.renderTag, renderLabel: this.renderLabel, filterable: this.filterable, clearable: this.clearable, disabled: this.mergedDisabled, size: this.mergedSize, theme: this.mergedTheme.peers.InternalSelection, labelField: this.labelField, valueField: this.valueField, themeOverrides: this.mergedTheme.peerOverrides.InternalSelection, loading: this.loading, focused: this.focused, onClick: this.handleTriggerClick, onDeleteOption: this.handleDeleteOption, onPatternInput: this.handlePatternInput, onClear: this.handleClear, onBlur: this.handleTriggerBlur, onFocus: this.handleTriggerFocus, onKeydown: this.handleKeydown, onPatternBlur: this.onTriggerInputBlur, onPatternFocus: this.onTriggerInputFocus, onResize: this.handleTriggerOrMenuResize, ignoreComposition: this.ignoreComposition }, {
                            arrow: () => { var _a, _b; return [(_b = (_a = this.$slots).arrow) === null || _b === void 0 ? void 0 : _b.call(_a)]; }
                        }))
                    }),
                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(vueuc__WEBPACK_IMPORTED_MODULE_22__["default"], { ref: "followerRef", show: this.mergedShow, to: this.adjustedTo, teleportDisabled: this.adjustedTo === _utils__WEBPACK_IMPORTED_MODULE_2__.useAdjustedTo.tdkey, containerClass: this.namespace, width: this.consistentMenuWidth ? 'target' : undefined, minWidth: "target", placement: this.placement }, {
                        default: () => ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(vue__WEBPACK_IMPORTED_MODULE_0__.Transition, { name: "fade-in-scale-up-transition", appear: this.isMounted, onAfterLeave: this.handleMenuAfterLeave }, {
                            default: () => {
                                var _a, _b, _c;
                                if (!(this.mergedShow ||
                                    this.displayDirective === 'show')) {
                                    return null;
                                }
                                (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);
                                return (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_internal__WEBPACK_IMPORTED_MODULE_23__["default"], Object.assign({}, this.menuProps, { ref: "menuRef", onResize: this.handleTriggerOrMenuResize, inlineThemeDisabled: this.inlineThemeDisabled, virtualScroll: this.consistentMenuWidth && this.virtualScroll, class: [
                                        `${this.mergedClsPrefix}-select-menu`,
                                        this.themeClass,
                                        (_b = this.menuProps) === null || _b === void 0 ? void 0 : _b.class
                                    ], clsPrefix: this.mergedClsPrefix, focusable: true, labelField: this.labelField, valueField: this.valueField, autoPending: true, nodeProps: this.nodeProps, theme: this.mergedTheme.peers.InternalSelectMenu, themeOverrides: this.mergedTheme.peerOverrides
                                        .InternalSelectMenu, treeMate: this.treeMate, multiple: this.multiple, size: "medium", renderOption: this.renderOption, renderLabel: this.renderLabel, value: this.mergedValue, style: [(_c = this.menuProps) === null || _c === void 0 ? void 0 : _c.style, this.cssVars], onToggle: this.handleToggle, onScroll: this.handleMenuScroll, onFocus: this.handleMenuFocus, onBlur: this.handleMenuBlur, onKeydown: this.handleMenuKeydown, onTabOut: this.handleMenuTabOut, onMousedown: this.handleMenuMousedown, show: this.mergedShow, showCheckmark: this.showCheckmark, resetMenuOnOptionsChange: this.resetMenuOnOptionsChange }), {
                                    empty: () => { var _a, _b; return [(_b = (_a = this.$slots).empty) === null || _b === void 0 ? void 0 : _b.call(_a)]; },
                                    action: () => { var _a, _b; return [(_b = (_a = this.$slots).action) === null || _b === void 0 ? void 0 : _b.call(_a)]; }
                                }), this.displayDirective === 'show'
                                    ? [
                                        [vue__WEBPACK_IMPORTED_MODULE_0__.vShow, this.mergedShow],
                                        [
                                            vdirs__WEBPACK_IMPORTED_MODULE_24__["default"],
                                            this.handleMenuClickOutside,
                                            undefined,
                                            { capture: true }
                                        ]
                                    ]
                                    : [
                                        [
                                            vdirs__WEBPACK_IMPORTED_MODULE_24__["default"],
                                            this.handleMenuClickOutside,
                                            undefined,
                                            { capture: true }
                                        ]
                                    ]);
                            }
                        }))
                    })
                ]
            })));
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/select/src/styles/index.cssr.js":
/*!******************************************************************!*\
  !*** ./node_modules/naive-ui/es/select/src/styles/index.cssr.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_cssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../_utils/cssr */ "./node_modules/naive-ui/es/_utils/cssr/index.js");
/* harmony import */ var _styles_transitions_fade_in_scale_up_cssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../_styles/transitions/fade-in-scale-up.cssr */ "./node_modules/naive-ui/es/_styles/transitions/fade-in-scale-up.cssr.js");


// --n-menu-box-shadow
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)([(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('select', `
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('select-menu', `
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `, [(0,_styles_transitions_fade_in_scale_up_cssr__WEBPACK_IMPORTED_MODULE_1__.fadeInScaleUpTransition)({
  originalTransition: 'background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)'
})])]));

/***/ }),

/***/ "./node_modules/naive-ui/es/select/src/utils.js":
/*!******************************************************!*\
  !*** ./node_modules/naive-ui/es/select/src/utils.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createTmOptions: () => (/* binding */ createTmOptions),
/* harmony export */   createValOptMap: () => (/* binding */ createValOptMap),
/* harmony export */   filterOptions: () => (/* binding */ filterOptions),
/* harmony export */   getIgnored: () => (/* binding */ getIgnored),
/* harmony export */   getIsGroup: () => (/* binding */ getIsGroup),
/* harmony export */   patternMatched: () => (/* binding */ patternMatched)
/* harmony export */ });
function getIsGroup(option) {
    return option.type === 'group';
}
function getIgnored(option) {
    return option.type === 'ignored';
}
function patternMatched(pattern, value) {
    try {
        return !!(1 + value.toString().toLowerCase().indexOf(pattern.trim().toLowerCase()));
    }
    catch (err) {
        return false;
    }
}
function createTmOptions(valueField, childrenField) {
    const options = {
        getIsGroup,
        getIgnored,
        getKey(option) {
            if (getIsGroup(option)) {
                return (option.name ||
                    option.key ||
                    'key-required');
            }
            // Required for non-custom label & value field
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            return option[valueField];
        },
        getChildren(option) {
            return option[childrenField];
        }
    };
    return options;
}
function filterOptions(originalOpts, filter, pattern, childrenField) {
    if (!filter)
        return originalOpts;
    function traverse(options) {
        if (!Array.isArray(options))
            return [];
        const filteredOptions = [];
        for (const option of options) {
            if (getIsGroup(option)) {
                const children = traverse(option[childrenField]);
                if (children.length) {
                    filteredOptions.push(Object.assign({}, option, {
                        [childrenField]: children
                    }));
                }
            }
            else if (getIgnored(option)) {
                continue;
            }
            else if (filter(pattern, option)) {
                filteredOptions.push(option);
            }
        }
        return filteredOptions;
    }
    return traverse(originalOpts);
}
function createValOptMap(options, valueField, childrenField) {
    const valOptMap = new Map();
    options.forEach((option) => {
        if (getIsGroup(option)) {
            ;
            option[childrenField].forEach((selectGroupOption) => {
                valOptMap.set(selectGroupOption[valueField], selectGroupOption);
            });
        }
        else {
            valOptMap.set(option[valueField], option);
        }
    });
    return valOptMap;
}


/***/ }),

/***/ "./node_modules/naive-ui/es/select/styles/light.js":
/*!*********************************************************!*\
  !*** ./node_modules/naive-ui/es/select/styles/light.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   self: () => (/* binding */ self)
/* harmony export */ });
/* harmony import */ var _internal_selection_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_internal/selection/styles */ "./node_modules/naive-ui/es/_internal/selection/styles/light.js");
/* harmony import */ var _internal_select_menu_styles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../_internal/select-menu/styles */ "./node_modules/naive-ui/es/_internal/select-menu/styles/light.js");
/* harmony import */ var _styles_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../_styles/common */ "./node_modules/naive-ui/es/_styles/common/light.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-theme.js");




function self(vars) {
    const { boxShadow2 } = vars;
    return {
        menuBoxShadow: boxShadow2
    };
}
const selectLight = (0,_mixins__WEBPACK_IMPORTED_MODULE_0__.createTheme)({
    name: 'Select',
    common: _styles_common__WEBPACK_IMPORTED_MODULE_1__["default"],
    peers: {
        InternalSelection: _internal_selection_styles__WEBPACK_IMPORTED_MODULE_2__["default"],
        InternalSelectMenu: _internal_select_menu_styles__WEBPACK_IMPORTED_MODULE_3__["default"]
    },
    self
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (selectLight);


/***/ }),

/***/ "./node_modules/naive-ui/es/tag/src/Tag.js":
/*!*************************************************!*\
  !*** ./node_modules/naive-ui/es/tag/src/Tag.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   tagInjectionKey: () => (/* binding */ tagInjectionKey),
/* harmony export */   tagProps: () => (/* binding */ tagProps)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var _mixins_use_rtl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../_mixins/use-rtl */ "./node_modules/naive-ui/es/_mixins/use-rtl.js");
/* harmony import */ var _internal_close__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../_internal/close */ "./node_modules/naive-ui/es/_internal/close/src/Close.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-theme.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-config.js");
/* harmony import */ var _mixins__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../_mixins */ "./node_modules/naive-ui/es/_mixins/use-css-vars-class.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/vue/create-injection-key.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/naive/warn.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/vue/call.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/cssr/create-key.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/css/color-to-class.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../_utils */ "./node_modules/naive-ui/es/_utils/vue/resolve-slot.js");
/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../styles */ "./node_modules/naive-ui/es/tag/styles/light.js");
/* harmony import */ var _common_props__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common-props */ "./node_modules/naive-ui/es/tag/src/common-props.js");
/* harmony import */ var _styles_index_cssr__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./styles/index.cssr */ "./node_modules/naive-ui/es/tag/src/styles/index.cssr.js");








const tagProps = Object.assign(Object.assign(Object.assign({}, _mixins__WEBPACK_IMPORTED_MODULE_1__["default"].props), _common_props__WEBPACK_IMPORTED_MODULE_2__["default"]), { bordered: {
        type: Boolean,
        default: undefined
    }, checked: Boolean, checkable: Boolean, strong: Boolean, triggerClickOnClose: Boolean, onClose: [Array, Function], onMouseenter: Function, onMouseleave: Function, 'onUpdate:checked': Function, onUpdateChecked: Function, 
    // private
    internalCloseFocusable: {
        type: Boolean,
        default: true
    }, internalCloseIsButtonTag: {
        type: Boolean,
        default: true
    }, 
    // deprecated
    onCheckedChange: Function });
const tagInjectionKey = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.createInjectionKey)('n-tag');
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'Tag',
    props: tagProps,
    setup(props) {
        if (true) {
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.watchEffect)(() => {
                if (props.onCheckedChange !== undefined) {
                    (0,_utils__WEBPACK_IMPORTED_MODULE_4__.warnOnce)('tag', '`on-checked-change` is deprecated, please use `on-update:checked` instead');
                }
            });
        }
        const contentRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const { mergedBorderedRef, mergedClsPrefixRef, inlineThemeDisabled, mergedRtlRef } = (0,_mixins__WEBPACK_IMPORTED_MODULE_5__["default"])(props);
        const themeRef = (0,_mixins__WEBPACK_IMPORTED_MODULE_1__["default"])('Tag', '-tag', _styles_index_cssr__WEBPACK_IMPORTED_MODULE_6__["default"], _styles__WEBPACK_IMPORTED_MODULE_7__["default"], props, mergedClsPrefixRef);
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.provide)(tagInjectionKey, {
            roundRef: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(props, 'round')
        });
        function handleClick(e) {
            if (!props.disabled) {
                if (props.checkable) {
                    const { checked, onCheckedChange, onUpdateChecked, 'onUpdate:checked': _onUpdateChecked } = props;
                    if (onUpdateChecked)
                        onUpdateChecked(!checked);
                    if (_onUpdateChecked)
                        _onUpdateChecked(!checked);
                    // deprecated
                    if (onCheckedChange)
                        onCheckedChange(!checked);
                }
            }
        }
        function handleCloseClick(e) {
            if (!props.triggerClickOnClose) {
                e.stopPropagation();
            }
            if (!props.disabled) {
                const { onClose } = props;
                if (onClose)
                    (0,_utils__WEBPACK_IMPORTED_MODULE_8__.call)(onClose, e);
            }
        }
        const tagPublicMethods = {
            setTextContent(textContent) {
                const { value } = contentRef;
                if (value)
                    value.textContent = textContent;
            }
        };
        const rtlEnabledRef = (0,_mixins_use_rtl__WEBPACK_IMPORTED_MODULE_9__.useRtl)('Tag', mergedRtlRef, mergedClsPrefixRef);
        const cssVarsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { type, size, color: { color, textColor } = {} } = props;
            const { common: { cubicBezierEaseInOut }, self: { padding, closeMargin, closeMarginRtl, borderRadius, opacityDisabled, textColorCheckable, textColorHoverCheckable, textColorPressedCheckable, textColorChecked, colorCheckable, colorHoverCheckable, colorPressedCheckable, colorChecked, colorCheckedHover, colorCheckedPressed, closeBorderRadius, fontWeightStrong, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('colorBordered', type)]: colorBordered, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('closeSize', size)]: closeSize, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('closeIconSize', size)]: closeIconSize, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('fontSize', size)]: fontSize, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('height', size)]: height, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('color', type)]: typedColor, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('textColor', type)]: typeTextColor, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('border', type)]: border, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('closeIconColor', type)]: closeIconColor, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('closeIconColorHover', type)]: closeIconColorHover, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('closeIconColorPressed', type)]: closeIconColorPressed, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('closeColorHover', type)]: closeColorHover, [(0,_utils__WEBPACK_IMPORTED_MODULE_10__.createKey)('closeColorPressed', type)]: closeColorPressed } } = themeRef.value;
            return {
                '--n-font-weight-strong': fontWeightStrong,
                '--n-avatar-size-override': `calc(${height} - 8px)`,
                '--n-bezier': cubicBezierEaseInOut,
                '--n-border-radius': borderRadius,
                '--n-border': border,
                '--n-close-icon-size': closeIconSize,
                '--n-close-color-pressed': closeColorPressed,
                '--n-close-color-hover': closeColorHover,
                '--n-close-border-radius': closeBorderRadius,
                '--n-close-icon-color': closeIconColor,
                '--n-close-icon-color-hover': closeIconColorHover,
                '--n-close-icon-color-pressed': closeIconColorPressed,
                '--n-close-icon-color-disabled': closeIconColor,
                '--n-close-margin': closeMargin,
                '--n-close-margin-rtl': closeMarginRtl,
                '--n-close-size': closeSize,
                '--n-color': color || (mergedBorderedRef.value ? colorBordered : typedColor),
                '--n-color-checkable': colorCheckable,
                '--n-color-checked': colorChecked,
                '--n-color-checked-hover': colorCheckedHover,
                '--n-color-checked-pressed': colorCheckedPressed,
                '--n-color-hover-checkable': colorHoverCheckable,
                '--n-color-pressed-checkable': colorPressedCheckable,
                '--n-font-size': fontSize,
                '--n-height': height,
                '--n-opacity-disabled': opacityDisabled,
                '--n-padding': padding,
                '--n-text-color': textColor || typeTextColor,
                '--n-text-color-checkable': textColorCheckable,
                '--n-text-color-checked': textColorChecked,
                '--n-text-color-hover-checkable': textColorHoverCheckable,
                '--n-text-color-pressed-checkable': textColorPressedCheckable
            };
        });
        const themeClassHandle = inlineThemeDisabled
            ? (0,_mixins__WEBPACK_IMPORTED_MODULE_11__.useThemeClass)('tag', (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
                let hash = '';
                const { type, size, color: { color, textColor } = {} } = props;
                hash += type[0];
                hash += size[0];
                if (color) {
                    hash += `a${(0,_utils__WEBPACK_IMPORTED_MODULE_12__.color2Class)(color)}`;
                }
                if (textColor) {
                    hash += `b${(0,_utils__WEBPACK_IMPORTED_MODULE_12__.color2Class)(textColor)}`;
                }
                if (mergedBorderedRef.value) {
                    hash += 'c';
                }
                return hash;
            }), cssVarsRef, props)
            : undefined;
        return Object.assign(Object.assign({}, tagPublicMethods), { rtlEnabled: rtlEnabledRef, mergedClsPrefix: mergedClsPrefixRef, contentRef, mergedBordered: mergedBorderedRef, handleClick,
            handleCloseClick, cssVars: inlineThemeDisabled ? undefined : cssVarsRef, themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass, onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender });
    },
    render() {
        var _a, _b;
        const { mergedClsPrefix, rtlEnabled, closable, color: { borderColor } = {}, round, onRender, $slots } = this;
        onRender === null || onRender === void 0 ? void 0 : onRender();
        const avatarNode = (0,_utils__WEBPACK_IMPORTED_MODULE_13__.resolveWrappedSlot)($slots.avatar, (children) => children && ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${mergedClsPrefix}-tag__avatar` }, children)));
        const iconNode = (0,_utils__WEBPACK_IMPORTED_MODULE_13__.resolveWrappedSlot)($slots.icon, (children) => children && (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${mergedClsPrefix}-tag__icon` }, children));
        return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: [
                `${mergedClsPrefix}-tag`,
                this.themeClass,
                {
                    [`${mergedClsPrefix}-tag--rtl`]: rtlEnabled,
                    [`${mergedClsPrefix}-tag--strong`]: this.strong,
                    [`${mergedClsPrefix}-tag--disabled`]: this.disabled,
                    [`${mergedClsPrefix}-tag--checkable`]: this.checkable,
                    [`${mergedClsPrefix}-tag--checked`]: this.checkable && this.checked,
                    [`${mergedClsPrefix}-tag--round`]: round,
                    [`${mergedClsPrefix}-tag--avatar`]: avatarNode,
                    [`${mergedClsPrefix}-tag--icon`]: iconNode,
                    [`${mergedClsPrefix}-tag--closable`]: closable
                }
            ], style: this.cssVars, onClick: this.handleClick, onMouseenter: this.onMouseenter, onMouseleave: this.onMouseleave },
            iconNode || avatarNode,
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: `${mergedClsPrefix}-tag__content`, ref: "contentRef" }, (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a)),
            !this.checkable && closable ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_internal_close__WEBPACK_IMPORTED_MODULE_14__["default"], { clsPrefix: mergedClsPrefix, class: `${mergedClsPrefix}-tag__close`, disabled: this.disabled, onClick: this.handleCloseClick, focusable: this.internalCloseFocusable, round: round, isButtonTag: this.internalCloseIsButtonTag, absolute: true })) : null,
            !this.checkable && this.mergedBordered ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${mergedClsPrefix}-tag__border`, style: { borderColor } })) : null));
    }
}));


/***/ }),

/***/ "./node_modules/naive-ui/es/tag/src/common-props.js":
/*!**********************************************************!*\
  !*** ./node_modules/naive-ui/es/tag/src/common-props.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    color: Object,
    type: {
        type: String,
        default: 'default'
    },
    round: Boolean,
    size: {
        type: String,
        default: 'medium'
    },
    closable: Boolean,
    disabled: {
        type: Boolean,
        default: undefined
    }
});


/***/ }),

/***/ "./node_modules/naive-ui/es/tag/src/styles/index.cssr.js":
/*!***************************************************************!*\
  !*** ./node_modules/naive-ui/es/tag/src/styles/index.cssr.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_cssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../_utils/cssr */ "./node_modules/naive-ui/es/_utils/cssr/index.js");

// vars:
// --n-bezier
// --n-border-radius
// --n-border
// --n-close-icon-color
// --n-close-icon-color-hover
// --n-close-icon-color-pressed
// --n-close-margin
// --n-close-size
// --n-color
// --n-color-checkable
// --n-color-checked
// --n-color-checked-hover
// --n-color-checked-pressed
// --n-color-hover-checkable
// --n-color-pressed-checkable
// --n-font-size
// --n-height
// --n-opacity-disabled
// --n-padding
// --n-text-color
// --n-text-color-checkable
// --n-text-color-checked
// --n-text-color-hover-checkable
// --n-text-color-pressed-checkable
// --n-font-weight-strong
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cB)('tag', `
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 line-height: 1;
 height: var(--n-height);
 font-size: var(--n-font-size);
`, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('strong', `
 font-weight: var(--n-font-weight-strong);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('border', `
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-border);
 transition: border-color .3s var(--n-bezier);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('icon', `
 display: flex;
 margin: 0 4px 0 0;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 font-size: var(--n-avatar-size-override);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('avatar', `
 display: flex;
 margin: 0 6px 0 0;
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('close', `
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('round', `
 padding: 0 calc(var(--n-height) / 3);
 border-radius: calc(var(--n-height) / 2);
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('icon', `
 margin: 0 4px 0 calc((var(--n-height) - 8px) / -2);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cE)('avatar', `
 margin: 0 6px 0 calc((var(--n-height) - 8px) / -2);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('closable', `
 padding: 0 calc(var(--n-height) / 4) 0 calc(var(--n-height) / 3);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('icon, avatar', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('round', `
 padding: 0 calc(var(--n-height) / 3) 0 calc(var(--n-height) / 2);
 `)]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('disabled', `
 cursor: not-allowed !important;
 opacity: var(--n-opacity-disabled);
 `), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('checkable', `
 cursor: pointer;
 box-shadow: none;
 color: var(--n-text-color-checkable);
 background-color: var(--n-color-checkable);
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cNotM)('disabled', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:hover', 'background-color: var(--n-color-hover-checkable);', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cNotM)('checked', 'color: var(--n-text-color-hover-checkable);')]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:active', 'background-color: var(--n-color-pressed-checkable);', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cNotM)('checked', 'color: var(--n-text-color-pressed-checkable);')])]), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cM)('checked', `
 color: var(--n-text-color-checked);
 background-color: var(--n-color-checked);
 `, [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.cNotM)('disabled', [(0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:hover', 'background-color: var(--n-color-checked-hover);'), (0,_utils_cssr__WEBPACK_IMPORTED_MODULE_0__.c)('&:active', 'background-color: var(--n-color-checked-pressed);')])])])]));

/***/ }),

/***/ "./node_modules/naive-ui/es/tag/styles/_common.js":
/*!********************************************************!*\
  !*** ./node_modules/naive-ui/es/tag/styles/_common.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    closeIconSizeTiny: '12px',
    closeIconSizeSmall: '12px',
    closeIconSizeMedium: '14px',
    closeIconSizeLarge: '14px',
    closeSizeTiny: '16px',
    closeSizeSmall: '16px',
    closeSizeMedium: '18px',
    closeSizeLarge: '18px',
    padding: '0 7px',
    closeMargin: '0 0 0 4px',
    closeMarginRtl: '0 4px 0 0'
});


/***/ }),

/***/ "./node_modules/naive-ui/es/tag/styles/light.js":
/*!******************************************************!*\
  !*** ./node_modules/naive-ui/es/tag/styles/light.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_common */ "./node_modules/naive-ui/es/tag/styles/_common.js");
/* harmony import */ var seemly__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! seemly */ "./node_modules/seemly/es/color/index.js");
/* harmony import */ var _styles_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_styles/common */ "./node_modules/naive-ui/es/_styles/common/light.js");



const self = (vars) => {
    const { textColor2, primaryColorHover, primaryColorPressed, primaryColor, infoColor, successColor, warningColor, errorColor, baseColor, borderColor, opacityDisabled, tagColor, closeIconColor, closeIconColorHover, closeIconColorPressed, borderRadiusSmall: borderRadius, fontSizeMini, fontSizeTiny, fontSizeSmall, fontSizeMedium, heightMini, heightTiny, heightSmall, heightMedium, closeColorHover, closeColorPressed, buttonColor2Hover, buttonColor2Pressed, fontWeightStrong } = vars;
    return Object.assign(Object.assign({}, _common__WEBPACK_IMPORTED_MODULE_0__["default"]), { closeBorderRadius: borderRadius, heightTiny: heightMini, heightSmall: heightTiny, heightMedium: heightSmall, heightLarge: heightMedium, borderRadius,
        opacityDisabled, fontSizeTiny: fontSizeMini, fontSizeSmall: fontSizeTiny, fontSizeMedium: fontSizeSmall, fontSizeLarge: fontSizeMedium, fontWeightStrong, 
        // checked
        textColorCheckable: textColor2, textColorHoverCheckable: textColor2, textColorPressedCheckable: textColor2, textColorChecked: baseColor, colorCheckable: '#0000', colorHoverCheckable: buttonColor2Hover, colorPressedCheckable: buttonColor2Pressed, colorChecked: primaryColor, colorCheckedHover: primaryColorHover, colorCheckedPressed: primaryColorPressed, 
        // default
        border: `1px solid ${borderColor}`, textColor: textColor2, color: tagColor, colorBordered: 'rgb(250, 250, 252)', closeIconColor,
        closeIconColorHover,
        closeIconColorPressed,
        closeColorHover,
        closeColorPressed, borderPrimary: `1px solid ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(primaryColor, { alpha: 0.3 })}`, textColorPrimary: primaryColor, colorPrimary: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(primaryColor, { alpha: 0.12 }), colorBorderedPrimary: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(primaryColor, { alpha: 0.1 }), closeIconColorPrimary: primaryColor, closeIconColorHoverPrimary: primaryColor, closeIconColorPressedPrimary: primaryColor, closeColorHoverPrimary: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(primaryColor, { alpha: 0.12 }), closeColorPressedPrimary: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(primaryColor, { alpha: 0.18 }), borderInfo: `1px solid ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(infoColor, { alpha: 0.3 })}`, textColorInfo: infoColor, colorInfo: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(infoColor, { alpha: 0.12 }), colorBorderedInfo: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(infoColor, { alpha: 0.1 }), closeIconColorInfo: infoColor, closeIconColorHoverInfo: infoColor, closeIconColorPressedInfo: infoColor, closeColorHoverInfo: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(infoColor, { alpha: 0.12 }), closeColorPressedInfo: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(infoColor, { alpha: 0.18 }), borderSuccess: `1px solid ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(successColor, { alpha: 0.3 })}`, textColorSuccess: successColor, colorSuccess: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(successColor, { alpha: 0.12 }), colorBorderedSuccess: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(successColor, { alpha: 0.1 }), closeIconColorSuccess: successColor, closeIconColorHoverSuccess: successColor, closeIconColorPressedSuccess: successColor, closeColorHoverSuccess: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(successColor, { alpha: 0.12 }), closeColorPressedSuccess: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(successColor, { alpha: 0.18 }), borderWarning: `1px solid ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(warningColor, { alpha: 0.35 })}`, textColorWarning: warningColor, colorWarning: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(warningColor, { alpha: 0.15 }), colorBorderedWarning: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(warningColor, { alpha: 0.12 }), closeIconColorWarning: warningColor, closeIconColorHoverWarning: warningColor, closeIconColorPressedWarning: warningColor, closeColorHoverWarning: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(warningColor, { alpha: 0.12 }), closeColorPressedWarning: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(warningColor, { alpha: 0.18 }), borderError: `1px solid ${(0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(errorColor, { alpha: 0.23 })}`, textColorError: errorColor, colorError: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(errorColor, { alpha: 0.1 }), colorBorderedError: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(errorColor, { alpha: 0.08 }), closeIconColorError: errorColor, closeIconColorHoverError: errorColor, closeIconColorPressedError: errorColor, closeColorHoverError: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(errorColor, { alpha: 0.12 }), closeColorPressedError: (0,seemly__WEBPACK_IMPORTED_MODULE_1__.changeColor)(errorColor, { alpha: 0.18 }) });
};
const tagLight = {
    name: 'Tag',
    common: _styles_common__WEBPACK_IMPORTED_MODULE_2__["default"],
    self
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (tagLight);


/***/ }),

/***/ "./node_modules/seemly/es/css/index.js":
/*!*********************************************!*\
  !*** ./node_modules/seemly/es/css/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   depx: () => (/* binding */ depx),
/* harmony export */   getGap: () => (/* binding */ getGap),
/* harmony export */   getMargin: () => (/* binding */ getMargin),
/* harmony export */   getPadding: () => (/* binding */ getMargin),
/* harmony export */   parseResponsiveProp: () => (/* reexport safe */ _responsive__WEBPACK_IMPORTED_MODULE_0__.parseResponsiveProp),
/* harmony export */   parseResponsivePropValue: () => (/* reexport safe */ _responsive__WEBPACK_IMPORTED_MODULE_0__.parseResponsivePropValue),
/* harmony export */   pxfy: () => (/* binding */ pxfy)
/* harmony export */ });
/* harmony import */ var _responsive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./responsive */ "./node_modules/seemly/es/css/responsive.js");
function depx(value) {
    if (typeof value === 'string') {
        if (value.endsWith('px')) {
            return Number(value.slice(0, value.length - 2));
        }
        return Number(value);
    }
    return value;
}
function pxfy(value) {
    if (value === undefined || value === null)
        return undefined;
    if (typeof value === 'number')
        return `${value}px`;
    if (value.endsWith('px'))
        return value;
    return `${value}px`;
}

function getMargin(value, position) {
    const parts = value.trim().split(/\s+/g);
    const margin = {
        top: parts[0]
    };
    switch (parts.length) {
        case 1:
            margin.right = parts[0];
            margin.bottom = parts[0];
            margin.left = parts[0];
            break;
        case 2:
            margin.right = parts[1];
            margin.left = parts[1];
            margin.bottom = parts[0];
            break;
        case 3:
            margin.right = parts[1];
            margin.bottom = parts[2];
            margin.left = parts[1];
            break;
        case 4:
            margin.right = parts[1];
            margin.bottom = parts[2];
            margin.left = parts[3];
            break;
        default:
            throw new Error('[seemly/getMargin]:' + value + ' is not a valid value.');
    }
    if (position === undefined)
        return margin;
    return margin[position];
}
function getGap(value, orient) {
    const [rowGap, colGap] = value.split(' ');
    if (!orient)
        return {
            row: rowGap,
            col: colGap || rowGap
        };
    return orient === 'row' ? rowGap : colGap;
}




/***/ }),

/***/ "./node_modules/seemly/es/css/responsive.js":
/*!**************************************************!*\
  !*** ./node_modules/seemly/es/css/responsive.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   parseResponsiveProp: () => (/* binding */ parseResponsiveProp),
/* harmony export */   parseResponsivePropValue: () => (/* binding */ parseResponsivePropValue)
/* harmony export */ });
function parseResponsiveProp(reponsiveProp) {
    if (typeof reponsiveProp === "number") {
        return {
            '': reponsiveProp.toString()
        };
    }
    const params = {};
    reponsiveProp.split(/ +/).forEach((pairLiteral) => {
        if (pairLiteral === '')
            return;
        const [prefix, value] = pairLiteral.split(':');
        if (value === undefined) {
            params[''] = prefix;
        }
        else {
            params[prefix] = value;
        }
    });
    return params;
}
function parseResponsivePropValue(reponsiveProp, activeKeyOrSize) {
    var _a;
    if (reponsiveProp === undefined || reponsiveProp === null)
        return undefined;
    const classObj = parseResponsiveProp(reponsiveProp);
    if (activeKeyOrSize === undefined)
        return classObj[''];
    if (typeof activeKeyOrSize === 'string') {
        return (_a = classObj[activeKeyOrSize]) !== null && _a !== void 0 ? _a : classObj[''];
    }
    else if (Array.isArray(activeKeyOrSize)) {
        for (let i = activeKeyOrSize.length - 1; i >= 0; --i) {
            const key = activeKeyOrSize[i];
            if (key in classObj)
                return classObj[key];
        }
        return classObj[''];
    }
    else {
        // Here we suppose all the keys are number formatted
        let activeValue = undefined;
        let activeKey = -1;
        Object.keys(classObj).forEach((key) => {
            const keyAsNum = Number(key);
            if (!Number.isNaN(keyAsNum) &&
                activeKeyOrSize >= keyAsNum &&
                keyAsNum >= activeKey) {
                activeKey = keyAsNum;
                activeValue = classObj[key];
            }
        });
        return activeValue;
    }
}



/***/ }),

/***/ "./node_modules/seemly/es/dom/happens-in.js":
/*!**************************************************!*\
  !*** ./node_modules/seemly/es/dom/happens-in.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   happensIn: () => (/* binding */ happensIn)
/* harmony export */ });
function happensIn(e, dataSetPropName) {
    let { target } = e;
    while (target) {
        if (target.dataset) {
            if (target.dataset[dataSetPropName] !== undefined)
                return true;
        }
        target = target.parentElement;
    }
    return false;
}


/***/ }),

/***/ "./node_modules/treemate/es/check.js":
/*!*******************************************!*\
  !*** ./node_modules/treemate/es/check.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SubtreeNotLoadedError: () => (/* binding */ SubtreeNotLoadedError),
/* harmony export */   getCheckedKeys: () => (/* binding */ getCheckedKeys),
/* harmony export */   getExtendedCheckedKeySet: () => (/* binding */ getExtendedCheckedKeySet)
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./node_modules/treemate/es/utils.js");

class SubtreeNotLoadedError extends Error {
    constructor() {
        super();
        this.message =
            'SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded.';
    }
}
function getExtendedCheckedKeySetAfterCheck(checkKeys, currentCheckedKeys, treeMate, allowNotLoaded) {
    return getExtendedCheckedKeySet(currentCheckedKeys.concat(checkKeys), treeMate, allowNotLoaded, false);
}
function getAvailableAscendantNodeSet(uncheckedKeys, treeMate) {
    const visitedKeys = new Set();
    uncheckedKeys.forEach((uncheckedKey) => {
        const uncheckedTreeNode = treeMate.treeNodeMap.get(uncheckedKey);
        if (uncheckedTreeNode !== undefined) {
            let nodeCursor = uncheckedTreeNode.parent;
            while (nodeCursor !== null) {
                if (nodeCursor.disabled)
                    break;
                if (visitedKeys.has(nodeCursor.key))
                    break;
                else {
                    visitedKeys.add(nodeCursor.key);
                }
                nodeCursor = nodeCursor.parent;
            }
        }
    });
    return visitedKeys;
}
function getExtendedCheckedKeySetAfterUncheck(uncheckedKeys, currentCheckedKeys, treeMate, allowNotLoaded) {
    const extendedCheckedKeySet = getExtendedCheckedKeySet(currentCheckedKeys, treeMate, allowNotLoaded, false);
    const extendedKeySetToUncheck = getExtendedCheckedKeySet(uncheckedKeys, treeMate, allowNotLoaded, true);
    const ascendantKeySet = getAvailableAscendantNodeSet(uncheckedKeys, treeMate);
    const keysToRemove = [];
    extendedCheckedKeySet.forEach((key) => {
        if (extendedKeySetToUncheck.has(key) || ascendantKeySet.has(key)) {
            keysToRemove.push(key);
        }
    });
    keysToRemove.forEach((key) => extendedCheckedKeySet.delete(key));
    return extendedCheckedKeySet;
}
function getCheckedKeys(options, treeMate) {
    const { checkedKeys, keysToCheck, keysToUncheck, indeterminateKeys, cascade, leafOnly, checkStrategy, allowNotLoaded } = options;
    if (!cascade) {
        if (keysToCheck !== undefined) {
            return {
                checkedKeys: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.merge)(checkedKeys, keysToCheck),
                indeterminateKeys: Array.from(indeterminateKeys)
            };
        }
        else if (keysToUncheck !== undefined) {
            return {
                checkedKeys: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.minus)(checkedKeys, keysToUncheck),
                indeterminateKeys: Array.from(indeterminateKeys)
            };
        }
        else {
            return {
                checkedKeys: Array.from(checkedKeys),
                indeterminateKeys: Array.from(indeterminateKeys)
            };
        }
    }
    const { levelTreeNodeMap } = treeMate;
    let extendedCheckedKeySet;
    if (keysToUncheck !== undefined) {
        extendedCheckedKeySet = getExtendedCheckedKeySetAfterUncheck(keysToUncheck, checkedKeys, treeMate, allowNotLoaded);
    }
    else if (keysToCheck !== undefined) {
        extendedCheckedKeySet = getExtendedCheckedKeySetAfterCheck(keysToCheck, checkedKeys, treeMate, allowNotLoaded);
    }
    else {
        extendedCheckedKeySet = getExtendedCheckedKeySet(checkedKeys, treeMate, allowNotLoaded, false);
    }
    const checkStrategyIsParent = checkStrategy === 'parent';
    const checkStrategyIsChild = checkStrategy === 'child' || leafOnly;
    const syntheticCheckedKeySet = extendedCheckedKeySet;
    const syntheticIndeterminateKeySet = new Set();
    const maxLevel = Math.max.apply(null, Array.from(levelTreeNodeMap.keys()));
    // cascade check
    // 1. if tree is fully loaded, it just works
    // 2. if the tree is not fully loaded, we assume that keys which is in not
    //    loaded tree are not in checked keys
    //    for example:
    //    a -- b(fully-loaded)   -- c(fully-loaded)
    //      |- d(partial-loaded) -- ?e(not-loaded)
    //    in the case, `e` is assumed not to be checked, nor we can't calc `d`'s
    //    and `a`'s status
    for (let level = maxLevel; level >= 0; level -= 1) {
        const levelIsZero = level === 0;
        // it should exists, nor it is a bug
        const levelTreeNodes = levelTreeNodeMap.get(level);
        for (const levelTreeNode of levelTreeNodes) {
            if (levelTreeNode.isLeaf)
                continue;
            const { key: levelTreeNodeKey, shallowLoaded } = levelTreeNode;
            if (checkStrategyIsChild && shallowLoaded) {
                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                levelTreeNode.children.forEach((v) => {
                    if (!v.disabled &&
                        !v.isLeaf &&
                        v.shallowLoaded &&
                        syntheticCheckedKeySet.has(v.key)) {
                        syntheticCheckedKeySet.delete(v.key);
                    }
                });
            }
            if (levelTreeNode.disabled || !shallowLoaded) {
                continue;
            }
            let fullyChecked = true;
            let partialChecked = false;
            let allDisabled = true;
            // it is shallow loaded, so `children` must exist
            for (const childNode of levelTreeNode.children) {
                const childKey = childNode.key;
                if (childNode.disabled)
                    continue;
                if (allDisabled)
                    allDisabled = false;
                if (syntheticCheckedKeySet.has(childKey)) {
                    partialChecked = true;
                }
                else if (syntheticIndeterminateKeySet.has(childKey)) {
                    partialChecked = true;
                    fullyChecked = false;
                    break;
                }
                else {
                    fullyChecked = false;
                    if (partialChecked) {
                        break;
                    }
                }
            }
            if (fullyChecked && !allDisabled) {
                if (checkStrategyIsParent) {
                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                    levelTreeNode.children.forEach((v) => {
                        if (!v.disabled && syntheticCheckedKeySet.has(v.key)) {
                            syntheticCheckedKeySet.delete(v.key);
                        }
                    });
                }
                syntheticCheckedKeySet.add(levelTreeNodeKey);
            }
            else if (partialChecked) {
                syntheticIndeterminateKeySet.add(levelTreeNodeKey);
            }
            if (levelIsZero &&
                checkStrategyIsChild &&
                syntheticCheckedKeySet.has(levelTreeNodeKey)) {
                syntheticCheckedKeySet.delete(levelTreeNodeKey);
            }
        }
    }
    return {
        checkedKeys: Array.from(syntheticCheckedKeySet),
        indeterminateKeys: Array.from(syntheticIndeterminateKeySet)
    };
}
// unchecking is safe when doing cascade uncheck in async mode
function getExtendedCheckedKeySet(checkedKeys, treeMate, allowNotLoaded, isUnchecking) {
    const { treeNodeMap, getChildren } = treeMate;
    const visitedKeySet = new Set();
    const extendedKeySet = new Set(checkedKeys);
    checkedKeys.forEach((checkedKey) => {
        const checkedTreeNode = treeNodeMap.get(checkedKey);
        if (checkedTreeNode !== undefined) {
            (0,_utils__WEBPACK_IMPORTED_MODULE_0__.traverseWithCb)(checkedTreeNode, (treeNode) => {
                if (treeNode.disabled) {
                    return _utils__WEBPACK_IMPORTED_MODULE_0__.TRAVERSE_COMMAND.STOP;
                }
                const { key } = treeNode;
                if (visitedKeySet.has(key))
                    return;
                visitedKeySet.add(key);
                // Adding keys before loaded check is okay, since if not valid error
                // would be thrown
                extendedKeySet.add(key);
                if ((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isExpilicitlyNotLoaded)(treeNode.rawNode, getChildren)) {
                    if (isUnchecking) {
                        return _utils__WEBPACK_IMPORTED_MODULE_0__.TRAVERSE_COMMAND.STOP;
                    }
                    else if (!allowNotLoaded) {
                        throw new SubtreeNotLoadedError();
                    }
                }
            });
        }
    });
    return extendedKeySet;
}


/***/ }),

/***/ "./node_modules/treemate/es/contains.js":
/*!**********************************************!*\
  !*** ./node_modules/treemate/es/contains.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   contains: () => (/* binding */ contains)
/* harmony export */ });
function contains(parent, child) {
    const parentKey = parent.key;
    // eslint-disable-next-line no-unmodified-loop-condition
    while (child) {
        if (child.key === parentKey)
            return true;
        child = child.parent;
    }
    return false;
}


/***/ }),

/***/ "./node_modules/treemate/es/create.js":
/*!********************************************!*\
  !*** ./node_modules/treemate/es/create.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createTreeMate: () => (/* binding */ createTreeMate)
/* harmony export */ });
/* harmony import */ var _check__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./check */ "./node_modules/treemate/es/check.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./node_modules/treemate/es/utils.js");
/* harmony import */ var _path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./path */ "./node_modules/treemate/es/path.js");
/* harmony import */ var _move__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./move */ "./node_modules/treemate/es/move.js");
/* harmony import */ var _flatten__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./flatten */ "./node_modules/treemate/es/flatten.js");
/* harmony import */ var _contains__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contains */ "./node_modules/treemate/es/contains.js");






function createTreeNodes(rawNodes, treeNodeMap, levelTreeNodeMap, nodeProto, getChildren, parent = null, level = 0) {
    const treeNodes = [];
    rawNodes.forEach((rawNode, index) => {
        var _a;
        if ( true &&
            (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isNodeInvalid)(rawNode, getChildren)) {
            console.error('[treemate]: node', rawNode, 'is invalid');
        }
        const treeNode = Object.create(nodeProto);
        treeNode.rawNode = rawNode;
        treeNode.siblings = treeNodes;
        treeNode.level = level;
        treeNode.index = index;
        treeNode.isFirstChild = index === 0;
        treeNode.isLastChild = index + 1 === rawNodes.length;
        treeNode.parent = parent;
        if (!treeNode.ignored) {
            const rawChildren = getChildren(rawNode);
            if (Array.isArray(rawChildren)) {
                treeNode.children = createTreeNodes(rawChildren, treeNodeMap, levelTreeNodeMap, nodeProto, getChildren, treeNode, level + 1);
            }
        }
        treeNodes.push(treeNode);
        treeNodeMap.set(treeNode.key, treeNode);
        if (!levelTreeNodeMap.has(level))
            levelTreeNodeMap.set(level, []);
        (_a = levelTreeNodeMap.get(level)) === null || _a === void 0 ? void 0 : _a.push(treeNode);
    });
    return treeNodes;
}
function createTreeMate(rawNodes, options = {}) {
    var _a;
    const treeNodeMap = new Map();
    const levelTreeNodeMap = new Map();
    const { getDisabled = _utils__WEBPACK_IMPORTED_MODULE_0__.isDisabled, getIgnored = _utils__WEBPACK_IMPORTED_MODULE_0__.isIgnored, getIsGroup = _utils__WEBPACK_IMPORTED_MODULE_0__.isGroup, getKey = _utils__WEBPACK_IMPORTED_MODULE_0__.defaultGetKey } = options;
    const _getChildren = (_a = options.getChildren) !== null && _a !== void 0 ? _a : _utils__WEBPACK_IMPORTED_MODULE_0__.defaultGetChildren;
    const getChildren = options.ignoreEmptyChildren
        ? (node) => {
            const children = _getChildren(node);
            if (Array.isArray(children)) {
                if (!children.length)
                    return null;
                return children;
            }
            return children;
        }
        : _getChildren;
    const nodeProto = Object.assign({
        get key() {
            // do not pass parent or related things to it
            // the key need to be specified explicitly
            return getKey(this.rawNode);
        },
        get disabled() {
            return getDisabled(this.rawNode);
        },
        get isGroup() {
            return getIsGroup(this.rawNode);
        },
        get isLeaf() {
            return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isLeaf)(this.rawNode, getChildren);
        },
        get shallowLoaded() {
            return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.isShallowLoaded)(this.rawNode, getChildren);
        },
        get ignored() {
            return getIgnored(this.rawNode);
        },
        contains(node) {
            return (0,_contains__WEBPACK_IMPORTED_MODULE_1__.contains)(this, node);
        }
    }, _move__WEBPACK_IMPORTED_MODULE_2__.moveMethods);
    const treeNodes = createTreeNodes(rawNodes, treeNodeMap, levelTreeNodeMap, nodeProto, getChildren);
    function getNode(key) {
        if (key === null || key === undefined)
            return null;
        const tmNode = treeNodeMap.get(key);
        if (tmNode && !tmNode.isGroup && !tmNode.ignored) {
            return tmNode;
        }
        return null;
    }
    function _getNode(key) {
        if (key === null || key === undefined)
            return null;
        const tmNode = treeNodeMap.get(key);
        if (tmNode && !tmNode.ignored) {
            return tmNode;
        }
        return null;
    }
    function getPrev(key, options) {
        const node = _getNode(key);
        if (!node)
            return null;
        return node.getPrev(options);
    }
    function getNext(key, options) {
        const node = _getNode(key);
        if (!node)
            return null;
        return node.getNext(options);
    }
    function getParent(key) {
        const node = _getNode(key);
        if (!node)
            return null;
        return node.getParent();
    }
    function getChild(key) {
        const node = _getNode(key);
        if (!node)
            return null;
        return node.getChild();
    }
    const treemate = {
        treeNodes,
        treeNodeMap,
        levelTreeNodeMap,
        maxLevel: Math.max(...levelTreeNodeMap.keys()),
        getChildren,
        getFlattenedNodes(expandedKeys) {
            return (0,_flatten__WEBPACK_IMPORTED_MODULE_3__.flatten)(treeNodes, expandedKeys);
        },
        getNode,
        getPrev,
        getNext,
        getParent,
        getChild,
        getFirstAvailableNode() {
            return (0,_move__WEBPACK_IMPORTED_MODULE_2__.getFirstAvailableNode)(treeNodes);
        },
        getPath(key, options = {}) {
            return (0,_path__WEBPACK_IMPORTED_MODULE_4__.getPath)(key, options, treemate);
        },
        getCheckedKeys(checkedKeys, options = {}) {
            const { cascade = true, leafOnly = false, checkStrategy = 'all', allowNotLoaded = false } = options;
            return (0,_check__WEBPACK_IMPORTED_MODULE_5__.getCheckedKeys)({
                checkedKeys: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.unwrapCheckedKeys)(checkedKeys),
                indeterminateKeys: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.unwrapIndeterminateKeys)(checkedKeys),
                cascade,
                leafOnly,
                checkStrategy,
                allowNotLoaded
            }, treemate);
        },
        check(keysToCheck, checkedKeys, options = {}) {
            const { cascade = true, leafOnly = false, checkStrategy = 'all', allowNotLoaded = false } = options;
            return (0,_check__WEBPACK_IMPORTED_MODULE_5__.getCheckedKeys)({
                checkedKeys: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.unwrapCheckedKeys)(checkedKeys),
                indeterminateKeys: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.unwrapIndeterminateKeys)(checkedKeys),
                keysToCheck: keysToCheck === undefined || keysToCheck === null
                    ? []
                    : (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toArray)(keysToCheck),
                cascade,
                leafOnly,
                checkStrategy,
                allowNotLoaded
            }, treemate);
        },
        uncheck(keysToUncheck, checkedKeys, options = {}) {
            const { cascade = true, leafOnly = false, checkStrategy = 'all', allowNotLoaded = false } = options;
            return (0,_check__WEBPACK_IMPORTED_MODULE_5__.getCheckedKeys)({
                checkedKeys: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.unwrapCheckedKeys)(checkedKeys),
                indeterminateKeys: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.unwrapIndeterminateKeys)(checkedKeys),
                keysToUncheck: keysToUncheck === null || keysToUncheck === undefined
                    ? []
                    : (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toArray)(keysToUncheck),
                cascade,
                leafOnly,
                checkStrategy,
                allowNotLoaded
            }, treemate);
        },
        getNonLeafKeys(options = {}) {
            return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.getNonLeafKeys)(treeNodes, options);
        }
    };
    return treemate;
}


/***/ }),

/***/ "./node_modules/treemate/es/flatten.js":
/*!*********************************************!*\
  !*** ./node_modules/treemate/es/flatten.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   flatten: () => (/* binding */ flatten)
/* harmony export */ });
function flatten(treeNodes, expandedKeys) {
    const expandedKeySet = expandedKeys ? new Set(expandedKeys) : undefined;
    const flattenedNodes = [];
    function traverse(treeNodes) {
        treeNodes.forEach((treeNode) => {
            flattenedNodes.push(treeNode);
            if (treeNode.isLeaf || !treeNode.children || treeNode.ignored)
                return;
            if (treeNode.isGroup) {
                // group node shouldn't be expanded
                traverse(treeNode.children);
            }
            else if (
            // normal non-leaf node
            expandedKeySet === undefined ||
                expandedKeySet.has(treeNode.key)) {
                traverse(treeNode.children);
            }
        });
    }
    traverse(treeNodes);
    return flattenedNodes;
}


/***/ }),

/***/ "./node_modules/treemate/es/move.js":
/*!******************************************!*\
  !*** ./node_modules/treemate/es/move.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFirstAvailableNode: () => (/* binding */ getFirstAvailableNode),
/* harmony export */   moveMethods: () => (/* binding */ moveMethods)
/* harmony export */ });
function getFirstAvailableNode(nodes) {
    if (nodes.length === 0)
        return null;
    const node = nodes[0];
    if (node.isGroup || node.ignored || node.disabled) {
        return node.getNext();
    }
    return node;
}
function rawGetNext(node, loop) {
    const sibs = node.siblings;
    const l = sibs.length;
    const { index } = node;
    if (loop) {
        return sibs[(index + 1) % l];
    }
    else {
        if (index === sibs.length - 1)
            return null;
        return sibs[index + 1];
    }
}
function move(fromNode, dir, { loop = false, includeDisabled = false } = {}) {
    const iterate = dir === 'prev' ? rawGetPrev : rawGetNext;
    const getChildOptions = {
        reverse: dir === 'prev'
    };
    let meet = false;
    let endNode = null;
    function traverse(node) {
        if (node === null)
            return;
        if (node === fromNode) {
            if (!meet) {
                meet = true;
            }
            else if (!fromNode.disabled && !fromNode.isGroup) {
                endNode = fromNode;
                return;
            }
        }
        else {
            if ((!node.disabled || includeDisabled) &&
                !node.ignored &&
                !node.isGroup) {
                endNode = node;
                return;
            }
        }
        if (node.isGroup) {
            const child = getChild(node, getChildOptions);
            if (child !== null) {
                endNode = child;
            }
            else {
                traverse(iterate(node, loop));
            }
        }
        else {
            const nextNode = iterate(node, false);
            if (nextNode !== null) {
                traverse(nextNode);
            }
            else {
                const parent = rawGetParent(node);
                if (parent === null || parent === void 0 ? void 0 : parent.isGroup) {
                    traverse(iterate(parent, loop));
                }
                else if (loop) {
                    traverse(iterate(node, true));
                }
            }
        }
    }
    traverse(fromNode);
    return endNode;
}
function rawGetPrev(node, loop) {
    const sibs = node.siblings;
    const l = sibs.length;
    const { index } = node;
    if (loop) {
        return sibs[(index - 1 + l) % l];
    }
    else {
        if (index === 0)
            return null;
        return sibs[index - 1];
    }
}
function rawGetParent(node) {
    return node.parent;
}
function getChild(node, options = {}) {
    const { reverse = false } = options;
    const { children } = node;
    if (children) {
        const { length } = children;
        const start = reverse ? length - 1 : 0;
        const end = reverse ? -1 : length;
        const delta = reverse ? -1 : 1;
        for (let i = start; i !== end; i += delta) {
            const child = children[i];
            if (!child.disabled && !child.ignored) {
                if (child.isGroup) {
                    const childInGroup = getChild(child, options);
                    if (childInGroup !== null)
                        return childInGroup;
                }
                else {
                    return child;
                }
            }
        }
    }
    return null;
}
const moveMethods = {
    getChild() {
        if (this.ignored)
            return null;
        return getChild(this);
    },
    getParent() {
        const { parent } = this;
        if (parent === null || parent === void 0 ? void 0 : parent.isGroup) {
            return parent.getParent();
        }
        return parent;
    },
    getNext(options = {}) {
        return move(this, 'next', options);
    },
    getPrev(options = {}) {
        return move(this, 'prev', options);
    }
};


/***/ }),

/***/ "./node_modules/treemate/es/path.js":
/*!******************************************!*\
  !*** ./node_modules/treemate/es/path.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPath: () => (/* binding */ getPath)
/* harmony export */ });
function getPath(key, { includeGroup = false, includeSelf = true }, treeMate) {
    var _a;
    const treeNodeMap = treeMate.treeNodeMap;
    let treeNode = key === null || key === undefined ? null : (_a = treeNodeMap.get(key)) !== null && _a !== void 0 ? _a : null;
    const mergedPath = {
        keyPath: [],
        treeNodePath: [],
        treeNode: treeNode
    };
    if (treeNode === null || treeNode === void 0 ? void 0 : treeNode.ignored) {
        mergedPath.treeNode = null;
        return mergedPath;
    }
    while (treeNode) {
        if (!treeNode.ignored && (includeGroup || !treeNode.isGroup)) {
            mergedPath.treeNodePath.push(treeNode);
        }
        treeNode = treeNode.parent;
    }
    mergedPath.treeNodePath.reverse();
    if (!includeSelf)
        mergedPath.treeNodePath.pop();
    mergedPath.keyPath = mergedPath.treeNodePath.map((treeNode) => treeNode.key);
    return mergedPath;
}


/***/ }),

/***/ "./node_modules/treemate/es/utils.js":
/*!*******************************************!*\
  !*** ./node_modules/treemate/es/utils.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TRAVERSE_COMMAND: () => (/* binding */ TRAVERSE_COMMAND),
/* harmony export */   createIndexGetter: () => (/* binding */ createIndexGetter),
/* harmony export */   defaultGetChildren: () => (/* binding */ defaultGetChildren),
/* harmony export */   defaultGetKey: () => (/* binding */ defaultGetKey),
/* harmony export */   getNonLeafKeys: () => (/* binding */ getNonLeafKeys),
/* harmony export */   isDisabled: () => (/* binding */ isDisabled),
/* harmony export */   isExpilicitlyNotLoaded: () => (/* binding */ isExpilicitlyNotLoaded),
/* harmony export */   isGroup: () => (/* binding */ isGroup),
/* harmony export */   isIgnored: () => (/* binding */ isIgnored),
/* harmony export */   isLeaf: () => (/* binding */ isLeaf),
/* harmony export */   isNodeInvalid: () => (/* binding */ isNodeInvalid),
/* harmony export */   isShallowLoaded: () => (/* binding */ isShallowLoaded),
/* harmony export */   merge: () => (/* binding */ merge),
/* harmony export */   minus: () => (/* binding */ minus),
/* harmony export */   toArray: () => (/* binding */ toArray),
/* harmony export */   traverseWithCb: () => (/* binding */ traverseWithCb),
/* harmony export */   unwrapCheckedKeys: () => (/* binding */ unwrapCheckedKeys),
/* harmony export */   unwrapIndeterminateKeys: () => (/* binding */ unwrapIndeterminateKeys)
/* harmony export */ });
function toArray(arg) {
    if (Array.isArray(arg))
        return arg;
    return [arg];
}
// Do not use enum for lint plugin has error
const TRAVERSE_COMMAND = {
    STOP: 'STOP'
};
function traverseWithCb(treeNode, callback) {
    const command = callback(treeNode);
    if (treeNode.children !== undefined && command !== TRAVERSE_COMMAND.STOP) {
        treeNode.children.forEach((childNode) => traverseWithCb(childNode, callback));
    }
}
function getNonLeafKeys(treeNodes, options = {}) {
    const { preserveGroup = false } = options;
    const keys = [];
    const cb = preserveGroup
        ? (node) => {
            if (!node.isLeaf) {
                keys.push(node.key);
                traverse(node.children);
            }
        }
        : (node) => {
            if (!node.isLeaf) {
                if (!node.isGroup)
                    keys.push(node.key);
                traverse(node.children);
            }
        };
    function traverse(nodes) {
        nodes.forEach(cb);
    }
    traverse(treeNodes);
    return keys;
}
function isLeaf(rawNode, getChildren) {
    const { isLeaf } = rawNode;
    if (isLeaf !== undefined)
        return isLeaf;
    else if (!getChildren(rawNode))
        return true;
    return false;
}
function defaultGetChildren(node) {
    return node.children;
}
function defaultGetKey(node) {
    return node.key;
}
function isIgnored() {
    return false;
}
function isShallowLoaded(rawNode, getChildren) {
    const { isLeaf } = rawNode;
    if (isLeaf === false && !Array.isArray(getChildren(rawNode)))
        return false;
    return true;
}
function isDisabled(rawNode) {
    return rawNode.disabled === true;
}
function isExpilicitlyNotLoaded(rawNode, getChildren) {
    return (rawNode.isLeaf === false && !Array.isArray(getChildren(rawNode)));
}
function isNodeInvalid(rawNode, getChildren) {
    if (rawNode.isLeaf === true) {
        const children = getChildren(rawNode);
        if (Array.isArray(children) && children.length > 0)
            return true;
    }
    return false;
}
function unwrapCheckedKeys(result) {
    var _a;
    if (result === undefined || result === null)
        return [];
    if (Array.isArray(result))
        return result;
    return (_a = result.checkedKeys) !== null && _a !== void 0 ? _a : [];
}
function unwrapIndeterminateKeys(result) {
    var _a;
    if (result === undefined || result === null || Array.isArray(result)) {
        return [];
    }
    return (_a = result.indeterminateKeys) !== null && _a !== void 0 ? _a : [];
}
function merge(originalKeys, keysToAdd) {
    const set = new Set(originalKeys);
    keysToAdd.forEach((key) => {
        if (!set.has(key)) {
            set.add(key);
        }
    });
    return Array.from(set);
}
function minus(originalKeys, keysToRemove) {
    const set = new Set(originalKeys);
    keysToRemove.forEach((key) => {
        if (set.has(key)) {
            set.delete(key);
        }
    });
    return Array.from(set);
}
function isGroup(rawNode) {
    return (rawNode === null || rawNode === void 0 ? void 0 : rawNode.type) === 'group';
}
function createIndexGetter(treeNodes) {
    const map = new Map();
    treeNodes.forEach((treeNode, i) => {
        map.set(treeNode.key, i);
    });
    return (key) => { var _a; return (_a = map.get(key)) !== null && _a !== void 0 ? _a : null; };
}


/***/ }),

/***/ "./node_modules/vueuc/es/overflow/src/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/vueuc/es/overflow/src/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var _css_render_vue3_ssr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @css-render/vue3-ssr */ "./node_modules/@css-render/vue3-ssr/esm/index.js");
/* harmony import */ var _shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared */ "./node_modules/vueuc/es/shared/cssr.js");
/* eslint-disable @typescript-eslint/strict-boolean-expressions */



const hiddenAttr = 'v-hidden';
const style = (0,_shared__WEBPACK_IMPORTED_MODULE_1__.c)('[v-hidden]', {
    display: 'none!important'
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'Overflow',
    props: {
        getCounter: Function,
        getTail: Function,
        updateCounter: Function,
        onUpdateOverflow: Function
    },
    setup(props, { slots }) {
        const selfRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const counterRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        function deriveCounter() {
            const { value: self } = selfRef;
            const { getCounter, getTail } = props;
            let counter;
            if (getCounter !== undefined)
                counter = getCounter();
            else {
                counter = counterRef.value;
            }
            if (!self || !counter)
                return;
            if (counter.hasAttribute(hiddenAttr)) {
                counter.removeAttribute(hiddenAttr);
            }
            const { children } = self;
            const containerWidth = self.offsetWidth;
            const childWidths = [];
            const tail = slots.tail ? getTail === null || getTail === void 0 ? void 0 : getTail() : null;
            let childWidthSum = tail ? tail.offsetWidth : 0;
            let overflow = false;
            const len = self.children.length - (slots.tail ? 1 : 0);
            for (let i = 0; i < len - 1; ++i) {
                if (i < 0)
                    continue;
                const child = children[i];
                if (overflow) {
                    if (!child.hasAttribute(hiddenAttr)) {
                        child.setAttribute(hiddenAttr, '');
                    }
                    continue;
                }
                else if (child.hasAttribute(hiddenAttr)) {
                    child.removeAttribute(hiddenAttr);
                }
                const childWidth = child.offsetWidth;
                childWidthSum += childWidth;
                childWidths[i] = childWidth;
                if (childWidthSum > containerWidth) {
                    const { updateCounter } = props;
                    for (let j = i; j >= 0; --j) {
                        const restCount = len - 1 - j;
                        if (updateCounter !== undefined) {
                            updateCounter(restCount);
                        }
                        else {
                            counter.textContent = `${restCount}`;
                        }
                        const counterWidth = counter.offsetWidth;
                        childWidthSum -= childWidths[j];
                        if (childWidthSum + counterWidth <= containerWidth || j === 0) {
                            overflow = true;
                            i = j - 1;
                            if (tail) {
                                // tail too long or 1st element too long
                                // we only consider tail now
                                if (i === -1) {
                                    tail.style.maxWidth = `${containerWidth - counterWidth}px`;
                                    tail.style.boxSizing = 'border-box';
                                }
                                else {
                                    tail.style.maxWidth = '';
                                }
                            }
                            break;
                        }
                    }
                }
            }
            const { onUpdateOverflow } = props;
            if (!overflow) {
                if (onUpdateOverflow !== undefined) {
                    onUpdateOverflow(false);
                }
                counter.setAttribute(hiddenAttr, '');
            }
            else {
                if (onUpdateOverflow !== undefined) {
                    onUpdateOverflow(true);
                }
            }
        }
        const ssrAdapter = (0,_css_render_vue3_ssr__WEBPACK_IMPORTED_MODULE_2__.useSsrAdapter)();
        style.mount({
            id: 'vueuc/overflow',
            head: true,
            anchorMetaName: _shared__WEBPACK_IMPORTED_MODULE_1__.cssrAnchorMetaName,
            ssr: ssrAdapter
        });
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(deriveCounter);
        // besides onMounted, other case should be manually triggered, or we shoud watch items
        return {
            selfRef,
            counterRef,
            sync: deriveCounter
        };
    },
    render() {
        const { $slots } = this;
        // eslint-disable-next-line @typescript-eslint/no-floating-promises
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.nextTick)(this.sync);
        // It shouldn't have border
        return (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)('div', {
            class: 'v-overflow',
            ref: 'selfRef'
        }, [
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.renderSlot)($slots, 'default'),
            // $slots.counter should only has 1 element
            $slots.counter
                ? $slots.counter()
                : (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)('span', {
                    style: {
                        display: 'inline-block'
                    },
                    ref: 'counterRef'
                }),
            // $slots.tail should only has 1 element
            $slots.tail ? $slots.tail() : null
        ]);
    }
}));


/***/ }),

/***/ "./node_modules/vueuc/es/shared/finweck-tree.js":
/*!******************************************************!*\
  !*** ./node_modules/vueuc/es/shared/finweck-tree.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FinweckTree: () => (/* binding */ FinweckTree)
/* harmony export */ });
function lowBit(n) {
    return n & -n;
}
class FinweckTree {
    /**
     * @param l length of the array
     * @param min min value of the array
     */
    constructor(l, min) {
        this.l = l;
        this.min = min;
        const ft = new Array(l + 1);
        for (let i = 0; i < l + 1; ++i) {
            ft[i] = 0;
        }
        this.ft = ft;
    }
    /**
     * Add arr[i] by n, start from 0
     * @param i the index of the element to be added
     * @param n the value to be added
     */
    add(i, n) {
        if (n === 0)
            return;
        const { l, ft } = this;
        i += 1;
        while (i <= l) {
            ft[i] += n;
            i += lowBit(i);
        }
    }
    /**
     * Get the value of index i
     * @param i index
     * @returns value of the index
     */
    get(i) {
        return this.sum(i + 1) - this.sum(i);
    }
    /**
     * Get the sum of first i elements
     * @param i count of head elements to be added
     * @returns the sum of first i elements
     */
    sum(i) {
        if (i === undefined)
            i = this.l;
        if (i <= 0)
            return 0;
        const { ft, min, l } = this;
        if (i > l)
            throw new Error('[FinweckTree.sum]: `i` is larger than length.');
        let ret = i * min;
        while (i > 0) {
            ret += ft[i];
            i -= lowBit(i);
        }
        return ret;
    }
    /**
     * Get the largest count of head elements whose sum are <= threshold
     * @param threshold
     * @returns the largest count of head elements whose sum are <= threshold
     */
    getBound(threshold) {
        let l = 0;
        let r = this.l;
        while (r > l) {
            const m = Math.floor((l + r) / 2);
            const sumM = this.sum(m);
            if (sumM > threshold) {
                r = m;
                continue;
            }
            else if (sumM < threshold) {
                if (l === m) {
                    if (this.sum(l + 1) <= threshold)
                        return l + 1;
                    return m;
                }
                l = m;
            }
            else {
                return m;
            }
        }
        return l;
    }
}


/***/ }),

/***/ "./node_modules/vueuc/es/virtual-list/src/VirtualList.js":
/*!***************************************************************!*\
  !*** ./node_modules/vueuc/es/virtual-list/src/VirtualList.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");
/* harmony import */ var seemly__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! seemly */ "./node_modules/seemly/es/css/index.js");
/* harmony import */ var seemly__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! seemly */ "./node_modules/seemly/es/animation/next-frame-once.js");
/* harmony import */ var vooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! vooks */ "./node_modules/vooks/es/use-memo.js");
/* harmony import */ var _css_render_vue3_ssr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @css-render/vue3-ssr */ "./node_modules/@css-render/vue3-ssr/esm/index.js");
/* harmony import */ var _resize_observer_src_VResizeObserver__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../resize-observer/src/VResizeObserver */ "./node_modules/vueuc/es/resize-observer/src/VResizeObserver.js");
/* harmony import */ var _shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared */ "./node_modules/vueuc/es/shared/cssr.js");
/* harmony import */ var _shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../shared */ "./node_modules/vueuc/es/shared/finweck-tree.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./config */ "./node_modules/vueuc/es/virtual-list/src/config.js");
/* eslint-disable no-void */
/* eslint-disable @typescript-eslint/restrict-plus-operands */







const styles = (0,_shared__WEBPACK_IMPORTED_MODULE_1__.c)('.v-vl', {
    maxHeight: 'inherit',
    height: '100%',
    overflow: 'auto',
    minWidth: '1px' // a zero width container won't be scrollable
}, [
    (0,_shared__WEBPACK_IMPORTED_MODULE_1__.c)('&:not(.v-vl--show-scrollbar)', {
        scrollbarWidth: 'none'
    }, [
        (0,_shared__WEBPACK_IMPORTED_MODULE_1__.c)('&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb', {
            width: 0,
            height: 0,
            display: 'none'
        })
    ])
]);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({
    name: 'VirtualList',
    inheritAttrs: false,
    props: {
        showScrollbar: {
            type: Boolean,
            default: true
        },
        items: {
            type: Array,
            default: () => []
        },
        // it is suppose to be the min height
        itemSize: {
            type: Number,
            required: true
        },
        itemResizable: Boolean,
        itemsStyle: [String, Object],
        visibleItemsTag: {
            type: [String, Object],
            default: 'div'
        },
        visibleItemsProps: Object,
        ignoreItemResize: Boolean,
        onScroll: Function,
        onWheel: Function,
        onResize: Function,
        defaultScrollKey: [Number, String],
        defaultScrollIndex: Number,
        keyField: {
            type: String,
            default: 'key'
        },
        // Whether it is a good API?
        // ResizeObserver + footer & header is not enough.
        // Too complex for simple case
        paddingTop: {
            type: [Number, String],
            default: 0
        },
        paddingBottom: {
            type: [Number, String],
            default: 0
        }
    },
    setup(props) {
        const ssrAdapter = (0,_css_render_vue3_ssr__WEBPACK_IMPORTED_MODULE_2__.useSsrAdapter)();
        styles.mount({
            id: 'vueuc/virtual-list',
            head: true,
            anchorMetaName: _shared__WEBPACK_IMPORTED_MODULE_1__.cssrAnchorMetaName,
            ssr: ssrAdapter
        });
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.onMounted)(() => {
            const { defaultScrollIndex, defaultScrollKey } = props;
            if (defaultScrollIndex !== undefined && defaultScrollIndex !== null) {
                scrollTo({ index: defaultScrollIndex });
            }
            else if (defaultScrollKey !== undefined && defaultScrollKey !== null) {
                scrollTo({ key: defaultScrollKey });
            }
        });
        let isDeactivated = false;
        let activateStateInitialized = false;
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.onActivated)(() => {
            isDeactivated = false;
            if (!activateStateInitialized) {
                activateStateInitialized = true;
                return;
            }
            // remount
            scrollTo({ top: scrollTopRef.value, left: scrollLeft });
        });
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.onDeactivated)(() => {
            isDeactivated = true;
            if (!activateStateInitialized) {
                activateStateInitialized = true;
            }
        });
        const keyIndexMapRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const map = new Map();
            const { keyField } = props;
            props.items.forEach((item, index) => {
                map.set(item[keyField], index);
            });
            return map;
        });
        const listElRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null);
        const listHeightRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(undefined);
        const keyToHeightOffset = new Map();
        const finweckTreeRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { items, itemSize, keyField } = props;
            const ft = new _shared__WEBPACK_IMPORTED_MODULE_3__.FinweckTree(items.length, itemSize);
            items.forEach((item, index) => {
                const key = item[keyField];
                const heightOffset = keyToHeightOffset.get(key);
                if (heightOffset !== undefined) {
                    ft.add(index, heightOffset);
                }
            });
            return ft;
        });
        const finweckTreeUpdateTrigger = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(0);
        let scrollLeft = 0;
        const scrollTopRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(0);
        const startIndexRef = (0,vooks__WEBPACK_IMPORTED_MODULE_4__["default"])(() => {
            return Math.max(finweckTreeRef.value.getBound(scrollTopRef.value - (0,seemly__WEBPACK_IMPORTED_MODULE_5__.depx)(props.paddingTop)) - 1, 0);
        });
        const viewportItemsRef = (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
            const { value: listHeight } = listHeightRef;
            if (listHeight === undefined)
                return [];
            const { items, itemSize } = props;
            const startIndex = startIndexRef.value;
            const endIndex = Math.min(startIndex + Math.ceil(listHeight / itemSize + 1), items.length - 1);
            const viewportItems = [];
            for (let i = startIndex; i <= endIndex; ++i) {
                viewportItems.push(items[i]);
            }
            return viewportItems;
        });
        const scrollTo = (options, y) => {
            if (typeof options === 'number') {
                scrollToPosition(options, y, 'auto');
                return;
            }
            const { left, top, index, key, position, behavior, debounce = true } = options;
            if (left !== undefined || top !== undefined) {
                scrollToPosition(left, top, behavior);
            }
            else if (index !== undefined) {
                scrollToIndex(index, behavior, debounce);
            }
            else if (key !== undefined) {
                const toIndex = keyIndexMapRef.value.get(key);
                if (toIndex !== undefined)
                    scrollToIndex(toIndex, behavior, debounce);
            }
            else if (position === 'bottom') {
                scrollToPosition(0, Number.MAX_SAFE_INTEGER, behavior);
            }
            else if (position === 'top') {
                scrollToPosition(0, 0, behavior);
            }
        };
        let anchorIndex;
        let anchorTimerId = null;
        function scrollToIndex(index, behavior, debounce) {
            const { value: ft } = finweckTreeRef;
            const targetTop = ft.sum(index) + (0,seemly__WEBPACK_IMPORTED_MODULE_5__.depx)(props.paddingTop);
            if (!debounce) {
                listElRef.value.scrollTo({
                    left: 0,
                    top: targetTop,
                    behavior
                });
            }
            else {
                anchorIndex = index;
                if (anchorTimerId !== null) {
                    window.clearTimeout(anchorTimerId);
                }
                anchorTimerId = window.setTimeout(() => {
                    anchorIndex = undefined;
                    anchorTimerId = null;
                }, 16); // use 0 ms may be ealier than resize callback...
                const { scrollTop, offsetHeight } = listElRef.value;
                if (targetTop > scrollTop) {
                    const itemSize = ft.get(index);
                    if (targetTop + itemSize <= scrollTop + offsetHeight) {
                        // do nothing
                    }
                    else {
                        listElRef.value.scrollTo({
                            left: 0,
                            top: targetTop + itemSize - offsetHeight,
                            behavior
                        });
                    }
                }
                else {
                    listElRef.value.scrollTo({
                        left: 0,
                        top: targetTop,
                        behavior
                    });
                }
            }
        }
        function scrollToPosition(left, top, behavior) {
            listElRef.value.scrollTo({
                left,
                top,
                behavior
            });
        }
        function handleItemResize(key, entry) {
            var _a, _b, _c;
            if (isDeactivated)
                return;
            if (props.ignoreItemResize)
                return;
            if (isHideByVShow(entry.target))
                return;
            const { value: ft } = finweckTreeRef;
            const index = keyIndexMapRef.value.get(key);
            const previousHeight = ft.get(index);
            const height = (_c = (_b = (_a = entry.borderBoxSize) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.blockSize) !== null && _c !== void 0 ? _c : entry.contentRect.height;
            if (height === previousHeight)
                return;
            // height offset based on itemSize
            // used when rebuild the finweck tree
            const offset = height - props.itemSize;
            if (offset === 0) {
                keyToHeightOffset.delete(key);
            }
            else {
                keyToHeightOffset.set(key, height - props.itemSize);
            }
            // delta height based on finweck tree data
            const delta = height - previousHeight;
            if (delta === 0)
                return;
            ft.add(index, delta);
            const listEl = listElRef.value;
            if (listEl != null) {
                if (anchorIndex === undefined) {
                    const previousHeightSum = ft.sum(index);
                    if (listEl.scrollTop > previousHeightSum) {
                        listEl.scrollBy(0, delta);
                    }
                }
                else {
                    if (index < anchorIndex) {
                        listEl.scrollBy(0, delta);
                    }
                    else if (index === anchorIndex) {
                        const previousHeightSum = ft.sum(index);
                        if (height + previousHeightSum >
                            // Note, listEl shouldn't have border, nor offsetHeight won't be
                            // correct
                            listEl.scrollTop + listEl.offsetHeight) {
                            listEl.scrollBy(0, delta);
                        }
                    }
                }
                syncViewport();
            }
            finweckTreeUpdateTrigger.value++;
        }
        const mayUseWheel = !(0,_config__WEBPACK_IMPORTED_MODULE_6__.ensureMaybeTouch)();
        let wheelCatched = false;
        function handleListScroll(e) {
            var _a;
            (_a = props.onScroll) === null || _a === void 0 ? void 0 : _a.call(props, e);
            if (!mayUseWheel || !wheelCatched) {
                syncViewport();
            }
        }
        function handleListWheel(e) {
            var _a;
            (_a = props.onWheel) === null || _a === void 0 ? void 0 : _a.call(props, e);
            if (mayUseWheel) {
                const listEl = listElRef.value;
                if (listEl != null) {
                    if (e.deltaX === 0) {
                        if (listEl.scrollTop === 0 && e.deltaY <= 0) {
                            return;
                        }
                        if (listEl.scrollTop + listEl.offsetHeight >= listEl.scrollHeight &&
                            e.deltaY >= 0) {
                            return;
                        }
                    }
                    e.preventDefault();
                    listEl.scrollTop += e.deltaY / (0,_config__WEBPACK_IMPORTED_MODULE_6__.ensureWheelScale)();
                    listEl.scrollLeft += e.deltaX / (0,_config__WEBPACK_IMPORTED_MODULE_6__.ensureWheelScale)();
                    syncViewport();
                    wheelCatched = true;
                    (0,seemly__WEBPACK_IMPORTED_MODULE_7__.beforeNextFrameOnce)(() => {
                        wheelCatched = false;
                    });
                }
            }
        }
        function handleListResize(entry) {
            if (isDeactivated)
                return;
            // List is HTMLElement
            if (isHideByVShow(entry.target))
                return;
            // If height is same, return
            if (entry.contentRect.height === listHeightRef.value)
                return;
            listHeightRef.value = entry.contentRect.height;
            const { onResize } = props;
            if (onResize !== undefined)
                onResize(entry);
        }
        function syncViewport() {
            const { value: listEl } = listElRef;
            // sometime ref el can be null
            // https://github.com/TuSimple/naive-ui/issues/811
            if (listEl == null)
                return;
            scrollTopRef.value = listEl.scrollTop;
            scrollLeft = listEl.scrollLeft;
        }
        function isHideByVShow(el) {
            let cursor = el;
            while (cursor !== null) {
                if (cursor.style.display === 'none')
                    return true;
                cursor = cursor.parentElement;
            }
            return false;
        }
        return {
            listHeight: listHeightRef,
            listStyle: {
                overflow: 'auto'
            },
            keyToIndex: keyIndexMapRef,
            itemsStyle: (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
                const { itemResizable } = props;
                const height = (0,seemly__WEBPACK_IMPORTED_MODULE_5__.pxfy)(finweckTreeRef.value.sum());
                // eslint-disable-next-line @typescript-eslint/no-unused-expressions
                finweckTreeUpdateTrigger.value;
                return [
                    props.itemsStyle,
                    {
                        boxSizing: 'content-box',
                        height: itemResizable ? '' : height,
                        minHeight: itemResizable ? height : '',
                        paddingTop: (0,seemly__WEBPACK_IMPORTED_MODULE_5__.pxfy)(props.paddingTop),
                        paddingBottom: (0,seemly__WEBPACK_IMPORTED_MODULE_5__.pxfy)(props.paddingBottom)
                    }
                ];
            }),
            visibleItemsStyle: (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
                // eslint-disable-next-line @typescript-eslint/no-unused-expressions
                finweckTreeUpdateTrigger.value;
                return {
                    transform: `translateY(${(0,seemly__WEBPACK_IMPORTED_MODULE_5__.pxfy)(finweckTreeRef.value.sum(startIndexRef.value))})`
                };
            }),
            viewportItems: viewportItemsRef,
            listElRef,
            itemsElRef: (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(null),
            scrollTo,
            handleListResize,
            handleListScroll,
            handleListWheel,
            handleItemResize
        };
    },
    render() {
        const { itemResizable, keyField, keyToIndex, visibleItemsTag } = this;
        return (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_resize_observer_src_VResizeObserver__WEBPACK_IMPORTED_MODULE_8__["default"], {
            onResize: this.handleListResize
        }, {
            default: () => {
                var _a, _b;
                return (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)('div', (0,vue__WEBPACK_IMPORTED_MODULE_0__.mergeProps)(this.$attrs, {
                    class: ['v-vl', this.showScrollbar && 'v-vl--show-scrollbar'],
                    onScroll: this.handleListScroll,
                    onWheel: this.handleListWheel,
                    ref: 'listElRef'
                }), [
                    this.items.length !== 0
                        ? (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)('div', {
                            ref: 'itemsElRef',
                            class: 'v-vl-items',
                            style: this.itemsStyle
                        }, [
                            (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(visibleItemsTag, Object.assign({
                                class: 'v-vl-visible-items',
                                style: this.visibleItemsStyle
                            }, this.visibleItemsProps), {
                                default: () => this.viewportItems.map((item) => {
                                    const key = item[keyField];
                                    const index = keyToIndex.get(key);
                                    const itemVNode = this.$slots.default({
                                        item,
                                        index
                                    })[0];
                                    if (itemResizable) {
                                        return (0,vue__WEBPACK_IMPORTED_MODULE_0__.h)(_resize_observer_src_VResizeObserver__WEBPACK_IMPORTED_MODULE_8__["default"], {
                                            key,
                                            onResize: (entry) => this.handleItemResize(key, entry)
                                        }, {
                                            default: () => itemVNode
                                        });
                                    }
                                    itemVNode.key = key;
                                    return itemVNode;
                                })
                            })
                        ])
                        : (_b = (_a = this.$slots).empty) === null || _b === void 0 ? void 0 : _b.call(_a)
                ]);
            }
        });
    }
}));


/***/ }),

/***/ "./node_modules/vueuc/es/virtual-list/src/config.js":
/*!**********************************************************!*\
  !*** ./node_modules/vueuc/es/virtual-list/src/config.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ensureMaybeTouch: () => (/* binding */ ensureMaybeTouch),
/* harmony export */   ensureWheelScale: () => (/* binding */ ensureWheelScale)
/* harmony export */ });
let maybeTouch;
function ensureMaybeTouch() {
    if (maybeTouch === undefined) {
        if ('matchMedia' in window) {
            maybeTouch = window.matchMedia('(pointer:coarse)').matches;
        }
        else {
            maybeTouch = false;
        }
    }
    return maybeTouch;
}
let wheelScale;
function ensureWheelScale() {
    if (wheelScale === undefined) {
        wheelScale = 'chrome' in window
            ? window.devicePixelRatio
            : 1;
    }
    return wheelScale;
}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfbmFpdmUtdWlfZXNfc2VsZWN0X3NyY19TZWxlY3RfanMubWluLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdEO0FBQ0Y7QUFDRjtBQUNKO0FBQ0Q7QUFDMEI7QUFDekI7QUFDeEMsaUVBQWUsb0RBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsUUFBUSxtREFBUSxnQkFBZ0IsMERBQUssRUFBRSwwQ0FBSztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUIsZ0JBQWdCLHNDQUFDLFVBQVUsVUFBVSxVQUFVLGNBQWM7QUFDN0QsWUFBWSxzQ0FBQyxDQUFDLCtEQUFxQjtBQUNuQztBQUNBO0FBQ0Esd0NBQXdDLHNDQUFDLFVBQVUsMEJBQTBCLFVBQVUsbUdBQW1HLEVBQUUsbURBQVc7QUFDdk0sd0JBQXdCLHNDQUFDLENBQUMsNkNBQVMsSUFBSSxzQkFBc0I7QUFDN0QsMkNBQTJDLHNDQUFDLENBQUMsOENBQVM7QUFDdEQseUJBQXlCO0FBQ3pCLDRCQUE0QixzQ0FBQyxVQUFVLHVCQUF1QixVQUFVLDJCQUEyQjtBQUNuRztBQUNBLGFBQWE7QUFDYjtBQUNBLENBQUMsQ0FBQyxFQUFDOzs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZDaUQ7QUFDb0M7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsK0NBQUU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDhDQUFDLE9BQU8sK0NBQUU7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssOENBQUM7QUFDTjtBQUNBLEtBQUssOENBQUM7QUFDTjtBQUNBLE9BQU8sK0NBQUU7QUFDVDtBQUNBLEtBQUssK0NBQUU7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUss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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pGQTtBQUNBO0FBQzJHO0FBQ2xEO0FBQ3pCO0FBQ3FCO0FBQ21CO0FBQ047QUFDSjtBQUM5RCxlQUFlLDBDQUFDO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELElBQUksMENBQUM7QUFDTDtBQUNBLEtBQUs7QUFDTCxRQUFRLDBDQUFDO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxpRUFBZSxvREFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkJBQTJCLG1FQUFhO0FBQ3hDO0FBQ0E7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RUFBQzs7Ozs7Ozs7Ozs7Ozs7OztBQzlhSDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL2NsZWFyL3NyYy9DbGVhci5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL2NsZWFyL3NyYy9zdHlsZXMvaW5kZXguY3Nzci5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL2Nsb3NlL3NyYy9DbG9zZS5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL2Nsb3NlL3NyYy9zdHlsZXMvaW5kZXguY3Nzci5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL2ZvY3VzLWRldGVjdG9yL2luZGV4LmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy9faW50ZXJuYWwvZm9jdXMtZGV0ZWN0b3Ivc3JjL0ZvY3VzRGV0ZWN0b3IuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL19pbnRlcm5hbC9pY29ucy9DaGVja21hcmsuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL19pbnRlcm5hbC9pY29ucy9DaGV2cm9uRG93bi5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL2ljb25zL0NsZWFyLmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy9faW50ZXJuYWwvaWNvbnMvQ2xvc2UuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL19pbnRlcm5hbC9pY29ucy9FbXB0eS5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL3NlbGVjdC1tZW51L3NyYy9TZWxlY3RHcm91cEhlYWRlci5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL3NlbGVjdC1tZW51L3NyYy9TZWxlY3RNZW51LmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy9faW50ZXJuYWwvc2VsZWN0LW1lbnUvc3JjL1NlbGVjdE9wdGlvbi5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL3NlbGVjdC1tZW51L3NyYy9zdHlsZXMvaW5kZXguY3Nzci5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL3NlbGVjdC1tZW51L3N0eWxlcy9fY29tbW9uLmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy9faW50ZXJuYWwvc2VsZWN0LW1lbnUvc3R5bGVzL2xpZ2h0LmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy9faW50ZXJuYWwvc2VsZWN0aW9uL3NyYy9TZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL19pbnRlcm5hbC9zZWxlY3Rpb24vc3JjL3N0eWxlcy9pbmRleC5jc3NyLmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy9faW50ZXJuYWwvc2VsZWN0aW9uL3N0eWxlcy9fY29tbW9uLmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy9faW50ZXJuYWwvc2VsZWN0aW9uL3N0eWxlcy9saWdodC5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvX2ludGVybmFsL3N1ZmZpeC9zcmMvU3VmZml4LmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy9fdXRpbHMvY29tcG9zYWJsZS91c2UtcmVzaXplLmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy9fdXRpbHMvZXZlbnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL191dGlscy9uYWl2ZS9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL191dGlscy92dWUvbWVyZ2UtaGFuZGxlcnMuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL191dGlscy92dWUvcmVuZGVyLmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy9lbXB0eS9zcmMvRW1wdHkuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL2VtcHR5L3NyYy9zdHlsZXMvaW5kZXguY3Nzci5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvZW1wdHkvc3R5bGVzL19jb21tb24uanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL2VtcHR5L3N0eWxlcy9saWdodC5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvc2VsZWN0L3NyYy9TZWxlY3QuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL3NlbGVjdC9zcmMvc3R5bGVzL2luZGV4LmNzc3IuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL3NlbGVjdC9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL3NlbGVjdC9zdHlsZXMvbGlnaHQuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL25haXZlLXVpL2VzL3RhZy9zcmMvVGFnLmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy90YWcvc3JjL2NvbW1vbi1wcm9wcy5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvdGFnL3NyYy9zdHlsZXMvaW5kZXguY3Nzci5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvbmFpdmUtdWkvZXMvdGFnL3N0eWxlcy9fY29tbW9uLmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9uYWl2ZS11aS9lcy90YWcvc3R5bGVzL2xpZ2h0LmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9zZWVtbHkvZXMvY3NzL2luZGV4LmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy9zZWVtbHkvZXMvY3NzL3Jlc3BvbnNpdmUuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL3NlZW1seS9lcy9kb20vaGFwcGVucy1pbi5qcyIsIndlYnBhY2s6Ly9uZWFyYmVhY2gvLi9ub2RlX21vZHVsZXMvdHJlZW1hdGUvZXMvY2hlY2suanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL3RyZWVtYXRlL2VzL2NvbnRhaW5zLmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy90cmVlbWF0ZS9lcy9jcmVhdGUuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL3RyZWVtYXRlL2VzL2ZsYXR0ZW4uanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL3RyZWVtYXRlL2VzL21vdmUuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL3RyZWVtYXRlL2VzL3BhdGguanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL3RyZWVtYXRlL2VzL3V0aWxzLmpzIiwid2VicGFjazovL25lYXJiZWFjaC8uL25vZGVfbW9kdWxlcy92dWV1Yy9lcy9vdmVyZmxvdy9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL3Z1ZXVjL2VzL3NoYXJlZC9maW53ZWNrLXRyZWUuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL3Z1ZXVjL2VzL3ZpcnR1YWwtbGlzdC9zcmMvVmlydHVhbExpc3QuanMiLCJ3ZWJwYWNrOi8vbmVhcmJlYWNoLy4vbm9kZV9tb2R1bGVzL3Z1ZXVjL2VzL3ZpcnR1YWwtbGlzdC9zcmMvY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGgsIGRlZmluZUNvbXBvbmVudCwgdG9SZWYgfSBmcm9tICd2dWUnO1xuaW1wb3J0IHsgcmVzb2x2ZVNsb3QgfSBmcm9tICcuLi8uLi8uLi9fdXRpbHMnO1xuaW1wb3J0IHsgdXNlU3R5bGUgfSBmcm9tICcuLi8uLi8uLi9fbWl4aW5zJztcbmltcG9ydCB7IENsZWFySWNvbiB9IGZyb20gJy4uLy4uL2ljb25zJztcbmltcG9ydCB7IE5CYXNlSWNvbiB9IGZyb20gJy4uLy4uL2ljb24nO1xuaW1wb3J0IE5JY29uU3dpdGNoVHJhbnNpdGlvbiBmcm9tICcuLi8uLi9pY29uLXN3aXRjaC10cmFuc2l0aW9uJztcbmltcG9ydCBzdHlsZSBmcm9tICcuL3N0eWxlcy9pbmRleC5jc3NyJztcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogJ0Jhc2VDbGVhcicsXG4gICAgcHJvcHM6IHtcbiAgICAgICAgY2xzUHJlZml4OiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBzaG93OiBCb29sZWFuLFxuICAgICAgICBvbkNsZWFyOiBGdW5jdGlvblxuICAgIH0sXG4gICAgc2V0dXAocHJvcHMpIHtcbiAgICAgICAgdXNlU3R5bGUoJy1iYXNlLWNsZWFyJywgc3R5bGUsIHRvUmVmKHByb3BzLCAnY2xzUHJlZml4JykpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGFuZGxlTW91c2VEb3duKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSxcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgY2xzUHJlZml4IH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogYCR7Y2xzUHJlZml4fS1iYXNlLWNsZWFyYCB9LFxuICAgICAgICAgICAgaChOSWNvblN3aXRjaFRyYW5zaXRpb24sIG51bGwsIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3cgPyAoaChcImRpdlwiLCB7IGtleTogXCJkaXNtaXNzXCIsIGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2UtY2xlYXJfX2NsZWFyYCwgb25DbGljazogdGhpcy5vbkNsZWFyLCBvbk1vdXNlZG93bjogdGhpcy5oYW5kbGVNb3VzZURvd24sIFwiZGF0YS1jbGVhclwiOiB0cnVlIH0sIHJlc29sdmVTbG90KHRoaXMuJHNsb3RzLmljb24sICgpID0+IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGgoTkJhc2VJY29uLCB7IGNsc1ByZWZpeDogY2xzUHJlZml4IH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBoKENsZWFySWNvbiwgbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF0pKSkgOiAoaChcImRpdlwiLCB7IGtleTogXCJpY29uXCIsIGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2UtY2xlYXJfX3BsYWNlaG9sZGVyYCB9LCAoX2IgPSAoX2EgPSB0aGlzLiRzbG90cykucGxhY2Vob2xkZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKSk7XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgeyBjQiwgYywgY0UgfSBmcm9tICcuLi8uLi8uLi8uLi9fdXRpbHMvY3Nzcic7XG5pbXBvcnQgeyBpY29uU3dpdGNoVHJhbnNpdGlvbiB9IGZyb20gJy4uLy4uLy4uLy4uL19zdHlsZXMvdHJhbnNpdGlvbnMvaWNvbi1zd2l0Y2guY3Nzcic7XG4vLyB2YXJzOlxuLy8gLS1uLWJlemllclxuLy8gLS1uLWNsZWFyLWNvbG9yXG4vLyAtLW4tY2xlYXItc2l6ZVxuLy8gLS1uLWNsZWFyLWNvbG9yLWhvdmVyXG4vLyAtLW4tY2xlYXItY29sb3ItcHJlc3NlZFxuZXhwb3J0IGRlZmF1bHQgY0IoJ2Jhc2UtY2xlYXInLCBgXG4gZmxleC1zaHJpbms6IDA7XG4gaGVpZ2h0OiAxZW07XG4gd2lkdGg6IDFlbTtcbiBwb3NpdGlvbjogcmVsYXRpdmU7XG5gLCBbYygnPicsIFtjRSgnY2xlYXInLCBgXG4gZm9udC1zaXplOiB2YXIoLS1uLWNsZWFyLXNpemUpO1xuIGhlaWdodDogMWVtO1xuIHdpZHRoOiAxZW07XG4gY3Vyc29yOiBwb2ludGVyO1xuIGNvbG9yOiB2YXIoLS1uLWNsZWFyLWNvbG9yKTtcbiB0cmFuc2l0aW9uOiBjb2xvciAuM3MgdmFyKC0tbi1iZXppZXIpO1xuIGRpc3BsYXk6IGZsZXg7XG4gYCwgW2MoJyY6aG92ZXInLCBgXG4gY29sb3I6IHZhcigtLW4tY2xlYXItY29sb3ItaG92ZXIpIWltcG9ydGFudDtcbiBgKSwgYygnJjphY3RpdmUnLCBgXG4gY29sb3I6IHZhcigtLW4tY2xlYXItY29sb3ItcHJlc3NlZCkhaW1wb3J0YW50O1xuIGApXSksIGNFKCdwbGFjZWhvbGRlcicsIGBcbiBkaXNwbGF5OiBmbGV4O1xuIGApLCBjRSgnY2xlYXIsIHBsYWNlaG9sZGVyJywgYFxuIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiBsZWZ0OiA1MCU7XG4gdG9wOiA1MCU7XG4gdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpIHRyYW5zbGF0ZVkoLTUwJSk7XG4gYCwgW2ljb25Td2l0Y2hUcmFuc2l0aW9uKHtcbiAgb3JpZ2luYWxUcmFuc2Zvcm06ICd0cmFuc2xhdGVYKC01MCUpIHRyYW5zbGF0ZVkoLTUwJSknLFxuICBsZWZ0OiAnNTAlJyxcbiAgdG9wOiAnNTAlJ1xufSldKV0pXSk7IiwiaW1wb3J0IHsgaCwgZGVmaW5lQ29tcG9uZW50LCB0b1JlZiB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyB1c2VTdHlsZSB9IGZyb20gJy4uLy4uLy4uL19taXhpbnMnO1xuaW1wb3J0IHsgTkJhc2VJY29uIH0gZnJvbSAnLi4vLi4vaWNvbic7XG5pbXBvcnQgeyBDbG9zZUljb24gfSBmcm9tICcuLi8uLi9pY29ucyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi9zdHlsZXMvaW5kZXguY3Nzcic7XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6ICdCYXNlQ2xvc2UnLFxuICAgIHByb3BzOiB7XG4gICAgICAgIGlzQnV0dG9uVGFnOiB7XG4gICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBjbHNQcmVmaXg6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGRpc2FibGVkOiB7XG4gICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgZGVmYXVsdDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG4gICAgICAgIGZvY3VzYWJsZToge1xuICAgICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgcm91bmQ6IEJvb2xlYW4sXG4gICAgICAgIG9uQ2xpY2s6IEZ1bmN0aW9uLFxuICAgICAgICBhYnNvbHV0ZTogQm9vbGVhblxuICAgIH0sXG4gICAgc2V0dXAocHJvcHMpIHtcbiAgICAgICAgdXNlU3R5bGUoJy1iYXNlLWNsb3NlJywgc3R5bGUsIHRvUmVmKHByb3BzLCAnY2xzUHJlZml4JykpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBjbHNQcmVmaXgsIGRpc2FibGVkLCBhYnNvbHV0ZSwgcm91bmQsIGlzQnV0dG9uVGFnIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGNvbnN0IFRhZyA9IGlzQnV0dG9uVGFnID8gJ2J1dHRvbicgOiAnZGl2JztcbiAgICAgICAgICAgIHJldHVybiAoaChUYWcsIHsgdHlwZTogaXNCdXR0b25UYWcgPyAnYnV0dG9uJyA6IHVuZGVmaW5lZCwgdGFiaW5kZXg6IGRpc2FibGVkIHx8ICFwcm9wcy5mb2N1c2FibGUgPyAtMSA6IDAsIFwiYXJpYS1kaXNhYmxlZFwiOiBkaXNhYmxlZCwgXCJhcmlhLWxhYmVsXCI6IFwiY2xvc2VcIiwgcm9sZTogaXNCdXR0b25UYWcgPyB1bmRlZmluZWQgOiAnYnV0dG9uJywgZGlzYWJsZWQ6IGRpc2FibGVkLCBjbGFzczogW1xuICAgICAgICAgICAgICAgICAgICBgJHtjbHNQcmVmaXh9LWJhc2UtY2xvc2VgLFxuICAgICAgICAgICAgICAgICAgICBhYnNvbHV0ZSAmJiBgJHtjbHNQcmVmaXh9LWJhc2UtY2xvc2UtLWFic29sdXRlYCxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQgJiYgYCR7Y2xzUHJlZml4fS1iYXNlLWNsb3NlLS1kaXNhYmxlZGAsXG4gICAgICAgICAgICAgICAgICAgIHJvdW5kICYmIGAke2Nsc1ByZWZpeH0tYmFzZS1jbG9zZS0tcm91bmRgXG4gICAgICAgICAgICAgICAgXSwgb25Nb3VzZWRvd246IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJvcHMuZm9jdXNhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBvbkNsaWNrOiBwcm9wcy5vbkNsaWNrIH0sXG4gICAgICAgICAgICAgICAgaChOQmFzZUljb24sIHsgY2xzUHJlZml4OiBjbHNQcmVmaXggfSwge1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBoKENsb3NlSWNvbiwgbnVsbClcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICB9O1xuICAgIH1cbn0pO1xuIiwiaW1wb3J0IHsgY0IsIGNNLCBjLCBjTm90TSB9IGZyb20gJy4uLy4uLy4uLy4uL191dGlscy9jc3NyJztcbi8vIHZhcnM6XG4vLyAtLW4tY2xvc2UtYm9yZGVyLXJhZGl1c1xuLy8gLS1uLWNsb3NlLWNvbG9yLWhvdmVyXG4vLyAtLW4tY2xvc2UtY29sb3ItcHJlc3NlZFxuLy8gLS1uLWNsb3NlLWljb24tY29sb3Jcbi8vIC0tbi1jbG9zZS1pY29uLWNvbG9yLWhvdmVyXG4vLyAtLW4tY2xvc2UtaWNvbi1jb2xvci1wcmVzc2VkXG4vLyAtLW4tY2xvc2UtaWNvbi1jb2xvci1kaXNhYmxlZFxuZXhwb3J0IGRlZmF1bHQgY0IoJ2Jhc2UtY2xvc2UnLCBgXG4gZGlzcGxheTogZmxleDtcbiBhbGlnbi1pdGVtczogY2VudGVyO1xuIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuIGN1cnNvcjogcG9pbnRlcjtcbiBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiBjb2xvcjogdmFyKC0tbi1jbG9zZS1pY29uLWNvbG9yKTtcbiBib3JkZXItcmFkaXVzOiB2YXIoLS1uLWNsb3NlLWJvcmRlci1yYWRpdXMpO1xuIGhlaWdodDogdmFyKC0tbi1jbG9zZS1zaXplKTtcbiB3aWR0aDogdmFyKC0tbi1jbG9zZS1zaXplKTtcbiBmb250LXNpemU6IHZhcigtLW4tY2xvc2UtaWNvbi1zaXplKTtcbiBvdXRsaW5lOiBub25lO1xuIGJvcmRlcjogbm9uZTtcbiBwb3NpdGlvbjogcmVsYXRpdmU7XG4gcGFkZGluZzogMDtcbmAsIFtjTSgnYWJzb2x1dGUnLCBgXG4gaGVpZ2h0OiB2YXIoLS1uLWNsb3NlLWljb24tc2l6ZSk7XG4gd2lkdGg6IHZhcigtLW4tY2xvc2UtaWNvbi1zaXplKTtcbiBgKSwgYygnJjo6YmVmb3JlJywgYFxuIGNvbnRlbnQ6IFwiXCI7XG4gcG9zaXRpb246IGFic29sdXRlO1xuIHdpZHRoOiB2YXIoLS1uLWNsb3NlLXNpemUpO1xuIGhlaWdodDogdmFyKC0tbi1jbG9zZS1zaXplKTtcbiBsZWZ0OiA1MCU7XG4gdG9wOiA1MCU7XG4gdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHRyYW5zbGF0ZVgoLTUwJSk7XG4gdHJhbnNpdGlvbjogaW5oZXJpdDtcbiBib3JkZXItcmFkaXVzOiBpbmhlcml0O1xuIGApLCBjTm90TSgnZGlzYWJsZWQnLCBbYygnJjpob3ZlcicsIGBcbiBjb2xvcjogdmFyKC0tbi1jbG9zZS1pY29uLWNvbG9yLWhvdmVyKTtcbiBgKSwgYygnJjpob3Zlcjo6YmVmb3JlJywgYFxuIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW4tY2xvc2UtY29sb3ItaG92ZXIpO1xuIGApLCBjKCcmOmZvY3VzOjpiZWZvcmUnLCBgXG4gYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbi1jbG9zZS1jb2xvci1ob3Zlcik7XG4gYCksIGMoJyY6YWN0aXZlJywgYFxuIGNvbG9yOiB2YXIoLS1uLWNsb3NlLWljb24tY29sb3ItcHJlc3NlZCk7XG4gYCksIGMoJyY6YWN0aXZlOjpiZWZvcmUnLCBgXG4gYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbi1jbG9zZS1jb2xvci1wcmVzc2VkKTtcbiBgKV0pLCBjTSgnZGlzYWJsZWQnLCBgXG4gY3Vyc29yOiBub3QtYWxsb3dlZDtcbiBjb2xvcjogdmFyKC0tbi1jbG9zZS1pY29uLWNvbG9yLWRpc2FibGVkKTtcbiBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiBgKSwgY00oJ3JvdW5kJywgW2MoJyY6OmJlZm9yZScsIGBcbiBib3JkZXItcmFkaXVzOiA1MCU7XG4gYCldKV0pOyIsImltcG9ydCBGb2N1c0RldGVjdG9yIGZyb20gJy4vc3JjL0ZvY3VzRGV0ZWN0b3InO1xuZXhwb3J0IGRlZmF1bHQgRm9jdXNEZXRlY3RvcjtcbiIsImltcG9ydCB7IGgsIGRlZmluZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSc7XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICAgIHByb3BzOiB7XG4gICAgICAgIG9uRm9jdXM6IEZ1bmN0aW9uLFxuICAgICAgICBvbkJsdXI6IEZ1bmN0aW9uXG4gICAgfSxcbiAgICBzZXR1cChwcm9wcykge1xuICAgICAgICByZXR1cm4gKCkgPT4gKGgoXCJkaXZcIiwgeyBzdHlsZTogXCJ3aWR0aDogMDsgaGVpZ2h0OiAwXCIsIHRhYmluZGV4OiAwLCBvbkZvY3VzOiBwcm9wcy5vbkZvY3VzLCBvbkJsdXI6IHByb3BzLm9uQmx1ciB9KSk7XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgeyBoLCBkZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnO1xuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgICBuYW1lOiAnQ2hlY2ttYXJrJyxcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoaChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHZpZXdCb3g6IFwiMCAwIDE2IDE2XCIgfSxcbiAgICAgICAgICAgIGgoXCJnXCIsIHsgZmlsbDogXCJub25lXCIgfSxcbiAgICAgICAgICAgICAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTE0LjA0NiAzLjQ4NmEuNzUuNzUgMCAwIDEtLjAzMiAxLjA2bC03LjkzIDcuNDc0YS44NS44NSAwIDAgMS0xLjE4OC0uMDIybC0yLjY4LTIuNzJhLjc1Ljc1IDAgMSAxIDEuMDY4LTEuMDUzbDIuMjM0IDIuMjY3bDcuNDY4LTcuMDM4YS43NS43NSAwIDAgMSAxLjA2LjAzMnpcIiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9KSkpKTtcbiAgICB9XG59KTtcbiIsImltcG9ydCB7IGgsIGRlZmluZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSc7XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6ICdDaGV2cm9uRG93bicsXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKGgoXCJzdmdcIiwgeyB2aWV3Qm94OiBcIjAgMCAxNiAxNlwiLCBmaWxsOiBcIm5vbmVcIiwgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB9LFxuICAgICAgICAgICAgaChcInBhdGhcIiwgeyBkOiBcIk0zLjE0NjQ1IDUuNjQ2NDVDMy4zNDE3MSA1LjQ1MTE4IDMuNjU4MjkgNS40NTExOCAzLjg1MzU1IDUuNjQ2NDVMOCA5Ljc5Mjg5TDEyLjE0NjQgNS42NDY0NUMxMi4zNDE3IDUuNDUxMTggMTIuNjU4MyA1LjQ1MTE4IDEyLjg1MzYgNS42NDY0NUMxMy4wNDg4IDUuODQxNzEgMTMuMDQ4OCA2LjE1ODI5IDEyLjg1MzYgNi4zNTM1NUw4LjM1MzU1IDEwLjg1MzZDOC4xNTgyOSAxMS4wNDg4IDcuODQxNzEgMTEuMDQ4OCA3LjY0NjQ1IDEwLjg1MzZMMy4xNDY0NSA2LjM1MzU1QzIuOTUxMTggNi4xNTgyOSAyLjk1MTE4IDUuODQxNzEgMy4xNDY0NSA1LjY0NjQ1WlwiLCBmaWxsOiBcImN1cnJlbnRDb2xvclwiIH0pKSk7XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAndnVlJztcbmltcG9ydCB7IHJlcGxhY2VhYmxlIH0gZnJvbSAnLi9yZXBsYWNlYWJsZSc7XG5leHBvcnQgZGVmYXVsdCByZXBsYWNlYWJsZSgnY2xlYXInLCBoKFwic3ZnXCIsIHsgdmlld0JveDogXCIwIDAgMTYgMTZcIiwgdmVyc2lvbjogXCIxLjFcIiwgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB9LFxuICAgIGgoXCJnXCIsIHsgc3Ryb2tlOiBcIm5vbmVcIiwgXCJzdHJva2Utd2lkdGhcIjogXCIxXCIsIGZpbGw6IFwibm9uZVwiLCBcImZpbGwtcnVsZVwiOiBcImV2ZW5vZGRcIiB9LFxuICAgICAgICBoKFwiZ1wiLCB7IGZpbGw6IFwiY3VycmVudENvbG9yXCIsIFwiZmlsbC1ydWxlXCI6IFwibm9uemVyb1wiIH0sXG4gICAgICAgICAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTgsMiBDMTEuMzEzNzA4NSwyIDE0LDQuNjg2MjkxNSAxNCw4IEMxNCwxMS4zMTM3MDg1IDExLjMxMzcwODUsMTQgOCwxNCBDNC42ODYyOTE1LDE0IDIsMTEuMzEzNzA4NSAyLDggQzIsNC42ODYyOTE1IDQuNjg2MjkxNSwyIDgsMiBaIE02LjUzNDMwNTUsNS44Mzg1OTExNiBDNi4zMzk0MzczNiw1LjcwMzU5NTExIDYuMDcwMDEyOTYsNS43MjI4ODAyNiA1Ljg5NjQ0NjYxLDUuODk2NDQ2NjEgTDUuODk2NDQ2NjEsNS44OTY0NDY2MSBMNS44Mzg1OTExNiw1Ljk2NTY5NDUgQzUuNzAzNTk1MTEsNi4xNjA1NjI2NCA1LjcyMjg4MDI2LDYuNDI5OTg3MDQgNS44OTY0NDY2MSw2LjYwMzU1MzM5IEw1Ljg5NjQ0NjYxLDYuNjAzNTUzMzkgTDcuMjkzLDggTDUuODk2NDQ2NjEsOS4zOTY0NDY2MSBMNS44Mzg1OTExNiw5LjQ2NTY5NDUgQzUuNzAzNTk1MTEsOS42NjA1NjI2NCA1LjcyMjg4MDI2LDkuOTI5OTg3MDQgNS44OTY0NDY2MSwxMC4xMDM1NTM0IEw1Ljg5NjQ0NjYxLDEwLjEwMzU1MzQgTDUuOTY1Njk0NSwxMC4xNjE0MDg4IEM2LjE2MDU2MjY0LDEwLjI5NjQwNDkgNi40Mjk5ODcwNCwxMC4yNzcxMTk3IDYuNjAzNTUzMzksMTAuMTAzNTUzNCBMNi42MDM1NTMzOSwxMC4xMDM1NTM0IEw4LDguNzA3IEw5LjM5NjQ0NjYxLDEwLjEwMzU1MzQgTDkuNDY1Njk0NSwxMC4xNjE0MDg4IEM5LjY2MDU2MjY0LDEwLjI5NjQwNDkgOS45Mjk5ODcwNCwxMC4yNzcxMTk3IDEwLjEwMzU1MzQsMTAuMTAzNTUzNCBMMTAuMTAzNTUzNCwxMC4xMDM1NTM0IEwxMC4xNjE0MDg4LDEwLjAzNDMwNTUgQzEwLjI5NjQwNDksOS44Mzk0MzczNiAxMC4yNzcxMTk3LDkuNTcwMDEyOTYgMTAuMTAzNTUzNCw5LjM5NjQ0NjYxIEwxMC4xMDM1NTM0LDkuMzk2NDQ2NjEgTDguNzA3LDggTDEwLjEwMzU1MzQsNi42MDM1NTMzOSBMMTAuMTYxNDA4OCw2LjUzNDMwNTUgQzEwLjI5NjQwNDksNi4zMzk0MzczNiAxMC4yNzcxMTk3LDYuMDcwMDEyOTYgMTAuMTAzNTUzNCw1Ljg5NjQ0NjYxIEwxMC4xMDM1NTM0LDUuODk2NDQ2NjEgTDEwLjAzNDMwNTUsNS44Mzg1OTExNiBDOS44Mzk0MzczNiw1LjcwMzU5NTExIDkuNTcwMDEyOTYsNS43MjI4ODAyNiA5LjM5NjQ0NjYxLDUuODk2NDQ2NjEgTDkuMzk2NDQ2NjEsNS44OTY0NDY2MSBMOCw3LjI5MyBMNi42MDM1NTMzOSw1Ljg5NjQ0NjYxIFpcIiB9KSkpKSk7XG4iLCJpbXBvcnQgeyBoIH0gZnJvbSAndnVlJztcbmltcG9ydCB7IHJlcGxhY2VhYmxlIH0gZnJvbSAnLi9yZXBsYWNlYWJsZSc7XG5leHBvcnQgZGVmYXVsdCByZXBsYWNlYWJsZSgnY2xvc2UnLCBoKFwic3ZnXCIsIHsgdmlld0JveDogXCIwIDAgMTIgMTJcIiwgdmVyc2lvbjogXCIxLjFcIiwgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJhcmlhLWhpZGRlblwiOiB0cnVlIH0sXG4gICAgaChcImdcIiwgeyBzdHJva2U6IFwibm9uZVwiLCBcInN0cm9rZS13aWR0aFwiOiBcIjFcIiwgZmlsbDogXCJub25lXCIsIFwiZmlsbC1ydWxlXCI6IFwiZXZlbm9kZFwiIH0sXG4gICAgICAgIGgoXCJnXCIsIHsgZmlsbDogXCJjdXJyZW50Q29sb3JcIiwgXCJmaWxsLXJ1bGVcIjogXCJub256ZXJvXCIgfSxcbiAgICAgICAgICAgIGgoXCJwYXRoXCIsIHsgZDogXCJNMi4wODg1OTExNiwyLjIxNTY5NDUgTDIuMTQ2NDQ2NjEsMi4xNDY0NDY2MSBDMi4zMjAwMTI5NiwxLjk3Mjg4MDI2IDIuNTg5NDM3MzYsMS45NTM1OTUxMSAyLjc4NDMwNTUsMi4wODg1OTExNiBMMi44NTM1NTMzOSwyLjE0NjQ0NjYxIEw2LDUuMjkzIEw5LjE0NjQ0NjYxLDIuMTQ2NDQ2NjEgQzkuMzQxNzA4NzYsMS45NTExODQ0NiA5LjY1ODI5MTI0LDEuOTUxMTg0NDYgOS44NTM1NTMzOSwyLjE0NjQ0NjYxIEMxMC4wNDg4MTU1LDIuMzQxNzA4NzYgMTAuMDQ4ODE1NSwyLjY1ODI5MTI0IDkuODUzNTUzMzksMi44NTM1NTMzOSBMNi43MDcsNiBMOS44NTM1NTMzOSw5LjE0NjQ0NjYxIEMxMC4wMjcxMTk3LDkuMzIwMDEyOTYgMTAuMDQ2NDA0OSw5LjU4OTQzNzM2IDkuOTExNDA4ODQsOS43ODQzMDU1IEw5Ljg1MzU1MzM5LDkuODUzNTUzMzkgQzkuNjc5OTg3MDQsMTAuMDI3MTE5NyA5LjQxMDU2MjY0LDEwLjA0NjQwNDkgOS4yMTU2OTQ1LDkuOTExNDA4ODQgTDkuMTQ2NDQ2NjEsOS44NTM1NTMzOSBMNiw2LjcwNyBMMi44NTM1NTMzOSw5Ljg1MzU1MzM5IEMyLjY1ODI5MTI0LDEwLjA0ODgxNTUgMi4zNDE3MDg3NiwxMC4wNDg4MTU1IDIuMTQ2NDQ2NjEsOS44NTM1NTMzOSBDMS45NTExODQ0Niw5LjY1ODI5MTI0IDEuOTUxMTg0NDYsOS4zNDE3MDg3NiAyLjE0NjQ0NjYxLDkuMTQ2NDQ2NjEgTDUuMjkzLDYgTDIuMTQ2NDQ2NjEsMi44NTM1NTMzOSBDMS45NzI4ODAyNiwyLjY3OTk4NzA0IDEuOTUzNTk1MTEsMi40MTA1NjI2NCAyLjA4ODU5MTE2LDIuMjE1Njk0NSBMMi4xNDY0NDY2MSwyLjE0NjQ0NjYxIEwyLjA4ODU5MTE2LDIuMjE1Njk0NSBaXCIgfSkpKSkpO1xuIiwiaW1wb3J0IHsgaCwgZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJztcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogJ0VtcHR5JyxcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoaChcInN2Z1wiLCB7IHZpZXdCb3g6IFwiMCAwIDI4IDI4XCIsIGZpbGw6IFwibm9uZVwiLCB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIH0sXG4gICAgICAgICAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTI2IDcuNUMyNiAxMS4wODk5IDIzLjA4OTkgMTQgMTkuNSAxNEMxNS45MTAxIDE0IDEzIDExLjA4OTkgMTMgNy41QzEzIDMuOTEwMTUgMTUuOTEwMSAxIDE5LjUgMUMyMy4wODk5IDEgMjYgMy45MTAxNSAyNiA3LjVaTTE2Ljg1MzYgNC4xNDY0NUMxNi42NTgzIDMuOTUxMTggMTYuMzQxNyAzLjk1MTE4IDE2LjE0NjQgNC4xNDY0NUMxNS45NTEyIDQuMzQxNzEgMTUuOTUxMiA0LjY1ODI5IDE2LjE0NjQgNC44NTM1NUwxOC43OTI5IDcuNUwxNi4xNDY0IDEwLjE0NjRDMTUuOTUxMiAxMC4zNDE3IDE1Ljk1MTIgMTAuNjU4MyAxNi4xNDY0IDEwLjg1MzZDMTYuMzQxNyAxMS4wNDg4IDE2LjY1ODMgMTEuMDQ4OCAxNi44NTM2IDEwLjg1MzZMMTkuNSA4LjIwNzExTDIyLjE0NjQgMTAuODUzNkMyMi4zNDE3IDExLjA0ODggMjIuNjU4MyAxMS4wNDg4IDIyLjg1MzYgMTAuODUzNkMyMy4wNDg4IDEwLjY1ODMgMjMuMDQ4OCAxMC4zNDE3IDIyLjg1MzYgMTAuMTQ2NEwyMC4yMDcxIDcuNUwyMi44NTM2IDQuODUzNTVDMjMuMDQ4OCA0LjY1ODI5IDIzLjA0ODggNC4zNDE3MSAyMi44NTM2IDQuMTQ2NDVDMjIuNjU4MyAzLjk1MTE4IDIyLjM0MTcgMy45NTExOCAyMi4xNDY0IDQuMTQ2NDVMMTkuNSA2Ljc5Mjg5TDE2Ljg1MzYgNC4xNDY0NVpcIiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9KSxcbiAgICAgICAgICAgIGgoXCJwYXRoXCIsIHsgZDogXCJNMjUgMjIuNzVWMTIuNTk5MUMyNC41NTcyIDEzLjA3NjUgMjQuMDUzIDEzLjQ5NjEgMjMuNSAxMy44NDU0VjE2SDE3LjVMMTcuMzk4MiAxNi4wMDY4QzE3LjAzMjIgMTYuMDU2NSAxNi43NSAxNi4zNzAzIDE2Ljc1IDE2Ljc1QzE2Ljc1IDE4LjI2ODggMTUuNTE4OCAxOS41IDE0IDE5LjVDMTIuNDgxMiAxOS41IDExLjI1IDE4LjI2ODggMTEuMjUgMTYuNzVMMTEuMjQzMiAxNi42NDgyQzExLjE5MzUgMTYuMjgyMiAxMC44Nzk3IDE2IDEwLjUgMTZINC41VjcuMjVDNC41IDYuMjgzNSA1LjI4MzUgNS41IDYuMjUgNS41SDEyLjI2OTZDMTIuNDE0NiA0Ljk3NDYzIDEyLjYxNTMgNC40NzIzNyAxMi44NjUgNEg2LjI1QzQuNDU1MDcgNCAzIDUuNDU1MDcgMyA3LjI1VjIyLjc1QzMgMjQuNTQ0OSA0LjQ1NTA3IDI2IDYuMjUgMjZIMjEuNzVDMjMuNTQ0OSAyNiAyNSAyNC41NDQ5IDI1IDIyLjc1Wk00LjUgMjIuNzVWMTcuNUg5LjgxNTk3TDkuODU3NTEgMTcuNzA0MUMxMC4yOTA1IDE5LjU5MTkgMTEuOTgwOCAyMSAxNCAyMUwxNC4yMTUgMjAuOTk0N0MxNi4yMDk1IDIwLjg5NTMgMTcuODQyIDE5LjQyMDkgMTguMTg0IDE3LjVIMjMuNVYyMi43NUMyMy41IDIzLjcxNjUgMjIuNzE2NSAyNC41IDIxLjc1IDI0LjVINi4yNUM1LjI4MzUgMjQuNSA0LjUgMjMuNzE2NSA0LjUgMjIuNzVaXCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSkpKTtcbiAgICB9XG59KTtcbiIsImltcG9ydCB7IGgsIGRlZmluZUNvbXBvbmVudCwgaW5qZWN0IH0gZnJvbSAndnVlJztcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gJy4uLy4uLy4uL191dGlscyc7XG5pbXBvcnQgeyBpbnRlcm5hbFNlbGVjdGlvbk1lbnVJbmplY3Rpb25LZXkgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6ICdOQmFzZVNlbGVjdEdyb3VwSGVhZGVyJyxcbiAgICBwcm9wczoge1xuICAgICAgICBjbHNQcmVmaXg6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHRtTm9kZToge1xuICAgICAgICAgICAgdHlwZTogT2JqZWN0LFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0dXAoKSB7XG4gICAgICAgIGNvbnN0IHsgcmVuZGVyTGFiZWxSZWYsIHJlbmRlck9wdGlvblJlZiwgbGFiZWxGaWVsZFJlZiwgbm9kZVByb3BzUmVmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICB9ID0gaW5qZWN0KGludGVybmFsU2VsZWN0aW9uTWVudUluamVjdGlvbktleSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYWJlbEZpZWxkOiBsYWJlbEZpZWxkUmVmLFxuICAgICAgICAgICAgbm9kZVByb3BzOiBub2RlUHJvcHNSZWYsXG4gICAgICAgICAgICByZW5kZXJMYWJlbDogcmVuZGVyTGFiZWxSZWYsXG4gICAgICAgICAgICByZW5kZXJPcHRpb246IHJlbmRlck9wdGlvblJlZlxuICAgICAgICB9O1xuICAgIH0sXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGNsc1ByZWZpeCwgcmVuZGVyTGFiZWwsIHJlbmRlck9wdGlvbiwgbm9kZVByb3BzLCB0bU5vZGU6IHsgcmF3Tm9kZSB9IH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBhdHRycyA9IG5vZGVQcm9wcyA9PT0gbnVsbCB8fCBub2RlUHJvcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5vZGVQcm9wcyhyYXdOb2RlKTtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSByZW5kZXJMYWJlbFxuICAgICAgICAgICAgPyByZW5kZXJMYWJlbChyYXdOb2RlLCBmYWxzZSlcbiAgICAgICAgICAgIDogcmVuZGVyKHJhd05vZGVbdGhpcy5sYWJlbEZpZWxkXSwgcmF3Tm9kZSwgZmFsc2UpO1xuICAgICAgICBjb25zdCBub2RlID0gKGgoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7fSwgYXR0cnMsIHsgY2xhc3M6IFtgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0LWdyb3VwLWhlYWRlcmAsIGF0dHJzID09PSBudWxsIHx8IGF0dHJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhdHRycy5jbGFzc10gfSksIGNoaWxkcmVuKSk7XG4gICAgICAgIHJldHVybiByYXdOb2RlLnJlbmRlclxuICAgICAgICAgICAgPyByYXdOb2RlLnJlbmRlcih7IG5vZGUsIG9wdGlvbjogcmF3Tm9kZSB9KVxuICAgICAgICAgICAgOiByZW5kZXJPcHRpb25cbiAgICAgICAgICAgICAgICA/IHJlbmRlck9wdGlvbih7IG5vZGUsIG9wdGlvbjogcmF3Tm9kZSwgc2VsZWN0ZWQ6IGZhbHNlIH0pXG4gICAgICAgICAgICAgICAgOiBub2RlO1xuICAgIH1cbn0pO1xuIiwiaW1wb3J0IHsgaCwgcmVmLCBvbk1vdW50ZWQsIGNvbXB1dGVkLCBkZWZpbmVDb21wb25lbnQsIHRvUmVmLCBwcm92aWRlLCBuZXh0VGljaywgd2F0Y2gsIG9uQmVmb3JlVW5tb3VudCB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyBjcmVhdGVJbmRleEdldHRlciB9IGZyb20gJ3RyZWVtYXRlJztcbmltcG9ydCB7IFZpcnR1YWxMaXN0IH0gZnJvbSAndnVldWMnO1xuaW1wb3J0IHsgZGVweCwgZ2V0UGFkZGluZywgaGFwcGVuc0luIH0gZnJvbSAnc2VlbWx5JztcbmltcG9ydCB7IE5FbXB0eSB9IGZyb20gJy4uLy4uLy4uL2VtcHR5JztcbmltcG9ydCB7IE5TY3JvbGxiYXIgfSBmcm9tICcuLi8uLi9zY3JvbGxiYXInO1xuaW1wb3J0IHsgcmVzb2x2ZVNsb3QsIHJlc29sdmVXcmFwcGVkU2xvdCwgdXNlT25SZXNpemUgfSBmcm9tICcuLi8uLi8uLi9fdXRpbHMnO1xuaW1wb3J0IHsgY3JlYXRlS2V5IH0gZnJvbSAnLi4vLi4vLi4vX3V0aWxzL2Nzc3InO1xuaW1wb3J0IHsgdXNlVGhlbWVDbGFzcywgdXNlVGhlbWUgfSBmcm9tICcuLi8uLi8uLi9fbWl4aW5zJztcbmltcG9ydCBOSW50ZXJuYWxMb2FkaW5nIGZyb20gJy4uLy4uL2xvYWRpbmcnO1xuaW1wb3J0IE5Gb2N1c0RldGVjdG9yIGZyb20gJy4uLy4uL2ZvY3VzLWRldGVjdG9yJztcbmltcG9ydCB7IGludGVybmFsU2VsZWN0TWVudUxpZ2h0IH0gZnJvbSAnLi4vc3R5bGVzJztcbmltcG9ydCBOU2VsZWN0T3B0aW9uIGZyb20gJy4vU2VsZWN0T3B0aW9uJztcbmltcG9ydCBOU2VsZWN0R3JvdXBIZWFkZXIgZnJvbSAnLi9TZWxlY3RHcm91cEhlYWRlcic7XG5pbXBvcnQgeyBpbnRlcm5hbFNlbGVjdGlvbk1lbnVJbmplY3Rpb25LZXksIGludGVybmFsU2VsZWN0aW9uTWVudUJvZHlJbmplY3Rpb25LZXkgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi9zdHlsZXMvaW5kZXguY3Nzcic7XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6ICdJbnRlcm5hbFNlbGVjdE1lbnUnLFxuICAgIHByb3BzOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHVzZVRoZW1lLnByb3BzKSwgeyBjbHNQcmVmaXg6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sIHNjcm9sbGFibGU6IHtcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICBkZWZhdWx0OiB0cnVlXG4gICAgICAgIH0sIHRyZWVNYXRlOiB7XG4gICAgICAgICAgICB0eXBlOiBPYmplY3QsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICB9LCBtdWx0aXBsZTogQm9vbGVhbiwgc2l6ZToge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgZGVmYXVsdDogJ21lZGl1bSdcbiAgICAgICAgfSwgdmFsdWU6IHtcbiAgICAgICAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlciwgQXJyYXldLFxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbFxuICAgICAgICB9LCBhdXRvUGVuZGluZzogQm9vbGVhbiwgdmlydHVhbFNjcm9sbDoge1xuICAgICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICAgICAgfSwgXG4gICAgICAgIC8vIHNob3cgaXMgdXNlZCB0byB0b2dnbGUgcGVuZGluZyBzdGF0ZSBpbml0aWFsaXphdGlvblxuICAgICAgICBzaG93OiB7XG4gICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgICB9LCBsYWJlbEZpZWxkOiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICBkZWZhdWx0OiAnbGFiZWwnXG4gICAgICAgIH0sIHZhbHVlRmllbGQ6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICd2YWx1ZSdcbiAgICAgICAgfSwgbG9hZGluZzogQm9vbGVhbiwgZm9jdXNhYmxlOiBCb29sZWFuLCByZW5kZXJMYWJlbDogRnVuY3Rpb24sIHJlbmRlck9wdGlvbjogRnVuY3Rpb24sIG5vZGVQcm9wczogRnVuY3Rpb24sIHNob3dDaGVja21hcms6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LCBvbk1vdXNlZG93bjogRnVuY3Rpb24sIG9uU2Nyb2xsOiBGdW5jdGlvbiwgb25Gb2N1czogRnVuY3Rpb24sIG9uQmx1cjogRnVuY3Rpb24sIG9uS2V5dXA6IEZ1bmN0aW9uLCBvbktleWRvd246IEZ1bmN0aW9uLCBvblRhYk91dDogRnVuY3Rpb24sIG9uTW91c2VlbnRlcjogRnVuY3Rpb24sIG9uTW91c2VsZWF2ZTogRnVuY3Rpb24sIG9uUmVzaXplOiBGdW5jdGlvbiwgcmVzZXRNZW51T25PcHRpb25zQ2hhbmdlOiB7XG4gICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgICB9LCBpbmxpbmVUaGVtZURpc2FibGVkOiBCb29sZWFuLCBcbiAgICAgICAgLy8gZGVwcmVjYXRlZFxuICAgICAgICBvblRvZ2dsZTogRnVuY3Rpb24gfSksXG4gICAgc2V0dXAocHJvcHMpIHtcbiAgICAgICAgY29uc3QgdGhlbWVSZWYgPSB1c2VUaGVtZSgnSW50ZXJuYWxTZWxlY3RNZW51JywgJy1pbnRlcm5hbC1zZWxlY3QtbWVudScsIHN0eWxlLCBpbnRlcm5hbFNlbGVjdE1lbnVMaWdodCwgcHJvcHMsIHRvUmVmKHByb3BzLCAnY2xzUHJlZml4JykpO1xuICAgICAgICBjb25zdCBzZWxmUmVmID0gcmVmKG51bGwpO1xuICAgICAgICBjb25zdCB2aXJ0dWFsTGlzdFJlZiA9IHJlZihudWxsKTtcbiAgICAgICAgY29uc3Qgc2Nyb2xsYmFyUmVmID0gcmVmKG51bGwpO1xuICAgICAgICBjb25zdCBmbGF0dGVuZWROb2Rlc1JlZiA9IGNvbXB1dGVkKCgpID0+IHByb3BzLnRyZWVNYXRlLmdldEZsYXR0ZW5lZE5vZGVzKCkpO1xuICAgICAgICBjb25zdCBmSW5kZXhHZXR0ZXJSZWYgPSBjb21wdXRlZCgoKSA9PiBjcmVhdGVJbmRleEdldHRlcihmbGF0dGVuZWROb2Rlc1JlZi52YWx1ZSkpO1xuICAgICAgICBjb25zdCBwZW5kaW5nTm9kZVJlZiA9IHJlZihudWxsKTtcbiAgICAgICAgZnVuY3Rpb24gaW5pdFBlbmRpbmdOb2RlKCkge1xuICAgICAgICAgICAgY29uc3QgeyB0cmVlTWF0ZSB9ID0gcHJvcHM7XG4gICAgICAgICAgICBsZXQgZGVmYXVsdFBlbmRpbmdOb2RlID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IHByb3BzO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFBlbmRpbmdOb2RlID0gdHJlZU1hdGUuZ2V0Rmlyc3RBdmFpbGFibGVOb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBlbmRpbmdOb2RlID0gdHJlZU1hdGUuZ2V0Tm9kZSgodmFsdWUgfHwgW10pWyh2YWx1ZSB8fCBbXSkubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBlbmRpbmdOb2RlID0gdHJlZU1hdGUuZ2V0Tm9kZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZGVmYXVsdFBlbmRpbmdOb2RlIHx8IGRlZmF1bHRQZW5kaW5nTm9kZS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UGVuZGluZ05vZGUgPSB0cmVlTWF0ZS5nZXRGaXJzdEF2YWlsYWJsZU5vZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVmYXVsdFBlbmRpbmdOb2RlKSB7XG4gICAgICAgICAgICAgICAgc2V0UGVuZGluZ1RtTm9kZShkZWZhdWx0UGVuZGluZ05vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0UGVuZGluZ1RtTm9kZShudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBjbGVhclBlbmRpbmdOb2RlSWZJbnZhbGlkKCkge1xuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogcGVuZGluZ05vZGUgfSA9IHBlbmRpbmdOb2RlUmVmO1xuICAgICAgICAgICAgaWYgKHBlbmRpbmdOb2RlICYmICFwcm9wcy50cmVlTWF0ZS5nZXROb2RlKHBlbmRpbmdOb2RlLmtleSkpIHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nTm9kZVJlZi52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGluaXRQZW5kaW5nTm9kZVdhdGNoU3RvcEhhbmRsZTtcbiAgICAgICAgd2F0Y2goKCkgPT4gcHJvcHMuc2hvdywgKHNob3cpID0+IHtcbiAgICAgICAgICAgIGlmIChzaG93KSB7XG4gICAgICAgICAgICAgICAgaW5pdFBlbmRpbmdOb2RlV2F0Y2hTdG9wSGFuZGxlID0gd2F0Y2goKCkgPT4gcHJvcHMudHJlZU1hdGUsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BzLnJlc2V0TWVudU9uT3B0aW9uc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BzLmF1dG9QZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFBlbmRpbmdOb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclBlbmRpbmdOb2RlSWZJbnZhbGlkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2b2lkIG5leHRUaWNrKHNjcm9sbFRvUGVuZGluZ05vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJQZW5kaW5nTm9kZUlmSW52YWxpZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpbW1lZGlhdGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluaXRQZW5kaW5nTm9kZVdhdGNoU3RvcEhhbmRsZSA9PT0gbnVsbCB8fCBpbml0UGVuZGluZ05vZGVXYXRjaFN0b3BIYW5kbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGluaXRQZW5kaW5nTm9kZVdhdGNoU3RvcEhhbmRsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBpbW1lZGlhdGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgICAgICAgICBpbml0UGVuZGluZ05vZGVXYXRjaFN0b3BIYW5kbGUgPT09IG51bGwgfHwgaW5pdFBlbmRpbmdOb2RlV2F0Y2hTdG9wSGFuZGxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbml0UGVuZGluZ05vZGVXYXRjaFN0b3BIYW5kbGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGl0ZW1TaXplUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlcHgodGhlbWVSZWYudmFsdWUuc2VsZltjcmVhdGVLZXkoJ29wdGlvbkhlaWdodCcsIHByb3BzLnNpemUpXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYWRkaW5nUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGdldFBhZGRpbmcodGhlbWVSZWYudmFsdWUuc2VsZltjcmVhdGVLZXkoJ3BhZGRpbmcnLCBwcm9wcy5zaXplKV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdmFsdWVTZXRSZWYgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvcHMubXVsdGlwbGUgJiYgQXJyYXkuaXNBcnJheShwcm9wcy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNldChwcm9wcy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNldCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZW1wdHlSZWYgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0bU5vZGVzID0gZmxhdHRlbmVkTm9kZXNSZWYudmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdG1Ob2RlcyAmJiB0bU5vZGVzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIGRvVG9nZ2xlKHRtTm9kZSkge1xuICAgICAgICAgICAgY29uc3QgeyBvblRvZ2dsZSB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAob25Ub2dnbGUpXG4gICAgICAgICAgICAgICAgb25Ub2dnbGUodG1Ob2RlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBkb1Njcm9sbChlKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9uU2Nyb2xsIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGlmIChvblNjcm9sbClcbiAgICAgICAgICAgICAgICBvblNjcm9sbChlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXF1aXJlZCwgc2Nyb2xsZXIgc3luYyBuZWVkIHRvIGJlIHRyaWdnZXJlZCBtYW51YWxseVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVWaXJ0dWFsTGlzdFNjcm9sbChlKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoX2EgPSBzY3JvbGxiYXJSZWYudmFsdWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zeW5jKCk7XG4gICAgICAgICAgICBkb1Njcm9sbChlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVWaXJ0dWFsTGlzdFJlc2l6ZSgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIChfYSA9IHNjcm9sbGJhclJlZi52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN5bmMoKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRQZW5kaW5nVG1Ob2RlKCkge1xuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogcGVuZGluZ1RtTm9kZSB9ID0gcGVuZGluZ05vZGVSZWY7XG4gICAgICAgICAgICBpZiAocGVuZGluZ1RtTm9kZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcGVuZGluZ1RtTm9kZTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZU9wdGlvbk1vdXNlRW50ZXIoZSwgdG1Ob2RlKSB7XG4gICAgICAgICAgICBpZiAodG1Ob2RlLmRpc2FibGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHNldFBlbmRpbmdUbU5vZGUodG1Ob2RlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlT3B0aW9uQ2xpY2soZSwgdG1Ob2RlKSB7XG4gICAgICAgICAgICBpZiAodG1Ob2RlLmRpc2FibGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGRvVG9nZ2xlKHRtTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8ga2V5Ym9hcmQgcmVsYXRlZCBtZXRob2RzXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUtleVVwKGUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmIChoYXBwZW5zSW4oZSwgJ2FjdGlvbicpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIChfYSA9IHByb3BzLm9uS2V5dXApID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHByb3BzLCBlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVLZXlEb3duKGUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmIChoYXBwZW5zSW4oZSwgJ2FjdGlvbicpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIChfYSA9IHByb3BzLm9uS2V5ZG93bikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwocHJvcHMsIGUpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihlKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoX2EgPSBwcm9wcy5vbk1vdXNlZG93bikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwocHJvcHMsIGUpO1xuICAgICAgICAgICAgaWYgKHByb3BzLmZvY3VzYWJsZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IHBlbmRpbmdUbU5vZGUgfSA9IHBlbmRpbmdOb2RlUmVmO1xuICAgICAgICAgICAgaWYgKHBlbmRpbmdUbU5vZGUpIHtcbiAgICAgICAgICAgICAgICBzZXRQZW5kaW5nVG1Ob2RlKHBlbmRpbmdUbU5vZGUuZ2V0TmV4dCh7IGxvb3A6IHRydWUgfSksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHByZXYoKSB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBwZW5kaW5nVG1Ob2RlIH0gPSBwZW5kaW5nTm9kZVJlZjtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nVG1Ob2RlKSB7XG4gICAgICAgICAgICAgICAgc2V0UGVuZGluZ1RtTm9kZShwZW5kaW5nVG1Ob2RlLmdldFByZXYoeyBsb29wOiB0cnVlIH0pLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzZXRQZW5kaW5nVG1Ob2RlKHRtTm9kZSwgZG9TY3JvbGwgPSBmYWxzZSkge1xuICAgICAgICAgICAgcGVuZGluZ05vZGVSZWYudmFsdWUgPSB0bU5vZGU7XG4gICAgICAgICAgICBpZiAoZG9TY3JvbGwpXG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9QZW5kaW5nTm9kZSgpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbFRvUGVuZGluZ05vZGUoKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgY29uc3QgdG1Ob2RlID0gcGVuZGluZ05vZGVSZWYudmFsdWU7XG4gICAgICAgICAgICBpZiAoIXRtTm9kZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBmSW5kZXggPSBmSW5kZXhHZXR0ZXJSZWYudmFsdWUodG1Ob2RlLmtleSk7XG4gICAgICAgICAgICBpZiAoZkluZGV4ID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChwcm9wcy52aXJ0dWFsU2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgKF9hID0gdmlydHVhbExpc3RSZWYudmFsdWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zY3JvbGxUbyh7IGluZGV4OiBmSW5kZXggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAoX2IgPSBzY3JvbGxiYXJSZWYudmFsdWUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5zY3JvbGxUbyh7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBmSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIGVsU2l6ZTogaXRlbVNpemVSZWYudmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVGb2N1c2luKGUpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICBpZiAoKF9hID0gc2VsZlJlZi52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIChfYiA9IHByb3BzLm9uRm9jdXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKHByb3BzLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVGb2N1c291dChlKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgaWYgKCEoKF9hID0gc2VsZlJlZi52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpKSB7XG4gICAgICAgICAgICAgICAgKF9iID0gcHJvcHMub25CbHVyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChwcm9wcywgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHJvdmlkZShpbnRlcm5hbFNlbGVjdGlvbk1lbnVJbmplY3Rpb25LZXksIHtcbiAgICAgICAgICAgIGhhbmRsZU9wdGlvbk1vdXNlRW50ZXIsXG4gICAgICAgICAgICBoYW5kbGVPcHRpb25DbGljayxcbiAgICAgICAgICAgIHZhbHVlU2V0UmVmLFxuICAgICAgICAgICAgcGVuZGluZ1RtTm9kZVJlZjogcGVuZGluZ05vZGVSZWYsXG4gICAgICAgICAgICBub2RlUHJvcHNSZWY6IHRvUmVmKHByb3BzLCAnbm9kZVByb3BzJyksXG4gICAgICAgICAgICBzaG93Q2hlY2ttYXJrUmVmOiB0b1JlZihwcm9wcywgJ3Nob3dDaGVja21hcmsnKSxcbiAgICAgICAgICAgIG11bHRpcGxlUmVmOiB0b1JlZihwcm9wcywgJ211bHRpcGxlJyksXG4gICAgICAgICAgICB2YWx1ZVJlZjogdG9SZWYocHJvcHMsICd2YWx1ZScpLFxuICAgICAgICAgICAgcmVuZGVyTGFiZWxSZWY6IHRvUmVmKHByb3BzLCAncmVuZGVyTGFiZWwnKSxcbiAgICAgICAgICAgIHJlbmRlck9wdGlvblJlZjogdG9SZWYocHJvcHMsICdyZW5kZXJPcHRpb24nKSxcbiAgICAgICAgICAgIGxhYmVsRmllbGRSZWY6IHRvUmVmKHByb3BzLCAnbGFiZWxGaWVsZCcpLFxuICAgICAgICAgICAgdmFsdWVGaWVsZFJlZjogdG9SZWYocHJvcHMsICd2YWx1ZUZpZWxkJylcbiAgICAgICAgfSk7XG4gICAgICAgIHByb3ZpZGUoaW50ZXJuYWxTZWxlY3Rpb25NZW51Qm9keUluamVjdGlvbktleSwgc2VsZlJlZik7XG4gICAgICAgIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBzY3JvbGxiYXJSZWY7XG4gICAgICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICAgICAgdmFsdWUuc3luYygpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY3NzVmFyc1JlZiA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc2l6ZSB9ID0gcHJvcHM7XG4gICAgICAgICAgICBjb25zdCB7IGNvbW1vbjogeyBjdWJpY0JlemllckVhc2VJbk91dCB9LCBzZWxmOiB7IGhlaWdodCwgYm9yZGVyUmFkaXVzLCBjb2xvciwgZ3JvdXBIZWFkZXJUZXh0Q29sb3IsIGFjdGlvbkRpdmlkZXJDb2xvciwgb3B0aW9uVGV4dENvbG9yUHJlc3NlZCwgb3B0aW9uVGV4dENvbG9yLCBvcHRpb25UZXh0Q29sb3JEaXNhYmxlZCwgb3B0aW9uVGV4dENvbG9yQWN0aXZlLCBvcHRpb25PcGFjaXR5RGlzYWJsZWQsIG9wdGlvbkNoZWNrQ29sb3IsIGFjdGlvblRleHRDb2xvciwgb3B0aW9uQ29sb3JQZW5kaW5nLCBvcHRpb25Db2xvckFjdGl2ZSwgbG9hZGluZ0NvbG9yLCBsb2FkaW5nU2l6ZSwgb3B0aW9uQ29sb3JBY3RpdmVQZW5kaW5nLCBbY3JlYXRlS2V5KCdvcHRpb25Gb250U2l6ZScsIHNpemUpXTogZm9udFNpemUsIFtjcmVhdGVLZXkoJ29wdGlvbkhlaWdodCcsIHNpemUpXTogb3B0aW9uSGVpZ2h0LCBbY3JlYXRlS2V5KCdvcHRpb25QYWRkaW5nJywgc2l6ZSldOiBvcHRpb25QYWRkaW5nIH0gfSA9IHRoZW1lUmVmLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAnLS1uLWhlaWdodCc6IGhlaWdodCxcbiAgICAgICAgICAgICAgICAnLS1uLWFjdGlvbi1kaXZpZGVyLWNvbG9yJzogYWN0aW9uRGl2aWRlckNvbG9yLFxuICAgICAgICAgICAgICAgICctLW4tYWN0aW9uLXRleHQtY29sb3InOiBhY3Rpb25UZXh0Q29sb3IsXG4gICAgICAgICAgICAgICAgJy0tbi1iZXppZXInOiBjdWJpY0JlemllckVhc2VJbk91dCxcbiAgICAgICAgICAgICAgICAnLS1uLWJvcmRlci1yYWRpdXMnOiBib3JkZXJSYWRpdXMsXG4gICAgICAgICAgICAgICAgJy0tbi1jb2xvcic6IGNvbG9yLFxuICAgICAgICAgICAgICAgICctLW4tb3B0aW9uLWZvbnQtc2l6ZSc6IGZvbnRTaXplLFxuICAgICAgICAgICAgICAgICctLW4tZ3JvdXAtaGVhZGVyLXRleHQtY29sb3InOiBncm91cEhlYWRlclRleHRDb2xvcixcbiAgICAgICAgICAgICAgICAnLS1uLW9wdGlvbi1jaGVjay1jb2xvcic6IG9wdGlvbkNoZWNrQ29sb3IsXG4gICAgICAgICAgICAgICAgJy0tbi1vcHRpb24tY29sb3ItcGVuZGluZyc6IG9wdGlvbkNvbG9yUGVuZGluZyxcbiAgICAgICAgICAgICAgICAnLS1uLW9wdGlvbi1jb2xvci1hY3RpdmUnOiBvcHRpb25Db2xvckFjdGl2ZSxcbiAgICAgICAgICAgICAgICAnLS1uLW9wdGlvbi1jb2xvci1hY3RpdmUtcGVuZGluZyc6IG9wdGlvbkNvbG9yQWN0aXZlUGVuZGluZyxcbiAgICAgICAgICAgICAgICAnLS1uLW9wdGlvbi1oZWlnaHQnOiBvcHRpb25IZWlnaHQsXG4gICAgICAgICAgICAgICAgJy0tbi1vcHRpb24tb3BhY2l0eS1kaXNhYmxlZCc6IG9wdGlvbk9wYWNpdHlEaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAnLS1uLW9wdGlvbi10ZXh0LWNvbG9yJzogb3B0aW9uVGV4dENvbG9yLFxuICAgICAgICAgICAgICAgICctLW4tb3B0aW9uLXRleHQtY29sb3ItYWN0aXZlJzogb3B0aW9uVGV4dENvbG9yQWN0aXZlLFxuICAgICAgICAgICAgICAgICctLW4tb3B0aW9uLXRleHQtY29sb3ItZGlzYWJsZWQnOiBvcHRpb25UZXh0Q29sb3JEaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAnLS1uLW9wdGlvbi10ZXh0LWNvbG9yLXByZXNzZWQnOiBvcHRpb25UZXh0Q29sb3JQcmVzc2VkLFxuICAgICAgICAgICAgICAgICctLW4tb3B0aW9uLXBhZGRpbmcnOiBvcHRpb25QYWRkaW5nLFxuICAgICAgICAgICAgICAgICctLW4tb3B0aW9uLXBhZGRpbmctbGVmdCc6IGdldFBhZGRpbmcob3B0aW9uUGFkZGluZywgJ2xlZnQnKSxcbiAgICAgICAgICAgICAgICAnLS1uLW9wdGlvbi1wYWRkaW5nLXJpZ2h0JzogZ2V0UGFkZGluZyhvcHRpb25QYWRkaW5nLCAncmlnaHQnKSxcbiAgICAgICAgICAgICAgICAnLS1uLWxvYWRpbmctY29sb3InOiBsb2FkaW5nQ29sb3IsXG4gICAgICAgICAgICAgICAgJy0tbi1sb2FkaW5nLXNpemUnOiBsb2FkaW5nU2l6ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgaW5saW5lVGhlbWVEaXNhYmxlZCB9ID0gcHJvcHM7XG4gICAgICAgIGNvbnN0IHRoZW1lQ2xhc3NIYW5kbGUgPSBpbmxpbmVUaGVtZURpc2FibGVkXG4gICAgICAgICAgICA/IHVzZVRoZW1lQ2xhc3MoJ2ludGVybmFsLXNlbGVjdC1tZW51JywgY29tcHV0ZWQoKCkgPT4gcHJvcHMuc2l6ZVswXSksIGNzc1ZhcnNSZWYsIHByb3BzKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGV4cG9zZWRQcm9wcyA9IHtcbiAgICAgICAgICAgIHNlbGZSZWYsXG4gICAgICAgICAgICBuZXh0LFxuICAgICAgICAgICAgcHJldixcbiAgICAgICAgICAgIGdldFBlbmRpbmdUbU5vZGVcbiAgICAgICAgfTtcbiAgICAgICAgdXNlT25SZXNpemUoc2VsZlJlZiwgcHJvcHMub25SZXNpemUpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7IG1lcmdlZFRoZW1lOiB0aGVtZVJlZiwgdmlydHVhbExpc3RSZWYsXG4gICAgICAgICAgICBzY3JvbGxiYXJSZWYsIGl0ZW1TaXplOiBpdGVtU2l6ZVJlZiwgcGFkZGluZzogcGFkZGluZ1JlZiwgZmxhdHRlbmVkTm9kZXM6IGZsYXR0ZW5lZE5vZGVzUmVmLCBlbXB0eTogZW1wdHlSZWYsIHZpcnR1YWxMaXN0Q29udGFpbmVyKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IHZpcnR1YWxMaXN0UmVmO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsdWUubGlzdEVsUmVmO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZpcnR1YWxMaXN0Q29udGVudCgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB2aXJ0dWFsTGlzdFJlZjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbHVlLml0ZW1zRWxSZWY7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZG9TY3JvbGwsXG4gICAgICAgICAgICBoYW5kbGVGb2N1c2luLFxuICAgICAgICAgICAgaGFuZGxlRm9jdXNvdXQsXG4gICAgICAgICAgICBoYW5kbGVLZXlVcCxcbiAgICAgICAgICAgIGhhbmRsZUtleURvd24sXG4gICAgICAgICAgICBoYW5kbGVNb3VzZURvd24sXG4gICAgICAgICAgICBoYW5kbGVWaXJ0dWFsTGlzdFJlc2l6ZSxcbiAgICAgICAgICAgIGhhbmRsZVZpcnR1YWxMaXN0U2Nyb2xsLCBjc3NWYXJzOiBpbmxpbmVUaGVtZURpc2FibGVkID8gdW5kZWZpbmVkIDogY3NzVmFyc1JlZiwgdGhlbWVDbGFzczogdGhlbWVDbGFzc0hhbmRsZSA9PT0gbnVsbCB8fCB0aGVtZUNsYXNzSGFuZGxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0aGVtZUNsYXNzSGFuZGxlLnRoZW1lQ2xhc3MsIG9uUmVuZGVyOiB0aGVtZUNsYXNzSGFuZGxlID09PSBudWxsIHx8IHRoZW1lQ2xhc3NIYW5kbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRoZW1lQ2xhc3NIYW5kbGUub25SZW5kZXIgfSwgZXhwb3NlZFByb3BzKTtcbiAgICB9LFxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyAkc2xvdHMsIHZpcnR1YWxTY3JvbGwsIGNsc1ByZWZpeCwgbWVyZ2VkVGhlbWUsIHRoZW1lQ2xhc3MsIG9uUmVuZGVyIH0gPSB0aGlzO1xuICAgICAgICBvblJlbmRlciA9PT0gbnVsbCB8fCBvblJlbmRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25SZW5kZXIoKTtcbiAgICAgICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgcmVmOiBcInNlbGZSZWZcIiwgdGFiaW5kZXg6IHRoaXMuZm9jdXNhYmxlID8gMCA6IC0xLCBjbGFzczogW1xuICAgICAgICAgICAgICAgIGAke2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3QtbWVudWAsXG4gICAgICAgICAgICAgICAgdGhlbWVDbGFzcyxcbiAgICAgICAgICAgICAgICB0aGlzLm11bHRpcGxlICYmIGAke2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3QtbWVudS0tbXVsdGlwbGVgXG4gICAgICAgICAgICBdLCBzdHlsZTogdGhpcy5jc3NWYXJzLCBvbkZvY3VzaW46IHRoaXMuaGFuZGxlRm9jdXNpbiwgb25Gb2N1c291dDogdGhpcy5oYW5kbGVGb2N1c291dCwgb25LZXl1cDogdGhpcy5oYW5kbGVLZXlVcCwgb25LZXlkb3duOiB0aGlzLmhhbmRsZUtleURvd24sIG9uTW91c2Vkb3duOiB0aGlzLmhhbmRsZU1vdXNlRG93biwgb25Nb3VzZWVudGVyOiB0aGlzLm9uTW91c2VlbnRlciwgb25Nb3VzZWxlYXZlOiB0aGlzLm9uTW91c2VsZWF2ZSB9LFxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID8gKGgoXCJkaXZcIiwgeyBjbGFzczogYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdC1tZW51X19sb2FkaW5nYCB9LFxuICAgICAgICAgICAgICAgIGgoTkludGVybmFsTG9hZGluZywgeyBjbHNQcmVmaXg6IGNsc1ByZWZpeCwgc3Ryb2tlV2lkdGg6IDIwIH0pKSkgOiAhdGhpcy5lbXB0eSA/IChoKE5TY3JvbGxiYXIsIHsgcmVmOiBcInNjcm9sbGJhclJlZlwiLCB0aGVtZTogbWVyZ2VkVGhlbWUucGVlcnMuU2Nyb2xsYmFyLCB0aGVtZU92ZXJyaWRlczogbWVyZ2VkVGhlbWUucGVlck92ZXJyaWRlcy5TY3JvbGxiYXIsIHNjcm9sbGFibGU6IHRoaXMuc2Nyb2xsYWJsZSwgY29udGFpbmVyOiB2aXJ0dWFsU2Nyb2xsID8gdGhpcy52aXJ0dWFsTGlzdENvbnRhaW5lciA6IHVuZGVmaW5lZCwgY29udGVudDogdmlydHVhbFNjcm9sbCA/IHRoaXMudmlydHVhbExpc3RDb250ZW50IDogdW5kZWZpbmVkLCBvblNjcm9sbDogdmlydHVhbFNjcm9sbCA/IHVuZGVmaW5lZCA6IHRoaXMuZG9TY3JvbGwgfSwge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpcnR1YWxTY3JvbGwgPyAoaChWaXJ0dWFsTGlzdCwgeyByZWY6IFwidmlydHVhbExpc3RSZWZcIiwgY2xhc3M6IGAke2Nsc1ByZWZpeH0tdmlydHVhbC1saXN0YCwgaXRlbXM6IHRoaXMuZmxhdHRlbmVkTm9kZXMsIGl0ZW1TaXplOiB0aGlzLml0ZW1TaXplLCBzaG93U2Nyb2xsYmFyOiBmYWxzZSwgcGFkZGluZ1RvcDogdGhpcy5wYWRkaW5nLnRvcCwgcGFkZGluZ0JvdHRvbTogdGhpcy5wYWRkaW5nLmJvdHRvbSwgb25SZXNpemU6IHRoaXMuaGFuZGxlVmlydHVhbExpc3RSZXNpemUsIG9uU2Nyb2xsOiB0aGlzLmhhbmRsZVZpcnR1YWxMaXN0U2Nyb2xsLCBpdGVtUmVzaXphYmxlOiB0cnVlIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICh7IGl0ZW06IHRtTm9kZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRtTm9kZS5pc0dyb3VwID8gKGgoTlNlbGVjdEdyb3VwSGVhZGVyLCB7IGtleTogdG1Ob2RlLmtleSwgY2xzUHJlZml4OiBjbHNQcmVmaXgsIHRtTm9kZTogdG1Ob2RlIH0pKSA6IHRtTm9kZS5pZ25vcmVkID8gbnVsbCA6IChoKE5TZWxlY3RPcHRpb24sIHsgY2xzUHJlZml4OiBjbHNQcmVmaXgsIGtleTogdG1Ob2RlLmtleSwgdG1Ob2RlOiB0bU5vZGUgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSkgOiAoaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0LW1lbnUtb3B0aW9uLXdyYXBwZXJgLCBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6IHRoaXMucGFkZGluZy50b3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogdGhpcy5wYWRkaW5nLmJvdHRvbVxuICAgICAgICAgICAgICAgICAgICAgICAgfSB9LCB0aGlzLmZsYXR0ZW5lZE5vZGVzLm1hcCgodG1Ob2RlKSA9PiB0bU5vZGUuaXNHcm91cCA/IChoKE5TZWxlY3RHcm91cEhlYWRlciwgeyBrZXk6IHRtTm9kZS5rZXksIGNsc1ByZWZpeDogY2xzUHJlZml4LCB0bU5vZGU6IHRtTm9kZSB9KSkgOiAoaChOU2VsZWN0T3B0aW9uLCB7IGNsc1ByZWZpeDogY2xzUHJlZml4LCBrZXk6IHRtTm9kZS5rZXksIHRtTm9kZTogdG1Ob2RlIH0pKSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSkgOiAoaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0LW1lbnVfX2VtcHR5YCwgXCJkYXRhLWVtcHR5XCI6IHRydWUgfSwgcmVzb2x2ZVNsb3QoJHNsb3RzLmVtcHR5LCAoKSA9PiBbXG4gICAgICAgICAgICAgICAgaChORW1wdHksIHsgdGhlbWU6IG1lcmdlZFRoZW1lLnBlZXJzLkVtcHR5LCB0aGVtZU92ZXJyaWRlczogbWVyZ2VkVGhlbWUucGVlck92ZXJyaWRlcy5FbXB0eSB9KVxuICAgICAgICAgICAgXSkpKSxcbiAgICAgICAgICAgIHJlc29sdmVXcmFwcGVkU2xvdCgkc2xvdHMuYWN0aW9uLCAoY2hpbGRyZW4pID0+IGNoaWxkcmVuICYmIFtcbiAgICAgICAgICAgICAgICBoKFwiZGl2XCIsIHsgY2xhc3M6IGAke2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3QtbWVudV9fYWN0aW9uYCwgXCJkYXRhLWFjdGlvblwiOiB0cnVlLCBrZXk6IFwiYWN0aW9uXCIgfSwgY2hpbGRyZW4pLFxuICAgICAgICAgICAgICAgIGgoTkZvY3VzRGV0ZWN0b3IsIHsgb25Gb2N1czogdGhpcy5vblRhYk91dCwga2V5OiBcImZvY3VzLWRldGVjdG9yXCIgfSlcbiAgICAgICAgICAgIF0pKSk7XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgeyBoLCBpbmplY3QsIGRlZmluZUNvbXBvbmVudCwgVHJhbnNpdGlvbiB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAndm9va3MnO1xuaW1wb3J0IHsgcmVuZGVyLCBtZXJnZUV2ZW50SGFuZGxlcnMgfSBmcm9tICcuLi8uLi8uLi9fdXRpbHMnO1xuaW1wb3J0IHsgQ2hlY2ttYXJrSWNvbiB9IGZyb20gJy4uLy4uL2ljb25zJztcbmltcG9ydCB7IE5CYXNlSWNvbiB9IGZyb20gJy4uLy4uL2ljb24nO1xuaW1wb3J0IHsgaW50ZXJuYWxTZWxlY3Rpb25NZW51SW5qZWN0aW9uS2V5IH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuZnVuY3Rpb24gcmVuZGVyQ2hlY2tNYXJrKHNob3csIGNsc1ByZWZpeCkge1xuICAgIHJldHVybiAoaChUcmFuc2l0aW9uLCB7IG5hbWU6IFwiZmFkZS1pbi1zY2FsZS11cC10cmFuc2l0aW9uXCIgfSwge1xuICAgICAgICBkZWZhdWx0OiAoKSA9PiBzaG93ID8gKGgoTkJhc2VJY29uLCB7IGNsc1ByZWZpeDogY2xzUHJlZml4LCBjbGFzczogYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdC1vcHRpb25fX2NoZWNrYCB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBoKENoZWNrbWFya0ljb24pXG4gICAgICAgIH0pKSA6IG51bGxcbiAgICB9KSk7XG59XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6ICdOQmFzZVNlbGVjdE9wdGlvbicsXG4gICAgcHJvcHM6IHtcbiAgICAgICAgY2xzUHJlZml4OiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB0bU5vZGU6IHtcbiAgICAgICAgICAgIHR5cGU6IE9iamVjdCxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNldHVwKHByb3BzKSB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWVSZWYsIHBlbmRpbmdUbU5vZGVSZWYsIG11bHRpcGxlUmVmLCB2YWx1ZVNldFJlZiwgcmVuZGVyTGFiZWxSZWYsIHJlbmRlck9wdGlvblJlZiwgbGFiZWxGaWVsZFJlZiwgdmFsdWVGaWVsZFJlZiwgc2hvd0NoZWNrbWFya1JlZiwgbm9kZVByb3BzUmVmLCBoYW5kbGVPcHRpb25DbGljaywgaGFuZGxlT3B0aW9uTW91c2VFbnRlclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgfSA9IGluamVjdChpbnRlcm5hbFNlbGVjdGlvbk1lbnVJbmplY3Rpb25LZXkpO1xuICAgICAgICBjb25zdCBpc1BlbmRpbmdSZWYgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IHBlbmRpbmdUbU5vZGUgfSA9IHBlbmRpbmdUbU5vZGVSZWY7XG4gICAgICAgICAgICBpZiAoIXBlbmRpbmdUbU5vZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHByb3BzLnRtTm9kZS5rZXkgPT09IHBlbmRpbmdUbU5vZGUua2V5O1xuICAgICAgICB9KTtcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xuICAgICAgICAgICAgY29uc3QgeyB0bU5vZGUgfSA9IHByb3BzO1xuICAgICAgICAgICAgaWYgKHRtTm9kZS5kaXNhYmxlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBoYW5kbGVPcHRpb25DbGljayhlLCB0bU5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRW50ZXIoZSkge1xuICAgICAgICAgICAgY29uc3QgeyB0bU5vZGUgfSA9IHByb3BzO1xuICAgICAgICAgICAgaWYgKHRtTm9kZS5kaXNhYmxlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBoYW5kbGVPcHRpb25Nb3VzZUVudGVyKGUsIHRtTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdG1Ob2RlIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IGlzUGVuZGluZyB9ID0gaXNQZW5kaW5nUmVmO1xuICAgICAgICAgICAgaWYgKHRtTm9kZS5kaXNhYmxlZCB8fCBpc1BlbmRpbmcpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaGFuZGxlT3B0aW9uTW91c2VFbnRlcihlLCB0bU5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtdWx0aXBsZTogbXVsdGlwbGVSZWYsXG4gICAgICAgICAgICBpc0dyb3VwZWQ6IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdG1Ob2RlIH0gPSBwcm9wcztcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhcmVudCB9ID0gdG1Ob2RlO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQgJiYgcGFyZW50LnJhd05vZGUudHlwZSA9PT0gJ2dyb3VwJztcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc2hvd0NoZWNrbWFyazogc2hvd0NoZWNrbWFya1JlZixcbiAgICAgICAgICAgIG5vZGVQcm9wczogbm9kZVByb3BzUmVmLFxuICAgICAgICAgICAgaXNQZW5kaW5nOiBpc1BlbmRpbmdSZWYsXG4gICAgICAgICAgICBpc1NlbGVjdGVkOiB1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB2YWx1ZVJlZjtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBtdWx0aXBsZSB9ID0gbXVsdGlwbGVSZWY7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBwcm9wcy50bU5vZGUucmF3Tm9kZVt2YWx1ZUZpZWxkUmVmLnZhbHVlXTtcbiAgICAgICAgICAgICAgICBpZiAobXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogdmFsdWVTZXQgfSA9IHZhbHVlU2V0UmVmO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVTZXQuaGFzKG9wdGlvblZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gb3B0aW9uVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBsYWJlbEZpZWxkOiBsYWJlbEZpZWxkUmVmLFxuICAgICAgICAgICAgcmVuZGVyTGFiZWw6IHJlbmRlckxhYmVsUmVmLFxuICAgICAgICAgICAgcmVuZGVyT3B0aW9uOiByZW5kZXJPcHRpb25SZWYsXG4gICAgICAgICAgICBoYW5kbGVNb3VzZU1vdmUsXG4gICAgICAgICAgICBoYW5kbGVNb3VzZUVudGVyLFxuICAgICAgICAgICAgaGFuZGxlQ2xpY2tcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBjbHNQcmVmaXgsIHRtTm9kZTogeyByYXdOb2RlIH0sIGlzU2VsZWN0ZWQsIGlzUGVuZGluZywgaXNHcm91cGVkLCBzaG93Q2hlY2ttYXJrLCBub2RlUHJvcHMsIHJlbmRlck9wdGlvbiwgcmVuZGVyTGFiZWwsIGhhbmRsZUNsaWNrLCBoYW5kbGVNb3VzZUVudGVyLCBoYW5kbGVNb3VzZU1vdmUgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGNoZWNrbWFyayA9IHJlbmRlckNoZWNrTWFyayhpc1NlbGVjdGVkLCBjbHNQcmVmaXgpO1xuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHJlbmRlckxhYmVsXG4gICAgICAgICAgICA/IFtyZW5kZXJMYWJlbChyYXdOb2RlLCBpc1NlbGVjdGVkKSwgc2hvd0NoZWNrbWFyayAmJiBjaGVja21hcmtdXG4gICAgICAgICAgICA6IFtcbiAgICAgICAgICAgICAgICByZW5kZXIocmF3Tm9kZVt0aGlzLmxhYmVsRmllbGRdLCByYXdOb2RlLCBpc1NlbGVjdGVkKSxcbiAgICAgICAgICAgICAgICBzaG93Q2hlY2ttYXJrICYmIGNoZWNrbWFya1xuICAgICAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYXR0cnMgPSBub2RlUHJvcHMgPT09IG51bGwgfHwgbm9kZVByb3BzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBub2RlUHJvcHMocmF3Tm9kZSk7XG4gICAgICAgIGNvbnN0IG5vZGUgPSAoaChcImRpdlwiLCBPYmplY3QuYXNzaWduKHt9LCBhdHRycywgeyBjbGFzczogW1xuICAgICAgICAgICAgICAgIGAke2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3Qtb3B0aW9uYCxcbiAgICAgICAgICAgICAgICByYXdOb2RlLmNsYXNzLFxuICAgICAgICAgICAgICAgIGF0dHJzID09PSBudWxsIHx8IGF0dHJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhdHRycy5jbGFzcyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFtgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0LW9wdGlvbi0tZGlzYWJsZWRgXTogcmF3Tm9kZS5kaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgW2Ake2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3Qtb3B0aW9uLS1zZWxlY3RlZGBdOiBpc1NlbGVjdGVkLFxuICAgICAgICAgICAgICAgICAgICBbYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdC1vcHRpb24tLWdyb3VwZWRgXTogaXNHcm91cGVkLFxuICAgICAgICAgICAgICAgICAgICBbYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdC1vcHRpb24tLXBlbmRpbmdgXTogaXNQZW5kaW5nLFxuICAgICAgICAgICAgICAgICAgICBbYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdC1vcHRpb24tLXNob3ctY2hlY2ttYXJrYF06IHNob3dDaGVja21hcmtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLCBzdHlsZTogWyhhdHRycyA9PT0gbnVsbCB8fCBhdHRycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXR0cnMuc3R5bGUpIHx8ICcnLCByYXdOb2RlLnN0eWxlIHx8ICcnXSwgb25DbGljazogbWVyZ2VFdmVudEhhbmRsZXJzKFtoYW5kbGVDbGljaywgYXR0cnMgPT09IG51bGwgfHwgYXR0cnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF0dHJzLm9uQ2xpY2tdKSwgb25Nb3VzZWVudGVyOiBtZXJnZUV2ZW50SGFuZGxlcnMoW1xuICAgICAgICAgICAgICAgIGhhbmRsZU1vdXNlRW50ZXIsXG4gICAgICAgICAgICAgICAgYXR0cnMgPT09IG51bGwgfHwgYXR0cnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF0dHJzLm9uTW91c2VlbnRlclxuICAgICAgICAgICAgXSksIG9uTW91c2Vtb3ZlOiBtZXJnZUV2ZW50SGFuZGxlcnMoW2hhbmRsZU1vdXNlTW92ZSwgYXR0cnMgPT09IG51bGwgfHwgYXR0cnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF0dHJzLm9uTW91c2Vtb3ZlXSkgfSksXG4gICAgICAgICAgICBoKFwiZGl2XCIsIHsgY2xhc3M6IGAke2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3Qtb3B0aW9uX19jb250ZW50YCB9LCBjaGlsZHJlbikpKTtcbiAgICAgICAgcmV0dXJuIHJhd05vZGUucmVuZGVyXG4gICAgICAgICAgICA/IHJhd05vZGUucmVuZGVyKHsgbm9kZSwgb3B0aW9uOiByYXdOb2RlLCBzZWxlY3RlZDogaXNTZWxlY3RlZCB9KVxuICAgICAgICAgICAgOiByZW5kZXJPcHRpb25cbiAgICAgICAgICAgICAgICA/IHJlbmRlck9wdGlvbih7IG5vZGUsIG9wdGlvbjogcmF3Tm9kZSwgc2VsZWN0ZWQ6IGlzU2VsZWN0ZWQgfSlcbiAgICAgICAgICAgICAgICA6IG5vZGU7XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgeyBjLCBjQiwgY0UsIGNNLCBjTm90TSB9IGZyb20gJy4uLy4uLy4uLy4uL191dGlscy9jc3NyJztcbmltcG9ydCB7IGZhZGVJblNjYWxlVXBUcmFuc2l0aW9uIH0gZnJvbSAnLi4vLi4vLi4vLi4vX3N0eWxlcy90cmFuc2l0aW9ucy9mYWRlLWluLXNjYWxlLXVwLmNzc3InO1xuLy8gLS1uLWxvYWRpbmctY29sb3Jcbi8vIC0tbi1sb2FkaW5nLXNpemVcbi8vIC0tbi1vcHRpb24tcGFkZGluZy1yaWdodFxuZXhwb3J0IGRlZmF1bHQgY0IoJ2Jhc2Utc2VsZWN0LW1lbnUnLCBgXG4gbGluZS1oZWlnaHQ6IDEuNTtcbiBvdXRsaW5lOiBub25lO1xuIHotaW5kZXg6IDA7XG4gcG9zaXRpb246IHJlbGF0aXZlO1xuIGJvcmRlci1yYWRpdXM6IHZhcigtLW4tYm9yZGVyLXJhZGl1cyk7XG4gdHJhbnNpdGlvbjpcbiBiYWNrZ3JvdW5kLWNvbG9yIC4zcyB2YXIoLS1uLWJlemllciksXG4gYm94LXNoYWRvdyAuM3MgdmFyKC0tbi1iZXppZXIpO1xuIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW4tY29sb3IpO1xuYCwgW2NCKCdzY3JvbGxiYXInLCBgXG4gbWF4LWhlaWdodDogdmFyKC0tbi1oZWlnaHQpO1xuIGApLCBjQigndmlydHVhbC1saXN0JywgYFxuIG1heC1oZWlnaHQ6IHZhcigtLW4taGVpZ2h0KTtcbiBgKSwgY0IoJ2Jhc2Utc2VsZWN0LW9wdGlvbicsIGBcbiBtaW4taGVpZ2h0OiB2YXIoLS1uLW9wdGlvbi1oZWlnaHQpO1xuIGZvbnQtc2l6ZTogdmFyKC0tbi1vcHRpb24tZm9udC1zaXplKTtcbiBkaXNwbGF5OiBmbGV4O1xuIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gYCwgW2NFKCdjb250ZW50JywgYFxuIHotaW5kZXg6IDE7XG4gd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiBvdmVyZmxvdzogaGlkZGVuO1xuIGApXSksIGNCKCdiYXNlLXNlbGVjdC1ncm91cC1oZWFkZXInLCBgXG4gbWluLWhlaWdodDogdmFyKC0tbi1vcHRpb24taGVpZ2h0KTtcbiBmb250LXNpemU6IC45M2VtO1xuIGRpc3BsYXk6IGZsZXg7XG4gYWxpZ24taXRlbXM6IGNlbnRlcjtcbiBgKSwgY0IoJ2Jhc2Utc2VsZWN0LW1lbnUtb3B0aW9uLXdyYXBwZXInLCBgXG4gcG9zaXRpb246IHJlbGF0aXZlO1xuIHdpZHRoOiAxMDAlO1xuIGApLCBjRSgnbG9hZGluZywgZW1wdHknLCBgXG4gZGlzcGxheTogZmxleDtcbiBwYWRkaW5nOiAxMnB4IDMycHg7XG4gZmxleDogMTtcbiBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiBgKSwgY0UoJ2xvYWRpbmcnLCBgXG4gY29sb3I6IHZhcigtLW4tbG9hZGluZy1jb2xvcik7XG4gZm9udC1zaXplOiB2YXIoLS1uLWxvYWRpbmctc2l6ZSk7XG4gYCksIGNFKCdhY3Rpb24nLCBgXG4gcGFkZGluZzogOHB4IHZhcigtLW4tb3B0aW9uLXBhZGRpbmctbGVmdCk7XG4gZm9udC1zaXplOiB2YXIoLS1uLW9wdGlvbi1mb250LXNpemUpO1xuIHRyYW5zaXRpb246IFxuIGNvbG9yIC4zcyB2YXIoLS1uLWJlemllciksXG4gYm9yZGVyLWNvbG9yIC4zcyB2YXIoLS1uLWJlemllcik7XG4gYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLW4tYWN0aW9uLWRpdmlkZXItY29sb3IpO1xuIGNvbG9yOiB2YXIoLS1uLWFjdGlvbi10ZXh0LWNvbG9yKTtcbiBgKSwgY0IoJ2Jhc2Utc2VsZWN0LWdyb3VwLWhlYWRlcicsIGBcbiBwb3NpdGlvbjogcmVsYXRpdmU7XG4gY3Vyc29yOiBkZWZhdWx0O1xuIHBhZGRpbmc6IHZhcigtLW4tb3B0aW9uLXBhZGRpbmcpO1xuIGNvbG9yOiB2YXIoLS1uLWdyb3VwLWhlYWRlci10ZXh0LWNvbG9yKTtcbiBgKSwgY0IoJ2Jhc2Utc2VsZWN0LW9wdGlvbicsIGBcbiBjdXJzb3I6IHBvaW50ZXI7XG4gcG9zaXRpb246IHJlbGF0aXZlO1xuIHBhZGRpbmc6IHZhcigtLW4tb3B0aW9uLXBhZGRpbmcpO1xuIHRyYW5zaXRpb246XG4gY29sb3IgLjNzIHZhcigtLW4tYmV6aWVyKSxcbiBvcGFjaXR5IC4zcyB2YXIoLS1uLWJlemllcik7XG4gYm94LXNpemluZzogYm9yZGVyLWJveDtcbiBjb2xvcjogdmFyKC0tbi1vcHRpb24tdGV4dC1jb2xvcik7XG4gb3BhY2l0eTogMTtcbiBgLCBbY00oJ3Nob3ctY2hlY2ttYXJrJywgYFxuIHBhZGRpbmctcmlnaHQ6IGNhbGModmFyKC0tbi1vcHRpb24tcGFkZGluZy1yaWdodCkgKyAyMHB4KTtcbiBgKSwgYygnJjo6YmVmb3JlJywgYFxuIGNvbnRlbnQ6IFwiXCI7XG4gcG9zaXRpb246IGFic29sdXRlO1xuIGxlZnQ6IDRweDtcbiByaWdodDogNHB4O1xuIHRvcDogMDtcbiBib3R0b206IDA7XG4gYm9yZGVyLXJhZGl1czogdmFyKC0tbi1ib3JkZXItcmFkaXVzKTtcbiB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zcyB2YXIoLS1uLWJlemllcik7XG4gYCksIGMoJyY6YWN0aXZlJywgYFxuIGNvbG9yOiB2YXIoLS1uLW9wdGlvbi10ZXh0LWNvbG9yLXByZXNzZWQpO1xuIGApLCBjTSgnZ3JvdXBlZCcsIGBcbiBwYWRkaW5nLWxlZnQ6IGNhbGModmFyKC0tbi1vcHRpb24tcGFkZGluZy1sZWZ0KSAqIDEuNSk7XG4gYCksIGNNKCdwZW5kaW5nJywgW2MoJyY6OmJlZm9yZScsIGBcbiBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1uLW9wdGlvbi1jb2xvci1wZW5kaW5nKTtcbiBgKV0pLCBjTSgnc2VsZWN0ZWQnLCBgXG4gY29sb3I6IHZhcigtLW4tb3B0aW9uLXRleHQtY29sb3ItYWN0aXZlKTtcbiBgLCBbYygnJjo6YmVmb3JlJywgYFxuIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW4tb3B0aW9uLWNvbG9yLWFjdGl2ZSk7XG4gYCksIGNNKCdwZW5kaW5nJywgW2MoJyY6OmJlZm9yZScsIGBcbiBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1uLW9wdGlvbi1jb2xvci1hY3RpdmUtcGVuZGluZyk7XG4gYCldKV0pLCBjTSgnZGlzYWJsZWQnLCBgXG4gY3Vyc29yOiBub3QtYWxsb3dlZDtcbiBgLCBbY05vdE0oJ3NlbGVjdGVkJywgYFxuIGNvbG9yOiB2YXIoLS1uLW9wdGlvbi10ZXh0LWNvbG9yLWRpc2FibGVkKTtcbiBgKSwgY00oJ3NlbGVjdGVkJywgYFxuIG9wYWNpdHk6IHZhcigtLW4tb3B0aW9uLW9wYWNpdHktZGlzYWJsZWQpO1xuIGApXSksIGNFKCdjaGVjaycsIGBcbiBmb250LXNpemU6IDE2cHg7XG4gcG9zaXRpb246IGFic29sdXRlO1xuIHJpZ2h0OiBjYWxjKHZhcigtLW4tb3B0aW9uLXBhZGRpbmctcmlnaHQpIC0gNHB4KTtcbiB0b3A6IGNhbGMoNTAlIC0gN3B4KTtcbiBjb2xvcjogdmFyKC0tbi1vcHRpb24tY2hlY2stY29sb3IpO1xuIHRyYW5zaXRpb246IGNvbG9yIC4zcyB2YXIoLS1uLWJlemllcik7XG4gYCwgW2ZhZGVJblNjYWxlVXBUcmFuc2l0aW9uKHtcbiAgZW50ZXJTY2FsZTogJzAuNSdcbn0pXSldKV0pOyIsImV4cG9ydCBkZWZhdWx0IHtcbiAgICBoZWlnaHQ6ICdjYWxjKHZhcigtLW4tb3B0aW9uLWhlaWdodCkgKiA3LjYpJyxcbiAgICBwYWRkaW5nU21hbGw6ICc0cHggMCcsXG4gICAgcGFkZGluZ01lZGl1bTogJzRweCAwJyxcbiAgICBwYWRkaW5nTGFyZ2U6ICc0cHggMCcsXG4gICAgcGFkZGluZ0h1Z2U6ICc0cHggMCcsXG4gICAgb3B0aW9uUGFkZGluZ1NtYWxsOiAnMCAxMnB4JyxcbiAgICBvcHRpb25QYWRkaW5nTWVkaXVtOiAnMCAxMnB4JyxcbiAgICBvcHRpb25QYWRkaW5nTGFyZ2U6ICcwIDEycHgnLFxuICAgIG9wdGlvblBhZGRpbmdIdWdlOiAnMCAxMnB4JyxcbiAgICBsb2FkaW5nU2l6ZTogJzE4cHgnXG59O1xuIiwiaW1wb3J0IHsgZW1wdHlMaWdodCB9IGZyb20gJy4uLy4uLy4uL2VtcHR5L3N0eWxlcyc7XG5pbXBvcnQgeyBzY3JvbGxiYXJMaWdodCB9IGZyb20gJy4uLy4uL3Njcm9sbGJhci9zdHlsZXMnO1xuaW1wb3J0IHsgY29tbW9uTGlnaHQgfSBmcm9tICcuLi8uLi8uLi9fc3R5bGVzL2NvbW1vbic7XG5pbXBvcnQgY29tbW9uVmFyaWFibGVzIGZyb20gJy4vX2NvbW1vbic7XG5pbXBvcnQgeyBjcmVhdGVUaGVtZSB9IGZyb20gJy4uLy4uLy4uL19taXhpbnMnO1xuZXhwb3J0IGNvbnN0IHNlbGYgPSAodmFycykgPT4ge1xuICAgIGNvbnN0IHsgYm9yZGVyUmFkaXVzLCBwb3BvdmVyQ29sb3IsIHRleHRDb2xvcjMsIGRpdmlkZXJDb2xvciwgdGV4dENvbG9yMiwgcHJpbWFyeUNvbG9yUHJlc3NlZCwgdGV4dENvbG9yRGlzYWJsZWQsIHByaW1hcnlDb2xvciwgb3BhY2l0eURpc2FibGVkLCBob3ZlckNvbG9yLCBmb250U2l6ZVNtYWxsLCBmb250U2l6ZU1lZGl1bSwgZm9udFNpemVMYXJnZSwgZm9udFNpemVIdWdlLCBoZWlnaHRTbWFsbCwgaGVpZ2h0TWVkaXVtLCBoZWlnaHRMYXJnZSwgaGVpZ2h0SHVnZSB9ID0gdmFycztcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb21tb25WYXJpYWJsZXMpLCB7IG9wdGlvbkZvbnRTaXplU21hbGw6IGZvbnRTaXplU21hbGwsIG9wdGlvbkZvbnRTaXplTWVkaXVtOiBmb250U2l6ZU1lZGl1bSwgb3B0aW9uRm9udFNpemVMYXJnZTogZm9udFNpemVMYXJnZSwgb3B0aW9uRm9udFNpemVIdWdlOiBmb250U2l6ZUh1Z2UsIG9wdGlvbkhlaWdodFNtYWxsOiBoZWlnaHRTbWFsbCwgb3B0aW9uSGVpZ2h0TWVkaXVtOiBoZWlnaHRNZWRpdW0sIG9wdGlvbkhlaWdodExhcmdlOiBoZWlnaHRMYXJnZSwgb3B0aW9uSGVpZ2h0SHVnZTogaGVpZ2h0SHVnZSwgYm9yZGVyUmFkaXVzLCBjb2xvcjogcG9wb3ZlckNvbG9yLCBncm91cEhlYWRlclRleHRDb2xvcjogdGV4dENvbG9yMywgYWN0aW9uRGl2aWRlckNvbG9yOiBkaXZpZGVyQ29sb3IsIG9wdGlvblRleHRDb2xvcjogdGV4dENvbG9yMiwgb3B0aW9uVGV4dENvbG9yUHJlc3NlZDogcHJpbWFyeUNvbG9yUHJlc3NlZCwgb3B0aW9uVGV4dENvbG9yRGlzYWJsZWQ6IHRleHRDb2xvckRpc2FibGVkLCBvcHRpb25UZXh0Q29sb3JBY3RpdmU6IHByaW1hcnlDb2xvciwgb3B0aW9uT3BhY2l0eURpc2FibGVkOiBvcGFjaXR5RGlzYWJsZWQsIG9wdGlvbkNoZWNrQ29sb3I6IHByaW1hcnlDb2xvciwgb3B0aW9uQ29sb3JQZW5kaW5nOiBob3ZlckNvbG9yLCBvcHRpb25Db2xvckFjdGl2ZTogJ3JnYmEoMCwgMCwgMCwgMCknLCBvcHRpb25Db2xvckFjdGl2ZVBlbmRpbmc6IGhvdmVyQ29sb3IsIGFjdGlvblRleHRDb2xvcjogdGV4dENvbG9yMiwgbG9hZGluZ0NvbG9yOiBwcmltYXJ5Q29sb3IgfSk7XG59O1xuY29uc3QgaW50ZXJuYWxTZWxlY3RNZW51TGlnaHQgPSBjcmVhdGVUaGVtZSh7XG4gICAgbmFtZTogJ0ludGVybmFsU2VsZWN0TWVudScsXG4gICAgY29tbW9uOiBjb21tb25MaWdodCxcbiAgICBwZWVyczoge1xuICAgICAgICBTY3JvbGxiYXI6IHNjcm9sbGJhckxpZ2h0LFxuICAgICAgICBFbXB0eTogZW1wdHlMaWdodFxuICAgIH0sXG4gICAgc2VsZlxufSk7XG5leHBvcnQgZGVmYXVsdCBpbnRlcm5hbFNlbGVjdE1lbnVMaWdodDtcbiIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbmltcG9ydCB7IGgsIGRlZmluZUNvbXBvbmVudCwgRnJhZ21lbnQsIHJlZiwgY29tcHV0ZWQsIHdhdGNoLCB0b1JlZiwgbmV4dFRpY2ssIHdhdGNoRWZmZWN0LCBvbk1vdW50ZWQgfSBmcm9tICd2dWUnO1xuaW1wb3J0IHsgVk92ZXJmbG93IH0gZnJvbSAndnVldWMnO1xuaW1wb3J0IHsgTlBvcG92ZXIgfSBmcm9tICcuLi8uLi8uLi9wb3BvdmVyJztcbmltcG9ydCB7IE5UYWcgfSBmcm9tICcuLi8uLi8uLi90YWcnO1xuaW1wb3J0IHsgdXNlVGhlbWVDbGFzcywgdXNlVGhlbWUgfSBmcm9tICcuLi8uLi8uLi9fbWl4aW5zJztcbmltcG9ydCB7IGNyZWF0ZUtleSwgZ2V0VGl0bGVBdHRyaWJ1dGUsIHJlbmRlciwgdXNlT25SZXNpemUsIFdyYXBwZXIgfSBmcm9tICcuLi8uLi8uLi9fdXRpbHMnO1xuaW1wb3J0IFN1ZmZpeCBmcm9tICcuLi8uLi9zdWZmaXgnO1xuaW1wb3J0IHsgaW50ZXJuYWxTZWxlY3Rpb25MaWdodCB9IGZyb20gJy4uL3N0eWxlcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi9zdHlsZXMvaW5kZXguY3Nzcic7XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6ICdJbnRlcm5hbFNlbGVjdGlvbicsXG4gICAgcHJvcHM6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdXNlVGhlbWUucHJvcHMpLCB7IGNsc1ByZWZpeDoge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgfSwgYm9yZGVyZWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICBkZWZhdWx0OiB1bmRlZmluZWRcbiAgICAgICAgfSwgYWN0aXZlOiBCb29sZWFuLCBwYXR0ZXJuOiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICBkZWZhdWx0OiAnJ1xuICAgICAgICB9LCBwbGFjZWhvbGRlcjogU3RyaW5nLCBzZWxlY3RlZE9wdGlvbjoge1xuICAgICAgICAgICAgdHlwZTogT2JqZWN0LFxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbFxuICAgICAgICB9LCBzZWxlY3RlZE9wdGlvbnM6IHtcbiAgICAgICAgICAgIHR5cGU6IEFycmF5LFxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbFxuICAgICAgICB9LCBsYWJlbEZpZWxkOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ2xhYmVsJyB9LCB2YWx1ZUZpZWxkOiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICBkZWZhdWx0OiAndmFsdWUnXG4gICAgICAgIH0sIG11bHRpcGxlOiBCb29sZWFuLCBmaWx0ZXJhYmxlOiBCb29sZWFuLCBjbGVhcmFibGU6IEJvb2xlYW4sIGRpc2FibGVkOiBCb29sZWFuLCBzaXplOiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICBkZWZhdWx0OiAnbWVkaXVtJ1xuICAgICAgICB9LCBsb2FkaW5nOiBCb29sZWFuLCBhdXRvZm9jdXM6IEJvb2xlYW4sIHNob3dBcnJvdzoge1xuICAgICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICAgICAgfSwgaW5wdXRQcm9wczogT2JqZWN0LCBmb2N1c2VkOiBCb29sZWFuLCByZW5kZXJUYWc6IEZ1bmN0aW9uLCBvbktleWRvd246IEZ1bmN0aW9uLCBvbkNsaWNrOiBGdW5jdGlvbiwgb25CbHVyOiBGdW5jdGlvbiwgb25Gb2N1czogRnVuY3Rpb24sIG9uRGVsZXRlT3B0aW9uOiBGdW5jdGlvbiwgbWF4VGFnQ291bnQ6IFtTdHJpbmcsIE51bWJlcl0sIG9uQ2xlYXI6IEZ1bmN0aW9uLCBvblBhdHRlcm5JbnB1dDogRnVuY3Rpb24sIG9uUGF0dGVybkZvY3VzOiBGdW5jdGlvbiwgb25QYXR0ZXJuQmx1cjogRnVuY3Rpb24sIHJlbmRlckxhYmVsOiBGdW5jdGlvbiwgc3RhdHVzOiBTdHJpbmcsIGlubGluZVRoZW1lRGlzYWJsZWQ6IEJvb2xlYW4sIGlnbm9yZUNvbXBvc2l0aW9uOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSwgb25SZXNpemU6IEZ1bmN0aW9uIH0pLFxuICAgIHNldHVwKHByb3BzKSB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm5JbnB1dE1pcnJvclJlZiA9IHJlZihudWxsKTtcbiAgICAgICAgY29uc3QgcGF0dGVybklucHV0UmVmID0gcmVmKG51bGwpO1xuICAgICAgICBjb25zdCBzZWxmUmVmID0gcmVmKG51bGwpO1xuICAgICAgICBjb25zdCBtdWx0aXBsZUVsUmVmID0gcmVmKG51bGwpO1xuICAgICAgICBjb25zdCBzaW5nbGVFbFJlZiA9IHJlZihudWxsKTtcbiAgICAgICAgY29uc3QgcGF0dGVybklucHV0V3JhcHBlclJlZiA9IHJlZihudWxsKTtcbiAgICAgICAgY29uc3QgY291bnRlclJlZiA9IHJlZihudWxsKTtcbiAgICAgICAgY29uc3QgY291bnRlcldyYXBwZXJSZWYgPSByZWYobnVsbCk7XG4gICAgICAgIGNvbnN0IG92ZXJmbG93UmVmID0gcmVmKG51bGwpO1xuICAgICAgICBjb25zdCBpbnB1dFRhZ0VsUmVmID0gcmVmKG51bGwpO1xuICAgICAgICBjb25zdCBzaG93VGFnc1BvcG92ZXJSZWYgPSByZWYoZmFsc2UpO1xuICAgICAgICBjb25zdCBwYXR0ZXJuSW5wdXRGb2N1c2VkUmVmID0gcmVmKGZhbHNlKTtcbiAgICAgICAgY29uc3QgaG92ZXJSZWYgPSByZWYoZmFsc2UpO1xuICAgICAgICBjb25zdCB0aGVtZVJlZiA9IHVzZVRoZW1lKCdJbnRlcm5hbFNlbGVjdGlvbicsICctaW50ZXJuYWwtc2VsZWN0aW9uJywgc3R5bGUsIGludGVybmFsU2VsZWN0aW9uTGlnaHQsIHByb3BzLCB0b1JlZihwcm9wcywgJ2Nsc1ByZWZpeCcpKTtcbiAgICAgICAgY29uc3QgbWVyZ2VkQ2xlYXJhYmxlUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChwcm9wcy5jbGVhcmFibGUgJiYgIXByb3BzLmRpc2FibGVkICYmIChob3ZlclJlZi52YWx1ZSB8fCBwcm9wcy5hY3RpdmUpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGZpbHRlcmFibGVQbGFjZWhvbGRlclJlZiA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5zZWxlY3RlZE9wdGlvblxuICAgICAgICAgICAgICAgID8gcHJvcHMucmVuZGVyVGFnXG4gICAgICAgICAgICAgICAgICAgID8gcHJvcHMucmVuZGVyVGFnKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbjogcHJvcHMuc2VsZWN0ZWRPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDbG9zZTogKCkgPT4geyB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIDogcHJvcHMucmVuZGVyTGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcHJvcHMucmVuZGVyTGFiZWwocHJvcHMuc2VsZWN0ZWRPcHRpb24sIHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlbmRlcihwcm9wcy5zZWxlY3RlZE9wdGlvbltwcm9wcy5sYWJlbEZpZWxkXSwgcHJvcHMuc2VsZWN0ZWRPcHRpb24sIHRydWUpXG4gICAgICAgICAgICAgICAgOiBwcm9wcy5wbGFjZWhvbGRlcjtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxhYmVsUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gcHJvcHMuc2VsZWN0ZWRPcHRpb247XG4gICAgICAgICAgICBpZiAoIW9wdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbltwcm9wcy5sYWJlbEZpZWxkXTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb3BzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKEFycmF5LmlzQXJyYXkocHJvcHMuc2VsZWN0ZWRPcHRpb25zKSAmJiBwcm9wcy5zZWxlY3RlZE9wdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wcy5zZWxlY3RlZE9wdGlvbiAhPT0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIHN5bmNNaXJyb3JXaWR0aCgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IHBhdHRlcm5JbnB1dE1pcnJvckVsIH0gPSBwYXR0ZXJuSW5wdXRNaXJyb3JSZWY7XG4gICAgICAgICAgICBpZiAocGF0dGVybklucHV0TWlycm9yRWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBwYXR0ZXJuSW5wdXRFbCB9ID0gcGF0dGVybklucHV0UmVmO1xuICAgICAgICAgICAgICAgIGlmIChwYXR0ZXJuSW5wdXRFbCkge1xuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuSW5wdXRFbC5zdHlsZS53aWR0aCA9IGAke3BhdHRlcm5JbnB1dE1pcnJvckVsLm9mZnNldFdpZHRofXB4YDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BzLm1heFRhZ0NvdW50ICE9PSAncmVzcG9uc2l2ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYSA9IG92ZXJmbG93UmVmLnZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3luYygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhpZGVJbnB1dFRhZygpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IGlucHV0VGFnRWwgfSA9IGlucHV0VGFnRWxSZWY7XG4gICAgICAgICAgICBpZiAoaW5wdXRUYWdFbClcbiAgICAgICAgICAgICAgICBpbnB1dFRhZ0VsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gc2hvd0lucHV0VGFnKCkge1xuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogaW5wdXRUYWdFbCB9ID0gaW5wdXRUYWdFbFJlZjtcbiAgICAgICAgICAgIGlmIChpbnB1dFRhZ0VsKVxuICAgICAgICAgICAgICAgIGlucHV0VGFnRWwuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICB9XG4gICAgICAgIHdhdGNoKHRvUmVmKHByb3BzLCAnYWN0aXZlJyksICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgICAgICBoaWRlSW5wdXRUYWcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdhdGNoKHRvUmVmKHByb3BzLCAncGF0dGVybicpLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvcHMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICB2b2lkIG5leHRUaWNrKHN5bmNNaXJyb3JXaWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBkb0ZvY3VzKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25Gb2N1cyB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAob25Gb2N1cylcbiAgICAgICAgICAgICAgICBvbkZvY3VzKGUpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRvQmx1cihlKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9uQmx1ciB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAob25CbHVyKVxuICAgICAgICAgICAgICAgIG9uQmx1cihlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBkb0RlbGV0ZU9wdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgeyBvbkRlbGV0ZU9wdGlvbiB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAob25EZWxldGVPcHRpb24pXG4gICAgICAgICAgICAgICAgb25EZWxldGVPcHRpb24odmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRvQ2xlYXIoZSkge1xuICAgICAgICAgICAgY29uc3QgeyBvbkNsZWFyIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGlmIChvbkNsZWFyKVxuICAgICAgICAgICAgICAgIG9uQ2xlYXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZG9QYXR0ZXJuSW5wdXQodmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25QYXR0ZXJuSW5wdXQgfSA9IHByb3BzO1xuICAgICAgICAgICAgaWYgKG9uUGF0dGVybklucHV0KVxuICAgICAgICAgICAgICAgIG9uUGF0dGVybklucHV0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVGb2N1c2luKGUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmICghZS5yZWxhdGVkVGFyZ2V0IHx8XG4gICAgICAgICAgICAgICAgISgoX2EgPSBzZWxmUmVmLnZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSkpIHtcbiAgICAgICAgICAgICAgICBkb0ZvY3VzKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUZvY3Vzb3V0KGUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmICgoX2EgPSBzZWxmUmVmLnZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBkb0JsdXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlQ2xlYXIoZSkge1xuICAgICAgICAgICAgZG9DbGVhcihlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVNb3VzZUVudGVyKCkge1xuICAgICAgICAgICAgaG92ZXJSZWYudmFsdWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlTGVhdmUoKSB7XG4gICAgICAgICAgICBob3ZlclJlZi52YWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihlKSB7XG4gICAgICAgICAgICBpZiAoIXByb3BzLmFjdGl2ZSB8fCAhcHJvcHMuZmlsdGVyYWJsZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IHBhdHRlcm5JbnB1dFJlZi52YWx1ZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRGVsZXRlT3B0aW9uKG9wdGlvbikge1xuICAgICAgICAgICAgZG9EZWxldGVPcHRpb24ob3B0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVQYXR0ZXJuS2V5RG93bihlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdCYWNrc3BhY2UnICYmICFpc0NvbXBvc2luZ1JlZi52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghcHJvcHMucGF0dGVybi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzZWxlY3RlZE9wdGlvbnMgfSA9IHByb3BzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRPcHRpb25zID09PSBudWxsIHx8IHNlbGVjdGVkT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGVsZXRlT3B0aW9uKHNlbGVjdGVkT3B0aW9uc1tzZWxlY3RlZE9wdGlvbnMubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzQ29tcG9zaW5nUmVmID0gcmVmKGZhbHNlKTtcbiAgICAgICAgLy8gdGhlIGNvbXBvc2l0aW9uIGVuZCBpcyBsYXRlciB0aGFuIGl0cyBpbnB1dCBzbyB3ZSBjYW4gY2FjaGVkIHRoZSBldmVudFxuICAgICAgICAvLyBhbmQgcmV0dXJuIHRoZSBpbnB1dCBldmVudFxuICAgICAgICBsZXQgY2FjaGVkSW5wdXRFdmVudCA9IG51bGw7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVBhdHRlcm5JbnB1dElucHV0KGUpIHtcbiAgICAgICAgICAgIC8vIHdlIHNob3VsZCBzeW5jIG1pcnJvciB3aWR0aCBoZXJlXG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBwYXR0ZXJuSW5wdXRNaXJyb3JFbCB9ID0gcGF0dGVybklucHV0TWlycm9yUmVmO1xuICAgICAgICAgICAgaWYgKHBhdHRlcm5JbnB1dE1pcnJvckVsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRUZXh0ID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgcGF0dGVybklucHV0TWlycm9yRWwudGV4dENvbnRlbnQgPSBpbnB1dFRleHQ7XG4gICAgICAgICAgICAgICAgc3luY01pcnJvcldpZHRoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvcHMuaWdub3JlQ29tcG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQ29tcG9zaW5nUmVmLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvUGF0dGVybklucHV0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkSW5wdXRFdmVudCA9IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9QYXR0ZXJuSW5wdXQoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlQ29tcG9zaXRpb25TdGFydCgpIHtcbiAgICAgICAgICAgIGlzQ29tcG9zaW5nUmVmLnZhbHVlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVDb21wb3NpdGlvbkVuZCgpIHtcbiAgICAgICAgICAgIGlzQ29tcG9zaW5nUmVmLnZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAocHJvcHMuaWdub3JlQ29tcG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBkb1BhdHRlcm5JbnB1dChjYWNoZWRJbnB1dEV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhY2hlZElucHV0RXZlbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVBhdHRlcm5JbnB1dEZvY3VzKGUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHBhdHRlcm5JbnB1dEZvY3VzZWRSZWYudmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgKF9hID0gcHJvcHMub25QYXR0ZXJuRm9jdXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHByb3BzLCBlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVQYXR0ZXJuSW5wdXRCbHVyKGUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHBhdHRlcm5JbnB1dEZvY3VzZWRSZWYudmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIChfYSA9IHByb3BzLm9uUGF0dGVybkJsdXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHByb3BzLCBlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBibHVyKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGlmIChwcm9wcy5maWx0ZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybklucHV0Rm9jdXNlZFJlZi52YWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIChfYSA9IHBhdHRlcm5JbnB1dFdyYXBwZXJSZWYudmFsdWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ibHVyKCk7XG4gICAgICAgICAgICAgICAgKF9iID0gcGF0dGVybklucHV0UmVmLnZhbHVlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYmx1cigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocHJvcHMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBtdWx0aXBsZUVsIH0gPSBtdWx0aXBsZUVsUmVmO1xuICAgICAgICAgICAgICAgIG11bHRpcGxlRWwgPT09IG51bGwgfHwgbXVsdGlwbGVFbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbXVsdGlwbGVFbC5ibHVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBzaW5nbGVFbCB9ID0gc2luZ2xlRWxSZWY7XG4gICAgICAgICAgICAgICAgc2luZ2xlRWwgPT09IG51bGwgfHwgc2luZ2xlRWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNpbmdsZUVsLmJsdXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBmb2N1cygpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgaWYgKHByb3BzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuSW5wdXRGb2N1c2VkUmVmLnZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgKF9hID0gcGF0dGVybklucHV0V3JhcHBlclJlZi52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwcm9wcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIChfYiA9IG11bHRpcGxlRWxSZWYudmFsdWUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgKF9jID0gc2luZ2xlRWxSZWYudmFsdWUpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGZvY3VzSW5wdXQoKSB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBwYXR0ZXJuSW5wdXRFbCB9ID0gcGF0dGVybklucHV0UmVmO1xuICAgICAgICAgICAgaWYgKHBhdHRlcm5JbnB1dEVsKSB7XG4gICAgICAgICAgICAgICAgc2hvd0lucHV0VGFnKCk7XG4gICAgICAgICAgICAgICAgcGF0dGVybklucHV0RWwuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBibHVySW5wdXQoKSB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBwYXR0ZXJuSW5wdXRFbCB9ID0gcGF0dGVybklucHV0UmVmO1xuICAgICAgICAgICAgaWYgKHBhdHRlcm5JbnB1dEVsKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybklucHV0RWwuYmx1cigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUNvdW50ZXIoY291bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGNvdW50ZXJSZWY7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS5zZXRUZXh0Q29udGVudChgKyR7Y291bnR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q291bnRlcigpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGNvdW50ZXJXcmFwcGVyUmVmO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldFRhaWwoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGF0dGVybklucHV0UmVmLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlbnRlclRpbWVySWQgPSBudWxsO1xuICAgICAgICBmdW5jdGlvbiBjbGVhckVudGVyVGltZXIoKSB7XG4gICAgICAgICAgICBpZiAoZW50ZXJUaW1lcklkICE9PSBudWxsKVxuICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoZW50ZXJUaW1lcklkKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVNb3VzZUVudGVyQ291bnRlcigpIHtcbiAgICAgICAgICAgIGlmIChwcm9wcy5kaXNhYmxlZCB8fCBwcm9wcy5hY3RpdmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2xlYXJFbnRlclRpbWVyKCk7XG4gICAgICAgICAgICBlbnRlclRpbWVySWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkUmVmLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dUYWdzUG9wb3ZlclJlZi52YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVNb3VzZUxlYXZlQ291bnRlcigpIHtcbiAgICAgICAgICAgIGNsZWFyRW50ZXJUaW1lcigpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uUG9wb3ZlclVwZGF0ZVNob3coc2hvdykge1xuICAgICAgICAgICAgaWYgKCFzaG93KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJFbnRlclRpbWVyKCk7XG4gICAgICAgICAgICAgICAgc2hvd1RhZ3NQb3BvdmVyUmVmLnZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd2F0Y2goc2VsZWN0ZWRSZWYsICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHNob3dUYWdzUG9wb3ZlclJlZi52YWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgb25Nb3VudGVkKCgpID0+IHtcbiAgICAgICAgICAgIHdhdGNoRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXR0ZXJuSW5wdXRXcmFwcGVyRWwgPSBwYXR0ZXJuSW5wdXRXcmFwcGVyUmVmLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghcGF0dGVybklucHV0V3JhcHBlckVsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgcGF0dGVybklucHV0V3JhcHBlckVsLnRhYkluZGV4ID1cbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuZGlzYWJsZWQgfHwgcGF0dGVybklucHV0Rm9jdXNlZFJlZi52YWx1ZSA/IC0xIDogMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdXNlT25SZXNpemUoc2VsZlJlZiwgcHJvcHMub25SZXNpemUpO1xuICAgICAgICBjb25zdCB7IGlubGluZVRoZW1lRGlzYWJsZWQgfSA9IHByb3BzO1xuICAgICAgICBjb25zdCBjc3NWYXJzUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBzaXplIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGNvbnN0IHsgY29tbW9uOiB7IGN1YmljQmV6aWVyRWFzZUluT3V0IH0sIHNlbGY6IHsgYm9yZGVyUmFkaXVzLCBjb2xvciwgcGxhY2Vob2xkZXJDb2xvciwgdGV4dENvbG9yLCBwYWRkaW5nU2luZ2xlLCBwYWRkaW5nTXVsdGlwbGUsIGNhcmV0Q29sb3IsIGNvbG9yRGlzYWJsZWQsIHRleHRDb2xvckRpc2FibGVkLCBwbGFjZWhvbGRlckNvbG9yRGlzYWJsZWQsIGNvbG9yQWN0aXZlLCBib3hTaGFkb3dGb2N1cywgYm94U2hhZG93QWN0aXZlLCBib3hTaGFkb3dIb3ZlciwgYm9yZGVyLCBib3JkZXJGb2N1cywgYm9yZGVySG92ZXIsIGJvcmRlckFjdGl2ZSwgYXJyb3dDb2xvciwgYXJyb3dDb2xvckRpc2FibGVkLCBsb2FkaW5nQ29sb3IsIFxuICAgICAgICAgICAgLy8gZm9ybSB3YXJuaW5nXG4gICAgICAgICAgICBjb2xvckFjdGl2ZVdhcm5pbmcsIGJveFNoYWRvd0ZvY3VzV2FybmluZywgYm94U2hhZG93QWN0aXZlV2FybmluZywgYm94U2hhZG93SG92ZXJXYXJuaW5nLCBib3JkZXJXYXJuaW5nLCBib3JkZXJGb2N1c1dhcm5pbmcsIGJvcmRlckhvdmVyV2FybmluZywgYm9yZGVyQWN0aXZlV2FybmluZywgXG4gICAgICAgICAgICAvLyBmb3JtIGVycm9yXG4gICAgICAgICAgICBjb2xvckFjdGl2ZUVycm9yLCBib3hTaGFkb3dGb2N1c0Vycm9yLCBib3hTaGFkb3dBY3RpdmVFcnJvciwgYm94U2hhZG93SG92ZXJFcnJvciwgYm9yZGVyRXJyb3IsIGJvcmRlckZvY3VzRXJyb3IsIGJvcmRlckhvdmVyRXJyb3IsIGJvcmRlckFjdGl2ZUVycm9yLCBcbiAgICAgICAgICAgIC8vIGNsZWFyXG4gICAgICAgICAgICBjbGVhckNvbG9yLCBjbGVhckNvbG9ySG92ZXIsIGNsZWFyQ29sb3JQcmVzc2VkLCBjbGVhclNpemUsIFxuICAgICAgICAgICAgLy8gYXJyb3dcbiAgICAgICAgICAgIGFycm93U2l6ZSwgW2NyZWF0ZUtleSgnaGVpZ2h0Jywgc2l6ZSldOiBoZWlnaHQsIFtjcmVhdGVLZXkoJ2ZvbnRTaXplJywgc2l6ZSldOiBmb250U2l6ZSB9IH0gPSB0aGVtZVJlZi52YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJy0tbi1iZXppZXInOiBjdWJpY0JlemllckVhc2VJbk91dCxcbiAgICAgICAgICAgICAgICAnLS1uLWJvcmRlcic6IGJvcmRlcixcbiAgICAgICAgICAgICAgICAnLS1uLWJvcmRlci1hY3RpdmUnOiBib3JkZXJBY3RpdmUsXG4gICAgICAgICAgICAgICAgJy0tbi1ib3JkZXItZm9jdXMnOiBib3JkZXJGb2N1cyxcbiAgICAgICAgICAgICAgICAnLS1uLWJvcmRlci1ob3Zlcic6IGJvcmRlckhvdmVyLFxuICAgICAgICAgICAgICAgICctLW4tYm9yZGVyLXJhZGl1cyc6IGJvcmRlclJhZGl1cyxcbiAgICAgICAgICAgICAgICAnLS1uLWJveC1zaGFkb3ctYWN0aXZlJzogYm94U2hhZG93QWN0aXZlLFxuICAgICAgICAgICAgICAgICctLW4tYm94LXNoYWRvdy1mb2N1cyc6IGJveFNoYWRvd0ZvY3VzLFxuICAgICAgICAgICAgICAgICctLW4tYm94LXNoYWRvdy1ob3Zlcic6IGJveFNoYWRvd0hvdmVyLFxuICAgICAgICAgICAgICAgICctLW4tY2FyZXQtY29sb3InOiBjYXJldENvbG9yLFxuICAgICAgICAgICAgICAgICctLW4tY29sb3InOiBjb2xvcixcbiAgICAgICAgICAgICAgICAnLS1uLWNvbG9yLWFjdGl2ZSc6IGNvbG9yQWN0aXZlLFxuICAgICAgICAgICAgICAgICctLW4tY29sb3ItZGlzYWJsZWQnOiBjb2xvckRpc2FibGVkLFxuICAgICAgICAgICAgICAgICctLW4tZm9udC1zaXplJzogZm9udFNpemUsXG4gICAgICAgICAgICAgICAgJy0tbi1oZWlnaHQnOiBoZWlnaHQsXG4gICAgICAgICAgICAgICAgJy0tbi1wYWRkaW5nLXNpbmdsZSc6IHBhZGRpbmdTaW5nbGUsXG4gICAgICAgICAgICAgICAgJy0tbi1wYWRkaW5nLW11bHRpcGxlJzogcGFkZGluZ011bHRpcGxlLFxuICAgICAgICAgICAgICAgICctLW4tcGxhY2Vob2xkZXItY29sb3InOiBwbGFjZWhvbGRlckNvbG9yLFxuICAgICAgICAgICAgICAgICctLW4tcGxhY2Vob2xkZXItY29sb3ItZGlzYWJsZWQnOiBwbGFjZWhvbGRlckNvbG9yRGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgJy0tbi10ZXh0LWNvbG9yJzogdGV4dENvbG9yLFxuICAgICAgICAgICAgICAgICctLW4tdGV4dC1jb2xvci1kaXNhYmxlZCc6IHRleHRDb2xvckRpc2FibGVkLFxuICAgICAgICAgICAgICAgICctLW4tYXJyb3ctY29sb3InOiBhcnJvd0NvbG9yLFxuICAgICAgICAgICAgICAgICctLW4tYXJyb3ctY29sb3ItZGlzYWJsZWQnOiBhcnJvd0NvbG9yRGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgJy0tbi1sb2FkaW5nLWNvbG9yJzogbG9hZGluZ0NvbG9yLFxuICAgICAgICAgICAgICAgIC8vIGZvcm0gd2FybmluZ1xuICAgICAgICAgICAgICAgICctLW4tY29sb3ItYWN0aXZlLXdhcm5pbmcnOiBjb2xvckFjdGl2ZVdhcm5pbmcsXG4gICAgICAgICAgICAgICAgJy0tbi1ib3gtc2hhZG93LWZvY3VzLXdhcm5pbmcnOiBib3hTaGFkb3dGb2N1c1dhcm5pbmcsXG4gICAgICAgICAgICAgICAgJy0tbi1ib3gtc2hhZG93LWFjdGl2ZS13YXJuaW5nJzogYm94U2hhZG93QWN0aXZlV2FybmluZyxcbiAgICAgICAgICAgICAgICAnLS1uLWJveC1zaGFkb3ctaG92ZXItd2FybmluZyc6IGJveFNoYWRvd0hvdmVyV2FybmluZyxcbiAgICAgICAgICAgICAgICAnLS1uLWJvcmRlci13YXJuaW5nJzogYm9yZGVyV2FybmluZyxcbiAgICAgICAgICAgICAgICAnLS1uLWJvcmRlci1mb2N1cy13YXJuaW5nJzogYm9yZGVyRm9jdXNXYXJuaW5nLFxuICAgICAgICAgICAgICAgICctLW4tYm9yZGVyLWhvdmVyLXdhcm5pbmcnOiBib3JkZXJIb3Zlcldhcm5pbmcsXG4gICAgICAgICAgICAgICAgJy0tbi1ib3JkZXItYWN0aXZlLXdhcm5pbmcnOiBib3JkZXJBY3RpdmVXYXJuaW5nLFxuICAgICAgICAgICAgICAgIC8vIGZvcm0gZXJyb3JcbiAgICAgICAgICAgICAgICAnLS1uLWNvbG9yLWFjdGl2ZS1lcnJvcic6IGNvbG9yQWN0aXZlRXJyb3IsXG4gICAgICAgICAgICAgICAgJy0tbi1ib3gtc2hhZG93LWZvY3VzLWVycm9yJzogYm94U2hhZG93Rm9jdXNFcnJvcixcbiAgICAgICAgICAgICAgICAnLS1uLWJveC1zaGFkb3ctYWN0aXZlLWVycm9yJzogYm94U2hhZG93QWN0aXZlRXJyb3IsXG4gICAgICAgICAgICAgICAgJy0tbi1ib3gtc2hhZG93LWhvdmVyLWVycm9yJzogYm94U2hhZG93SG92ZXJFcnJvcixcbiAgICAgICAgICAgICAgICAnLS1uLWJvcmRlci1lcnJvcic6IGJvcmRlckVycm9yLFxuICAgICAgICAgICAgICAgICctLW4tYm9yZGVyLWZvY3VzLWVycm9yJzogYm9yZGVyRm9jdXNFcnJvcixcbiAgICAgICAgICAgICAgICAnLS1uLWJvcmRlci1ob3Zlci1lcnJvcic6IGJvcmRlckhvdmVyRXJyb3IsXG4gICAgICAgICAgICAgICAgJy0tbi1ib3JkZXItYWN0aXZlLWVycm9yJzogYm9yZGVyQWN0aXZlRXJyb3IsXG4gICAgICAgICAgICAgICAgLy8gY2xlYXJcbiAgICAgICAgICAgICAgICAnLS1uLWNsZWFyLXNpemUnOiBjbGVhclNpemUsXG4gICAgICAgICAgICAgICAgJy0tbi1jbGVhci1jb2xvcic6IGNsZWFyQ29sb3IsXG4gICAgICAgICAgICAgICAgJy0tbi1jbGVhci1jb2xvci1ob3Zlcic6IGNsZWFyQ29sb3JIb3ZlcixcbiAgICAgICAgICAgICAgICAnLS1uLWNsZWFyLWNvbG9yLXByZXNzZWQnOiBjbGVhckNvbG9yUHJlc3NlZCxcbiAgICAgICAgICAgICAgICAvLyBhcnJvdy1zaXplXG4gICAgICAgICAgICAgICAgJy0tbi1hcnJvdy1zaXplJzogYXJyb3dTaXplXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdGhlbWVDbGFzc0hhbmRsZSA9IGlubGluZVRoZW1lRGlzYWJsZWRcbiAgICAgICAgICAgID8gdXNlVGhlbWVDbGFzcygnaW50ZXJuYWwtc2VsZWN0aW9uJywgY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wcy5zaXplWzBdO1xuICAgICAgICAgICAgfSksIGNzc1ZhcnNSZWYsIHByb3BzKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXJnZWRUaGVtZTogdGhlbWVSZWYsXG4gICAgICAgICAgICBtZXJnZWRDbGVhcmFibGU6IG1lcmdlZENsZWFyYWJsZVJlZixcbiAgICAgICAgICAgIHBhdHRlcm5JbnB1dEZvY3VzZWQ6IHBhdHRlcm5JbnB1dEZvY3VzZWRSZWYsXG4gICAgICAgICAgICBmaWx0ZXJhYmxlUGxhY2Vob2xkZXI6IGZpbHRlcmFibGVQbGFjZWhvbGRlclJlZixcbiAgICAgICAgICAgIGxhYmVsOiBsYWJlbFJlZixcbiAgICAgICAgICAgIHNlbGVjdGVkOiBzZWxlY3RlZFJlZixcbiAgICAgICAgICAgIHNob3dUYWdzUGFuZWw6IHNob3dUYWdzUG9wb3ZlclJlZixcbiAgICAgICAgICAgIGlzQ29tcG9zaW5nOiBpc0NvbXBvc2luZ1JlZixcbiAgICAgICAgICAgIC8vIGRvbSByZWZcbiAgICAgICAgICAgIGNvdW50ZXJSZWYsXG4gICAgICAgICAgICBjb3VudGVyV3JhcHBlclJlZixcbiAgICAgICAgICAgIHBhdHRlcm5JbnB1dE1pcnJvclJlZixcbiAgICAgICAgICAgIHBhdHRlcm5JbnB1dFJlZixcbiAgICAgICAgICAgIHNlbGZSZWYsXG4gICAgICAgICAgICBtdWx0aXBsZUVsUmVmLFxuICAgICAgICAgICAgc2luZ2xlRWxSZWYsXG4gICAgICAgICAgICBwYXR0ZXJuSW5wdXRXcmFwcGVyUmVmLFxuICAgICAgICAgICAgb3ZlcmZsb3dSZWYsXG4gICAgICAgICAgICBpbnB1dFRhZ0VsUmVmLFxuICAgICAgICAgICAgaGFuZGxlTW91c2VEb3duLFxuICAgICAgICAgICAgaGFuZGxlRm9jdXNpbixcbiAgICAgICAgICAgIGhhbmRsZUNsZWFyLFxuICAgICAgICAgICAgaGFuZGxlTW91c2VFbnRlcixcbiAgICAgICAgICAgIGhhbmRsZU1vdXNlTGVhdmUsXG4gICAgICAgICAgICBoYW5kbGVEZWxldGVPcHRpb24sXG4gICAgICAgICAgICBoYW5kbGVQYXR0ZXJuS2V5RG93bixcbiAgICAgICAgICAgIGhhbmRsZVBhdHRlcm5JbnB1dElucHV0LFxuICAgICAgICAgICAgaGFuZGxlUGF0dGVybklucHV0Qmx1cixcbiAgICAgICAgICAgIGhhbmRsZVBhdHRlcm5JbnB1dEZvY3VzLFxuICAgICAgICAgICAgaGFuZGxlTW91c2VFbnRlckNvdW50ZXIsXG4gICAgICAgICAgICBoYW5kbGVNb3VzZUxlYXZlQ291bnRlcixcbiAgICAgICAgICAgIGhhbmRsZUZvY3Vzb3V0LFxuICAgICAgICAgICAgaGFuZGxlQ29tcG9zaXRpb25FbmQsXG4gICAgICAgICAgICBoYW5kbGVDb21wb3NpdGlvblN0YXJ0LFxuICAgICAgICAgICAgb25Qb3BvdmVyVXBkYXRlU2hvdyxcbiAgICAgICAgICAgIGZvY3VzLFxuICAgICAgICAgICAgZm9jdXNJbnB1dCxcbiAgICAgICAgICAgIGJsdXIsXG4gICAgICAgICAgICBibHVySW5wdXQsXG4gICAgICAgICAgICB1cGRhdGVDb3VudGVyLFxuICAgICAgICAgICAgZ2V0Q291bnRlcixcbiAgICAgICAgICAgIGdldFRhaWwsXG4gICAgICAgICAgICByZW5kZXJMYWJlbDogcHJvcHMucmVuZGVyTGFiZWwsXG4gICAgICAgICAgICBjc3NWYXJzOiBpbmxpbmVUaGVtZURpc2FibGVkID8gdW5kZWZpbmVkIDogY3NzVmFyc1JlZixcbiAgICAgICAgICAgIHRoZW1lQ2xhc3M6IHRoZW1lQ2xhc3NIYW5kbGUgPT09IG51bGwgfHwgdGhlbWVDbGFzc0hhbmRsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGhlbWVDbGFzc0hhbmRsZS50aGVtZUNsYXNzLFxuICAgICAgICAgICAgb25SZW5kZXI6IHRoZW1lQ2xhc3NIYW5kbGUgPT09IG51bGwgfHwgdGhlbWVDbGFzc0hhbmRsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGhlbWVDbGFzc0hhbmRsZS5vblJlbmRlclxuICAgICAgICB9O1xuICAgIH0sXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgbXVsdGlwbGUsIHNpemUsIGRpc2FibGVkLCBmaWx0ZXJhYmxlLCBtYXhUYWdDb3VudCwgYm9yZGVyZWQsIGNsc1ByZWZpeCwgb25SZW5kZXIsIHJlbmRlclRhZywgcmVuZGVyTGFiZWwgfSA9IHRoaXM7XG4gICAgICAgIG9uUmVuZGVyID09PSBudWxsIHx8IG9uUmVuZGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblJlbmRlcigpO1xuICAgICAgICBjb25zdCBtYXhUYWdDb3VudFJlc3BvbnNpdmUgPSBtYXhUYWdDb3VudCA9PT0gJ3Jlc3BvbnNpdmUnO1xuICAgICAgICBjb25zdCBtYXhUYWdDb3VudE51bWVyaWMgPSB0eXBlb2YgbWF4VGFnQ291bnQgPT09ICdudW1iZXInO1xuICAgICAgICBjb25zdCB1c2VNYXhUYWdDb3VudCA9IG1heFRhZ0NvdW50UmVzcG9uc2l2ZSB8fCBtYXhUYWdDb3VudE51bWVyaWM7XG4gICAgICAgIGNvbnN0IHN1ZmZpeCA9IChoKFdyYXBwZXIsIG51bGwsIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IChoKFN1ZmZpeCwgeyBjbHNQcmVmaXg6IGNsc1ByZWZpeCwgbG9hZGluZzogdGhpcy5sb2FkaW5nLCBzaG93QXJyb3c6IHRoaXMuc2hvd0Fycm93LCBzaG93Q2xlYXI6IHRoaXMubWVyZ2VkQ2xlYXJhYmxlICYmIHRoaXMuc2VsZWN0ZWQsIG9uQ2xlYXI6IHRoaXMuaGFuZGxlQ2xlYXIgfSwge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHsgdmFyIF9hLCBfYjsgcmV0dXJuIChfYiA9IChfYSA9IHRoaXMuJHNsb3RzKS5hcnJvdykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpOyB9XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgYm9keTtcbiAgICAgICAgaWYgKG11bHRpcGxlKSB7XG4gICAgICAgICAgICBjb25zdCB7IGxhYmVsRmllbGQgfSA9IHRoaXM7XG4gICAgICAgICAgICBjb25zdCBjcmVhdGVUYWcgPSAob3B0aW9uKSA9PiAoaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLXRhZy13cmFwcGVyYCwga2V5OiBvcHRpb24udmFsdWUgfSwgcmVuZGVyVGFnID8gKHJlbmRlclRhZyh7XG4gICAgICAgICAgICAgICAgb3B0aW9uLFxuICAgICAgICAgICAgICAgIGhhbmRsZUNsb3NlOiAoKSA9PiB7IHRoaXMuaGFuZGxlRGVsZXRlT3B0aW9uKG9wdGlvbik7IH1cbiAgICAgICAgICAgIH0pKSA6IChoKE5UYWcsIHsgc2l6ZTogc2l6ZSwgY2xvc2FibGU6ICFvcHRpb24uZGlzYWJsZWQsIGRpc2FibGVkOiBkaXNhYmxlZCwgb25DbG9zZTogKCkgPT4geyB0aGlzLmhhbmRsZURlbGV0ZU9wdGlvbihvcHRpb24pOyB9LCBpbnRlcm5hbENsb3NlSXNCdXR0b25UYWc6IGZhbHNlLCBpbnRlcm5hbENsb3NlRm9jdXNhYmxlOiBmYWxzZSB9LCB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVuZGVyTGFiZWxcbiAgICAgICAgICAgICAgICAgICAgPyByZW5kZXJMYWJlbChvcHRpb24sIHRydWUpXG4gICAgICAgICAgICAgICAgICAgIDogcmVuZGVyKG9wdGlvbltsYWJlbEZpZWxkXSwgb3B0aW9uLCB0cnVlKVxuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICBjb25zdCBjcmVhdGVPcmlnaW5hbFRhZ05vZGVzID0gKCkgPT4gKG1heFRhZ0NvdW50TnVtZXJpY1xuICAgICAgICAgICAgICAgID8gdGhpcy5zZWxlY3RlZE9wdGlvbnMuc2xpY2UoMCwgbWF4VGFnQ291bnQpXG4gICAgICAgICAgICAgICAgOiB0aGlzLnNlbGVjdGVkT3B0aW9ucykubWFwKGNyZWF0ZVRhZyk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGZpbHRlcmFibGUgPyAoaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLWlucHV0LXRhZ2AsIHJlZjogXCJpbnB1dFRhZ0VsUmVmXCIsIGtleTogXCJfX2lucHV0LXRhZ19fXCIgfSxcbiAgICAgICAgICAgICAgICBoKFwiaW5wdXRcIiwgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbnB1dFByb3BzLCB7IHJlZjogXCJwYXR0ZXJuSW5wdXRSZWZcIiwgdGFiaW5kZXg6IC0xLCBkaXNhYmxlZDogZGlzYWJsZWQsIHZhbHVlOiB0aGlzLnBhdHRlcm4sIGF1dG9mb2N1czogdGhpcy5hdXRvZm9jdXMsIGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLWlucHV0LXRhZ19faW5wdXRgLCBvbkJsdXI6IHRoaXMuaGFuZGxlUGF0dGVybklucHV0Qmx1ciwgb25Gb2N1czogdGhpcy5oYW5kbGVQYXR0ZXJuSW5wdXRGb2N1cywgb25LZXlkb3duOiB0aGlzLmhhbmRsZVBhdHRlcm5LZXlEb3duLCBvbklucHV0OiB0aGlzLmhhbmRsZVBhdHRlcm5JbnB1dElucHV0LCBvbkNvbXBvc2l0aW9uc3RhcnQ6IHRoaXMuaGFuZGxlQ29tcG9zaXRpb25TdGFydCwgb25Db21wb3NpdGlvbmVuZDogdGhpcy5oYW5kbGVDb21wb3NpdGlvbkVuZCB9KSksXG4gICAgICAgICAgICAgICAgaChcInNwYW5cIiwgeyByZWY6IFwicGF0dGVybklucHV0TWlycm9yUmVmXCIsIGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLWlucHV0LXRhZ19fbWlycm9yYCB9LCB0aGlzLnBhdHRlcm4pKSkgOiBudWxsO1xuICAgICAgICAgICAgLy8gTWF5IE92ZXJmbG93XG4gICAgICAgICAgICBjb25zdCByZW5kZXJDb3VudGVyID0gbWF4VGFnQ291bnRSZXNwb25zaXZlXG4gICAgICAgICAgICAgICAgPyAoKSA9PiAoaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLXRhZy13cmFwcGVyYCwgcmVmOiBcImNvdW50ZXJXcmFwcGVyUmVmXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgaChOVGFnLCB7IHNpemU6IHNpemUsIHJlZjogXCJjb3VudGVyUmVmXCIsIG9uTW91c2VlbnRlcjogdGhpcy5oYW5kbGVNb3VzZUVudGVyQ291bnRlciwgb25Nb3VzZWxlYXZlOiB0aGlzLmhhbmRsZU1vdXNlTGVhdmVDb3VudGVyLCBkaXNhYmxlZDogZGlzYWJsZWQgfSkpKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgbGV0IGNvdW50ZXI7XG4gICAgICAgICAgICBpZiAobWF4VGFnQ291bnROdW1lcmljKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCAtIG1heFRhZ0NvdW50O1xuICAgICAgICAgICAgICAgIGlmIChyZXN0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudGVyID0gKGgoXCJkaXZcIiwgeyBjbGFzczogYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdGlvbi10YWctd3JhcHBlcmAsIGtleTogXCJfX2NvdW50ZXJfX1wiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBoKE5UYWcsIHsgc2l6ZTogc2l6ZSwgcmVmOiBcImNvdW50ZXJSZWZcIiwgb25Nb3VzZWVudGVyOiB0aGlzLmhhbmRsZU1vdXNlRW50ZXJDb3VudGVyLCBkaXNhYmxlZDogZGlzYWJsZWQgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IGArJHtyZXN0fWBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdGFncyA9IG1heFRhZ0NvdW50UmVzcG9uc2l2ZSA/IChmaWx0ZXJhYmxlID8gKGgoVk92ZXJmbG93LCB7IHJlZjogXCJvdmVyZmxvd1JlZlwiLCB1cGRhdGVDb3VudGVyOiB0aGlzLnVwZGF0ZUNvdW50ZXIsIGdldENvdW50ZXI6IHRoaXMuZ2V0Q291bnRlciwgZ2V0VGFpbDogdGhpcy5nZXRUYWlsLCBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIH0gfSwge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGNyZWF0ZU9yaWdpbmFsVGFnTm9kZXMsXG4gICAgICAgICAgICAgICAgY291bnRlcjogcmVuZGVyQ291bnRlcixcbiAgICAgICAgICAgICAgICB0YWlsOiAoKSA9PiBpbnB1dFxuICAgICAgICAgICAgfSkpIDogKGgoVk92ZXJmbG93LCB7IHJlZjogXCJvdmVyZmxvd1JlZlwiLCB1cGRhdGVDb3VudGVyOiB0aGlzLnVwZGF0ZUNvdW50ZXIsIGdldENvdW50ZXI6IHRoaXMuZ2V0Q291bnRlciwgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbidcbiAgICAgICAgICAgICAgICB9IH0sIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBjcmVhdGVPcmlnaW5hbFRhZ05vZGVzLFxuICAgICAgICAgICAgICAgIGNvdW50ZXI6IHJlbmRlckNvdW50ZXJcbiAgICAgICAgICAgIH0pKSkgOiBtYXhUYWdDb3VudE51bWVyaWMgPyAoY3JlYXRlT3JpZ2luYWxUYWdOb2RlcygpLmNvbmNhdChjb3VudGVyKSkgOiAoY3JlYXRlT3JpZ2luYWxUYWdOb2RlcygpKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlclBvcG92ZXIgPSB1c2VNYXhUYWdDb3VudFxuICAgICAgICAgICAgICAgID8gKCkgPT4gKGgoXCJkaXZcIiwgeyBjbGFzczogYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdGlvbi1wb3BvdmVyYCB9LCBtYXhUYWdDb3VudFJlc3BvbnNpdmVcbiAgICAgICAgICAgICAgICAgICAgPyBjcmVhdGVPcmlnaW5hbFRhZ05vZGVzKClcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnNlbGVjdGVkT3B0aW9ucy5tYXAoY3JlYXRlVGFnKSkpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBwb3BvdmVyUHJvcHMgPSB1c2VNYXhUYWdDb3VudFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0aGlzLnNob3dUYWdzUGFuZWwsXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdob3ZlcicsXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudDogJ3RvcCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAndHJpZ2dlcicsXG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlU2hvdzogdGhpcy5vblBvcG92ZXJVcGRhdGVTaG93LFxuICAgICAgICAgICAgICAgICAgICB0aGVtZTogdGhpcy5tZXJnZWRUaGVtZS5wZWVycy5Qb3BvdmVyLFxuICAgICAgICAgICAgICAgICAgICB0aGVtZU92ZXJyaWRlczogdGhpcy5tZXJnZWRUaGVtZS5wZWVyT3ZlcnJpZGVzLlBvcG92ZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgY29uc3Qgc2hvd1BsYWNlaG9sZGVyID0gdGhpcy5zZWxlY3RlZFxuICAgICAgICAgICAgICAgID8gZmFsc2VcbiAgICAgICAgICAgICAgICA6IHRoaXMuYWN0aXZlXG4gICAgICAgICAgICAgICAgICAgID8gIXRoaXMucGF0dGVybiAmJiAhdGhpcy5pc0NvbXBvc2luZ1xuICAgICAgICAgICAgICAgICAgICA6IHRydWU7XG4gICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IHNob3dQbGFjZWhvbGRlciA/IChoKFwiZGl2XCIsIHsgY2xhc3M6IGAke2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3Rpb24tcGxhY2Vob2xkZXIgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLW92ZXJsYXlgIH0sXG4gICAgICAgICAgICAgICAgaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLXBsYWNlaG9sZGVyX19pbm5lcmAgfSwgdGhpcy5wbGFjZWhvbGRlcikpKSA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBwb3BvdmVyVHJpZ2dlciA9IGZpbHRlcmFibGUgPyAoaChcImRpdlwiLCB7IHJlZjogXCJwYXR0ZXJuSW5wdXRXcmFwcGVyUmVmXCIsIGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLXRhZ3NgIH0sXG4gICAgICAgICAgICAgICAgdGFncyxcbiAgICAgICAgICAgICAgICBtYXhUYWdDb3VudFJlc3BvbnNpdmUgPyBudWxsIDogaW5wdXQsXG4gICAgICAgICAgICAgICAgc3VmZml4KSkgOiAoaChcImRpdlwiLCB7IHJlZjogXCJtdWx0aXBsZUVsUmVmXCIsIGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLXRhZ3NgLCB0YWJpbmRleDogZGlzYWJsZWQgPyB1bmRlZmluZWQgOiAwIH0sXG4gICAgICAgICAgICAgICAgdGFncyxcbiAgICAgICAgICAgICAgICBzdWZmaXgpKTtcbiAgICAgICAgICAgIGJvZHkgPSAoaChGcmFnbWVudCwgbnVsbCxcbiAgICAgICAgICAgICAgICB1c2VNYXhUYWdDb3VudCA/IChoKE5Qb3BvdmVyLCBPYmplY3QuYXNzaWduKHt9LCBwb3BvdmVyUHJvcHMsIHsgc2Nyb2xsYWJsZTogdHJ1ZSwgc3R5bGU6IFwibWF4LWhlaWdodDogY2FsYyh2YXIoLS12LXRhcmdldC1oZWlnaHQpICogNi42KTtcIiB9KSwge1xuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAoKSA9PiBwb3BvdmVyVHJpZ2dlcixcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmVuZGVyUG9wb3ZlclxuICAgICAgICAgICAgICAgIH0pKSA6IChwb3BvdmVyVHJpZ2dlciksXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzSW5wdXQgPSB0aGlzLnBhdHRlcm4gfHwgdGhpcy5pc0NvbXBvc2luZztcbiAgICAgICAgICAgICAgICBjb25zdCBzaG93UGxhY2Vob2xkZXIgPSB0aGlzLmFjdGl2ZSA/ICFoYXNJbnB1dCA6ICF0aGlzLnNlbGVjdGVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNob3dTZWxlY3RlZExhYmVsID0gdGhpcy5hY3RpdmUgPyBmYWxzZSA6IHRoaXMuc2VsZWN0ZWQ7XG4gICAgICAgICAgICAgICAgYm9keSA9IChoKFwiZGl2XCIsIHsgcmVmOiBcInBhdHRlcm5JbnB1dFdyYXBwZXJSZWZcIiwgY2xhc3M6IGAke2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3Rpb24tbGFiZWxgIH0sXG4gICAgICAgICAgICAgICAgICAgIGgoXCJpbnB1dFwiLCBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmlucHV0UHJvcHMsIHsgcmVmOiBcInBhdHRlcm5JbnB1dFJlZlwiLCBjbGFzczogYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdGlvbi1pbnB1dGAsIHZhbHVlOiB0aGlzLmFjdGl2ZSA/IHRoaXMucGF0dGVybiA6ICcnLCBwbGFjZWhvbGRlcjogXCJcIiwgcmVhZG9ubHk6IGRpc2FibGVkLCBkaXNhYmxlZDogZGlzYWJsZWQsIHRhYmluZGV4OiAtMSwgYXV0b2ZvY3VzOiB0aGlzLmF1dG9mb2N1cywgb25Gb2N1czogdGhpcy5oYW5kbGVQYXR0ZXJuSW5wdXRGb2N1cywgb25CbHVyOiB0aGlzLmhhbmRsZVBhdHRlcm5JbnB1dEJsdXIsIG9uSW5wdXQ6IHRoaXMuaGFuZGxlUGF0dGVybklucHV0SW5wdXQsIG9uQ29tcG9zaXRpb25zdGFydDogdGhpcy5oYW5kbGVDb21wb3NpdGlvblN0YXJ0LCBvbkNvbXBvc2l0aW9uZW5kOiB0aGlzLmhhbmRsZUNvbXBvc2l0aW9uRW5kIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NlbGVjdGVkTGFiZWwgPyAoaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLWxhYmVsX19yZW5kZXItbGFiZWwgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLW92ZXJsYXlgLCBrZXk6IFwiaW5wdXRcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLW92ZXJsYXlfX3dyYXBwZXJgIH0sIHJlbmRlclRhZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcmVuZGVyVGFnKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uOiB0aGlzLnNlbGVjdGVkT3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDbG9zZTogKCkgPT4geyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJlbmRlckxhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcmVuZGVyTGFiZWwodGhpcy5zZWxlY3RlZE9wdGlvbiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByZW5kZXIodGhpcy5sYWJlbCwgdGhpcy5zZWxlY3RlZE9wdGlvbiwgdHJ1ZSkpKSkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzaG93UGxhY2Vob2xkZXIgPyAoaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLXBsYWNlaG9sZGVyICR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdGlvbi1vdmVybGF5YCwga2V5OiBcInBsYWNlaG9sZGVyXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGgoXCJkaXZcIiwgeyBjbGFzczogYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdGlvbi1vdmVybGF5X193cmFwcGVyYCB9LCB0aGlzLmZpbHRlcmFibGVQbGFjZWhvbGRlcikpKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHN1ZmZpeCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYm9keSA9IChoKFwiZGl2XCIsIHsgcmVmOiBcInNpbmdsZUVsUmVmXCIsIGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLWxhYmVsYCwgdGFiaW5kZXg6IHRoaXMuZGlzYWJsZWQgPyB1bmRlZmluZWQgOiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFiZWwgIT09IHVuZGVmaW5lZCA/IChoKFwiZGl2XCIsIHsgY2xhc3M6IGAke2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3Rpb24taW5wdXRgLCB0aXRsZTogZ2V0VGl0bGVBdHRyaWJ1dGUodGhpcy5sYWJlbCksIGtleTogXCJpbnB1dFwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBoKFwiZGl2XCIsIHsgY2xhc3M6IGAke2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3Rpb24taW5wdXRfX2NvbnRlbnRgIH0sIHJlbmRlclRhZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcmVuZGVyVGFnKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uOiB0aGlzLnNlbGVjdGVkT3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDbG9zZTogKCkgPT4geyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJlbmRlckxhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcmVuZGVyTGFiZWwodGhpcy5zZWxlY3RlZE9wdGlvbiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByZW5kZXIodGhpcy5sYWJlbCwgdGhpcy5zZWxlY3RlZE9wdGlvbiwgdHJ1ZSkpKSkgOiAoaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLXBsYWNlaG9sZGVyICR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdGlvbi1vdmVybGF5YCwga2V5OiBcInBsYWNlaG9sZGVyXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGgoXCJkaXZcIiwgeyBjbGFzczogYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdGlvbi1wbGFjZWhvbGRlcl9faW5uZXJgIH0sIHRoaXMucGxhY2Vob2xkZXIpKSksXG4gICAgICAgICAgICAgICAgICAgIHN1ZmZpeCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoaChcImRpdlwiLCB7IHJlZjogXCJzZWxmUmVmXCIsIGNsYXNzOiBbXG4gICAgICAgICAgICAgICAgYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdGlvbmAsXG4gICAgICAgICAgICAgICAgdGhpcy50aGVtZUNsYXNzLFxuICAgICAgICAgICAgICAgIHN0YXR1cyAmJiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLS0ke3N0YXR1c30tc3RhdHVzYCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFtgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLS1hY3RpdmVgXTogdGhpcy5hY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgIFtgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLS1zZWxlY3RlZGBdOiB0aGlzLnNlbGVjdGVkIHx8ICh0aGlzLmFjdGl2ZSAmJiB0aGlzLnBhdHRlcm4pLFxuICAgICAgICAgICAgICAgICAgICBbYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdGlvbi0tZGlzYWJsZWRgXTogdGhpcy5kaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgW2Ake2Nsc1ByZWZpeH0tYmFzZS1zZWxlY3Rpb24tLW11bHRpcGxlYF06IHRoaXMubXVsdGlwbGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvY3VzIGlzIG5vdCBjb250cm9sbGVkIGJ5IHNlbGVjdGlvbiBpdHNlbGYgc2luY2UgaXQgYWx3YXlzIG5lZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gYmUgbWFuYWdlZCB0b2dldGhlciB3aXRoIG1lbnUuIHByb3ZpZGUgOmZvY3VzIHN0eWxlIHdpbGwgY2F1c2VcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFueSByZWR1bmRhbnQgY29kZXMuXG4gICAgICAgICAgICAgICAgICAgIFtgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uLS1mb2N1c2BdOiB0aGlzLmZvY3VzZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLCBzdHlsZTogdGhpcy5jc3NWYXJzLCBvbkNsaWNrOiB0aGlzLm9uQ2xpY2ssIG9uTW91c2VlbnRlcjogdGhpcy5oYW5kbGVNb3VzZUVudGVyLCBvbk1vdXNlbGVhdmU6IHRoaXMuaGFuZGxlTW91c2VMZWF2ZSwgb25LZXlkb3duOiB0aGlzLm9uS2V5ZG93biwgb25Gb2N1c2luOiB0aGlzLmhhbmRsZUZvY3VzaW4sIG9uRm9jdXNvdXQ6IHRoaXMuaGFuZGxlRm9jdXNvdXQsIG9uTW91c2Vkb3duOiB0aGlzLmhhbmRsZU1vdXNlRG93biB9LFxuICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgIGJvcmRlcmVkID8gKGgoXCJkaXZcIiwgeyBjbGFzczogYCR7Y2xzUHJlZml4fS1iYXNlLXNlbGVjdGlvbl9fYm9yZGVyYCB9KSkgOiBudWxsLFxuICAgICAgICAgICAgYm9yZGVyZWQgPyAoaChcImRpdlwiLCB7IGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc2VsZWN0aW9uX19zdGF0ZS1ib3JkZXJgIH0pKSA6IG51bGwpKTtcbiAgICB9XG59KTtcbiIsImltcG9ydCB7IGMsIGNCLCBjRSwgY00sIGNOb3RNIH0gZnJvbSAnLi4vLi4vLi4vLi4vX3V0aWxzL2Nzc3InO1xuLy8gdmFyczpcbi8vIC0tbi1iZXppZXJcbi8vIC0tbi1ib3JkZXJcbi8vIC0tbi1ib3JkZXItYWN0aXZlXG4vLyAtLW4tYm9yZGVyLWZvY3VzXG4vLyAtLW4tYm9yZGVyLWhvdmVyXG4vLyAtLW4tYm9yZGVyLXJhZGl1c1xuLy8gLS1uLWJveC1zaGFkb3ctYWN0aXZlXG4vLyAtLW4tYm94LXNoYWRvdy1mb2N1c1xuLy8gLS1uLWJveC1zaGFkb3ctaG92ZXJcbi8vIC0tbi1jYXJldC1jb2xvclxuLy8gLS1uLWNvbG9yXG4vLyAtLW4tY29sb3ItYWN0aXZlXG4vLyAtLW4tY29sb3ItZGlzYWJsZWRcbi8vIC0tbi1mb250LXNpemVcbi8vIC0tbi1oZWlnaHRcbi8vIC0tbi1wYWRkaW5nLXNpbmdsZVxuLy8gLS1uLXBhZGRpbmctbXVsdGlwbGVcbi8vIC0tbi1wbGFjZWhvbGRlci1jb2xvclxuLy8gLS1uLXBsYWNlaG9sZGVyLWNvbG9yLWRpc2FibGVkXG4vLyAtLW4tdGV4dC1jb2xvclxuLy8gLS1uLXRleHQtY29sb3ItZGlzYWJsZWRcbi8vIC0tbi1hcnJvdy1jb2xvclxuLy8gLS1uLWFycm93LXNpemVcbi8vIC0tbi1sb2FkaW5nLWNvbG9yXG4vLyAuLi5jbGVhciB2YXJzXG4vLyAuLi5mb3JtIGl0ZW0gdmFyc1xuZXhwb3J0IGRlZmF1bHQgYyhbY0IoJ2Jhc2Utc2VsZWN0aW9uJywgYFxuIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiB6LWluZGV4OiBhdXRvO1xuIGJveC1zaGFkb3c6IG5vbmU7XG4gd2lkdGg6IDEwMCU7XG4gbWF4LXdpZHRoOiAxMDAlO1xuIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuIGJvcmRlci1yYWRpdXM6IHZhcigtLW4tYm9yZGVyLXJhZGl1cyk7XG4gbWluLWhlaWdodDogdmFyKC0tbi1oZWlnaHQpO1xuIGxpbmUtaGVpZ2h0OiAxLjU7XG4gZm9udC1zaXplOiB2YXIoLS1uLWZvbnQtc2l6ZSk7XG4gYCwgW2NCKCdiYXNlLWxvYWRpbmcnLCBgXG4gY29sb3I6IHZhcigtLW4tbG9hZGluZy1jb2xvcik7XG4gYCksIGNCKCdiYXNlLXNlbGVjdGlvbi10YWdzJywgJ21pbi1oZWlnaHQ6IHZhcigtLW4taGVpZ2h0KTsnKSwgY0UoJ2JvcmRlciwgc3RhdGUtYm9yZGVyJywgYFxuIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiBsZWZ0OiAwO1xuIHJpZ2h0OiAwO1xuIHRvcDogMDtcbiBib3R0b206IDA7XG4gcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gYm9yZGVyOiB2YXIoLS1uLWJvcmRlcik7XG4gYm9yZGVyLXJhZGl1czogaW5oZXJpdDtcbiB0cmFuc2l0aW9uOlxuIGJveC1zaGFkb3cgLjNzIHZhcigtLW4tYmV6aWVyKSxcbiBib3JkZXItY29sb3IgLjNzIHZhcigtLW4tYmV6aWVyKTtcbiBgKSwgY0UoJ3N0YXRlLWJvcmRlcicsIGBcbiB6LWluZGV4OiAxO1xuIGJvcmRlci1jb2xvcjogIzAwMDA7XG4gYCksIGNCKCdiYXNlLXN1ZmZpeCcsIGBcbiBjdXJzb3I6IHBvaW50ZXI7XG4gcG9zaXRpb246IGFic29sdXRlO1xuIHRvcDogNTAlO1xuIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbiByaWdodDogMTBweDtcbiBgLCBbY0UoJ2Fycm93JywgYFxuIGZvbnQtc2l6ZTogdmFyKC0tbi1hcnJvdy1zaXplKTtcbiBjb2xvcjogdmFyKC0tbi1hcnJvdy1jb2xvcik7XG4gdHJhbnNpdGlvbjogY29sb3IgLjNzIHZhcigtLW4tYmV6aWVyKTtcbiBgKV0pLCBjQignYmFzZS1zZWxlY3Rpb24tb3ZlcmxheScsIGBcbiBkaXNwbGF5OiBmbGV4O1xuIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiBwb2ludGVyLWV2ZW50czogbm9uZTtcbiBwb3NpdGlvbjogYWJzb2x1dGU7XG4gdG9wOiAwO1xuIHJpZ2h0OiAwO1xuIGJvdHRvbTogMDtcbiBsZWZ0OiAwO1xuIHBhZGRpbmc6IHZhcigtLW4tcGFkZGluZy1zaW5nbGUpO1xuIHRyYW5zaXRpb246IGNvbG9yIC4zcyB2YXIoLS1uLWJlemllcik7XG4gYCwgW2NFKCd3cmFwcGVyJywgYFxuIGZsZXgtYmFzaXM6IDA7XG4gZmxleC1ncm93OiAxO1xuIG92ZXJmbG93OiBoaWRkZW47XG4gdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gYCldKSwgY0IoJ2Jhc2Utc2VsZWN0aW9uLXBsYWNlaG9sZGVyJywgYFxuIGNvbG9yOiB2YXIoLS1uLXBsYWNlaG9sZGVyLWNvbG9yKTtcbiBgLCBbY0UoJ2lubmVyJywgYFxuIG1heC13aWR0aDogMTAwJTtcbiBvdmVyZmxvdzogaGlkZGVuO1xuIGApXSksIGNCKCdiYXNlLXNlbGVjdGlvbi10YWdzJywgYFxuIGN1cnNvcjogcG9pbnRlcjtcbiBvdXRsaW5lOiBub25lO1xuIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gcG9zaXRpb246IHJlbGF0aXZlO1xuIHotaW5kZXg6IGF1dG87XG4gZGlzcGxheTogZmxleDtcbiBwYWRkaW5nOiB2YXIoLS1uLXBhZGRpbmctbXVsdGlwbGUpO1xuIGZsZXgtd3JhcDogd3JhcDtcbiBhbGlnbi1pdGVtczogY2VudGVyO1xuIHdpZHRoOiAxMDAlO1xuIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG4gYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbi1jb2xvcik7XG4gYm9yZGVyLXJhZGl1czogaW5oZXJpdDtcbiB0cmFuc2l0aW9uOlxuIGNvbG9yIC4zcyB2YXIoLS1uLWJlemllciksXG4gYm94LXNoYWRvdyAuM3MgdmFyKC0tbi1iZXppZXIpLFxuIGJhY2tncm91bmQtY29sb3IgLjNzIHZhcigtLW4tYmV6aWVyKTtcbiBgKSwgY0IoJ2Jhc2Utc2VsZWN0aW9uLWxhYmVsJywgYFxuIGhlaWdodDogdmFyKC0tbi1oZWlnaHQpO1xuIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuIHdpZHRoOiAxMDAlO1xuIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG4gY3Vyc29yOiBwb2ludGVyO1xuIG91dGxpbmU6IG5vbmU7XG4gei1pbmRleDogYXV0bztcbiBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiB0cmFuc2l0aW9uOlxuIGNvbG9yIC4zcyB2YXIoLS1uLWJlemllciksXG4gYm94LXNoYWRvdyAuM3MgdmFyKC0tbi1iZXppZXIpLFxuIGJhY2tncm91bmQtY29sb3IgLjNzIHZhcigtLW4tYmV6aWVyKTtcbiBib3JkZXItcmFkaXVzOiBpbmhlcml0O1xuIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW4tY29sb3IpO1xuIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gYCwgW2NCKCdiYXNlLXNlbGVjdGlvbi1pbnB1dCcsIGBcbiBmb250LXNpemU6IGluaGVyaXQ7XG4gbGluZS1oZWlnaHQ6IGluaGVyaXQ7XG4gb3V0bGluZTogbm9uZTtcbiBjdXJzb3I6IHBvaW50ZXI7XG4gYm94LXNpemluZzogYm9yZGVyLWJveDtcbiBib3JkZXI6bm9uZTtcbiB3aWR0aDogMTAwJTtcbiBwYWRkaW5nOiB2YXIoLS1uLXBhZGRpbmctc2luZ2xlKTtcbiBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDtcbiBjb2xvcjogdmFyKC0tbi10ZXh0LWNvbG9yKTtcbiB0cmFuc2l0aW9uOiBjb2xvciAuM3MgdmFyKC0tbi1iZXppZXIpO1xuIGNhcmV0LWNvbG9yOiB2YXIoLS1uLWNhcmV0LWNvbG9yKTtcbiBgLCBbY0UoJ2NvbnRlbnQnLCBgXG4gdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gb3ZlcmZsb3c6IGhpZGRlbjtcbiB3aGl0ZS1zcGFjZTogbm93cmFwOyBcbiBgKV0pLCBjRSgncmVuZGVyLWxhYmVsJywgYFxuIGNvbG9yOiB2YXIoLS1uLXRleHQtY29sb3IpO1xuIGApXSksIGNOb3RNKCdkaXNhYmxlZCcsIFtjKCcmOmhvdmVyJywgW2NFKCdzdGF0ZS1ib3JkZXInLCBgXG4gYm94LXNoYWRvdzogdmFyKC0tbi1ib3gtc2hhZG93LWhvdmVyKTtcbiBib3JkZXI6IHZhcigtLW4tYm9yZGVyLWhvdmVyKTtcbiBgKV0pLCBjTSgnZm9jdXMnLCBbY0UoJ3N0YXRlLWJvcmRlcicsIGBcbiBib3gtc2hhZG93OiB2YXIoLS1uLWJveC1zaGFkb3ctZm9jdXMpO1xuIGJvcmRlcjogdmFyKC0tbi1ib3JkZXItZm9jdXMpO1xuIGApXSksIGNNKCdhY3RpdmUnLCBbY0UoJ3N0YXRlLWJvcmRlcicsIGBcbiBib3gtc2hhZG93OiB2YXIoLS1uLWJveC1zaGFkb3ctYWN0aXZlKTtcbiBib3JkZXI6IHZhcigtLW4tYm9yZGVyLWFjdGl2ZSk7XG4gYCksIGNCKCdiYXNlLXNlbGVjdGlvbi1sYWJlbCcsICdiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1uLWNvbG9yLWFjdGl2ZSk7JyksIGNCKCdiYXNlLXNlbGVjdGlvbi10YWdzJywgJ2JhY2tncm91bmQtY29sb3I6IHZhcigtLW4tY29sb3ItYWN0aXZlKTsnKV0pXSksIGNNKCdkaXNhYmxlZCcsICdjdXJzb3I6IG5vdC1hbGxvd2VkOycsIFtjRSgnYXJyb3cnLCBgXG4gY29sb3I6IHZhcigtLW4tYXJyb3ctY29sb3ItZGlzYWJsZWQpO1xuIGApLCBjQignYmFzZS1zZWxlY3Rpb24tbGFiZWwnLCBgXG4gY3Vyc29yOiBub3QtYWxsb3dlZDtcbiBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1uLWNvbG9yLWRpc2FibGVkKTtcbiBgLCBbY0IoJ2Jhc2Utc2VsZWN0aW9uLWlucHV0JywgYFxuIGN1cnNvcjogbm90LWFsbG93ZWQ7XG4gY29sb3I6IHZhcigtLW4tdGV4dC1jb2xvci1kaXNhYmxlZCk7XG4gYCksIGNFKCdyZW5kZXItbGFiZWwnLCBgXG4gY29sb3I6IHZhcigtLW4tdGV4dC1jb2xvci1kaXNhYmxlZCk7XG4gYCldKSwgY0IoJ2Jhc2Utc2VsZWN0aW9uLXRhZ3MnLCBgXG4gY3Vyc29yOiBub3QtYWxsb3dlZDtcbiBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1uLWNvbG9yLWRpc2FibGVkKTtcbiBgKSwgY0IoJ2Jhc2Utc2VsZWN0aW9uLXBsYWNlaG9sZGVyJywgYFxuIGN1cnNvcjogbm90LWFsbG93ZWQ7XG4gY29sb3I6IHZhcigtLW4tcGxhY2Vob2xkZXItY29sb3ItZGlzYWJsZWQpO1xuIGApXSksIGNCKCdiYXNlLXNlbGVjdGlvbi1pbnB1dC10YWcnLCBgXG4gaGVpZ2h0OiBjYWxjKHZhcigtLW4taGVpZ2h0KSAtIDZweCk7XG4gbGluZS1oZWlnaHQ6IGNhbGModmFyKC0tbi1oZWlnaHQpIC0gNnB4KTtcbiBvdXRsaW5lOiBub25lO1xuIGRpc3BsYXk6IG5vbmU7XG4gcG9zaXRpb246IHJlbGF0aXZlO1xuIG1hcmdpbi1ib3R0b206IDNweDtcbiBtYXgtd2lkdGg6IDEwMCU7XG4gdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiBgLCBbY0UoJ2lucHV0JywgYFxuIGZvbnQtc2l6ZTogaW5oZXJpdDtcbiBmb250LWZhbWlseTogaW5oZXJpdDtcbiBtaW4td2lkdGg6IDFweDtcbiBwYWRkaW5nOiAwO1xuIGJhY2tncm91bmQtY29sb3I6ICMwMDAwO1xuIG91dGxpbmU6IG5vbmU7XG4gYm9yZGVyOiBub25lO1xuIG1heC13aWR0aDogMTAwJTtcbiBvdmVyZmxvdzogaGlkZGVuO1xuIHdpZHRoOiAxZW07XG4gbGluZS1oZWlnaHQ6IGluaGVyaXQ7XG4gY3Vyc29yOiBwb2ludGVyO1xuIGNvbG9yOiB2YXIoLS1uLXRleHQtY29sb3IpO1xuIGNhcmV0LWNvbG9yOiB2YXIoLS1uLWNhcmV0LWNvbG9yKTtcbiBgKSwgY0UoJ21pcnJvcicsIGBcbiBwb3NpdGlvbjogYWJzb2x1dGU7XG4gbGVmdDogMDtcbiB0b3A6IDA7XG4gd2hpdGUtc3BhY2U6IHByZTtcbiB2aXNpYmlsaXR5OiBoaWRkZW47XG4gdXNlci1zZWxlY3Q6IG5vbmU7XG4gLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiBvcGFjaXR5OiAwO1xuIGApXSksIFsnd2FybmluZycsICdlcnJvciddLm1hcChzdGF0dXMgPT4gY00oYCR7c3RhdHVzfS1zdGF0dXNgLCBbY0UoJ3N0YXRlLWJvcmRlcicsIGBib3JkZXI6IHZhcigtLW4tYm9yZGVyLSR7c3RhdHVzfSk7YCksIGNOb3RNKCdkaXNhYmxlZCcsIFtjKCcmOmhvdmVyJywgW2NFKCdzdGF0ZS1ib3JkZXInLCBgXG4gYm94LXNoYWRvdzogdmFyKC0tbi1ib3gtc2hhZG93LWhvdmVyLSR7c3RhdHVzfSk7XG4gYm9yZGVyOiB2YXIoLS1uLWJvcmRlci1ob3Zlci0ke3N0YXR1c30pO1xuIGApXSksIGNNKCdhY3RpdmUnLCBbY0UoJ3N0YXRlLWJvcmRlcicsIGBcbiBib3gtc2hhZG93OiB2YXIoLS1uLWJveC1zaGFkb3ctYWN0aXZlLSR7c3RhdHVzfSk7XG4gYm9yZGVyOiB2YXIoLS1uLWJvcmRlci1hY3RpdmUtJHtzdGF0dXN9KTtcbiBgKSwgY0IoJ2Jhc2Utc2VsZWN0aW9uLWxhYmVsJywgYGJhY2tncm91bmQtY29sb3I6IHZhcigtLW4tY29sb3ItYWN0aXZlLSR7c3RhdHVzfSk7YCksIGNCKCdiYXNlLXNlbGVjdGlvbi10YWdzJywgYGJhY2tncm91bmQtY29sb3I6IHZhcigtLW4tY29sb3ItYWN0aXZlLSR7c3RhdHVzfSk7YCldKSwgY00oJ2ZvY3VzJywgW2NFKCdzdGF0ZS1ib3JkZXInLCBgXG4gYm94LXNoYWRvdzogdmFyKC0tbi1ib3gtc2hhZG93LWZvY3VzLSR7c3RhdHVzfSk7XG4gYm9yZGVyOiB2YXIoLS1uLWJvcmRlci1mb2N1cy0ke3N0YXR1c30pO1xuIGApXSldKV0pKV0pLCBjQignYmFzZS1zZWxlY3Rpb24tcG9wb3ZlcicsIGBcbiBtYXJnaW4tYm90dG9tOiAtM3B4O1xuIGRpc3BsYXk6IGZsZXg7XG4gZmxleC13cmFwOiB3cmFwO1xuIG1hcmdpbi1yaWdodDogLThweDtcbiBgKSwgY0IoJ2Jhc2Utc2VsZWN0aW9uLXRhZy13cmFwcGVyJywgYFxuIG1heC13aWR0aDogMTAwJTtcbiBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiBwYWRkaW5nOiAwIDdweCAzcHggMDtcbiBgLCBbYygnJjpsYXN0LWNoaWxkJywgJ3BhZGRpbmctcmlnaHQ6IDA7JyksIGNCKCd0YWcnLCBgXG4gZm9udC1zaXplOiAxNHB4O1xuIG1heC13aWR0aDogMTAwJTtcbiBgLCBbY0UoJ2NvbnRlbnQnLCBgXG4gbGluZS1oZWlnaHQ6IDEuMjU7XG4gdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gb3ZlcmZsb3c6IGhpZGRlbjtcbiBgKV0pXSldKTsiLCJleHBvcnQgZGVmYXVsdCB7XG4gICAgcGFkZGluZ1NpbmdsZTogJzAgMjZweCAwIDEycHgnLFxuICAgIHBhZGRpbmdNdWx0aXBsZTogJzNweCAyNnB4IDAgMTJweCcsXG4gICAgY2xlYXJTaXplOiAnMTZweCcsXG4gICAgYXJyb3dTaXplOiAnMTZweCdcbn07XG4iLCJpbXBvcnQgeyBjaGFuZ2VDb2xvciB9IGZyb20gJ3NlZW1seSc7XG5pbXBvcnQgeyBjb21tb25MaWdodCB9IGZyb20gJy4uLy4uLy4uL19zdHlsZXMvY29tbW9uJztcbmltcG9ydCB7IHBvcG92ZXJMaWdodCB9IGZyb20gJy4uLy4uLy4uL3BvcG92ZXIvc3R5bGVzJztcbmltcG9ydCBjb21tb25WYXJpYWJsZXMgZnJvbSAnLi9fY29tbW9uJztcbmltcG9ydCB7IGNyZWF0ZVRoZW1lIH0gZnJvbSAnLi4vLi4vLi4vX21peGlucyc7XG5jb25zdCBzZWxmID0gKHZhcnMpID0+IHtcbiAgICBjb25zdCB7IGJvcmRlclJhZGl1cywgdGV4dENvbG9yMiwgdGV4dENvbG9yRGlzYWJsZWQsIGlucHV0Q29sb3IsIGlucHV0Q29sb3JEaXNhYmxlZCwgcHJpbWFyeUNvbG9yLCBwcmltYXJ5Q29sb3JIb3Zlciwgd2FybmluZ0NvbG9yLCB3YXJuaW5nQ29sb3JIb3ZlciwgZXJyb3JDb2xvciwgZXJyb3JDb2xvckhvdmVyLCBib3JkZXJDb2xvciwgaWNvbkNvbG9yLCBpY29uQ29sb3JEaXNhYmxlZCwgY2xlYXJDb2xvciwgY2xlYXJDb2xvckhvdmVyLCBjbGVhckNvbG9yUHJlc3NlZCwgcGxhY2Vob2xkZXJDb2xvciwgcGxhY2Vob2xkZXJDb2xvckRpc2FibGVkLCBmb250U2l6ZVRpbnksIGZvbnRTaXplU21hbGwsIGZvbnRTaXplTWVkaXVtLCBmb250U2l6ZUxhcmdlLCBoZWlnaHRUaW55LCBoZWlnaHRTbWFsbCwgaGVpZ2h0TWVkaXVtLCBoZWlnaHRMYXJnZSB9ID0gdmFycztcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb21tb25WYXJpYWJsZXMpLCB7IGZvbnRTaXplVGlueSxcbiAgICAgICAgZm9udFNpemVTbWFsbCxcbiAgICAgICAgZm9udFNpemVNZWRpdW0sXG4gICAgICAgIGZvbnRTaXplTGFyZ2UsXG4gICAgICAgIGhlaWdodFRpbnksXG4gICAgICAgIGhlaWdodFNtYWxsLFxuICAgICAgICBoZWlnaHRNZWRpdW0sXG4gICAgICAgIGhlaWdodExhcmdlLFxuICAgICAgICBib3JkZXJSYWRpdXMsIFxuICAgICAgICAvLyBkZWZhdWx0XG4gICAgICAgIHRleHRDb2xvcjogdGV4dENvbG9yMiwgdGV4dENvbG9yRGlzYWJsZWQsXG4gICAgICAgIHBsYWNlaG9sZGVyQ29sb3IsXG4gICAgICAgIHBsYWNlaG9sZGVyQ29sb3JEaXNhYmxlZCwgY29sb3I6IGlucHV0Q29sb3IsIGNvbG9yRGlzYWJsZWQ6IGlucHV0Q29sb3JEaXNhYmxlZCwgY29sb3JBY3RpdmU6IGlucHV0Q29sb3IsIGJvcmRlcjogYDFweCBzb2xpZCAke2JvcmRlckNvbG9yfWAsIGJvcmRlckhvdmVyOiBgMXB4IHNvbGlkICR7cHJpbWFyeUNvbG9ySG92ZXJ9YCwgYm9yZGVyQWN0aXZlOiBgMXB4IHNvbGlkICR7cHJpbWFyeUNvbG9yfWAsIGJvcmRlckZvY3VzOiBgMXB4IHNvbGlkICR7cHJpbWFyeUNvbG9ySG92ZXJ9YCwgYm94U2hhZG93SG92ZXI6ICdub25lJywgYm94U2hhZG93QWN0aXZlOiBgMCAwIDAgMnB4ICR7Y2hhbmdlQ29sb3IocHJpbWFyeUNvbG9yLCB7XG4gICAgICAgICAgICBhbHBoYTogMC4yXG4gICAgICAgIH0pfWAsIGJveFNoYWRvd0ZvY3VzOiBgMCAwIDAgMnB4ICR7Y2hhbmdlQ29sb3IocHJpbWFyeUNvbG9yLCB7XG4gICAgICAgICAgICBhbHBoYTogMC4yXG4gICAgICAgIH0pfWAsIGNhcmV0Q29sb3I6IHByaW1hcnlDb2xvciwgYXJyb3dDb2xvcjogaWNvbkNvbG9yLCBhcnJvd0NvbG9yRGlzYWJsZWQ6IGljb25Db2xvckRpc2FibGVkLCBsb2FkaW5nQ29sb3I6IHByaW1hcnlDb2xvciwgXG4gICAgICAgIC8vIHdhcm5pbmdcbiAgICAgICAgYm9yZGVyV2FybmluZzogYDFweCBzb2xpZCAke3dhcm5pbmdDb2xvcn1gLCBib3JkZXJIb3Zlcldhcm5pbmc6IGAxcHggc29saWQgJHt3YXJuaW5nQ29sb3JIb3Zlcn1gLCBib3JkZXJBY3RpdmVXYXJuaW5nOiBgMXB4IHNvbGlkICR7d2FybmluZ0NvbG9yfWAsIGJvcmRlckZvY3VzV2FybmluZzogYDFweCBzb2xpZCAke3dhcm5pbmdDb2xvckhvdmVyfWAsIGJveFNoYWRvd0hvdmVyV2FybmluZzogJ25vbmUnLCBib3hTaGFkb3dBY3RpdmVXYXJuaW5nOiBgMCAwIDAgMnB4ICR7Y2hhbmdlQ29sb3Iod2FybmluZ0NvbG9yLCB7XG4gICAgICAgICAgICBhbHBoYTogMC4yXG4gICAgICAgIH0pfWAsIGJveFNoYWRvd0ZvY3VzV2FybmluZzogYDAgMCAwIDJweCAke2NoYW5nZUNvbG9yKHdhcm5pbmdDb2xvciwge1xuICAgICAgICAgICAgYWxwaGE6IDAuMlxuICAgICAgICB9KX1gLCBjb2xvckFjdGl2ZVdhcm5pbmc6IGlucHV0Q29sb3IsIGNhcmV0Q29sb3JXYXJuaW5nOiB3YXJuaW5nQ29sb3IsIFxuICAgICAgICAvLyBlcnJvclxuICAgICAgICBib3JkZXJFcnJvcjogYDFweCBzb2xpZCAke2Vycm9yQ29sb3J9YCwgYm9yZGVySG92ZXJFcnJvcjogYDFweCBzb2xpZCAke2Vycm9yQ29sb3JIb3Zlcn1gLCBib3JkZXJBY3RpdmVFcnJvcjogYDFweCBzb2xpZCAke2Vycm9yQ29sb3J9YCwgYm9yZGVyRm9jdXNFcnJvcjogYDFweCBzb2xpZCAke2Vycm9yQ29sb3JIb3Zlcn1gLCBib3hTaGFkb3dIb3ZlckVycm9yOiAnbm9uZScsIGJveFNoYWRvd0FjdGl2ZUVycm9yOiBgMCAwIDAgMnB4ICR7Y2hhbmdlQ29sb3IoZXJyb3JDb2xvciwge1xuICAgICAgICAgICAgYWxwaGE6IDAuMlxuICAgICAgICB9KX1gLCBib3hTaGFkb3dGb2N1c0Vycm9yOiBgMCAwIDAgMnB4ICR7Y2hhbmdlQ29sb3IoZXJyb3JDb2xvciwge1xuICAgICAgICAgICAgYWxwaGE6IDAuMlxuICAgICAgICB9KX1gLCBjb2xvckFjdGl2ZUVycm9yOiBpbnB1dENvbG9yLCBjYXJldENvbG9yRXJyb3I6IGVycm9yQ29sb3IsIGNsZWFyQ29sb3IsXG4gICAgICAgIGNsZWFyQ29sb3JIb3ZlcixcbiAgICAgICAgY2xlYXJDb2xvclByZXNzZWQgfSk7XG59O1xuY29uc3QgaW50ZXJuYWxTZWxlY3Rpb25MaWdodCA9IGNyZWF0ZVRoZW1lKHtcbiAgICBuYW1lOiAnSW50ZXJuYWxTZWxlY3Rpb24nLFxuICAgIGNvbW1vbjogY29tbW9uTGlnaHQsXG4gICAgcGVlcnM6IHtcbiAgICAgICAgUG9wb3ZlcjogcG9wb3ZlckxpZ2h0XG4gICAgfSxcbiAgICBzZWxmXG59KTtcbmV4cG9ydCBkZWZhdWx0IGludGVybmFsU2VsZWN0aW9uTGlnaHQ7XG4iLCJpbXBvcnQgeyBoLCBkZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnO1xuaW1wb3J0IE5CYXNlQ2xlYXIgZnJvbSAnLi4vLi4vY2xlYXInO1xuaW1wb3J0IE5CYXNlTG9hZGluZyBmcm9tICcuLi8uLi9sb2FkaW5nJztcbmltcG9ydCB7IE5CYXNlSWNvbiB9IGZyb20gJy4uLy4uL2ljb24nO1xuaW1wb3J0IHsgQ2hldnJvbkRvd25JY29uIH0gZnJvbSAnLi4vLi4vaWNvbnMnO1xuaW1wb3J0IHsgcmVzb2x2ZVNsb3QgfSBmcm9tICcuLi8uLi8uLi9fdXRpbHMvdnVlJztcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogJ0ludGVybmFsU2VsZWN0aW9uU3VmZml4JyxcbiAgICBwcm9wczoge1xuICAgICAgICBjbHNQcmVmaXg6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHNob3dBcnJvdzoge1xuICAgICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZFxuICAgICAgICB9LFxuICAgICAgICBzaG93Q2xlYXI6IHtcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICBkZWZhdWx0OiB1bmRlZmluZWRcbiAgICAgICAgfSxcbiAgICAgICAgbG9hZGluZzoge1xuICAgICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2xlYXI6IEZ1bmN0aW9uXG4gICAgfSxcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGNsc1ByZWZpeCB9ID0gcHJvcHM7XG4gICAgICAgICAgICByZXR1cm4gKGgoTkJhc2VMb2FkaW5nLCB7IGNsc1ByZWZpeDogY2xzUHJlZml4LCBjbGFzczogYCR7Y2xzUHJlZml4fS1iYXNlLXN1ZmZpeGAsIHN0cm9rZVdpZHRoOiAyNCwgc2NhbGU6IDAuODUsIHNob3c6IHByb3BzLmxvYWRpbmcgfSwge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHByb3BzLnNob3dBcnJvdyA/IChoKE5CYXNlQ2xlYXIsIHsgY2xzUHJlZml4OiBjbHNQcmVmaXgsIHNob3c6IHByb3BzLnNob3dDbGVhciwgb25DbGVhcjogcHJvcHMub25DbGVhciB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAoKSA9PiAoaChOQmFzZUljb24sIHsgY2xzUHJlZml4OiBjbHNQcmVmaXgsIGNsYXNzOiBgJHtjbHNQcmVmaXh9LWJhc2Utc3VmZml4X19hcnJvd2AgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gcmVzb2x2ZVNsb3Qoc2xvdHMuZGVmYXVsdCwgKCkgPT4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgoQ2hldnJvbkRvd25JY29uLCBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgfSkpIDogbnVsbFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgIH1cbn0pO1xuIiwiaW1wb3J0IHsgb25CZWZvcmVVbm1vdW50LCBvbk1vdW50ZWQgfSBmcm9tICd2dWUnO1xuaW1wb3J0IHsgcmVzaXplT2JzZXJ2ZXJNYW5hZ2VyIH0gZnJvbSAndnVldWMnO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZU9uUmVzaXplKGVsUmVmLCBvblJlc2l6ZSkge1xuICAgIC8vIGl0IG5lZWRuJ3QgYmUgcmVhY3RpdmUgc2luY2UgaXQncyBmb3IgaW50ZXJuYWwgdXNhZ2VcbiAgICBpZiAob25SZXNpemUpIHtcbiAgICAgICAgb25Nb3VudGVkKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IGVsIH0gPSBlbFJlZjtcbiAgICAgICAgICAgIGlmIChlbCkge1xuICAgICAgICAgICAgICAgIHJlc2l6ZU9ic2VydmVyTWFuYWdlci5yZWdpc3RlckhhbmRsZXIoZWwsIG9uUmVzaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBlbCB9ID0gZWxSZWY7XG4gICAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgICAgICByZXNpemVPYnNlcnZlck1hbmFnZXIudW5yZWdpc3RlckhhbmRsZXIoZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJjb25zdCBldmVudFNldCA9IG5ldyBXZWFrU2V0KCk7XG5leHBvcnQgZnVuY3Rpb24gbWFya0V2ZW50RWZmZWN0UGVyZm9ybWVkKGV2ZW50KSB7XG4gICAgZXZlbnRTZXQuYWRkKGV2ZW50KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBldmVudEVmZmVjdE5vdFBlcmZvcm1lZChldmVudCkge1xuICAgIHJldHVybiAhZXZlbnRTZXQuaGFzKGV2ZW50KTtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBnZXRUaXRsZUF0dHJpYnV0ZSh2YWx1ZSkge1xuICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICAvLyBUaGUgZW1wdHkgc3RyaW5nIHNob3VsZCBhbHNvIGJlIHJlc2V0IHRvIHVuZGVmaW5lZC5cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSB8fCB1bmRlZmluZWQ7XG4gICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRXZlbnRIYW5kbGVycyhoYW5kbGVycykge1xuICAgIGNvbnN0IGZpbHRlcmVkSGFuZGxlcnMgPSBoYW5kbGVycy5maWx0ZXIoKGhhbmRsZXIpID0+IGhhbmRsZXIgIT09IHVuZGVmaW5lZCk7XG4gICAgaWYgKGZpbHRlcmVkSGFuZGxlcnMubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgaWYgKGZpbHRlcmVkSGFuZGxlcnMubGVuZ3RoID09PSAxKVxuICAgICAgICByZXR1cm4gZmlsdGVyZWRIYW5kbGVyc1swXTtcbiAgICByZXR1cm4gKGUpID0+IHtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgY3JlYXRlVGV4dFZOb2RlIH0gZnJvbSAndnVlJztcbmV4cG9ydCBjb25zdCByZW5kZXIgPSAociwgLi4uYXJncykgPT4ge1xuICAgIGlmICh0eXBlb2YgciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gciguLi5hcmdzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVUZXh0Vk5vZGUocik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiByID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gY3JlYXRlVGV4dFZOb2RlKFN0cmluZyhyKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59O1xuIiwiaW1wb3J0IHsgaCwgZGVmaW5lQ29tcG9uZW50LCBjb21wdXRlZCwgaW5qZWN0IH0gZnJvbSAndnVlJztcbmltcG9ydCB7IGNvbmZpZ1Byb3ZpZGVySW5qZWN0aW9uS2V5IH0gZnJvbSAnLi4vLi4vY29uZmlnLXByb3ZpZGVyL3NyYy9jb250ZXh0JztcbmltcG9ydCB7IE5CYXNlSWNvbiB9IGZyb20gJy4uLy4uL19pbnRlcm5hbC9pY29uJztcbmltcG9ydCB7IEVtcHR5SWNvbiB9IGZyb20gJy4uLy4uL19pbnRlcm5hbC9pY29ucyc7XG5pbXBvcnQgeyB1c2VDb25maWcsIHVzZUxvY2FsZSwgdXNlVGhlbWUsIHVzZVRoZW1lQ2xhc3MgfSBmcm9tICcuLi8uLi9fbWl4aW5zJztcbmltcG9ydCB7IGNyZWF0ZUtleSB9IGZyb20gJy4uLy4uL191dGlscyc7XG5pbXBvcnQgeyBlbXB0eUxpZ2h0IH0gZnJvbSAnLi4vc3R5bGVzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuL3N0eWxlcy9pbmRleC5jc3NyJztcbmV4cG9ydCBjb25zdCBlbXB0eVByb3BzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB1c2VUaGVtZS5wcm9wcyksIHsgZGVzY3JpcHRpb246IFN0cmluZywgc2hvd0Rlc2NyaXB0aW9uOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LCBzaG93SWNvbjoge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICBkZWZhdWx0OiB0cnVlXG4gICAgfSwgc2l6ZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGRlZmF1bHQ6ICdtZWRpdW0nXG4gICAgfSwgcmVuZGVySWNvbjogRnVuY3Rpb24gfSk7XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6ICdFbXB0eScsXG4gICAgcHJvcHM6IGVtcHR5UHJvcHMsXG4gICAgc2V0dXAocHJvcHMpIHtcbiAgICAgICAgY29uc3QgeyBtZXJnZWRDbHNQcmVmaXhSZWYsIGlubGluZVRoZW1lRGlzYWJsZWQgfSA9IHVzZUNvbmZpZyhwcm9wcyk7XG4gICAgICAgIGNvbnN0IHRoZW1lUmVmID0gdXNlVGhlbWUoJ0VtcHR5JywgJy1lbXB0eScsIHN0eWxlLCBlbXB0eUxpZ2h0LCBwcm9wcywgbWVyZ2VkQ2xzUHJlZml4UmVmKTtcbiAgICAgICAgY29uc3QgeyBsb2NhbGVSZWYgfSA9IHVzZUxvY2FsZSgnRW1wdHknKTtcbiAgICAgICAgY29uc3QgTkNvbmZpZ1Byb3ZpZGVyID0gaW5qZWN0KGNvbmZpZ1Byb3ZpZGVySW5qZWN0aW9uS2V5LCBudWxsKTtcbiAgICAgICAgY29uc3QgbWVyZ2VkRGVzY3JpcHRpb25SZWYgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgICAgIHJldHVybiAoKF9hID0gcHJvcHMuZGVzY3JpcHRpb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChfYyA9IChfYiA9IE5Db25maWdQcm92aWRlciA9PT0gbnVsbCB8fCBOQ29uZmlnUHJvdmlkZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IE5Db25maWdQcm92aWRlci5tZXJnZWRDb21wb25lbnRQcm9wc1JlZi52YWx1ZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLkVtcHR5KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZGVzY3JpcHRpb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbWVyZ2VkUmVuZGVySWNvblJlZiA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICByZXR1cm4gKChfYiA9IChfYSA9IE5Db25maWdQcm92aWRlciA9PT0gbnVsbCB8fCBOQ29uZmlnUHJvdmlkZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IE5Db25maWdQcm92aWRlci5tZXJnZWRDb21wb25lbnRQcm9wc1JlZi52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLkVtcHR5KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucmVuZGVySWNvbikgfHxcbiAgICAgICAgICAgICAgICAoKCkgPT4gaChFbXB0eUljb24sIG51bGwpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNzc1ZhcnNSZWYgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHNpemUgfSA9IHByb3BzO1xuICAgICAgICAgICAgY29uc3QgeyBjb21tb246IHsgY3ViaWNCZXppZXJFYXNlSW5PdXQgfSwgc2VsZjogeyBbY3JlYXRlS2V5KCdpY29uU2l6ZScsIHNpemUpXTogaWNvblNpemUsIFtjcmVhdGVLZXkoJ2ZvbnRTaXplJywgc2l6ZSldOiBmb250U2l6ZSwgdGV4dENvbG9yLCBpY29uQ29sb3IsIGV4dHJhVGV4dENvbG9yIH0gfSA9IHRoZW1lUmVmLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAnLS1uLWljb24tc2l6ZSc6IGljb25TaXplLFxuICAgICAgICAgICAgICAgICctLW4tZm9udC1zaXplJzogZm9udFNpemUsXG4gICAgICAgICAgICAgICAgJy0tbi1iZXppZXInOiBjdWJpY0JlemllckVhc2VJbk91dCxcbiAgICAgICAgICAgICAgICAnLS1uLXRleHQtY29sb3InOiB0ZXh0Q29sb3IsXG4gICAgICAgICAgICAgICAgJy0tbi1pY29uLWNvbG9yJzogaWNvbkNvbG9yLFxuICAgICAgICAgICAgICAgICctLW4tZXh0cmEtdGV4dC1jb2xvcic6IGV4dHJhVGV4dENvbG9yXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdGhlbWVDbGFzc0hhbmRsZSA9IGlubGluZVRoZW1lRGlzYWJsZWRcbiAgICAgICAgICAgID8gdXNlVGhlbWVDbGFzcygnZW1wdHknLCBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGhhc2ggPSAnJztcbiAgICAgICAgICAgICAgICBjb25zdCB7IHNpemUgfSA9IHByb3BzO1xuICAgICAgICAgICAgICAgIGhhc2ggKz0gc2l6ZVswXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDtcbiAgICAgICAgICAgIH0pLCBjc3NWYXJzUmVmLCBwcm9wcylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVyZ2VkQ2xzUHJlZml4OiBtZXJnZWRDbHNQcmVmaXhSZWYsXG4gICAgICAgICAgICBtZXJnZWRSZW5kZXJJY29uOiBtZXJnZWRSZW5kZXJJY29uUmVmLFxuICAgICAgICAgICAgbG9jYWxpemVkRGVzY3JpcHRpb246IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVyZ2VkRGVzY3JpcHRpb25SZWYudmFsdWUgfHwgbG9jYWxlUmVmLnZhbHVlLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjc3NWYXJzOiBpbmxpbmVUaGVtZURpc2FibGVkID8gdW5kZWZpbmVkIDogY3NzVmFyc1JlZixcbiAgICAgICAgICAgIHRoZW1lQ2xhc3M6IHRoZW1lQ2xhc3NIYW5kbGUgPT09IG51bGwgfHwgdGhlbWVDbGFzc0hhbmRsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGhlbWVDbGFzc0hhbmRsZS50aGVtZUNsYXNzLFxuICAgICAgICAgICAgb25SZW5kZXI6IHRoZW1lQ2xhc3NIYW5kbGUgPT09IG51bGwgfHwgdGhlbWVDbGFzc0hhbmRsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGhlbWVDbGFzc0hhbmRsZS5vblJlbmRlclxuICAgICAgICB9O1xuICAgIH0sXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7ICRzbG90cywgbWVyZ2VkQ2xzUHJlZml4LCBvblJlbmRlciB9ID0gdGhpcztcbiAgICAgICAgb25SZW5kZXIgPT09IG51bGwgfHwgb25SZW5kZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uUmVuZGVyKCk7XG4gICAgICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiBbYCR7bWVyZ2VkQ2xzUHJlZml4fS1lbXB0eWAsIHRoaXMudGhlbWVDbGFzc10sIHN0eWxlOiB0aGlzLmNzc1ZhcnMgfSxcbiAgICAgICAgICAgIHRoaXMuc2hvd0ljb24gPyAoaChcImRpdlwiLCB7IGNsYXNzOiBgJHttZXJnZWRDbHNQcmVmaXh9LWVtcHR5X19pY29uYCB9LCAkc2xvdHMuaWNvbiA/ICgkc2xvdHMuaWNvbigpKSA6IChoKE5CYXNlSWNvbiwgeyBjbHNQcmVmaXg6IG1lcmdlZENsc1ByZWZpeCB9LCB7IGRlZmF1bHQ6IHRoaXMubWVyZ2VkUmVuZGVySWNvbiB9KSkpKSA6IG51bGwsXG4gICAgICAgICAgICB0aGlzLnNob3dEZXNjcmlwdGlvbiA/IChoKFwiZGl2XCIsIHsgY2xhc3M6IGAke21lcmdlZENsc1ByZWZpeH0tZW1wdHlfX2Rlc2NyaXB0aW9uYCB9LCAkc2xvdHMuZGVmYXVsdCA/ICRzbG90cy5kZWZhdWx0KCkgOiB0aGlzLmxvY2FsaXplZERlc2NyaXB0aW9uKSkgOiBudWxsLFxuICAgICAgICAgICAgJHNsb3RzLmV4dHJhID8gKGgoXCJkaXZcIiwgeyBjbGFzczogYCR7bWVyZ2VkQ2xzUHJlZml4fS1lbXB0eV9fZXh0cmFgIH0sICRzbG90cy5leHRyYSgpKSkgOiBudWxsKSk7XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgeyBjLCBjQiwgY0UgfSBmcm9tICcuLi8uLi8uLi9fdXRpbHMvY3Nzcic7XG4vLyB2YXJzOlxuLy8gLS1uLWZvbnQtc2l6ZVxuLy8gLS1uLWljb24tc2l6ZVxuLy8gLS1uLWljb24tY29sb3Jcbi8vIC0tbi1iZXppZXJcbi8vIC0tbi10ZXh0LWNvbG9yXG4vLyAtLW4tZXh0cmEtdGV4dC1jb2xvclxuZXhwb3J0IGRlZmF1bHQgY0IoJ2VtcHR5JywgYFxuIGRpc3BsYXk6IGZsZXg7XG4gZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiBhbGlnbi1pdGVtczogY2VudGVyO1xuIGZvbnQtc2l6ZTogdmFyKC0tbi1mb250LXNpemUpO1xuYCwgW2NFKCdpY29uJywgYFxuIHdpZHRoOiB2YXIoLS1uLWljb24tc2l6ZSk7XG4gaGVpZ2h0OiB2YXIoLS1uLWljb24tc2l6ZSk7XG4gZm9udC1zaXplOiB2YXIoLS1uLWljb24tc2l6ZSk7XG4gbGluZS1oZWlnaHQ6IHZhcigtLW4taWNvbi1zaXplKTtcbiBjb2xvcjogdmFyKC0tbi1pY29uLWNvbG9yKTtcbiB0cmFuc2l0aW9uOlxuIGNvbG9yIC4zcyB2YXIoLS1uLWJlemllcik7XG4gYCwgW2MoJysnLCBbY0UoJ2Rlc2NyaXB0aW9uJywgYFxuIG1hcmdpbi10b3A6IDhweDtcbiBgKV0pXSksIGNFKCdkZXNjcmlwdGlvbicsIGBcbiB0cmFuc2l0aW9uOiBjb2xvciAuM3MgdmFyKC0tbi1iZXppZXIpO1xuIGNvbG9yOiB2YXIoLS1uLXRleHQtY29sb3IpO1xuIGApLCBjRSgnZXh0cmEnLCBgXG4gdGV4dC1hbGlnbjogY2VudGVyO1xuIHRyYW5zaXRpb246IGNvbG9yIC4zcyB2YXIoLS1uLWJlemllcik7XG4gbWFyZ2luLXRvcDogMTJweDtcbiBjb2xvcjogdmFyKC0tbi1leHRyYS10ZXh0LWNvbG9yKTtcbiBgKV0pOyIsImV4cG9ydCBkZWZhdWx0IHtcbiAgICBpY29uU2l6ZVNtYWxsOiAnMzRweCcsXG4gICAgaWNvblNpemVNZWRpdW06ICc0MHB4JyxcbiAgICBpY29uU2l6ZUxhcmdlOiAnNDZweCcsXG4gICAgaWNvblNpemVIdWdlOiAnNTJweCdcbn07XG4iLCJpbXBvcnQgY29tbW9uVmFycyBmcm9tICcuL19jb21tb24nO1xuaW1wb3J0IHsgY29tbW9uTGlnaHQgfSBmcm9tICcuLi8uLi9fc3R5bGVzL2NvbW1vbic7XG5leHBvcnQgY29uc3Qgc2VsZiA9ICh2YXJzKSA9PiB7XG4gICAgY29uc3QgeyB0ZXh0Q29sb3JEaXNhYmxlZCwgaWNvbkNvbG9yLCB0ZXh0Q29sb3IyLCBmb250U2l6ZVNtYWxsLCBmb250U2l6ZU1lZGl1bSwgZm9udFNpemVMYXJnZSwgZm9udFNpemVIdWdlIH0gPSB2YXJzO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblZhcnMpLCB7IGZvbnRTaXplU21hbGwsXG4gICAgICAgIGZvbnRTaXplTWVkaXVtLFxuICAgICAgICBmb250U2l6ZUxhcmdlLFxuICAgICAgICBmb250U2l6ZUh1Z2UsIHRleHRDb2xvcjogdGV4dENvbG9yRGlzYWJsZWQsIGljb25Db2xvciwgZXh0cmFUZXh0Q29sb3I6IHRleHRDb2xvcjIgfSk7XG59O1xuY29uc3QgZW1wdHlMaWdodCA9IHtcbiAgICBuYW1lOiAnRW1wdHknLFxuICAgIGNvbW1vbjogY29tbW9uTGlnaHQsXG4gICAgc2VsZlxufTtcbmV4cG9ydCBkZWZhdWx0IGVtcHR5TGlnaHQ7XG4iLCJpbXBvcnQgeyBoLCByZWYsIGNvbXB1dGVkLCB0b1JlZiwgZGVmaW5lQ29tcG9uZW50LCB3YXRjaCwgVHJhbnNpdGlvbiwgd2l0aERpcmVjdGl2ZXMsIHZTaG93LCB3YXRjaEVmZmVjdCB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyBnZXRQcmVjaXNlRXZlbnRUYXJnZXQsIGhhcHBlbnNJbiB9IGZyb20gJ3NlZW1seSc7XG5pbXBvcnQgeyBjcmVhdGVUcmVlTWF0ZSB9IGZyb20gJ3RyZWVtYXRlJztcbmltcG9ydCB7IFZCaW5kZXIsIFZGb2xsb3dlciwgVlRhcmdldCB9IGZyb20gJ3Z1ZXVjJztcbmltcG9ydCB7IHVzZUlzTW91bnRlZCwgdXNlTWVyZ2VkU3RhdGUsIHVzZUNvbXBpdGFibGUgfSBmcm9tICd2b29rcyc7XG5pbXBvcnQgeyBjbGlja291dHNpZGUgfSBmcm9tICd2ZGlycyc7XG5pbXBvcnQgeyB1c2VUaGVtZSwgdXNlQ29uZmlnLCB1c2VMb2NhbGUsIHVzZUZvcm1JdGVtLCB1c2VUaGVtZUNsYXNzIH0gZnJvbSAnLi4vLi4vX21peGlucyc7XG5pbXBvcnQgeyBjYWxsLCBtYXJrRXZlbnRFZmZlY3RQZXJmb3JtZWQsIHVzZUFkanVzdGVkVG8sIHdhcm5PbmNlIH0gZnJvbSAnLi4vLi4vX3V0aWxzJztcbmltcG9ydCB7IE5JbnRlcm5hbFNlbGVjdE1lbnUsIE5JbnRlcm5hbFNlbGVjdGlvbiB9IGZyb20gJy4uLy4uL19pbnRlcm5hbCc7XG5pbXBvcnQgeyBzZWxlY3RMaWdodCB9IGZyb20gJy4uL3N0eWxlcyc7XG5pbXBvcnQgeyBjcmVhdGVWYWxPcHRNYXAsIGZpbHRlck9wdGlvbnMsIGNyZWF0ZVRtT3B0aW9ucywgcGF0dGVybk1hdGNoZWQgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuL3N0eWxlcy9pbmRleC5jc3NyJztcbmV4cG9ydCBjb25zdCBzZWxlY3RQcm9wcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdXNlVGhlbWUucHJvcHMpLCB7IHRvOiB1c2VBZGp1c3RlZFRvLnByb3BUbywgYm9yZGVyZWQ6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgZGVmYXVsdDogdW5kZWZpbmVkXG4gICAgfSwgY2xlYXJhYmxlOiBCb29sZWFuLCBjbGVhckZpbHRlckFmdGVyU2VsZWN0OiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LCBvcHRpb25zOiB7XG4gICAgICAgIHR5cGU6IEFycmF5LFxuICAgICAgICBkZWZhdWx0OiAoKSA9PiBbXVxuICAgIH0sIGRlZmF1bHRWYWx1ZToge1xuICAgICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXIsIEFycmF5XSxcbiAgICAgICAgZGVmYXVsdDogbnVsbFxuICAgIH0sIGtleWJvYXJkOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LCB2YWx1ZTogW1N0cmluZywgTnVtYmVyLCBBcnJheV0sIHBsYWNlaG9sZGVyOiBTdHJpbmcsIG1lbnVQcm9wczogT2JqZWN0LCBtdWx0aXBsZTogQm9vbGVhbiwgc2l6ZTogU3RyaW5nLCBmaWx0ZXJhYmxlOiBCb29sZWFuLCBkaXNhYmxlZDoge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICBkZWZhdWx0OiB1bmRlZmluZWRcbiAgICB9LCByZW1vdGU6IEJvb2xlYW4sIGxvYWRpbmc6IEJvb2xlYW4sIGZpbHRlcjogRnVuY3Rpb24sIHBsYWNlbWVudDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGRlZmF1bHQ6ICdib3R0b20tc3RhcnQnXG4gICAgfSwgd2lkdGhNb2RlOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZGVmYXVsdDogJ3RyaWdnZXInXG4gICAgfSwgdGFnOiBCb29sZWFuLCBvbkNyZWF0ZTogRnVuY3Rpb24sIGZhbGxiYWNrT3B0aW9uOiB7XG4gICAgICAgIHR5cGU6IFtGdW5jdGlvbiwgQm9vbGVhbl0sXG4gICAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZFxuICAgIH0sIHNob3c6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgZGVmYXVsdDogdW5kZWZpbmVkXG4gICAgfSwgc2hvd0Fycm93OiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LCBtYXhUYWdDb3VudDogW051bWJlciwgU3RyaW5nXSwgY29uc2lzdGVudE1lbnVXaWR0aDoge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICBkZWZhdWx0OiB0cnVlXG4gICAgfSwgdmlydHVhbFNjcm9sbDoge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICBkZWZhdWx0OiB0cnVlXG4gICAgfSwgbGFiZWxGaWVsZDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGRlZmF1bHQ6ICdsYWJlbCdcbiAgICB9LCB2YWx1ZUZpZWxkOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZGVmYXVsdDogJ3ZhbHVlJ1xuICAgIH0sIGNoaWxkcmVuRmllbGQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiAnY2hpbGRyZW4nXG4gICAgfSwgcmVuZGVyTGFiZWw6IEZ1bmN0aW9uLCByZW5kZXJPcHRpb246IEZ1bmN0aW9uLCByZW5kZXJUYWc6IEZ1bmN0aW9uLCAnb25VcGRhdGU6dmFsdWUnOiBbRnVuY3Rpb24sIEFycmF5XSwgaW5wdXRQcm9wczogT2JqZWN0LCBub2RlUHJvcHM6IEZ1bmN0aW9uLCBpZ25vcmVDb21wb3NpdGlvbjogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH0sIHNob3dPbkZvY3VzOiBCb29sZWFuLCBcbiAgICAvLyBmb3IganN4XG4gICAgb25VcGRhdGVWYWx1ZTogW0Z1bmN0aW9uLCBBcnJheV0sIG9uQmx1cjogW0Z1bmN0aW9uLCBBcnJheV0sIG9uQ2xlYXI6IFtGdW5jdGlvbiwgQXJyYXldLCBvbkZvY3VzOiBbRnVuY3Rpb24sIEFycmF5XSwgb25TY3JvbGw6IFtGdW5jdGlvbiwgQXJyYXldLCBvblNlYXJjaDogW0Z1bmN0aW9uLCBBcnJheV0sIG9uVXBkYXRlU2hvdzogW0Z1bmN0aW9uLCBBcnJheV0sICdvblVwZGF0ZTpzaG93JzogW0Z1bmN0aW9uLCBBcnJheV0sIGRpc3BsYXlEaXJlY3RpdmU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiAnc2hvdydcbiAgICB9LCByZXNldE1lbnVPbk9wdGlvbnNDaGFuZ2U6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgIH0sIHN0YXR1czogU3RyaW5nLCBzaG93Q2hlY2ttYXJrOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LCBcbiAgICAvKiogZGVwcmVjYXRlZCAqL1xuICAgIG9uQ2hhbmdlOiBbRnVuY3Rpb24sIEFycmF5XSwgaXRlbXM6IEFycmF5IH0pO1xuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgICBuYW1lOiAnU2VsZWN0JyxcbiAgICBwcm9wczogc2VsZWN0UHJvcHMsXG4gICAgc2V0dXAocHJvcHMpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIHdhdGNoRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMuaXRlbXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuT25jZSgnc2VsZWN0JywgJ2BpdGVtc2AgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBgb3B0aW9uc2AgaW5zdGVhZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLm9uQ2hhbmdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgd2Fybk9uY2UoJ3NlbGVjdCcsICdgb24tY2hhbmdlYCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIGBvbi11cGRhdGU6dmFsdWVgIGluc3RlYWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBtZXJnZWRDbHNQcmVmaXhSZWYsIG1lcmdlZEJvcmRlcmVkUmVmLCBuYW1lc3BhY2VSZWYsIGlubGluZVRoZW1lRGlzYWJsZWQgfSA9IHVzZUNvbmZpZyhwcm9wcyk7XG4gICAgICAgIGNvbnN0IHRoZW1lUmVmID0gdXNlVGhlbWUoJ1NlbGVjdCcsICctc2VsZWN0Jywgc3R5bGUsIHNlbGVjdExpZ2h0LCBwcm9wcywgbWVyZ2VkQ2xzUHJlZml4UmVmKTtcbiAgICAgICAgY29uc3QgdW5jb250cm9sbGVkVmFsdWVSZWYgPSByZWYocHJvcHMuZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgY29uc3QgY29udHJvbGxlZFZhbHVlUmVmID0gdG9SZWYocHJvcHMsICd2YWx1ZScpO1xuICAgICAgICBjb25zdCBtZXJnZWRWYWx1ZVJlZiA9IHVzZU1lcmdlZFN0YXRlKGNvbnRyb2xsZWRWYWx1ZVJlZiwgdW5jb250cm9sbGVkVmFsdWVSZWYpO1xuICAgICAgICBjb25zdCBmb2N1c2VkUmVmID0gcmVmKGZhbHNlKTtcbiAgICAgICAgY29uc3QgcGF0dGVyblJlZiA9IHJlZignJyk7XG4gICAgICAgIGNvbnN0IHRyZWVNYXRlUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZUZpZWxkLCBjaGlsZHJlbkZpZWxkIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBjcmVhdGVUbU9wdGlvbnModmFsdWVGaWVsZCwgY2hpbGRyZW5GaWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlVHJlZU1hdGUoZmlsdGVyZWRPcHRpb25zUmVmLnZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHZhbE9wdE1hcFJlZiA9IGNvbXB1dGVkKCgpID0+IGNyZWF0ZVZhbE9wdE1hcChsb2NhbE9wdGlvbnNSZWYudmFsdWUsIHByb3BzLnZhbHVlRmllbGQsIHByb3BzLmNoaWxkcmVuRmllbGQpKTtcbiAgICAgICAgY29uc3QgdW5jb250cm9sbGVkU2hvd1JlZiA9IHJlZihmYWxzZSk7XG4gICAgICAgIGNvbnN0IG1lcmdlZFNob3dSZWYgPSB1c2VNZXJnZWRTdGF0ZSh0b1JlZihwcm9wcywgJ3Nob3cnKSwgdW5jb250cm9sbGVkU2hvd1JlZik7XG4gICAgICAgIGNvbnN0IHRyaWdnZXJSZWYgPSByZWYobnVsbCk7XG4gICAgICAgIGNvbnN0IGZvbGxvd2VyUmVmID0gcmVmKG51bGwpO1xuICAgICAgICBjb25zdCBtZW51UmVmID0gcmVmKG51bGwpO1xuICAgICAgICBjb25zdCB7IGxvY2FsZVJlZiB9ID0gdXNlTG9jYWxlKCdTZWxlY3QnKTtcbiAgICAgICAgY29uc3QgbG9jYWxpemVkUGxhY2Vob2xkZXJSZWYgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gKF9hID0gcHJvcHMucGxhY2Vob2xkZXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxvY2FsZVJlZi52YWx1ZS5wbGFjZWhvbGRlcjtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbXBpdGFibGVPcHRpb25zUmVmID0gdXNlQ29tcGl0YWJsZShwcm9wcywgWydpdGVtcycsICdvcHRpb25zJ10pO1xuICAgICAgICBjb25zdCBlbXB0eUFycmF5ID0gW107XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRPcHRpb25zUmVmID0gcmVmKFtdKTtcbiAgICAgICAgY29uc3QgYmVpbmdDcmVhdGVkT3B0aW9uc1JlZiA9IHJlZihbXSk7XG4gICAgICAgIGNvbnN0IG1lbW9WYWxPcHRNYXBSZWYgPSByZWYobmV3IE1hcCgpKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZEZhbGxiYWNrT3B0aW9uUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBmYWxsYmFja09wdGlvbiB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAoZmFsbGJhY2tPcHRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgbGFiZWxGaWVsZCwgdmFsdWVGaWVsZCB9ID0gcHJvcHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuICh2YWx1ZSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgW2xhYmVsRmllbGRdOiBTdHJpbmcodmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICBbdmFsdWVGaWVsZF06IHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmFsbGJhY2tPcHRpb24gPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihmYWxsYmFja09wdGlvbih2YWx1ZSksIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBsb2NhbE9wdGlvbnNSZWYgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYmVpbmdDcmVhdGVkT3B0aW9uc1JlZi52YWx1ZS5jb25jYXQoY3JlYXRlZE9wdGlvbnNSZWYudmFsdWUpLmNvbmNhdChjb21waXRhYmxlT3B0aW9uc1JlZi52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXNvbHZlZEZpbHRlclJlZiA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZmlsdGVyIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGlmIChmaWx0ZXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjtcbiAgICAgICAgICAgIGNvbnN0IHsgbGFiZWxGaWVsZCwgdmFsdWVGaWVsZCB9ID0gcHJvcHM7XG4gICAgICAgICAgICByZXR1cm4gKHBhdHRlcm4sIG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9uKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBvcHRpb25bbGFiZWxGaWVsZF07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdHRlcm5NYXRjaGVkKHBhdHRlcm4sIGxhYmVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBvcHRpb25bdmFsdWVGaWVsZF07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdHRlcm5NYXRjaGVkKHBhdHRlcm4sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdHRlcm5NYXRjaGVkKHBhdHRlcm4sIFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRPcHRpb25zUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb3BzLnJlbW90ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21waXRhYmxlT3B0aW9uc1JlZi52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IGxvY2FsT3B0aW9ucyB9ID0gbG9jYWxPcHRpb25zUmVmO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IHBhdHRlcm4gfSA9IHBhdHRlcm5SZWY7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXR0ZXJuLmxlbmd0aCB8fCAhcHJvcHMuZmlsdGVyYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxPcHRpb25zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlck9wdGlvbnMobG9jYWxPcHRpb25zLCByZXNvbHZlZEZpbHRlclJlZi52YWx1ZSwgcGF0dGVybiwgcHJvcHMuY2hpbGRyZW5GaWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZnVuY3Rpb24gZ2V0TWVyZ2VkT3B0aW9ucyh2YWx1ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW90ZSA9IHByb3BzLnJlbW90ZTtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IG1lbW9WYWxPcHRNYXAgfSA9IG1lbW9WYWxPcHRNYXBSZWY7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiB2YWxPcHRNYXAgfSA9IHZhbE9wdE1hcFJlZjtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IHdyYXBwZWRGYWxsYmFja09wdGlvbiB9ID0gd3JhcHBlZEZhbGxiYWNrT3B0aW9uUmVmO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdO1xuICAgICAgICAgICAgdmFsdWVzLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbE9wdE1hcC5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaCh2YWxPcHRNYXAuZ2V0KHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlbW90ZSAmJiBtZW1vVmFsT3B0TWFwLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKG1lbW9WYWxPcHRNYXAuZ2V0KHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdyYXBwZWRGYWxsYmFja09wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSB3cmFwcGVkRmFsbGJhY2tPcHRpb24odmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2gob3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRPcHRpb25zUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb3BzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogdmFsdWVzIH0gPSBtZXJnZWRWYWx1ZVJlZjtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWVzKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRNZXJnZWRPcHRpb25zKHZhbHVlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogbWVyZ2VkVmFsdWUgfSA9IG1lcmdlZFZhbHVlUmVmO1xuICAgICAgICAgICAgaWYgKCFwcm9wcy5tdWx0aXBsZSAmJiAhQXJyYXkuaXNBcnJheShtZXJnZWRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobWVyZ2VkVmFsdWUgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRNZXJnZWRPcHRpb25zKFttZXJnZWRWYWx1ZV0pWzBdIHx8IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGZvcm1JdGVtID0gdXNlRm9ybUl0ZW0ocHJvcHMpO1xuICAgICAgICBjb25zdCB7IG1lcmdlZFNpemVSZWYsIG1lcmdlZERpc2FibGVkUmVmLCBtZXJnZWRTdGF0dXNSZWYgfSA9IGZvcm1JdGVtO1xuICAgICAgICBmdW5jdGlvbiBkb1VwZGF0ZVZhbHVlKHZhbHVlLCBvcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25DaGFuZ2UsICdvblVwZGF0ZTp2YWx1ZSc6IF9vblVwZGF0ZVZhbHVlLCBvblVwZGF0ZVZhbHVlIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGNvbnN0IHsgblRyaWdnZXJGb3JtQ2hhbmdlLCBuVHJpZ2dlckZvcm1JbnB1dCB9ID0gZm9ybUl0ZW07XG4gICAgICAgICAgICBpZiAob25DaGFuZ2UpXG4gICAgICAgICAgICAgICAgY2FsbChvbkNoYW5nZSwgdmFsdWUsIG9wdGlvbik7XG4gICAgICAgICAgICBpZiAob25VcGRhdGVWYWx1ZSlcbiAgICAgICAgICAgICAgICBjYWxsKG9uVXBkYXRlVmFsdWUsIHZhbHVlLCBvcHRpb24pO1xuICAgICAgICAgICAgaWYgKF9vblVwZGF0ZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY2FsbChfb25VcGRhdGVWYWx1ZSwgdmFsdWUsIG9wdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bmNvbnRyb2xsZWRWYWx1ZVJlZi52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgblRyaWdnZXJGb3JtQ2hhbmdlKCk7XG4gICAgICAgICAgICBuVHJpZ2dlckZvcm1JbnB1dCgpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRvQmx1cihlKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9uQmx1ciB9ID0gcHJvcHM7XG4gICAgICAgICAgICBjb25zdCB7IG5UcmlnZ2VyRm9ybUJsdXIgfSA9IGZvcm1JdGVtO1xuICAgICAgICAgICAgaWYgKG9uQmx1cilcbiAgICAgICAgICAgICAgICBjYWxsKG9uQmx1ciwgZSk7XG4gICAgICAgICAgICBuVHJpZ2dlckZvcm1CbHVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZG9DbGVhcigpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25DbGVhciB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAob25DbGVhcilcbiAgICAgICAgICAgICAgICBjYWxsKG9uQ2xlYXIpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRvRm9jdXMoZSkge1xuICAgICAgICAgICAgY29uc3QgeyBvbkZvY3VzLCBzaG93T25Gb2N1cyB9ID0gcHJvcHM7XG4gICAgICAgICAgICBjb25zdCB7IG5UcmlnZ2VyRm9ybUZvY3VzIH0gPSBmb3JtSXRlbTtcbiAgICAgICAgICAgIGlmIChvbkZvY3VzKVxuICAgICAgICAgICAgICAgIGNhbGwob25Gb2N1cywgZSk7XG4gICAgICAgICAgICBuVHJpZ2dlckZvcm1Gb2N1cygpO1xuICAgICAgICAgICAgaWYgKHNob3dPbkZvY3VzKSB7XG4gICAgICAgICAgICAgICAgb3Blbk1lbnUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBkb1NlYXJjaCh2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgeyBvblNlYXJjaCB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAob25TZWFyY2gpXG4gICAgICAgICAgICAgICAgY2FsbChvblNlYXJjaCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRvU2Nyb2xsKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25TY3JvbGwgfSA9IHByb3BzO1xuICAgICAgICAgICAgaWYgKG9uU2Nyb2xsKVxuICAgICAgICAgICAgICAgIGNhbGwob25TY3JvbGwsIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW90ZSByZWxhdGVkIG1ldGhvZHNcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTWVtb3JpemVkT3B0aW9ucygpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IHsgcmVtb3RlLCBtdWx0aXBsZSB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAocmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogbWVtb1ZhbE9wdE1hcCB9ID0gbWVtb1ZhbE9wdE1hcFJlZjtcbiAgICAgICAgICAgICAgICBpZiAobXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZUZpZWxkIH0gPSBwcm9wcztcbiAgICAgICAgICAgICAgICAgICAgKF9hID0gc2VsZWN0ZWRPcHRpb25zUmVmLnZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1vVmFsT3B0TWFwLnNldChvcHRpb25bdmFsdWVGaWVsZF0sIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0ZWRPcHRpb25SZWYudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9WYWxPcHRNYXAuc2V0KG9wdGlvbltwcm9wcy52YWx1ZUZpZWxkXSwgb3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBtZW51IHJlbGF0ZWQgbWV0aG9kc1xuICAgICAgICBmdW5jdGlvbiBkb1VwZGF0ZVNob3codmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25VcGRhdGVTaG93LCAnb25VcGRhdGU6c2hvdyc6IF9vblVwZGF0ZVNob3cgfSA9IHByb3BzO1xuICAgICAgICAgICAgaWYgKG9uVXBkYXRlU2hvdylcbiAgICAgICAgICAgICAgICBjYWxsKG9uVXBkYXRlU2hvdywgdmFsdWUpO1xuICAgICAgICAgICAgaWYgKF9vblVwZGF0ZVNob3cpXG4gICAgICAgICAgICAgICAgY2FsbChfb25VcGRhdGVTaG93LCB2YWx1ZSk7XG4gICAgICAgICAgICB1bmNvbnRyb2xsZWRTaG93UmVmLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gb3Blbk1lbnUoKSB7XG4gICAgICAgICAgICBpZiAoIW1lcmdlZERpc2FibGVkUmVmLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZG9VcGRhdGVTaG93KHRydWUpO1xuICAgICAgICAgICAgICAgIHVuY29udHJvbGxlZFNob3dSZWYudmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wcy5maWx0ZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzU2VsZWN0aW9uSW5wdXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY2xvc2VNZW51KCkge1xuICAgICAgICAgICAgZG9VcGRhdGVTaG93KGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVNZW51QWZ0ZXJMZWF2ZSgpIHtcbiAgICAgICAgICAgIHBhdHRlcm5SZWYudmFsdWUgPSAnJztcbiAgICAgICAgICAgIGJlaW5nQ3JlYXRlZE9wdGlvbnNSZWYudmFsdWUgPSBlbXB0eUFycmF5O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjdGl2ZVdpdGhvdXRNZW51T3BlblJlZiA9IHJlZihmYWxzZSk7XG4gICAgICAgIGZ1bmN0aW9uIG9uVHJpZ2dlcklucHV0Rm9jdXMoKSB7XG4gICAgICAgICAgICBpZiAocHJvcHMuZmlsdGVyYWJsZSkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVdpdGhvdXRNZW51T3BlblJlZi52YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gb25UcmlnZ2VySW5wdXRCbHVyKCkge1xuICAgICAgICAgICAgaWYgKHByb3BzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVXaXRob3V0TWVudU9wZW5SZWYudmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoIW1lcmdlZFNob3dSZWYudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlTWVudUFmdGVyTGVhdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlVHJpZ2dlckNsaWNrKCkge1xuICAgICAgICAgICAgaWYgKG1lcmdlZERpc2FibGVkUmVmLnZhbHVlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICghbWVyZ2VkU2hvd1JlZi52YWx1ZSkge1xuICAgICAgICAgICAgICAgIG9wZW5NZW51KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIXByb3BzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxyZWFkeSBmb2N1c2VkLCBkb24ndCBuZWVkIHRvIHJldHVybiBmb2N1c1xuICAgICAgICAgICAgICAgICAgICBjbG9zZU1lbnUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvY3VzU2VsZWN0aW9uSW5wdXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlVHJpZ2dlckJsdXIoZSkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGlmICgoX2IgPSAoX2EgPSBtZW51UmVmLnZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2VsZlJlZikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb2N1c2VkUmVmLnZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICBkb0JsdXIoZSk7XG4gICAgICAgICAgICAvLyBvdXRzaWRlIHNlbGVjdCwgZG9uJ3QgbmVlZCB0byByZXR1cm4gZm9jdXNcbiAgICAgICAgICAgIGNsb3NlTWVudSgpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVRyaWdnZXJGb2N1cyhlKSB7XG4gICAgICAgICAgICBkb0ZvY3VzKGUpO1xuICAgICAgICAgICAgZm9jdXNlZFJlZi52YWx1ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTWVudUZvY3VzKGUpIHtcbiAgICAgICAgICAgIGZvY3VzZWRSZWYudmFsdWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1lbnVCbHVyKGUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmICgoX2EgPSB0cmlnZ2VyUmVmLnZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuJGVsLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZm9jdXNlZFJlZi52YWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgZG9CbHVyKGUpO1xuICAgICAgICAgICAgLy8gb3V0c2lkZSBzZWxlY3QsIGRvbid0IG5lZWQgdG8gcmV0dXJuIGZvY3VzXG4gICAgICAgICAgICBjbG9zZU1lbnUoKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVNZW51VGFiT3V0KCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgKF9hID0gdHJpZ2dlclJlZi52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvY3VzKCk7XG4gICAgICAgICAgICBjbG9zZU1lbnUoKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVNZW51Q2xpY2tPdXRzaWRlKGUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmIChtZXJnZWRTaG93UmVmLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoKF9hID0gdHJpZ2dlclJlZi52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLiRlbC5jb250YWlucyhnZXRQcmVjaXNlRXZlbnRUYXJnZXQoZSkpKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBvdXRzaWRlIHNlbGVjdCwgZG9uJ3QgbmVlZCB0byByZXR1cm4gZm9jdXNcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VNZW51KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNsZWFyZWRNdWx0aXBsZVNlbGVjdFZhbHVlKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIGlmICh3cmFwcGVkRmFsbGJhY2tPcHRpb25SZWYudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBvcHRpb24gaGFzIGEgZmFsbGJhY2ssIEkgY2FuJ3QgaGVscCB1c2VyIHRvIGNsZWFyIHNvbWUgdW5rbm93biB2YWx1ZVxuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gb3B0aW9uIGZhbGxiYWNrLCB1bmFwcGVhcmVkIG9wdGlvbnMgYXJlIHRyZWF0ZWQgYXMgaW52YWxpZFxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcmVtb3RlIH0gPSBwcm9wcztcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlOiB2YWxPcHRNYXAgfSA9IHZhbE9wdE1hcFJlZjtcbiAgICAgICAgICAgICAgICBpZiAocmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IG1lbW9WYWxPcHRNYXAgfSA9IG1lbW9WYWxPcHRNYXBSZWY7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5maWx0ZXIoKHYpID0+IHZhbE9wdE1hcC5oYXModikgfHwgbWVtb1ZhbE9wdE1hcC5oYXModikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmZpbHRlcigodikgPT4gdmFsT3B0TWFwLmhhcyh2KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVRvZ2dsZUJ5VG1Ob2RlKHRtTm9kZSkge1xuICAgICAgICAgICAgaGFuZGxlVG9nZ2xlQnlPcHRpb24odG1Ob2RlLnJhd05vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVRvZ2dsZUJ5T3B0aW9uKG9wdGlvbikge1xuICAgICAgICAgICAgaWYgKG1lcmdlZERpc2FibGVkUmVmLnZhbHVlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHsgdGFnLCByZW1vdGUsIGNsZWFyRmlsdGVyQWZ0ZXJTZWxlY3QsIHZhbHVlRmllbGQgfSA9IHByb3BzO1xuICAgICAgICAgICAgaWYgKHRhZyAmJiAhcmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogYmVpbmdDcmVhdGVkT3B0aW9ucyB9ID0gYmVpbmdDcmVhdGVkT3B0aW9uc1JlZjtcbiAgICAgICAgICAgICAgICBjb25zdCBiZWluZ0NyZWF0ZWRPcHRpb24gPSBiZWluZ0NyZWF0ZWRPcHRpb25zWzBdIHx8IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGJlaW5nQ3JlYXRlZE9wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVkT3B0aW9ucyA9IGNyZWF0ZWRPcHRpb25zUmVmLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNyZWF0ZWRPcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZE9wdGlvbnNSZWYudmFsdWUgPSBbYmVpbmdDcmVhdGVkT3B0aW9uXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRPcHRpb25zLnB1c2goYmVpbmdDcmVhdGVkT3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBiZWluZ0NyZWF0ZWRPcHRpb25zUmVmLnZhbHVlID0gZW1wdHlBcnJheTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgbWVtb1ZhbE9wdE1hcFJlZi52YWx1ZS5zZXQob3B0aW9uW3ZhbHVlRmllbGRdLCBvcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlZFZhbHVlID0gY3JlYXRlQ2xlYXJlZE11bHRpcGxlU2VsZWN0VmFsdWUobWVyZ2VkVmFsdWVSZWYudmFsdWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2hhbmdlZFZhbHVlLmZpbmRJbmRleCgodmFsdWUpID0+IHZhbHVlID09PSBvcHRpb25bdmFsdWVGaWVsZF0pO1xuICAgICAgICAgICAgICAgIGlmICh+aW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZFZhbHVlLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWcgJiYgIXJlbW90ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlZE9wdGlvbkluZGV4ID0gZ2V0Q3JlYXRlZE9wdGlvbkluZGV4KG9wdGlvblt2YWx1ZUZpZWxkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAofmNyZWF0ZWRPcHRpb25JbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRPcHRpb25zUmVmLnZhbHVlLnNwbGljZShjcmVhdGVkT3B0aW9uSW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGVhckZpbHRlckFmdGVyU2VsZWN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuUmVmLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWRWYWx1ZS5wdXNoKG9wdGlvblt2YWx1ZUZpZWxkXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGVhckZpbHRlckFmdGVyU2VsZWN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVyblJlZi52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkb1VwZGF0ZVZhbHVlKGNoYW5nZWRWYWx1ZSwgZ2V0TWVyZ2VkT3B0aW9ucyhjaGFuZ2VkVmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0YWcgJiYgIXJlbW90ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVkT3B0aW9uSW5kZXggPSBnZXRDcmVhdGVkT3B0aW9uSW5kZXgob3B0aW9uW3ZhbHVlRmllbGRdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKH5jcmVhdGVkT3B0aW9uSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRPcHRpb25zUmVmLnZhbHVlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRPcHRpb25zUmVmLnZhbHVlW2NyZWF0ZWRPcHRpb25JbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkT3B0aW9uc1JlZi52YWx1ZSA9IGVtcHR5QXJyYXk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9jdXNTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjbG9zZU1lbnUoKTtcbiAgICAgICAgICAgICAgICBkb1VwZGF0ZVZhbHVlKG9wdGlvblt2YWx1ZUZpZWxkXSwgb3B0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRDcmVhdGVkT3B0aW9uSW5kZXgob3B0aW9uVmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWRPcHRpb25zID0gY3JlYXRlZE9wdGlvbnNSZWYudmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlZE9wdGlvbnMuZmluZEluZGV4KChjcmVhdGVkT3B0aW9uKSA9PiBjcmVhdGVkT3B0aW9uW3Byb3BzLnZhbHVlRmllbGRdID09PSBvcHRpb25WYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUGF0dGVybklucHV0KGUpIHtcbiAgICAgICAgICAgIGlmICghbWVyZ2VkU2hvd1JlZi52YWx1ZSkge1xuICAgICAgICAgICAgICAgIG9wZW5NZW51KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHBhdHRlcm5SZWYudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHsgdGFnLCByZW1vdGUgfSA9IHByb3BzO1xuICAgICAgICAgICAgZG9TZWFyY2godmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRhZyAmJiAhcmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBiZWluZ0NyZWF0ZWRPcHRpb25zUmVmLnZhbHVlID0gZW1wdHlBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IG9uQ3JlYXRlIH0gPSBwcm9wcztcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25CZWluZ0NyZWF0ZWQgPSBvbkNyZWF0ZVxuICAgICAgICAgICAgICAgICAgICA/IG9uQ3JlYXRlKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICA6IHsgW3Byb3BzLmxhYmVsRmllbGRdOiB2YWx1ZSwgW3Byb3BzLnZhbHVlRmllbGRdOiB2YWx1ZSB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWVGaWVsZCB9ID0gcHJvcHM7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBpdGFibGVPcHRpb25zUmVmLnZhbHVlLnNvbWUoKG9wdGlvbikgPT4gb3B0aW9uW3ZhbHVlRmllbGRdID09PSBvcHRpb25CZWluZ0NyZWF0ZWRbdmFsdWVGaWVsZF0pIHx8XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRPcHRpb25zUmVmLnZhbHVlLnNvbWUoKG9wdGlvbikgPT4gb3B0aW9uW3ZhbHVlRmllbGRdID09PSBvcHRpb25CZWluZ0NyZWF0ZWRbdmFsdWVGaWVsZF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlaW5nQ3JlYXRlZE9wdGlvbnNSZWYudmFsdWUgPSBlbXB0eUFycmF5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmVpbmdDcmVhdGVkT3B0aW9uc1JlZi52YWx1ZSA9IFtvcHRpb25CZWluZ0NyZWF0ZWRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVDbGVhcihlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgeyBtdWx0aXBsZSB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAoIW11bHRpcGxlICYmIHByb3BzLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICBjbG9zZU1lbnUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvQ2xlYXIoKTtcbiAgICAgICAgICAgIGlmIChtdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGRvVXBkYXRlVmFsdWUoW10sIFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvVXBkYXRlVmFsdWUobnVsbCwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTWVudU1vdXNlZG93bihlKSB7XG4gICAgICAgICAgICBpZiAoIWhhcHBlbnNJbihlLCAnYWN0aW9uJykgJiYgIWhhcHBlbnNJbihlLCAnZW1wdHknKSlcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2Nyb2xsIGV2ZW50cyBvbiBtZW51XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1lbnVTY3JvbGwoZSkge1xuICAgICAgICAgICAgZG9TY3JvbGwoZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8ga2V5Ym9hcmQgZXZlbnRzXG4gICAgICAgIC8vIGFsc28gZm9yIG1lbnUga2V5ZG93blxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVLZXlkb3duKGUpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgICAgICBpZiAoIXByb3BzLmtleWJvYXJkKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICcgJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BzLmZpbHRlcmFibGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZmFsbHRocm91Z2hcbiAgICAgICAgICAgICAgICBjYXNlICdFbnRlcic6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKChfYSA9IHRyaWdnZXJSZWYudmFsdWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0NvbXBvc2luZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZWRTaG93UmVmLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVuZGluZ1RtTm9kZSA9IChfYiA9IG1lbnVSZWYudmFsdWUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5nZXRQZW5kaW5nVG1Ob2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdUbU5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlVG9nZ2xlQnlUbU5vZGUocGVuZGluZ1RtTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFwcm9wcy5maWx0ZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5NZW51KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BzLnRhZyAmJiBhY3RpdmVXaXRob3V0TWVudU9wZW5SZWYudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmVpbmdDcmVhdGVkT3B0aW9uID0gYmVpbmdDcmVhdGVkT3B0aW9uc1JlZi52YWx1ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJlaW5nQ3JlYXRlZE9wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBiZWluZ0NyZWF0ZWRPcHRpb25bcHJvcHMudmFsdWVGaWVsZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBtZXJnZWRWYWx1ZSB9ID0gbWVyZ2VkVmFsdWVSZWY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcHMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXJnZWRWYWx1ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkVmFsdWUuc29tZSgodmFsdWUpID0+IHZhbHVlID09PSBvcHRpb25WYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlVG9nZ2xlQnlPcHRpb24oYmVpbmdDcmVhdGVkT3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVUb2dnbGVCeU9wdGlvbihiZWluZ0NyZWF0ZWRPcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BzLmxvYWRpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZWRTaG93UmVmLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoX2MgPSBtZW51UmVmLnZhbHVlKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MucHJldigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BzLmxvYWRpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZWRTaG93UmVmLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoX2QgPSBtZW51UmVmLnZhbHVlKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QubmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3Blbk1lbnUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdFc2NhcGUnOlxuICAgICAgICAgICAgICAgICAgICBpZiAobWVyZ2VkU2hvd1JlZi52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya0V2ZW50RWZmZWN0UGVyZm9ybWVkKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VNZW51KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKF9lID0gdHJpZ2dlclJlZi52YWx1ZSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGZvY3VzU2VsZWN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgKF9hID0gdHJpZ2dlclJlZi52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZm9jdXNTZWxlY3Rpb25JbnB1dCgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIChfYSA9IHRyaWdnZXJSZWYudmFsdWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb2N1c0lucHV0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlVHJpZ2dlck9yTWVudVJlc2l6ZSgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmICghbWVyZ2VkU2hvd1JlZi52YWx1ZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAoX2EgPSBmb2xsb3dlclJlZi52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN5bmNQb3NpdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZU1lbW9yaXplZE9wdGlvbnMoKTtcbiAgICAgICAgd2F0Y2godG9SZWYocHJvcHMsICdvcHRpb25zJyksIHVwZGF0ZU1lbW9yaXplZE9wdGlvbnMpO1xuICAgICAgICBjb25zdCBleHBvc2VkTWV0aG9kcyA9IHtcbiAgICAgICAgICAgIGZvY3VzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIChfYSA9IHRyaWdnZXJSZWYudmFsdWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb2N1cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJsdXI6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgKF9hID0gdHJpZ2dlclJlZi52YWx1ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJsdXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY3NzVmFyc1JlZiA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc2VsZjogeyBtZW51Qm94U2hhZG93IH0gfSA9IHRoZW1lUmVmLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAnLS1uLW1lbnUtYm94LXNoYWRvdyc6IG1lbnVCb3hTaGFkb3dcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0aGVtZUNsYXNzSGFuZGxlID0gaW5saW5lVGhlbWVEaXNhYmxlZFxuICAgICAgICAgICAgPyB1c2VUaGVtZUNsYXNzKCdzZWxlY3QnLCB1bmRlZmluZWQsIGNzc1ZhcnNSZWYsIHByb3BzKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGV4cG9zZWRNZXRob2RzKSwgeyBtZXJnZWRTdGF0dXM6IG1lcmdlZFN0YXR1c1JlZiwgbWVyZ2VkQ2xzUHJlZml4OiBtZXJnZWRDbHNQcmVmaXhSZWYsIG1lcmdlZEJvcmRlcmVkOiBtZXJnZWRCb3JkZXJlZFJlZiwgbmFtZXNwYWNlOiBuYW1lc3BhY2VSZWYsIHRyZWVNYXRlOiB0cmVlTWF0ZVJlZiwgaXNNb3VudGVkOiB1c2VJc01vdW50ZWQoKSwgdHJpZ2dlclJlZixcbiAgICAgICAgICAgIG1lbnVSZWYsIHBhdHRlcm46IHBhdHRlcm5SZWYsIHVuY29udHJvbGxlZFNob3c6IHVuY29udHJvbGxlZFNob3dSZWYsIG1lcmdlZFNob3c6IG1lcmdlZFNob3dSZWYsIGFkanVzdGVkVG86IHVzZUFkanVzdGVkVG8ocHJvcHMpLCB1bmNvbnRyb2xsZWRWYWx1ZTogdW5jb250cm9sbGVkVmFsdWVSZWYsIG1lcmdlZFZhbHVlOiBtZXJnZWRWYWx1ZVJlZiwgZm9sbG93ZXJSZWYsIGxvY2FsaXplZFBsYWNlaG9sZGVyOiBsb2NhbGl6ZWRQbGFjZWhvbGRlclJlZiwgc2VsZWN0ZWRPcHRpb246IHNlbGVjdGVkT3B0aW9uUmVmLCBzZWxlY3RlZE9wdGlvbnM6IHNlbGVjdGVkT3B0aW9uc1JlZiwgbWVyZ2VkU2l6ZTogbWVyZ2VkU2l6ZVJlZiwgbWVyZ2VkRGlzYWJsZWQ6IG1lcmdlZERpc2FibGVkUmVmLCBmb2N1c2VkOiBmb2N1c2VkUmVmLCBhY3RpdmVXaXRob3V0TWVudU9wZW46IGFjdGl2ZVdpdGhvdXRNZW51T3BlblJlZiwgaW5saW5lVGhlbWVEaXNhYmxlZCxcbiAgICAgICAgICAgIG9uVHJpZ2dlcklucHV0Rm9jdXMsXG4gICAgICAgICAgICBvblRyaWdnZXJJbnB1dEJsdXIsXG4gICAgICAgICAgICBoYW5kbGVUcmlnZ2VyT3JNZW51UmVzaXplLFxuICAgICAgICAgICAgaGFuZGxlTWVudUZvY3VzLFxuICAgICAgICAgICAgaGFuZGxlTWVudUJsdXIsXG4gICAgICAgICAgICBoYW5kbGVNZW51VGFiT3V0LFxuICAgICAgICAgICAgaGFuZGxlVHJpZ2dlckNsaWNrLCBoYW5kbGVUb2dnbGU6IGhhbmRsZVRvZ2dsZUJ5VG1Ob2RlLCBoYW5kbGVEZWxldGVPcHRpb246IGhhbmRsZVRvZ2dsZUJ5T3B0aW9uLCBoYW5kbGVQYXR0ZXJuSW5wdXQsXG4gICAgICAgICAgICBoYW5kbGVDbGVhcixcbiAgICAgICAgICAgIGhhbmRsZVRyaWdnZXJCbHVyLFxuICAgICAgICAgICAgaGFuZGxlVHJpZ2dlckZvY3VzLFxuICAgICAgICAgICAgaGFuZGxlS2V5ZG93bixcbiAgICAgICAgICAgIGhhbmRsZU1lbnVBZnRlckxlYXZlLFxuICAgICAgICAgICAgaGFuZGxlTWVudUNsaWNrT3V0c2lkZSxcbiAgICAgICAgICAgIGhhbmRsZU1lbnVTY3JvbGwsIGhhbmRsZU1lbnVLZXlkb3duOiBoYW5kbGVLZXlkb3duLCBoYW5kbGVNZW51TW91c2Vkb3duLCBtZXJnZWRUaGVtZTogdGhlbWVSZWYsIGNzc1ZhcnM6IGlubGluZVRoZW1lRGlzYWJsZWQgPyB1bmRlZmluZWQgOiBjc3NWYXJzUmVmLCB0aGVtZUNsYXNzOiB0aGVtZUNsYXNzSGFuZGxlID09PSBudWxsIHx8IHRoZW1lQ2xhc3NIYW5kbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRoZW1lQ2xhc3NIYW5kbGUudGhlbWVDbGFzcywgb25SZW5kZXI6IHRoZW1lQ2xhc3NIYW5kbGUgPT09IG51bGwgfHwgdGhlbWVDbGFzc0hhbmRsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGhlbWVDbGFzc0hhbmRsZS5vblJlbmRlciB9KTtcbiAgICB9LFxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IGAke3RoaXMubWVyZ2VkQ2xzUHJlZml4fS1zZWxlY3RgIH0sXG4gICAgICAgICAgICBoKFZCaW5kZXIsIG51bGwsIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBbXG4gICAgICAgICAgICAgICAgICAgIGgoVlRhcmdldCwgbnVsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gKGgoTkludGVybmFsU2VsZWN0aW9uLCB7IHJlZjogXCJ0cmlnZ2VyUmVmXCIsIGlubGluZVRoZW1lRGlzYWJsZWQ6IHRoaXMuaW5saW5lVGhlbWVEaXNhYmxlZCwgc3RhdHVzOiB0aGlzLm1lcmdlZFN0YXR1cywgaW5wdXRQcm9wczogdGhpcy5pbnB1dFByb3BzLCBjbHNQcmVmaXg6IHRoaXMubWVyZ2VkQ2xzUHJlZml4LCBzaG93QXJyb3c6IHRoaXMuc2hvd0Fycm93LCBtYXhUYWdDb3VudDogdGhpcy5tYXhUYWdDb3VudCwgYm9yZGVyZWQ6IHRoaXMubWVyZ2VkQm9yZGVyZWQsIGFjdGl2ZTogdGhpcy5hY3RpdmVXaXRob3V0TWVudU9wZW4gfHwgdGhpcy5tZXJnZWRTaG93LCBwYXR0ZXJuOiB0aGlzLnBhdHRlcm4sIHBsYWNlaG9sZGVyOiB0aGlzLmxvY2FsaXplZFBsYWNlaG9sZGVyLCBzZWxlY3RlZE9wdGlvbjogdGhpcy5zZWxlY3RlZE9wdGlvbiwgc2VsZWN0ZWRPcHRpb25zOiB0aGlzLnNlbGVjdGVkT3B0aW9ucywgbXVsdGlwbGU6IHRoaXMubXVsdGlwbGUsIHJlbmRlclRhZzogdGhpcy5yZW5kZXJUYWcsIHJlbmRlckxhYmVsOiB0aGlzLnJlbmRlckxhYmVsLCBmaWx0ZXJhYmxlOiB0aGlzLmZpbHRlcmFibGUsIGNsZWFyYWJsZTogdGhpcy5jbGVhcmFibGUsIGRpc2FibGVkOiB0aGlzLm1lcmdlZERpc2FibGVkLCBzaXplOiB0aGlzLm1lcmdlZFNpemUsIHRoZW1lOiB0aGlzLm1lcmdlZFRoZW1lLnBlZXJzLkludGVybmFsU2VsZWN0aW9uLCBsYWJlbEZpZWxkOiB0aGlzLmxhYmVsRmllbGQsIHZhbHVlRmllbGQ6IHRoaXMudmFsdWVGaWVsZCwgdGhlbWVPdmVycmlkZXM6IHRoaXMubWVyZ2VkVGhlbWUucGVlck92ZXJyaWRlcy5JbnRlcm5hbFNlbGVjdGlvbiwgbG9hZGluZzogdGhpcy5sb2FkaW5nLCBmb2N1c2VkOiB0aGlzLmZvY3VzZWQsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlVHJpZ2dlckNsaWNrLCBvbkRlbGV0ZU9wdGlvbjogdGhpcy5oYW5kbGVEZWxldGVPcHRpb24sIG9uUGF0dGVybklucHV0OiB0aGlzLmhhbmRsZVBhdHRlcm5JbnB1dCwgb25DbGVhcjogdGhpcy5oYW5kbGVDbGVhciwgb25CbHVyOiB0aGlzLmhhbmRsZVRyaWdnZXJCbHVyLCBvbkZvY3VzOiB0aGlzLmhhbmRsZVRyaWdnZXJGb2N1cywgb25LZXlkb3duOiB0aGlzLmhhbmRsZUtleWRvd24sIG9uUGF0dGVybkJsdXI6IHRoaXMub25UcmlnZ2VySW5wdXRCbHVyLCBvblBhdHRlcm5Gb2N1czogdGhpcy5vblRyaWdnZXJJbnB1dEZvY3VzLCBvblJlc2l6ZTogdGhpcy5oYW5kbGVUcmlnZ2VyT3JNZW51UmVzaXplLCBpZ25vcmVDb21wb3NpdGlvbjogdGhpcy5pZ25vcmVDb21wb3NpdGlvbiB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyb3c6ICgpID0+IHsgdmFyIF9hLCBfYjsgcmV0dXJuIFsoX2IgPSAoX2EgPSB0aGlzLiRzbG90cykuYXJyb3cpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hKV07IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgaChWRm9sbG93ZXIsIHsgcmVmOiBcImZvbGxvd2VyUmVmXCIsIHNob3c6IHRoaXMubWVyZ2VkU2hvdywgdG86IHRoaXMuYWRqdXN0ZWRUbywgdGVsZXBvcnREaXNhYmxlZDogdGhpcy5hZGp1c3RlZFRvID09PSB1c2VBZGp1c3RlZFRvLnRka2V5LCBjb250YWluZXJDbGFzczogdGhpcy5uYW1lc3BhY2UsIHdpZHRoOiB0aGlzLmNvbnNpc3RlbnRNZW51V2lkdGggPyAndGFyZ2V0JyA6IHVuZGVmaW5lZCwgbWluV2lkdGg6IFwidGFyZ2V0XCIsIHBsYWNlbWVudDogdGhpcy5wbGFjZW1lbnQgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gKGgoVHJhbnNpdGlvbiwgeyBuYW1lOiBcImZhZGUtaW4tc2NhbGUtdXAtdHJhbnNpdGlvblwiLCBhcHBlYXI6IHRoaXMuaXNNb3VudGVkLCBvbkFmdGVyTGVhdmU6IHRoaXMuaGFuZGxlTWVudUFmdGVyTGVhdmUgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMubWVyZ2VkU2hvdyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5RGlyZWN0aXZlID09PSAnc2hvdycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLm9uUmVuZGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhEaXJlY3RpdmVzKGgoTkludGVybmFsU2VsZWN0TWVudSwgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5tZW51UHJvcHMsIHsgcmVmOiBcIm1lbnVSZWZcIiwgb25SZXNpemU6IHRoaXMuaGFuZGxlVHJpZ2dlck9yTWVudVJlc2l6ZSwgaW5saW5lVGhlbWVEaXNhYmxlZDogdGhpcy5pbmxpbmVUaGVtZURpc2FibGVkLCB2aXJ0dWFsU2Nyb2xsOiB0aGlzLmNvbnNpc3RlbnRNZW51V2lkdGggJiYgdGhpcy52aXJ0dWFsU2Nyb2xsLCBjbGFzczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubWVyZ2VkQ2xzUHJlZml4fS1zZWxlY3QtbWVudWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aGVtZUNsYXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfYiA9IHRoaXMubWVudVByb3BzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2xhc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sIGNsc1ByZWZpeDogdGhpcy5tZXJnZWRDbHNQcmVmaXgsIGZvY3VzYWJsZTogdHJ1ZSwgbGFiZWxGaWVsZDogdGhpcy5sYWJlbEZpZWxkLCB2YWx1ZUZpZWxkOiB0aGlzLnZhbHVlRmllbGQsIGF1dG9QZW5kaW5nOiB0cnVlLCBub2RlUHJvcHM6IHRoaXMubm9kZVByb3BzLCB0aGVtZTogdGhpcy5tZXJnZWRUaGVtZS5wZWVycy5JbnRlcm5hbFNlbGVjdE1lbnUsIHRoZW1lT3ZlcnJpZGVzOiB0aGlzLm1lcmdlZFRoZW1lLnBlZXJPdmVycmlkZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuSW50ZXJuYWxTZWxlY3RNZW51LCB0cmVlTWF0ZTogdGhpcy50cmVlTWF0ZSwgbXVsdGlwbGU6IHRoaXMubXVsdGlwbGUsIHNpemU6IFwibWVkaXVtXCIsIHJlbmRlck9wdGlvbjogdGhpcy5yZW5kZXJPcHRpb24sIHJlbmRlckxhYmVsOiB0aGlzLnJlbmRlckxhYmVsLCB2YWx1ZTogdGhpcy5tZXJnZWRWYWx1ZSwgc3R5bGU6IFsoX2MgPSB0aGlzLm1lbnVQcm9wcykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnN0eWxlLCB0aGlzLmNzc1ZhcnNdLCBvblRvZ2dsZTogdGhpcy5oYW5kbGVUb2dnbGUsIG9uU2Nyb2xsOiB0aGlzLmhhbmRsZU1lbnVTY3JvbGwsIG9uRm9jdXM6IHRoaXMuaGFuZGxlTWVudUZvY3VzLCBvbkJsdXI6IHRoaXMuaGFuZGxlTWVudUJsdXIsIG9uS2V5ZG93bjogdGhpcy5oYW5kbGVNZW51S2V5ZG93biwgb25UYWJPdXQ6IHRoaXMuaGFuZGxlTWVudVRhYk91dCwgb25Nb3VzZWRvd246IHRoaXMuaGFuZGxlTWVudU1vdXNlZG93biwgc2hvdzogdGhpcy5tZXJnZWRTaG93LCBzaG93Q2hlY2ttYXJrOiB0aGlzLnNob3dDaGVja21hcmssIHJlc2V0TWVudU9uT3B0aW9uc0NoYW5nZTogdGhpcy5yZXNldE1lbnVPbk9wdGlvbnNDaGFuZ2UgfSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5OiAoKSA9PiB7IHZhciBfYSwgX2I7IHJldHVybiBbKF9iID0gKF9hID0gdGhpcy4kc2xvdHMpLmVtcHR5KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSldOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7IHZhciBfYSwgX2I7IHJldHVybiBbKF9iID0gKF9hID0gdGhpcy4kc2xvdHMpLmFjdGlvbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpXTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgdGhpcy5kaXNwbGF5RGlyZWN0aXZlID09PSAnc2hvdydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2U2hvdywgdGhpcy5tZXJnZWRTaG93XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrb3V0c2lkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNZW51Q2xpY2tPdXRzaWRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2FwdHVyZTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlja291dHNpZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTWVudUNsaWNrT3V0c2lkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNhcHR1cmU6IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pKSk7XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgeyBjQiwgYyB9IGZyb20gJy4uLy4uLy4uL191dGlscy9jc3NyJztcbmltcG9ydCB7IGZhZGVJblNjYWxlVXBUcmFuc2l0aW9uIH0gZnJvbSAnLi4vLi4vLi4vX3N0eWxlcy90cmFuc2l0aW9ucy9mYWRlLWluLXNjYWxlLXVwLmNzc3InO1xuLy8gLS1uLW1lbnUtYm94LXNoYWRvd1xuZXhwb3J0IGRlZmF1bHQgYyhbY0IoJ3NlbGVjdCcsIGBcbiB6LWluZGV4OiBhdXRvO1xuIG91dGxpbmU6IG5vbmU7XG4gd2lkdGg6IDEwMCU7XG4gcG9zaXRpb246IHJlbGF0aXZlO1xuIGApLCBjQignc2VsZWN0LW1lbnUnLCBgXG4gbWFyZ2luOiA0cHggMDtcbiBib3gtc2hhZG93OiB2YXIoLS1uLW1lbnUtYm94LXNoYWRvdyk7XG4gYCwgW2ZhZGVJblNjYWxlVXBUcmFuc2l0aW9uKHtcbiAgb3JpZ2luYWxUcmFuc2l0aW9uOiAnYmFja2dyb3VuZC1jb2xvciAuM3MgdmFyKC0tbi1iZXppZXIpLCBib3gtc2hhZG93IC4zcyB2YXIoLS1uLWJlemllciknXG59KV0pXSk7IiwiZXhwb3J0IGZ1bmN0aW9uIGdldElzR3JvdXAob3B0aW9uKSB7XG4gICAgcmV0dXJuIG9wdGlvbi50eXBlID09PSAnZ3JvdXAnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldElnbm9yZWQob3B0aW9uKSB7XG4gICAgcmV0dXJuIG9wdGlvbi50eXBlID09PSAnaWdub3JlZCc7XG59XG5leHBvcnQgZnVuY3Rpb24gcGF0dGVybk1hdGNoZWQocGF0dGVybiwgdmFsdWUpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gISEoMSArIHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHBhdHRlcm4udHJpbSgpLnRvTG93ZXJDYXNlKCkpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRtT3B0aW9ucyh2YWx1ZUZpZWxkLCBjaGlsZHJlbkZpZWxkKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgZ2V0SXNHcm91cCxcbiAgICAgICAgZ2V0SWdub3JlZCxcbiAgICAgICAgZ2V0S2V5KG9wdGlvbikge1xuICAgICAgICAgICAgaWYgKGdldElzR3JvdXAob3B0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAob3B0aW9uLm5hbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmtleSB8fFxuICAgICAgICAgICAgICAgICAgICAna2V5LXJlcXVpcmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3Igbm9uLWN1c3RvbSBsYWJlbCAmIHZhbHVlIGZpZWxkXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvblt2YWx1ZUZpZWxkXTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2hpbGRyZW4ob3B0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uW2NoaWxkcmVuRmllbGRdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gb3B0aW9ucztcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJPcHRpb25zKG9yaWdpbmFsT3B0cywgZmlsdGVyLCBwYXR0ZXJuLCBjaGlsZHJlbkZpZWxkKSB7XG4gICAgaWYgKCFmaWx0ZXIpXG4gICAgICAgIHJldHVybiBvcmlnaW5hbE9wdHM7XG4gICAgZnVuY3Rpb24gdHJhdmVyc2Uob3B0aW9ucykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob3B0aW9ucykpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkT3B0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoZ2V0SXNHcm91cChvcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSB0cmF2ZXJzZShvcHRpb25bY2hpbGRyZW5GaWVsZF0pO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRPcHRpb25zLnB1c2goT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9uLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbY2hpbGRyZW5GaWVsZF06IGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChnZXRJZ25vcmVkKG9wdGlvbikpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZpbHRlcihwYXR0ZXJuLCBvcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyZWRPcHRpb25zLnB1c2gob3B0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlsdGVyZWRPcHRpb25zO1xuICAgIH1cbiAgICByZXR1cm4gdHJhdmVyc2Uob3JpZ2luYWxPcHRzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWYWxPcHRNYXAob3B0aW9ucywgdmFsdWVGaWVsZCwgY2hpbGRyZW5GaWVsZCkge1xuICAgIGNvbnN0IHZhbE9wdE1hcCA9IG5ldyBNYXAoKTtcbiAgICBvcHRpb25zLmZvckVhY2goKG9wdGlvbikgPT4ge1xuICAgICAgICBpZiAoZ2V0SXNHcm91cChvcHRpb24pKSB7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBvcHRpb25bY2hpbGRyZW5GaWVsZF0uZm9yRWFjaCgoc2VsZWN0R3JvdXBPcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICB2YWxPcHRNYXAuc2V0KHNlbGVjdEdyb3VwT3B0aW9uW3ZhbHVlRmllbGRdLCBzZWxlY3RHcm91cE9wdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbE9wdE1hcC5zZXQob3B0aW9uW3ZhbHVlRmllbGRdLCBvcHRpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbE9wdE1hcDtcbn1cbiIsImltcG9ydCB7IGludGVybmFsU2VsZWN0aW9uTGlnaHQgfSBmcm9tICcuLi8uLi9faW50ZXJuYWwvc2VsZWN0aW9uL3N0eWxlcyc7XG5pbXBvcnQgeyBpbnRlcm5hbFNlbGVjdE1lbnVMaWdodCB9IGZyb20gJy4uLy4uL19pbnRlcm5hbC9zZWxlY3QtbWVudS9zdHlsZXMnO1xuaW1wb3J0IHsgY29tbW9uTGlnaHQgfSBmcm9tICcuLi8uLi9fc3R5bGVzL2NvbW1vbic7XG5pbXBvcnQgeyBjcmVhdGVUaGVtZSB9IGZyb20gJy4uLy4uL19taXhpbnMnO1xuZXhwb3J0IGZ1bmN0aW9uIHNlbGYodmFycykge1xuICAgIGNvbnN0IHsgYm94U2hhZG93MiB9ID0gdmFycztcbiAgICByZXR1cm4ge1xuICAgICAgICBtZW51Qm94U2hhZG93OiBib3hTaGFkb3cyXG4gICAgfTtcbn1cbmNvbnN0IHNlbGVjdExpZ2h0ID0gY3JlYXRlVGhlbWUoe1xuICAgIG5hbWU6ICdTZWxlY3QnLFxuICAgIGNvbW1vbjogY29tbW9uTGlnaHQsXG4gICAgcGVlcnM6IHtcbiAgICAgICAgSW50ZXJuYWxTZWxlY3Rpb246IGludGVybmFsU2VsZWN0aW9uTGlnaHQsXG4gICAgICAgIEludGVybmFsU2VsZWN0TWVudTogaW50ZXJuYWxTZWxlY3RNZW51TGlnaHRcbiAgICB9LFxuICAgIHNlbGZcbn0pO1xuZXhwb3J0IGRlZmF1bHQgc2VsZWN0TGlnaHQ7XG4iLCJpbXBvcnQgeyBoLCBkZWZpbmVDb21wb25lbnQsIGNvbXB1dGVkLCByZWYsIHByb3ZpZGUsIHRvUmVmLCB3YXRjaEVmZmVjdCB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyB1c2VSdGwgfSBmcm9tICcuLi8uLi9fbWl4aW5zL3VzZS1ydGwnO1xuaW1wb3J0IHsgTkJhc2VDbG9zZSB9IGZyb20gJy4uLy4uL19pbnRlcm5hbC9jbG9zZSc7XG5pbXBvcnQgeyB1c2VDb25maWcsIHVzZVRoZW1lQ2xhc3MsIHVzZVRoZW1lIH0gZnJvbSAnLi4vLi4vX21peGlucyc7XG5pbXBvcnQgeyBjcmVhdGVLZXksIGNhbGwsIGNyZWF0ZUluamVjdGlvbktleSwgY29sb3IyQ2xhc3MsIHJlc29sdmVXcmFwcGVkU2xvdCwgd2Fybk9uY2UgfSBmcm9tICcuLi8uLi9fdXRpbHMnO1xuaW1wb3J0IHsgdGFnTGlnaHQgfSBmcm9tICcuLi9zdHlsZXMnO1xuaW1wb3J0IGNvbW1vblByb3BzIGZyb20gJy4vY29tbW9uLXByb3BzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuL3N0eWxlcy9pbmRleC5jc3NyJztcbmV4cG9ydCBjb25zdCB0YWdQcm9wcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB1c2VUaGVtZS5wcm9wcyksIGNvbW1vblByb3BzKSwgeyBib3JkZXJlZDoge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICBkZWZhdWx0OiB1bmRlZmluZWRcbiAgICB9LCBjaGVja2VkOiBCb29sZWFuLCBjaGVja2FibGU6IEJvb2xlYW4sIHN0cm9uZzogQm9vbGVhbiwgdHJpZ2dlckNsaWNrT25DbG9zZTogQm9vbGVhbiwgb25DbG9zZTogW0FycmF5LCBGdW5jdGlvbl0sIG9uTW91c2VlbnRlcjogRnVuY3Rpb24sIG9uTW91c2VsZWF2ZTogRnVuY3Rpb24sICdvblVwZGF0ZTpjaGVja2VkJzogRnVuY3Rpb24sIG9uVXBkYXRlQ2hlY2tlZDogRnVuY3Rpb24sIFxuICAgIC8vIHByaXZhdGVcbiAgICBpbnRlcm5hbENsb3NlRm9jdXNhYmxlOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LCBpbnRlcm5hbENsb3NlSXNCdXR0b25UYWc6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgIH0sIFxuICAgIC8vIGRlcHJlY2F0ZWRcbiAgICBvbkNoZWNrZWRDaGFuZ2U6IEZ1bmN0aW9uIH0pO1xuZXhwb3J0IGNvbnN0IHRhZ0luamVjdGlvbktleSA9IGNyZWF0ZUluamVjdGlvbktleSgnbi10YWcnKTtcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogJ1RhZycsXG4gICAgcHJvcHM6IHRhZ1Byb3BzLFxuICAgIHNldHVwKHByb3BzKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICB3YXRjaEVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLm9uQ2hlY2tlZENoYW5nZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm5PbmNlKCd0YWcnLCAnYG9uLWNoZWNrZWQtY2hhbmdlYCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIGBvbi11cGRhdGU6Y2hlY2tlZGAgaW5zdGVhZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRlbnRSZWYgPSByZWYobnVsbCk7XG4gICAgICAgIGNvbnN0IHsgbWVyZ2VkQm9yZGVyZWRSZWYsIG1lcmdlZENsc1ByZWZpeFJlZiwgaW5saW5lVGhlbWVEaXNhYmxlZCwgbWVyZ2VkUnRsUmVmIH0gPSB1c2VDb25maWcocHJvcHMpO1xuICAgICAgICBjb25zdCB0aGVtZVJlZiA9IHVzZVRoZW1lKCdUYWcnLCAnLXRhZycsIHN0eWxlLCB0YWdMaWdodCwgcHJvcHMsIG1lcmdlZENsc1ByZWZpeFJlZik7XG4gICAgICAgIHByb3ZpZGUodGFnSW5qZWN0aW9uS2V5LCB7XG4gICAgICAgICAgICByb3VuZFJlZjogdG9SZWYocHJvcHMsICdyb3VuZCcpXG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgICAgICBpZiAoIXByb3BzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLmNoZWNrYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNoZWNrZWQsIG9uQ2hlY2tlZENoYW5nZSwgb25VcGRhdGVDaGVja2VkLCAnb25VcGRhdGU6Y2hlY2tlZCc6IF9vblVwZGF0ZUNoZWNrZWQgfSA9IHByb3BzO1xuICAgICAgICAgICAgICAgICAgICBpZiAob25VcGRhdGVDaGVja2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGVDaGVja2VkKCFjaGVja2VkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9vblVwZGF0ZUNoZWNrZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBfb25VcGRhdGVDaGVja2VkKCFjaGVja2VkKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVwcmVjYXRlZFxuICAgICAgICAgICAgICAgICAgICBpZiAob25DaGVja2VkQ2hhbmdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGVja2VkQ2hhbmdlKCFjaGVja2VkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlQ2xvc2VDbGljayhlKSB7XG4gICAgICAgICAgICBpZiAoIXByb3BzLnRyaWdnZXJDbGlja09uQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwcm9wcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgb25DbG9zZSB9ID0gcHJvcHM7XG4gICAgICAgICAgICAgICAgaWYgKG9uQ2xvc2UpXG4gICAgICAgICAgICAgICAgICAgIGNhbGwob25DbG9zZSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFnUHVibGljTWV0aG9kcyA9IHtcbiAgICAgICAgICAgIHNldFRleHRDb250ZW50KHRleHRDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gY29udGVudFJlZjtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnRleHRDb250ZW50ID0gdGV4dENvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJ0bEVuYWJsZWRSZWYgPSB1c2VSdGwoJ1RhZycsIG1lcmdlZFJ0bFJlZiwgbWVyZ2VkQ2xzUHJlZml4UmVmKTtcbiAgICAgICAgY29uc3QgY3NzVmFyc1JlZiA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdHlwZSwgc2l6ZSwgY29sb3I6IHsgY29sb3IsIHRleHRDb2xvciB9ID0ge30gfSA9IHByb3BzO1xuICAgICAgICAgICAgY29uc3QgeyBjb21tb246IHsgY3ViaWNCZXppZXJFYXNlSW5PdXQgfSwgc2VsZjogeyBwYWRkaW5nLCBjbG9zZU1hcmdpbiwgY2xvc2VNYXJnaW5SdGwsIGJvcmRlclJhZGl1cywgb3BhY2l0eURpc2FibGVkLCB0ZXh0Q29sb3JDaGVja2FibGUsIHRleHRDb2xvckhvdmVyQ2hlY2thYmxlLCB0ZXh0Q29sb3JQcmVzc2VkQ2hlY2thYmxlLCB0ZXh0Q29sb3JDaGVja2VkLCBjb2xvckNoZWNrYWJsZSwgY29sb3JIb3ZlckNoZWNrYWJsZSwgY29sb3JQcmVzc2VkQ2hlY2thYmxlLCBjb2xvckNoZWNrZWQsIGNvbG9yQ2hlY2tlZEhvdmVyLCBjb2xvckNoZWNrZWRQcmVzc2VkLCBjbG9zZUJvcmRlclJhZGl1cywgZm9udFdlaWdodFN0cm9uZywgW2NyZWF0ZUtleSgnY29sb3JCb3JkZXJlZCcsIHR5cGUpXTogY29sb3JCb3JkZXJlZCwgW2NyZWF0ZUtleSgnY2xvc2VTaXplJywgc2l6ZSldOiBjbG9zZVNpemUsIFtjcmVhdGVLZXkoJ2Nsb3NlSWNvblNpemUnLCBzaXplKV06IGNsb3NlSWNvblNpemUsIFtjcmVhdGVLZXkoJ2ZvbnRTaXplJywgc2l6ZSldOiBmb250U2l6ZSwgW2NyZWF0ZUtleSgnaGVpZ2h0Jywgc2l6ZSldOiBoZWlnaHQsIFtjcmVhdGVLZXkoJ2NvbG9yJywgdHlwZSldOiB0eXBlZENvbG9yLCBbY3JlYXRlS2V5KCd0ZXh0Q29sb3InLCB0eXBlKV06IHR5cGVUZXh0Q29sb3IsIFtjcmVhdGVLZXkoJ2JvcmRlcicsIHR5cGUpXTogYm9yZGVyLCBbY3JlYXRlS2V5KCdjbG9zZUljb25Db2xvcicsIHR5cGUpXTogY2xvc2VJY29uQ29sb3IsIFtjcmVhdGVLZXkoJ2Nsb3NlSWNvbkNvbG9ySG92ZXInLCB0eXBlKV06IGNsb3NlSWNvbkNvbG9ySG92ZXIsIFtjcmVhdGVLZXkoJ2Nsb3NlSWNvbkNvbG9yUHJlc3NlZCcsIHR5cGUpXTogY2xvc2VJY29uQ29sb3JQcmVzc2VkLCBbY3JlYXRlS2V5KCdjbG9zZUNvbG9ySG92ZXInLCB0eXBlKV06IGNsb3NlQ29sb3JIb3ZlciwgW2NyZWF0ZUtleSgnY2xvc2VDb2xvclByZXNzZWQnLCB0eXBlKV06IGNsb3NlQ29sb3JQcmVzc2VkIH0gfSA9IHRoZW1lUmVmLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAnLS1uLWZvbnQtd2VpZ2h0LXN0cm9uZyc6IGZvbnRXZWlnaHRTdHJvbmcsXG4gICAgICAgICAgICAgICAgJy0tbi1hdmF0YXItc2l6ZS1vdmVycmlkZSc6IGBjYWxjKCR7aGVpZ2h0fSAtIDhweClgLFxuICAgICAgICAgICAgICAgICctLW4tYmV6aWVyJzogY3ViaWNCZXppZXJFYXNlSW5PdXQsXG4gICAgICAgICAgICAgICAgJy0tbi1ib3JkZXItcmFkaXVzJzogYm9yZGVyUmFkaXVzLFxuICAgICAgICAgICAgICAgICctLW4tYm9yZGVyJzogYm9yZGVyLFxuICAgICAgICAgICAgICAgICctLW4tY2xvc2UtaWNvbi1zaXplJzogY2xvc2VJY29uU2l6ZSxcbiAgICAgICAgICAgICAgICAnLS1uLWNsb3NlLWNvbG9yLXByZXNzZWQnOiBjbG9zZUNvbG9yUHJlc3NlZCxcbiAgICAgICAgICAgICAgICAnLS1uLWNsb3NlLWNvbG9yLWhvdmVyJzogY2xvc2VDb2xvckhvdmVyLFxuICAgICAgICAgICAgICAgICctLW4tY2xvc2UtYm9yZGVyLXJhZGl1cyc6IGNsb3NlQm9yZGVyUmFkaXVzLFxuICAgICAgICAgICAgICAgICctLW4tY2xvc2UtaWNvbi1jb2xvcic6IGNsb3NlSWNvbkNvbG9yLFxuICAgICAgICAgICAgICAgICctLW4tY2xvc2UtaWNvbi1jb2xvci1ob3Zlcic6IGNsb3NlSWNvbkNvbG9ySG92ZXIsXG4gICAgICAgICAgICAgICAgJy0tbi1jbG9zZS1pY29uLWNvbG9yLXByZXNzZWQnOiBjbG9zZUljb25Db2xvclByZXNzZWQsXG4gICAgICAgICAgICAgICAgJy0tbi1jbG9zZS1pY29uLWNvbG9yLWRpc2FibGVkJzogY2xvc2VJY29uQ29sb3IsXG4gICAgICAgICAgICAgICAgJy0tbi1jbG9zZS1tYXJnaW4nOiBjbG9zZU1hcmdpbixcbiAgICAgICAgICAgICAgICAnLS1uLWNsb3NlLW1hcmdpbi1ydGwnOiBjbG9zZU1hcmdpblJ0bCxcbiAgICAgICAgICAgICAgICAnLS1uLWNsb3NlLXNpemUnOiBjbG9zZVNpemUsXG4gICAgICAgICAgICAgICAgJy0tbi1jb2xvcic6IGNvbG9yIHx8IChtZXJnZWRCb3JkZXJlZFJlZi52YWx1ZSA/IGNvbG9yQm9yZGVyZWQgOiB0eXBlZENvbG9yKSxcbiAgICAgICAgICAgICAgICAnLS1uLWNvbG9yLWNoZWNrYWJsZSc6IGNvbG9yQ2hlY2thYmxlLFxuICAgICAgICAgICAgICAgICctLW4tY29sb3ItY2hlY2tlZCc6IGNvbG9yQ2hlY2tlZCxcbiAgICAgICAgICAgICAgICAnLS1uLWNvbG9yLWNoZWNrZWQtaG92ZXInOiBjb2xvckNoZWNrZWRIb3ZlcixcbiAgICAgICAgICAgICAgICAnLS1uLWNvbG9yLWNoZWNrZWQtcHJlc3NlZCc6IGNvbG9yQ2hlY2tlZFByZXNzZWQsXG4gICAgICAgICAgICAgICAgJy0tbi1jb2xvci1ob3Zlci1jaGVja2FibGUnOiBjb2xvckhvdmVyQ2hlY2thYmxlLFxuICAgICAgICAgICAgICAgICctLW4tY29sb3ItcHJlc3NlZC1jaGVja2FibGUnOiBjb2xvclByZXNzZWRDaGVja2FibGUsXG4gICAgICAgICAgICAgICAgJy0tbi1mb250LXNpemUnOiBmb250U2l6ZSxcbiAgICAgICAgICAgICAgICAnLS1uLWhlaWdodCc6IGhlaWdodCxcbiAgICAgICAgICAgICAgICAnLS1uLW9wYWNpdHktZGlzYWJsZWQnOiBvcGFjaXR5RGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgJy0tbi1wYWRkaW5nJzogcGFkZGluZyxcbiAgICAgICAgICAgICAgICAnLS1uLXRleHQtY29sb3InOiB0ZXh0Q29sb3IgfHwgdHlwZVRleHRDb2xvcixcbiAgICAgICAgICAgICAgICAnLS1uLXRleHQtY29sb3ItY2hlY2thYmxlJzogdGV4dENvbG9yQ2hlY2thYmxlLFxuICAgICAgICAgICAgICAgICctLW4tdGV4dC1jb2xvci1jaGVja2VkJzogdGV4dENvbG9yQ2hlY2tlZCxcbiAgICAgICAgICAgICAgICAnLS1uLXRleHQtY29sb3ItaG92ZXItY2hlY2thYmxlJzogdGV4dENvbG9ySG92ZXJDaGVja2FibGUsXG4gICAgICAgICAgICAgICAgJy0tbi10ZXh0LWNvbG9yLXByZXNzZWQtY2hlY2thYmxlJzogdGV4dENvbG9yUHJlc3NlZENoZWNrYWJsZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRoZW1lQ2xhc3NIYW5kbGUgPSBpbmxpbmVUaGVtZURpc2FibGVkXG4gICAgICAgICAgICA/IHVzZVRoZW1lQ2xhc3MoJ3RhZycsIGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaGFzaCA9ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdHlwZSwgc2l6ZSwgY29sb3I6IHsgY29sb3IsIHRleHRDb2xvciB9ID0ge30gfSA9IHByb3BzO1xuICAgICAgICAgICAgICAgIGhhc2ggKz0gdHlwZVswXTtcbiAgICAgICAgICAgICAgICBoYXNoICs9IHNpemVbMF07XG4gICAgICAgICAgICAgICAgaWYgKGNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc2ggKz0gYGEke2NvbG9yMkNsYXNzKGNvbG9yKX1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGV4dENvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc2ggKz0gYGIke2NvbG9yMkNsYXNzKHRleHRDb2xvcil9YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lcmdlZEJvcmRlcmVkUmVmLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc2ggKz0gJ2MnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDtcbiAgICAgICAgICAgIH0pLCBjc3NWYXJzUmVmLCBwcm9wcylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0YWdQdWJsaWNNZXRob2RzKSwgeyBydGxFbmFibGVkOiBydGxFbmFibGVkUmVmLCBtZXJnZWRDbHNQcmVmaXg6IG1lcmdlZENsc1ByZWZpeFJlZiwgY29udGVudFJlZiwgbWVyZ2VkQm9yZGVyZWQ6IG1lcmdlZEJvcmRlcmVkUmVmLCBoYW5kbGVDbGljayxcbiAgICAgICAgICAgIGhhbmRsZUNsb3NlQ2xpY2ssIGNzc1ZhcnM6IGlubGluZVRoZW1lRGlzYWJsZWQgPyB1bmRlZmluZWQgOiBjc3NWYXJzUmVmLCB0aGVtZUNsYXNzOiB0aGVtZUNsYXNzSGFuZGxlID09PSBudWxsIHx8IHRoZW1lQ2xhc3NIYW5kbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRoZW1lQ2xhc3NIYW5kbGUudGhlbWVDbGFzcywgb25SZW5kZXI6IHRoZW1lQ2xhc3NIYW5kbGUgPT09IG51bGwgfHwgdGhlbWVDbGFzc0hhbmRsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGhlbWVDbGFzc0hhbmRsZS5vblJlbmRlciB9KTtcbiAgICB9LFxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgeyBtZXJnZWRDbHNQcmVmaXgsIHJ0bEVuYWJsZWQsIGNsb3NhYmxlLCBjb2xvcjogeyBib3JkZXJDb2xvciB9ID0ge30sIHJvdW5kLCBvblJlbmRlciwgJHNsb3RzIH0gPSB0aGlzO1xuICAgICAgICBvblJlbmRlciA9PT0gbnVsbCB8fCBvblJlbmRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25SZW5kZXIoKTtcbiAgICAgICAgY29uc3QgYXZhdGFyTm9kZSA9IHJlc29sdmVXcmFwcGVkU2xvdCgkc2xvdHMuYXZhdGFyLCAoY2hpbGRyZW4pID0+IGNoaWxkcmVuICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IGAke21lcmdlZENsc1ByZWZpeH0tdGFnX19hdmF0YXJgIH0sIGNoaWxkcmVuKSkpO1xuICAgICAgICBjb25zdCBpY29uTm9kZSA9IHJlc29sdmVXcmFwcGVkU2xvdCgkc2xvdHMuaWNvbiwgKGNoaWxkcmVuKSA9PiBjaGlsZHJlbiAmJiBoKFwiZGl2XCIsIHsgY2xhc3M6IGAke21lcmdlZENsc1ByZWZpeH0tdGFnX19pY29uYCB9LCBjaGlsZHJlbikpO1xuICAgICAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogW1xuICAgICAgICAgICAgICAgIGAke21lcmdlZENsc1ByZWZpeH0tdGFnYCxcbiAgICAgICAgICAgICAgICB0aGlzLnRoZW1lQ2xhc3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBbYCR7bWVyZ2VkQ2xzUHJlZml4fS10YWctLXJ0bGBdOiBydGxFbmFibGVkLFxuICAgICAgICAgICAgICAgICAgICBbYCR7bWVyZ2VkQ2xzUHJlZml4fS10YWctLXN0cm9uZ2BdOiB0aGlzLnN0cm9uZyxcbiAgICAgICAgICAgICAgICAgICAgW2Ake21lcmdlZENsc1ByZWZpeH0tdGFnLS1kaXNhYmxlZGBdOiB0aGlzLmRpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICBbYCR7bWVyZ2VkQ2xzUHJlZml4fS10YWctLWNoZWNrYWJsZWBdOiB0aGlzLmNoZWNrYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgW2Ake21lcmdlZENsc1ByZWZpeH0tdGFnLS1jaGVja2VkYF06IHRoaXMuY2hlY2thYmxlICYmIHRoaXMuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgW2Ake21lcmdlZENsc1ByZWZpeH0tdGFnLS1yb3VuZGBdOiByb3VuZCxcbiAgICAgICAgICAgICAgICAgICAgW2Ake21lcmdlZENsc1ByZWZpeH0tdGFnLS1hdmF0YXJgXTogYXZhdGFyTm9kZSxcbiAgICAgICAgICAgICAgICAgICAgW2Ake21lcmdlZENsc1ByZWZpeH0tdGFnLS1pY29uYF06IGljb25Ob2RlLFxuICAgICAgICAgICAgICAgICAgICBbYCR7bWVyZ2VkQ2xzUHJlZml4fS10YWctLWNsb3NhYmxlYF06IGNsb3NhYmxlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSwgc3R5bGU6IHRoaXMuY3NzVmFycywgb25DbGljazogdGhpcy5oYW5kbGVDbGljaywgb25Nb3VzZWVudGVyOiB0aGlzLm9uTW91c2VlbnRlciwgb25Nb3VzZWxlYXZlOiB0aGlzLm9uTW91c2VsZWF2ZSB9LFxuICAgICAgICAgICAgaWNvbk5vZGUgfHwgYXZhdGFyTm9kZSxcbiAgICAgICAgICAgIGgoXCJzcGFuXCIsIHsgY2xhc3M6IGAke21lcmdlZENsc1ByZWZpeH0tdGFnX19jb250ZW50YCwgcmVmOiBcImNvbnRlbnRSZWZcIiB9LCAoX2IgPSAoX2EgPSB0aGlzLiRzbG90cykuZGVmYXVsdCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpKSxcbiAgICAgICAgICAgICF0aGlzLmNoZWNrYWJsZSAmJiBjbG9zYWJsZSA/IChoKE5CYXNlQ2xvc2UsIHsgY2xzUHJlZml4OiBtZXJnZWRDbHNQcmVmaXgsIGNsYXNzOiBgJHttZXJnZWRDbHNQcmVmaXh9LXRhZ19fY2xvc2VgLCBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCwgb25DbGljazogdGhpcy5oYW5kbGVDbG9zZUNsaWNrLCBmb2N1c2FibGU6IHRoaXMuaW50ZXJuYWxDbG9zZUZvY3VzYWJsZSwgcm91bmQ6IHJvdW5kLCBpc0J1dHRvblRhZzogdGhpcy5pbnRlcm5hbENsb3NlSXNCdXR0b25UYWcsIGFic29sdXRlOiB0cnVlIH0pKSA6IG51bGwsXG4gICAgICAgICAgICAhdGhpcy5jaGVja2FibGUgJiYgdGhpcy5tZXJnZWRCb3JkZXJlZCA/IChoKFwiZGl2XCIsIHsgY2xhc3M6IGAke21lcmdlZENsc1ByZWZpeH0tdGFnX19ib3JkZXJgLCBzdHlsZTogeyBib3JkZXJDb2xvciB9IH0pKSA6IG51bGwpKTtcbiAgICB9XG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IHtcbiAgICBjb2xvcjogT2JqZWN0LFxuICAgIHR5cGU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiAnZGVmYXVsdCdcbiAgICB9LFxuICAgIHJvdW5kOiBCb29sZWFuLFxuICAgIHNpemU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiAnbWVkaXVtJ1xuICAgIH0sXG4gICAgY2xvc2FibGU6IEJvb2xlYW4sXG4gICAgZGlzYWJsZWQ6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgZGVmYXVsdDogdW5kZWZpbmVkXG4gICAgfVxufTtcbiIsImltcG9ydCB7IGMsIGNCLCBjRSwgY00sIGNOb3RNIH0gZnJvbSAnLi4vLi4vLi4vX3V0aWxzL2Nzc3InO1xuLy8gdmFyczpcbi8vIC0tbi1iZXppZXJcbi8vIC0tbi1ib3JkZXItcmFkaXVzXG4vLyAtLW4tYm9yZGVyXG4vLyAtLW4tY2xvc2UtaWNvbi1jb2xvclxuLy8gLS1uLWNsb3NlLWljb24tY29sb3ItaG92ZXJcbi8vIC0tbi1jbG9zZS1pY29uLWNvbG9yLXByZXNzZWRcbi8vIC0tbi1jbG9zZS1tYXJnaW5cbi8vIC0tbi1jbG9zZS1zaXplXG4vLyAtLW4tY29sb3Jcbi8vIC0tbi1jb2xvci1jaGVja2FibGVcbi8vIC0tbi1jb2xvci1jaGVja2VkXG4vLyAtLW4tY29sb3ItY2hlY2tlZC1ob3ZlclxuLy8gLS1uLWNvbG9yLWNoZWNrZWQtcHJlc3NlZFxuLy8gLS1uLWNvbG9yLWhvdmVyLWNoZWNrYWJsZVxuLy8gLS1uLWNvbG9yLXByZXNzZWQtY2hlY2thYmxlXG4vLyAtLW4tZm9udC1zaXplXG4vLyAtLW4taGVpZ2h0XG4vLyAtLW4tb3BhY2l0eS1kaXNhYmxlZFxuLy8gLS1uLXBhZGRpbmdcbi8vIC0tbi10ZXh0LWNvbG9yXG4vLyAtLW4tdGV4dC1jb2xvci1jaGVja2FibGVcbi8vIC0tbi10ZXh0LWNvbG9yLWNoZWNrZWRcbi8vIC0tbi10ZXh0LWNvbG9yLWhvdmVyLWNoZWNrYWJsZVxuLy8gLS1uLXRleHQtY29sb3ItcHJlc3NlZC1jaGVja2FibGVcbi8vIC0tbi1mb250LXdlaWdodC1zdHJvbmdcbmV4cG9ydCBkZWZhdWx0IGNCKCd0YWcnLCBgXG4gd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiBwb3NpdGlvbjogcmVsYXRpdmU7XG4gYm94LXNpemluZzogYm9yZGVyLWJveDtcbiBjdXJzb3I6IGRlZmF1bHQ7XG4gZGlzcGxheTogaW5saW5lLWZsZXg7XG4gYWxpZ24taXRlbXM6IGNlbnRlcjtcbiBmbGV4LXdyYXA6IG5vd3JhcDtcbiBwYWRkaW5nOiB2YXIoLS1uLXBhZGRpbmcpO1xuIGJvcmRlci1yYWRpdXM6IHZhcigtLW4tYm9yZGVyLXJhZGl1cyk7XG4gY29sb3I6IHZhcigtLW4tdGV4dC1jb2xvcik7XG4gYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbi1jb2xvcik7XG4gdHJhbnNpdGlvbjogXG4gYm9yZGVyLWNvbG9yIC4zcyB2YXIoLS1uLWJlemllciksXG4gYmFja2dyb3VuZC1jb2xvciAuM3MgdmFyKC0tbi1iZXppZXIpLFxuIGNvbG9yIC4zcyB2YXIoLS1uLWJlemllciksXG4gYm94LXNoYWRvdyAuM3MgdmFyKC0tbi1iZXppZXIpLFxuIG9wYWNpdHkgLjNzIHZhcigtLW4tYmV6aWVyKTtcbiBsaW5lLWhlaWdodDogMTtcbiBoZWlnaHQ6IHZhcigtLW4taGVpZ2h0KTtcbiBmb250LXNpemU6IHZhcigtLW4tZm9udC1zaXplKTtcbmAsIFtjTSgnc3Ryb25nJywgYFxuIGZvbnQtd2VpZ2h0OiB2YXIoLS1uLWZvbnQtd2VpZ2h0LXN0cm9uZyk7XG4gYCksIGNFKCdib3JkZXInLCBgXG4gcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gcG9zaXRpb246IGFic29sdXRlO1xuIGxlZnQ6IDA7XG4gcmlnaHQ6IDA7XG4gdG9wOiAwO1xuIGJvdHRvbTogMDtcbiBib3JkZXItcmFkaXVzOiBpbmhlcml0O1xuIGJvcmRlcjogdmFyKC0tbi1ib3JkZXIpO1xuIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAuM3MgdmFyKC0tbi1iZXppZXIpO1xuIGApLCBjRSgnaWNvbicsIGBcbiBkaXNwbGF5OiBmbGV4O1xuIG1hcmdpbjogMCA0cHggMCAwO1xuIGNvbG9yOiB2YXIoLS1uLXRleHQtY29sb3IpO1xuIHRyYW5zaXRpb246IGNvbG9yIC4zcyB2YXIoLS1uLWJlemllcik7XG4gZm9udC1zaXplOiB2YXIoLS1uLWF2YXRhci1zaXplLW92ZXJyaWRlKTtcbiBgKSwgY0UoJ2F2YXRhcicsIGBcbiBkaXNwbGF5OiBmbGV4O1xuIG1hcmdpbjogMCA2cHggMCAwO1xuIGApLCBjRSgnY2xvc2UnLCBgXG4gbWFyZ2luOiB2YXIoLS1uLWNsb3NlLW1hcmdpbik7XG4gdHJhbnNpdGlvbjpcbiBiYWNrZ3JvdW5kLWNvbG9yIC4zcyB2YXIoLS1uLWJlemllciksXG4gY29sb3IgLjNzIHZhcigtLW4tYmV6aWVyKTtcbiBgKSwgY00oJ3JvdW5kJywgYFxuIHBhZGRpbmc6IDAgY2FsYyh2YXIoLS1uLWhlaWdodCkgLyAzKTtcbiBib3JkZXItcmFkaXVzOiBjYWxjKHZhcigtLW4taGVpZ2h0KSAvIDIpO1xuIGAsIFtjRSgnaWNvbicsIGBcbiBtYXJnaW46IDAgNHB4IDAgY2FsYygodmFyKC0tbi1oZWlnaHQpIC0gOHB4KSAvIC0yKTtcbiBgKSwgY0UoJ2F2YXRhcicsIGBcbiBtYXJnaW46IDAgNnB4IDAgY2FsYygodmFyKC0tbi1oZWlnaHQpIC0gOHB4KSAvIC0yKTtcbiBgKSwgY00oJ2Nsb3NhYmxlJywgYFxuIHBhZGRpbmc6IDAgY2FsYyh2YXIoLS1uLWhlaWdodCkgLyA0KSAwIGNhbGModmFyKC0tbi1oZWlnaHQpIC8gMyk7XG4gYCldKSwgY00oJ2ljb24sIGF2YXRhcicsIFtjTSgncm91bmQnLCBgXG4gcGFkZGluZzogMCBjYWxjKHZhcigtLW4taGVpZ2h0KSAvIDMpIDAgY2FsYyh2YXIoLS1uLWhlaWdodCkgLyAyKTtcbiBgKV0pLCBjTSgnZGlzYWJsZWQnLCBgXG4gY3Vyc29yOiBub3QtYWxsb3dlZCAhaW1wb3J0YW50O1xuIG9wYWNpdHk6IHZhcigtLW4tb3BhY2l0eS1kaXNhYmxlZCk7XG4gYCksIGNNKCdjaGVja2FibGUnLCBgXG4gY3Vyc29yOiBwb2ludGVyO1xuIGJveC1zaGFkb3c6IG5vbmU7XG4gY29sb3I6IHZhcigtLW4tdGV4dC1jb2xvci1jaGVja2FibGUpO1xuIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW4tY29sb3ItY2hlY2thYmxlKTtcbiBgLCBbY05vdE0oJ2Rpc2FibGVkJywgW2MoJyY6aG92ZXInLCAnYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbi1jb2xvci1ob3Zlci1jaGVja2FibGUpOycsIFtjTm90TSgnY2hlY2tlZCcsICdjb2xvcjogdmFyKC0tbi10ZXh0LWNvbG9yLWhvdmVyLWNoZWNrYWJsZSk7JyldKSwgYygnJjphY3RpdmUnLCAnYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbi1jb2xvci1wcmVzc2VkLWNoZWNrYWJsZSk7JywgW2NOb3RNKCdjaGVja2VkJywgJ2NvbG9yOiB2YXIoLS1uLXRleHQtY29sb3ItcHJlc3NlZC1jaGVja2FibGUpOycpXSldKSwgY00oJ2NoZWNrZWQnLCBgXG4gY29sb3I6IHZhcigtLW4tdGV4dC1jb2xvci1jaGVja2VkKTtcbiBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1uLWNvbG9yLWNoZWNrZWQpO1xuIGAsIFtjTm90TSgnZGlzYWJsZWQnLCBbYygnJjpob3ZlcicsICdiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1uLWNvbG9yLWNoZWNrZWQtaG92ZXIpOycpLCBjKCcmOmFjdGl2ZScsICdiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1uLWNvbG9yLWNoZWNrZWQtcHJlc3NlZCk7JyldKV0pXSldKTsiLCJleHBvcnQgZGVmYXVsdCB7XG4gICAgY2xvc2VJY29uU2l6ZVRpbnk6ICcxMnB4JyxcbiAgICBjbG9zZUljb25TaXplU21hbGw6ICcxMnB4JyxcbiAgICBjbG9zZUljb25TaXplTWVkaXVtOiAnMTRweCcsXG4gICAgY2xvc2VJY29uU2l6ZUxhcmdlOiAnMTRweCcsXG4gICAgY2xvc2VTaXplVGlueTogJzE2cHgnLFxuICAgIGNsb3NlU2l6ZVNtYWxsOiAnMTZweCcsXG4gICAgY2xvc2VTaXplTWVkaXVtOiAnMThweCcsXG4gICAgY2xvc2VTaXplTGFyZ2U6ICcxOHB4JyxcbiAgICBwYWRkaW5nOiAnMCA3cHgnLFxuICAgIGNsb3NlTWFyZ2luOiAnMCAwIDAgNHB4JyxcbiAgICBjbG9zZU1hcmdpblJ0bDogJzAgNHB4IDAgMCdcbn07XG4iLCJpbXBvcnQgY29tbW9uVmFyaWFibGVzIGZyb20gJy4vX2NvbW1vbic7XG5pbXBvcnQgeyBjaGFuZ2VDb2xvciB9IGZyb20gJ3NlZW1seSc7XG5pbXBvcnQgeyBjb21tb25MaWdodCB9IGZyb20gJy4uLy4uL19zdHlsZXMvY29tbW9uJztcbmNvbnN0IHNlbGYgPSAodmFycykgPT4ge1xuICAgIGNvbnN0IHsgdGV4dENvbG9yMiwgcHJpbWFyeUNvbG9ySG92ZXIsIHByaW1hcnlDb2xvclByZXNzZWQsIHByaW1hcnlDb2xvciwgaW5mb0NvbG9yLCBzdWNjZXNzQ29sb3IsIHdhcm5pbmdDb2xvciwgZXJyb3JDb2xvciwgYmFzZUNvbG9yLCBib3JkZXJDb2xvciwgb3BhY2l0eURpc2FibGVkLCB0YWdDb2xvciwgY2xvc2VJY29uQ29sb3IsIGNsb3NlSWNvbkNvbG9ySG92ZXIsIGNsb3NlSWNvbkNvbG9yUHJlc3NlZCwgYm9yZGVyUmFkaXVzU21hbGw6IGJvcmRlclJhZGl1cywgZm9udFNpemVNaW5pLCBmb250U2l6ZVRpbnksIGZvbnRTaXplU21hbGwsIGZvbnRTaXplTWVkaXVtLCBoZWlnaHRNaW5pLCBoZWlnaHRUaW55LCBoZWlnaHRTbWFsbCwgaGVpZ2h0TWVkaXVtLCBjbG9zZUNvbG9ySG92ZXIsIGNsb3NlQ29sb3JQcmVzc2VkLCBidXR0b25Db2xvcjJIb3ZlciwgYnV0dG9uQ29sb3IyUHJlc3NlZCwgZm9udFdlaWdodFN0cm9uZyB9ID0gdmFycztcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb21tb25WYXJpYWJsZXMpLCB7IGNsb3NlQm9yZGVyUmFkaXVzOiBib3JkZXJSYWRpdXMsIGhlaWdodFRpbnk6IGhlaWdodE1pbmksIGhlaWdodFNtYWxsOiBoZWlnaHRUaW55LCBoZWlnaHRNZWRpdW06IGhlaWdodFNtYWxsLCBoZWlnaHRMYXJnZTogaGVpZ2h0TWVkaXVtLCBib3JkZXJSYWRpdXMsXG4gICAgICAgIG9wYWNpdHlEaXNhYmxlZCwgZm9udFNpemVUaW55OiBmb250U2l6ZU1pbmksIGZvbnRTaXplU21hbGw6IGZvbnRTaXplVGlueSwgZm9udFNpemVNZWRpdW06IGZvbnRTaXplU21hbGwsIGZvbnRTaXplTGFyZ2U6IGZvbnRTaXplTWVkaXVtLCBmb250V2VpZ2h0U3Ryb25nLCBcbiAgICAgICAgLy8gY2hlY2tlZFxuICAgICAgICB0ZXh0Q29sb3JDaGVja2FibGU6IHRleHRDb2xvcjIsIHRleHRDb2xvckhvdmVyQ2hlY2thYmxlOiB0ZXh0Q29sb3IyLCB0ZXh0Q29sb3JQcmVzc2VkQ2hlY2thYmxlOiB0ZXh0Q29sb3IyLCB0ZXh0Q29sb3JDaGVja2VkOiBiYXNlQ29sb3IsIGNvbG9yQ2hlY2thYmxlOiAnIzAwMDAnLCBjb2xvckhvdmVyQ2hlY2thYmxlOiBidXR0b25Db2xvcjJIb3ZlciwgY29sb3JQcmVzc2VkQ2hlY2thYmxlOiBidXR0b25Db2xvcjJQcmVzc2VkLCBjb2xvckNoZWNrZWQ6IHByaW1hcnlDb2xvciwgY29sb3JDaGVja2VkSG92ZXI6IHByaW1hcnlDb2xvckhvdmVyLCBjb2xvckNoZWNrZWRQcmVzc2VkOiBwcmltYXJ5Q29sb3JQcmVzc2VkLCBcbiAgICAgICAgLy8gZGVmYXVsdFxuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHtib3JkZXJDb2xvcn1gLCB0ZXh0Q29sb3I6IHRleHRDb2xvcjIsIGNvbG9yOiB0YWdDb2xvciwgY29sb3JCb3JkZXJlZDogJ3JnYigyNTAsIDI1MCwgMjUyKScsIGNsb3NlSWNvbkNvbG9yLFxuICAgICAgICBjbG9zZUljb25Db2xvckhvdmVyLFxuICAgICAgICBjbG9zZUljb25Db2xvclByZXNzZWQsXG4gICAgICAgIGNsb3NlQ29sb3JIb3ZlcixcbiAgICAgICAgY2xvc2VDb2xvclByZXNzZWQsIGJvcmRlclByaW1hcnk6IGAxcHggc29saWQgJHtjaGFuZ2VDb2xvcihwcmltYXJ5Q29sb3IsIHsgYWxwaGE6IDAuMyB9KX1gLCB0ZXh0Q29sb3JQcmltYXJ5OiBwcmltYXJ5Q29sb3IsIGNvbG9yUHJpbWFyeTogY2hhbmdlQ29sb3IocHJpbWFyeUNvbG9yLCB7IGFscGhhOiAwLjEyIH0pLCBjb2xvckJvcmRlcmVkUHJpbWFyeTogY2hhbmdlQ29sb3IocHJpbWFyeUNvbG9yLCB7IGFscGhhOiAwLjEgfSksIGNsb3NlSWNvbkNvbG9yUHJpbWFyeTogcHJpbWFyeUNvbG9yLCBjbG9zZUljb25Db2xvckhvdmVyUHJpbWFyeTogcHJpbWFyeUNvbG9yLCBjbG9zZUljb25Db2xvclByZXNzZWRQcmltYXJ5OiBwcmltYXJ5Q29sb3IsIGNsb3NlQ29sb3JIb3ZlclByaW1hcnk6IGNoYW5nZUNvbG9yKHByaW1hcnlDb2xvciwgeyBhbHBoYTogMC4xMiB9KSwgY2xvc2VDb2xvclByZXNzZWRQcmltYXJ5OiBjaGFuZ2VDb2xvcihwcmltYXJ5Q29sb3IsIHsgYWxwaGE6IDAuMTggfSksIGJvcmRlckluZm86IGAxcHggc29saWQgJHtjaGFuZ2VDb2xvcihpbmZvQ29sb3IsIHsgYWxwaGE6IDAuMyB9KX1gLCB0ZXh0Q29sb3JJbmZvOiBpbmZvQ29sb3IsIGNvbG9ySW5mbzogY2hhbmdlQ29sb3IoaW5mb0NvbG9yLCB7IGFscGhhOiAwLjEyIH0pLCBjb2xvckJvcmRlcmVkSW5mbzogY2hhbmdlQ29sb3IoaW5mb0NvbG9yLCB7IGFscGhhOiAwLjEgfSksIGNsb3NlSWNvbkNvbG9ySW5mbzogaW5mb0NvbG9yLCBjbG9zZUljb25Db2xvckhvdmVySW5mbzogaW5mb0NvbG9yLCBjbG9zZUljb25Db2xvclByZXNzZWRJbmZvOiBpbmZvQ29sb3IsIGNsb3NlQ29sb3JIb3ZlckluZm86IGNoYW5nZUNvbG9yKGluZm9Db2xvciwgeyBhbHBoYTogMC4xMiB9KSwgY2xvc2VDb2xvclByZXNzZWRJbmZvOiBjaGFuZ2VDb2xvcihpbmZvQ29sb3IsIHsgYWxwaGE6IDAuMTggfSksIGJvcmRlclN1Y2Nlc3M6IGAxcHggc29saWQgJHtjaGFuZ2VDb2xvcihzdWNjZXNzQ29sb3IsIHsgYWxwaGE6IDAuMyB9KX1gLCB0ZXh0Q29sb3JTdWNjZXNzOiBzdWNjZXNzQ29sb3IsIGNvbG9yU3VjY2VzczogY2hhbmdlQ29sb3Ioc3VjY2Vzc0NvbG9yLCB7IGFscGhhOiAwLjEyIH0pLCBjb2xvckJvcmRlcmVkU3VjY2VzczogY2hhbmdlQ29sb3Ioc3VjY2Vzc0NvbG9yLCB7IGFscGhhOiAwLjEgfSksIGNsb3NlSWNvbkNvbG9yU3VjY2Vzczogc3VjY2Vzc0NvbG9yLCBjbG9zZUljb25Db2xvckhvdmVyU3VjY2Vzczogc3VjY2Vzc0NvbG9yLCBjbG9zZUljb25Db2xvclByZXNzZWRTdWNjZXNzOiBzdWNjZXNzQ29sb3IsIGNsb3NlQ29sb3JIb3ZlclN1Y2Nlc3M6IGNoYW5nZUNvbG9yKHN1Y2Nlc3NDb2xvciwgeyBhbHBoYTogMC4xMiB9KSwgY2xvc2VDb2xvclByZXNzZWRTdWNjZXNzOiBjaGFuZ2VDb2xvcihzdWNjZXNzQ29sb3IsIHsgYWxwaGE6IDAuMTggfSksIGJvcmRlcldhcm5pbmc6IGAxcHggc29saWQgJHtjaGFuZ2VDb2xvcih3YXJuaW5nQ29sb3IsIHsgYWxwaGE6IDAuMzUgfSl9YCwgdGV4dENvbG9yV2FybmluZzogd2FybmluZ0NvbG9yLCBjb2xvcldhcm5pbmc6IGNoYW5nZUNvbG9yKHdhcm5pbmdDb2xvciwgeyBhbHBoYTogMC4xNSB9KSwgY29sb3JCb3JkZXJlZFdhcm5pbmc6IGNoYW5nZUNvbG9yKHdhcm5pbmdDb2xvciwgeyBhbHBoYTogMC4xMiB9KSwgY2xvc2VJY29uQ29sb3JXYXJuaW5nOiB3YXJuaW5nQ29sb3IsIGNsb3NlSWNvbkNvbG9ySG92ZXJXYXJuaW5nOiB3YXJuaW5nQ29sb3IsIGNsb3NlSWNvbkNvbG9yUHJlc3NlZFdhcm5pbmc6IHdhcm5pbmdDb2xvciwgY2xvc2VDb2xvckhvdmVyV2FybmluZzogY2hhbmdlQ29sb3Iod2FybmluZ0NvbG9yLCB7IGFscGhhOiAwLjEyIH0pLCBjbG9zZUNvbG9yUHJlc3NlZFdhcm5pbmc6IGNoYW5nZUNvbG9yKHdhcm5pbmdDb2xvciwgeyBhbHBoYTogMC4xOCB9KSwgYm9yZGVyRXJyb3I6IGAxcHggc29saWQgJHtjaGFuZ2VDb2xvcihlcnJvckNvbG9yLCB7IGFscGhhOiAwLjIzIH0pfWAsIHRleHRDb2xvckVycm9yOiBlcnJvckNvbG9yLCBjb2xvckVycm9yOiBjaGFuZ2VDb2xvcihlcnJvckNvbG9yLCB7IGFscGhhOiAwLjEgfSksIGNvbG9yQm9yZGVyZWRFcnJvcjogY2hhbmdlQ29sb3IoZXJyb3JDb2xvciwgeyBhbHBoYTogMC4wOCB9KSwgY2xvc2VJY29uQ29sb3JFcnJvcjogZXJyb3JDb2xvciwgY2xvc2VJY29uQ29sb3JIb3ZlckVycm9yOiBlcnJvckNvbG9yLCBjbG9zZUljb25Db2xvclByZXNzZWRFcnJvcjogZXJyb3JDb2xvciwgY2xvc2VDb2xvckhvdmVyRXJyb3I6IGNoYW5nZUNvbG9yKGVycm9yQ29sb3IsIHsgYWxwaGE6IDAuMTIgfSksIGNsb3NlQ29sb3JQcmVzc2VkRXJyb3I6IGNoYW5nZUNvbG9yKGVycm9yQ29sb3IsIHsgYWxwaGE6IDAuMTggfSkgfSk7XG59O1xuY29uc3QgdGFnTGlnaHQgPSB7XG4gICAgbmFtZTogJ1RhZycsXG4gICAgY29tbW9uOiBjb21tb25MaWdodCxcbiAgICBzZWxmXG59O1xuZXhwb3J0IGRlZmF1bHQgdGFnTGlnaHQ7XG4iLCJleHBvcnQgZnVuY3Rpb24gZGVweCh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh2YWx1ZS5lbmRzV2l0aCgncHgnKSkge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZS5zbGljZSgwLCB2YWx1ZS5sZW5ndGggLSAyKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHB4ZnkodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJylcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfXB4YDtcbiAgICBpZiAodmFsdWUuZW5kc1dpdGgoJ3B4JykpXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICByZXR1cm4gYCR7dmFsdWV9cHhgO1xufVxuZXhwb3J0IHsgcHhmeSB9O1xuZnVuY3Rpb24gZ2V0TWFyZ2luKHZhbHVlLCBwb3NpdGlvbikge1xuICAgIGNvbnN0IHBhcnRzID0gdmFsdWUudHJpbSgpLnNwbGl0KC9cXHMrL2cpO1xuICAgIGNvbnN0IG1hcmdpbiA9IHtcbiAgICAgICAgdG9wOiBwYXJ0c1swXVxuICAgIH07XG4gICAgc3dpdGNoIChwYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgbWFyZ2luLnJpZ2h0ID0gcGFydHNbMF07XG4gICAgICAgICAgICBtYXJnaW4uYm90dG9tID0gcGFydHNbMF07XG4gICAgICAgICAgICBtYXJnaW4ubGVmdCA9IHBhcnRzWzBdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIG1hcmdpbi5yaWdodCA9IHBhcnRzWzFdO1xuICAgICAgICAgICAgbWFyZ2luLmxlZnQgPSBwYXJ0c1sxXTtcbiAgICAgICAgICAgIG1hcmdpbi5ib3R0b20gPSBwYXJ0c1swXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBtYXJnaW4ucmlnaHQgPSBwYXJ0c1sxXTtcbiAgICAgICAgICAgIG1hcmdpbi5ib3R0b20gPSBwYXJ0c1syXTtcbiAgICAgICAgICAgIG1hcmdpbi5sZWZ0ID0gcGFydHNbMV07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgbWFyZ2luLnJpZ2h0ID0gcGFydHNbMV07XG4gICAgICAgICAgICBtYXJnaW4uYm90dG9tID0gcGFydHNbMl07XG4gICAgICAgICAgICBtYXJnaW4ubGVmdCA9IHBhcnRzWzNdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1tzZWVtbHkvZ2V0TWFyZ2luXTonICsgdmFsdWUgKyAnIGlzIG5vdCBhIHZhbGlkIHZhbHVlLicpO1xuICAgIH1cbiAgICBpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIG1hcmdpbjtcbiAgICByZXR1cm4gbWFyZ2luW3Bvc2l0aW9uXTtcbn1cbmZ1bmN0aW9uIGdldEdhcCh2YWx1ZSwgb3JpZW50KSB7XG4gICAgY29uc3QgW3Jvd0dhcCwgY29sR2FwXSA9IHZhbHVlLnNwbGl0KCcgJyk7XG4gICAgaWYgKCFvcmllbnQpXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb3c6IHJvd0dhcCxcbiAgICAgICAgICAgIGNvbDogY29sR2FwIHx8IHJvd0dhcFxuICAgICAgICB9O1xuICAgIHJldHVybiBvcmllbnQgPT09ICdyb3cnID8gcm93R2FwIDogY29sR2FwO1xufVxuZXhwb3J0IHsgZ2V0TWFyZ2luLCBnZXRNYXJnaW4gYXMgZ2V0UGFkZGluZywgZ2V0R2FwIH07XG5leHBvcnQgeyBwYXJzZVJlc3BvbnNpdmVQcm9wLCBwYXJzZVJlc3BvbnNpdmVQcm9wVmFsdWUgfSBmcm9tICcuL3Jlc3BvbnNpdmUnO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmVzcG9uc2l2ZVByb3AocmVwb25zaXZlUHJvcCkge1xuICAgIGlmICh0eXBlb2YgcmVwb25zaXZlUHJvcCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJyc6IHJlcG9uc2l2ZVByb3AudG9TdHJpbmcoKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBwYXJhbXMgPSB7fTtcbiAgICByZXBvbnNpdmVQcm9wLnNwbGl0KC8gKy8pLmZvckVhY2goKHBhaXJMaXRlcmFsKSA9PiB7XG4gICAgICAgIGlmIChwYWlyTGl0ZXJhbCA9PT0gJycpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IFtwcmVmaXgsIHZhbHVlXSA9IHBhaXJMaXRlcmFsLnNwbGl0KCc6Jyk7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXJhbXNbJyddID0gcHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyYW1zW3ByZWZpeF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwYXJhbXM7XG59XG5mdW5jdGlvbiBwYXJzZVJlc3BvbnNpdmVQcm9wVmFsdWUocmVwb25zaXZlUHJvcCwgYWN0aXZlS2V5T3JTaXplKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChyZXBvbnNpdmVQcm9wID09PSB1bmRlZmluZWQgfHwgcmVwb25zaXZlUHJvcCA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjb25zdCBjbGFzc09iaiA9IHBhcnNlUmVzcG9uc2l2ZVByb3AocmVwb25zaXZlUHJvcCk7XG4gICAgaWYgKGFjdGl2ZUtleU9yU2l6ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gY2xhc3NPYmpbJyddO1xuICAgIGlmICh0eXBlb2YgYWN0aXZlS2V5T3JTaXplID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gKF9hID0gY2xhc3NPYmpbYWN0aXZlS2V5T3JTaXplXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY2xhc3NPYmpbJyddO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFjdGl2ZUtleU9yU2l6ZSkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGFjdGl2ZUtleU9yU2l6ZS5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYWN0aXZlS2V5T3JTaXplW2ldO1xuICAgICAgICAgICAgaWYgKGtleSBpbiBjbGFzc09iailcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xhc3NPYmpba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xhc3NPYmpbJyddO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gSGVyZSB3ZSBzdXBwb3NlIGFsbCB0aGUga2V5cyBhcmUgbnVtYmVyIGZvcm1hdHRlZFxuICAgICAgICBsZXQgYWN0aXZlVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBhY3RpdmVLZXkgPSAtMTtcbiAgICAgICAgT2JqZWN0LmtleXMoY2xhc3NPYmopLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5QXNOdW0gPSBOdW1iZXIoa2V5KTtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKGtleUFzTnVtKSAmJlxuICAgICAgICAgICAgICAgIGFjdGl2ZUtleU9yU2l6ZSA+PSBrZXlBc051bSAmJlxuICAgICAgICAgICAgICAgIGtleUFzTnVtID49IGFjdGl2ZUtleSkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUtleSA9IGtleUFzTnVtO1xuICAgICAgICAgICAgICAgIGFjdGl2ZVZhbHVlID0gY2xhc3NPYmpba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhY3RpdmVWYWx1ZTtcbiAgICB9XG59XG5leHBvcnQgeyBwYXJzZVJlc3BvbnNpdmVQcm9wVmFsdWUgfTtcbiIsImV4cG9ydCBmdW5jdGlvbiBoYXBwZW5zSW4oZSwgZGF0YVNldFByb3BOYW1lKSB7XG4gICAgbGV0IHsgdGFyZ2V0IH0gPSBlO1xuICAgIHdoaWxlICh0YXJnZXQpIHtcbiAgICAgICAgaWYgKHRhcmdldC5kYXRhc2V0KSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmRhdGFzZXRbZGF0YVNldFByb3BOYW1lXSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4iLCJpbXBvcnQgeyBpc0V4cGlsaWNpdGx5Tm90TG9hZGVkLCBtZXJnZSwgbWludXMsIHRyYXZlcnNlV2l0aENiLCBUUkFWRVJTRV9DT01NQU5EIH0gZnJvbSAnLi91dGlscyc7XG5leHBvcnQgY2xhc3MgU3VidHJlZU5vdExvYWRlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPVxuICAgICAgICAgICAgJ1N1YnRyZWVOb3RMb2FkZWRFcnJvcjogY2hlY2tpbmcgYSBzdWJ0cmVlIHdob3NlIHJlcXVpcmVkIG5vZGVzIGFyZSBub3QgZnVsbHkgbG9hZGVkLic7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RXh0ZW5kZWRDaGVja2VkS2V5U2V0QWZ0ZXJDaGVjayhjaGVja0tleXMsIGN1cnJlbnRDaGVja2VkS2V5cywgdHJlZU1hdGUsIGFsbG93Tm90TG9hZGVkKSB7XG4gICAgcmV0dXJuIGdldEV4dGVuZGVkQ2hlY2tlZEtleVNldChjdXJyZW50Q2hlY2tlZEtleXMuY29uY2F0KGNoZWNrS2V5cyksIHRyZWVNYXRlLCBhbGxvd05vdExvYWRlZCwgZmFsc2UpO1xufVxuZnVuY3Rpb24gZ2V0QXZhaWxhYmxlQXNjZW5kYW50Tm9kZVNldCh1bmNoZWNrZWRLZXlzLCB0cmVlTWF0ZSkge1xuICAgIGNvbnN0IHZpc2l0ZWRLZXlzID0gbmV3IFNldCgpO1xuICAgIHVuY2hlY2tlZEtleXMuZm9yRWFjaCgodW5jaGVja2VkS2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IHVuY2hlY2tlZFRyZWVOb2RlID0gdHJlZU1hdGUudHJlZU5vZGVNYXAuZ2V0KHVuY2hlY2tlZEtleSk7XG4gICAgICAgIGlmICh1bmNoZWNrZWRUcmVlTm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgbm9kZUN1cnNvciA9IHVuY2hlY2tlZFRyZWVOb2RlLnBhcmVudDtcbiAgICAgICAgICAgIHdoaWxlIChub2RlQ3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVDdXJzb3IuZGlzYWJsZWQpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmICh2aXNpdGVkS2V5cy5oYXMobm9kZUN1cnNvci5rZXkpKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaXRlZEtleXMuYWRkKG5vZGVDdXJzb3Iua2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbm9kZUN1cnNvciA9IG5vZGVDdXJzb3IucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHZpc2l0ZWRLZXlzO1xufVxuZnVuY3Rpb24gZ2V0RXh0ZW5kZWRDaGVja2VkS2V5U2V0QWZ0ZXJVbmNoZWNrKHVuY2hlY2tlZEtleXMsIGN1cnJlbnRDaGVja2VkS2V5cywgdHJlZU1hdGUsIGFsbG93Tm90TG9hZGVkKSB7XG4gICAgY29uc3QgZXh0ZW5kZWRDaGVja2VkS2V5U2V0ID0gZ2V0RXh0ZW5kZWRDaGVja2VkS2V5U2V0KGN1cnJlbnRDaGVja2VkS2V5cywgdHJlZU1hdGUsIGFsbG93Tm90TG9hZGVkLCBmYWxzZSk7XG4gICAgY29uc3QgZXh0ZW5kZWRLZXlTZXRUb1VuY2hlY2sgPSBnZXRFeHRlbmRlZENoZWNrZWRLZXlTZXQodW5jaGVja2VkS2V5cywgdHJlZU1hdGUsIGFsbG93Tm90TG9hZGVkLCB0cnVlKTtcbiAgICBjb25zdCBhc2NlbmRhbnRLZXlTZXQgPSBnZXRBdmFpbGFibGVBc2NlbmRhbnROb2RlU2V0KHVuY2hlY2tlZEtleXMsIHRyZWVNYXRlKTtcbiAgICBjb25zdCBrZXlzVG9SZW1vdmUgPSBbXTtcbiAgICBleHRlbmRlZENoZWNrZWRLZXlTZXQuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGlmIChleHRlbmRlZEtleVNldFRvVW5jaGVjay5oYXMoa2V5KSB8fCBhc2NlbmRhbnRLZXlTZXQuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIGtleXNUb1JlbW92ZS5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBrZXlzVG9SZW1vdmUuZm9yRWFjaCgoa2V5KSA9PiBleHRlbmRlZENoZWNrZWRLZXlTZXQuZGVsZXRlKGtleSkpO1xuICAgIHJldHVybiBleHRlbmRlZENoZWNrZWRLZXlTZXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2hlY2tlZEtleXMob3B0aW9ucywgdHJlZU1hdGUpIHtcbiAgICBjb25zdCB7IGNoZWNrZWRLZXlzLCBrZXlzVG9DaGVjaywga2V5c1RvVW5jaGVjaywgaW5kZXRlcm1pbmF0ZUtleXMsIGNhc2NhZGUsIGxlYWZPbmx5LCBjaGVja1N0cmF0ZWd5LCBhbGxvd05vdExvYWRlZCB9ID0gb3B0aW9ucztcbiAgICBpZiAoIWNhc2NhZGUpIHtcbiAgICAgICAgaWYgKGtleXNUb0NoZWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2hlY2tlZEtleXM6IG1lcmdlKGNoZWNrZWRLZXlzLCBrZXlzVG9DaGVjayksXG4gICAgICAgICAgICAgICAgaW5kZXRlcm1pbmF0ZUtleXM6IEFycmF5LmZyb20oaW5kZXRlcm1pbmF0ZUtleXMpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleXNUb1VuY2hlY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjaGVja2VkS2V5czogbWludXMoY2hlY2tlZEtleXMsIGtleXNUb1VuY2hlY2spLFxuICAgICAgICAgICAgICAgIGluZGV0ZXJtaW5hdGVLZXlzOiBBcnJheS5mcm9tKGluZGV0ZXJtaW5hdGVLZXlzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2hlY2tlZEtleXM6IEFycmF5LmZyb20oY2hlY2tlZEtleXMpLFxuICAgICAgICAgICAgICAgIGluZGV0ZXJtaW5hdGVLZXlzOiBBcnJheS5mcm9tKGluZGV0ZXJtaW5hdGVLZXlzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB7IGxldmVsVHJlZU5vZGVNYXAgfSA9IHRyZWVNYXRlO1xuICAgIGxldCBleHRlbmRlZENoZWNrZWRLZXlTZXQ7XG4gICAgaWYgKGtleXNUb1VuY2hlY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBleHRlbmRlZENoZWNrZWRLZXlTZXQgPSBnZXRFeHRlbmRlZENoZWNrZWRLZXlTZXRBZnRlclVuY2hlY2soa2V5c1RvVW5jaGVjaywgY2hlY2tlZEtleXMsIHRyZWVNYXRlLCBhbGxvd05vdExvYWRlZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGtleXNUb0NoZWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZXh0ZW5kZWRDaGVja2VkS2V5U2V0ID0gZ2V0RXh0ZW5kZWRDaGVja2VkS2V5U2V0QWZ0ZXJDaGVjayhrZXlzVG9DaGVjaywgY2hlY2tlZEtleXMsIHRyZWVNYXRlLCBhbGxvd05vdExvYWRlZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBleHRlbmRlZENoZWNrZWRLZXlTZXQgPSBnZXRFeHRlbmRlZENoZWNrZWRLZXlTZXQoY2hlY2tlZEtleXMsIHRyZWVNYXRlLCBhbGxvd05vdExvYWRlZCwgZmFsc2UpO1xuICAgIH1cbiAgICBjb25zdCBjaGVja1N0cmF0ZWd5SXNQYXJlbnQgPSBjaGVja1N0cmF0ZWd5ID09PSAncGFyZW50JztcbiAgICBjb25zdCBjaGVja1N0cmF0ZWd5SXNDaGlsZCA9IGNoZWNrU3RyYXRlZ3kgPT09ICdjaGlsZCcgfHwgbGVhZk9ubHk7XG4gICAgY29uc3Qgc3ludGhldGljQ2hlY2tlZEtleVNldCA9IGV4dGVuZGVkQ2hlY2tlZEtleVNldDtcbiAgICBjb25zdCBzeW50aGV0aWNJbmRldGVybWluYXRlS2V5U2V0ID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IG1heExldmVsID0gTWF0aC5tYXguYXBwbHkobnVsbCwgQXJyYXkuZnJvbShsZXZlbFRyZWVOb2RlTWFwLmtleXMoKSkpO1xuICAgIC8vIGNhc2NhZGUgY2hlY2tcbiAgICAvLyAxLiBpZiB0cmVlIGlzIGZ1bGx5IGxvYWRlZCwgaXQganVzdCB3b3Jrc1xuICAgIC8vIDIuIGlmIHRoZSB0cmVlIGlzIG5vdCBmdWxseSBsb2FkZWQsIHdlIGFzc3VtZSB0aGF0IGtleXMgd2hpY2ggaXMgaW4gbm90XG4gICAgLy8gICAgbG9hZGVkIHRyZWUgYXJlIG5vdCBpbiBjaGVja2VkIGtleXNcbiAgICAvLyAgICBmb3IgZXhhbXBsZTpcbiAgICAvLyAgICBhIC0tIGIoZnVsbHktbG9hZGVkKSAgIC0tIGMoZnVsbHktbG9hZGVkKVxuICAgIC8vICAgICAgfC0gZChwYXJ0aWFsLWxvYWRlZCkgLS0gP2Uobm90LWxvYWRlZClcbiAgICAvLyAgICBpbiB0aGUgY2FzZSwgYGVgIGlzIGFzc3VtZWQgbm90IHRvIGJlIGNoZWNrZWQsIG5vciB3ZSBjYW4ndCBjYWxjIGBkYCdzXG4gICAgLy8gICAgYW5kIGBhYCdzIHN0YXR1c1xuICAgIGZvciAobGV0IGxldmVsID0gbWF4TGV2ZWw7IGxldmVsID49IDA7IGxldmVsIC09IDEpIHtcbiAgICAgICAgY29uc3QgbGV2ZWxJc1plcm8gPSBsZXZlbCA9PT0gMDtcbiAgICAgICAgLy8gaXQgc2hvdWxkIGV4aXN0cywgbm9yIGl0IGlzIGEgYnVnXG4gICAgICAgIGNvbnN0IGxldmVsVHJlZU5vZGVzID0gbGV2ZWxUcmVlTm9kZU1hcC5nZXQobGV2ZWwpO1xuICAgICAgICBmb3IgKGNvbnN0IGxldmVsVHJlZU5vZGUgb2YgbGV2ZWxUcmVlTm9kZXMpIHtcbiAgICAgICAgICAgIGlmIChsZXZlbFRyZWVOb2RlLmlzTGVhZilcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5OiBsZXZlbFRyZWVOb2RlS2V5LCBzaGFsbG93TG9hZGVkIH0gPSBsZXZlbFRyZWVOb2RlO1xuICAgICAgICAgICAgaWYgKGNoZWNrU3RyYXRlZ3lJc0NoaWxkICYmIHNoYWxsb3dMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgIGxldmVsVHJlZU5vZGUuY2hpbGRyZW4uZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXYuZGlzYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICF2LmlzTGVhZiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdi5zaGFsbG93TG9hZGVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzeW50aGV0aWNDaGVja2VkS2V5U2V0Lmhhcyh2LmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5bnRoZXRpY0NoZWNrZWRLZXlTZXQuZGVsZXRlKHYua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxldmVsVHJlZU5vZGUuZGlzYWJsZWQgfHwgIXNoYWxsb3dMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmdWxseUNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgbGV0IHBhcnRpYWxDaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgYWxsRGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgLy8gaXQgaXMgc2hhbGxvdyBsb2FkZWQsIHNvIGBjaGlsZHJlbmAgbXVzdCBleGlzdFxuICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZE5vZGUgb2YgbGV2ZWxUcmVlTm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gY2hpbGROb2RlLmtleTtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGROb2RlLmRpc2FibGVkKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAoYWxsRGlzYWJsZWQpXG4gICAgICAgICAgICAgICAgICAgIGFsbERpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHN5bnRoZXRpY0NoZWNrZWRLZXlTZXQuaGFzKGNoaWxkS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsQ2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN5bnRoZXRpY0luZGV0ZXJtaW5hdGVLZXlTZXQuaGFzKGNoaWxkS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsQ2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGx5Q2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGx5Q2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFydGlhbENoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZ1bGx5Q2hlY2tlZCAmJiAhYWxsRGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tTdHJhdGVneUlzUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgICAgIGxldmVsVHJlZU5vZGUuY2hpbGRyZW4uZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2LmRpc2FibGVkICYmIHN5bnRoZXRpY0NoZWNrZWRLZXlTZXQuaGFzKHYua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bnRoZXRpY0NoZWNrZWRLZXlTZXQuZGVsZXRlKHYua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN5bnRoZXRpY0NoZWNrZWRLZXlTZXQuYWRkKGxldmVsVHJlZU5vZGVLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFydGlhbENoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBzeW50aGV0aWNJbmRldGVybWluYXRlS2V5U2V0LmFkZChsZXZlbFRyZWVOb2RlS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZXZlbElzWmVybyAmJlxuICAgICAgICAgICAgICAgIGNoZWNrU3RyYXRlZ3lJc0NoaWxkICYmXG4gICAgICAgICAgICAgICAgc3ludGhldGljQ2hlY2tlZEtleVNldC5oYXMobGV2ZWxUcmVlTm9kZUtleSkpIHtcbiAgICAgICAgICAgICAgICBzeW50aGV0aWNDaGVja2VkS2V5U2V0LmRlbGV0ZShsZXZlbFRyZWVOb2RlS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjaGVja2VkS2V5czogQXJyYXkuZnJvbShzeW50aGV0aWNDaGVja2VkS2V5U2V0KSxcbiAgICAgICAgaW5kZXRlcm1pbmF0ZUtleXM6IEFycmF5LmZyb20oc3ludGhldGljSW5kZXRlcm1pbmF0ZUtleVNldClcbiAgICB9O1xufVxuLy8gdW5jaGVja2luZyBpcyBzYWZlIHdoZW4gZG9pbmcgY2FzY2FkZSB1bmNoZWNrIGluIGFzeW5jIG1vZGVcbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHRlbmRlZENoZWNrZWRLZXlTZXQoY2hlY2tlZEtleXMsIHRyZWVNYXRlLCBhbGxvd05vdExvYWRlZCwgaXNVbmNoZWNraW5nKSB7XG4gICAgY29uc3QgeyB0cmVlTm9kZU1hcCwgZ2V0Q2hpbGRyZW4gfSA9IHRyZWVNYXRlO1xuICAgIGNvbnN0IHZpc2l0ZWRLZXlTZXQgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgZXh0ZW5kZWRLZXlTZXQgPSBuZXcgU2V0KGNoZWNrZWRLZXlzKTtcbiAgICBjaGVja2VkS2V5cy5mb3JFYWNoKChjaGVja2VkS2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IGNoZWNrZWRUcmVlTm9kZSA9IHRyZWVOb2RlTWFwLmdldChjaGVja2VkS2V5KTtcbiAgICAgICAgaWYgKGNoZWNrZWRUcmVlTm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0cmF2ZXJzZVdpdGhDYihjaGVja2VkVHJlZU5vZGUsICh0cmVlTm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0cmVlTm9kZS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVFJBVkVSU0VfQ09NTUFORC5TVE9QO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IGtleSB9ID0gdHJlZU5vZGU7XG4gICAgICAgICAgICAgICAgaWYgKHZpc2l0ZWRLZXlTZXQuaGFzKGtleSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB2aXNpdGVkS2V5U2V0LmFkZChrZXkpO1xuICAgICAgICAgICAgICAgIC8vIEFkZGluZyBrZXlzIGJlZm9yZSBsb2FkZWQgY2hlY2sgaXMgb2theSwgc2luY2UgaWYgbm90IHZhbGlkIGVycm9yXG4gICAgICAgICAgICAgICAgLy8gd291bGQgYmUgdGhyb3duXG4gICAgICAgICAgICAgICAgZXh0ZW5kZWRLZXlTZXQuYWRkKGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRXhwaWxpY2l0bHlOb3RMb2FkZWQodHJlZU5vZGUucmF3Tm9kZSwgZ2V0Q2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1VuY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUUkFWRVJTRV9DT01NQU5ELlNUT1A7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWFsbG93Tm90TG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3VidHJlZU5vdExvYWRlZEVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBleHRlbmRlZEtleVNldDtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBjb250YWlucyhwYXJlbnQsIGNoaWxkKSB7XG4gICAgY29uc3QgcGFyZW50S2V5ID0gcGFyZW50LmtleTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5tb2RpZmllZC1sb29wLWNvbmRpdGlvblxuICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgICBpZiAoY2hpbGQua2V5ID09PSBwYXJlbnRLZXkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgY2hpbGQgPSBjaGlsZC5wYXJlbnQ7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbiIsImltcG9ydCB7IGdldENoZWNrZWRLZXlzIH0gZnJvbSAnLi9jaGVjayc7XG5pbXBvcnQgeyB0b0FycmF5LCBpc0Rpc2FibGVkLCBpc0xlYWYsIGlzR3JvdXAsIGlzTm9kZUludmFsaWQsIHVud3JhcENoZWNrZWRLZXlzLCBpc1NoYWxsb3dMb2FkZWQsIHVud3JhcEluZGV0ZXJtaW5hdGVLZXlzLCBnZXROb25MZWFmS2V5cywgaXNJZ25vcmVkLCBkZWZhdWx0R2V0Q2hpbGRyZW4sIGRlZmF1bHRHZXRLZXkgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IGdldFBhdGggfSBmcm9tICcuL3BhdGgnO1xuaW1wb3J0IHsgbW92ZU1ldGhvZHMsIGdldEZpcnN0QXZhaWxhYmxlTm9kZSB9IGZyb20gJy4vbW92ZSc7XG5pbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnLi9mbGF0dGVuJztcbmltcG9ydCB7IGNvbnRhaW5zIH0gZnJvbSAnLi9jb250YWlucyc7XG5mdW5jdGlvbiBjcmVhdGVUcmVlTm9kZXMocmF3Tm9kZXMsIHRyZWVOb2RlTWFwLCBsZXZlbFRyZWVOb2RlTWFwLCBub2RlUHJvdG8sIGdldENoaWxkcmVuLCBwYXJlbnQgPSBudWxsLCBsZXZlbCA9IDApIHtcbiAgICBjb25zdCB0cmVlTm9kZXMgPSBbXTtcbiAgICByYXdOb2Rlcy5mb3JFYWNoKChyYXdOb2RlLCBpbmRleCkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICAgICAgICBpc05vZGVJbnZhbGlkKHJhd05vZGUsIGdldENoaWxkcmVuKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW3RyZWVtYXRlXTogbm9kZScsIHJhd05vZGUsICdpcyBpbnZhbGlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJlZU5vZGUgPSBPYmplY3QuY3JlYXRlKG5vZGVQcm90byk7XG4gICAgICAgIHRyZWVOb2RlLnJhd05vZGUgPSByYXdOb2RlO1xuICAgICAgICB0cmVlTm9kZS5zaWJsaW5ncyA9IHRyZWVOb2RlcztcbiAgICAgICAgdHJlZU5vZGUubGV2ZWwgPSBsZXZlbDtcbiAgICAgICAgdHJlZU5vZGUuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdHJlZU5vZGUuaXNGaXJzdENoaWxkID0gaW5kZXggPT09IDA7XG4gICAgICAgIHRyZWVOb2RlLmlzTGFzdENoaWxkID0gaW5kZXggKyAxID09PSByYXdOb2Rlcy5sZW5ndGg7XG4gICAgICAgIHRyZWVOb2RlLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgaWYgKCF0cmVlTm9kZS5pZ25vcmVkKSB7XG4gICAgICAgICAgICBjb25zdCByYXdDaGlsZHJlbiA9IGdldENoaWxkcmVuKHJhd05vZGUpO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmF3Q2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4gPSBjcmVhdGVUcmVlTm9kZXMocmF3Q2hpbGRyZW4sIHRyZWVOb2RlTWFwLCBsZXZlbFRyZWVOb2RlTWFwLCBub2RlUHJvdG8sIGdldENoaWxkcmVuLCB0cmVlTm9kZSwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cmVlTm9kZXMucHVzaCh0cmVlTm9kZSk7XG4gICAgICAgIHRyZWVOb2RlTWFwLnNldCh0cmVlTm9kZS5rZXksIHRyZWVOb2RlKTtcbiAgICAgICAgaWYgKCFsZXZlbFRyZWVOb2RlTWFwLmhhcyhsZXZlbCkpXG4gICAgICAgICAgICBsZXZlbFRyZWVOb2RlTWFwLnNldChsZXZlbCwgW10pO1xuICAgICAgICAoX2EgPSBsZXZlbFRyZWVOb2RlTWFwLmdldChsZXZlbCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wdXNoKHRyZWVOb2RlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdHJlZU5vZGVzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRyZWVNYXRlKHJhd05vZGVzLCBvcHRpb25zID0ge30pIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgdHJlZU5vZGVNYXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgbGV2ZWxUcmVlTm9kZU1hcCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCB7IGdldERpc2FibGVkID0gaXNEaXNhYmxlZCwgZ2V0SWdub3JlZCA9IGlzSWdub3JlZCwgZ2V0SXNHcm91cCA9IGlzR3JvdXAsIGdldEtleSA9IGRlZmF1bHRHZXRLZXkgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgX2dldENoaWxkcmVuID0gKF9hID0gb3B0aW9ucy5nZXRDaGlsZHJlbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZGVmYXVsdEdldENoaWxkcmVuO1xuICAgIGNvbnN0IGdldENoaWxkcmVuID0gb3B0aW9ucy5pZ25vcmVFbXB0eUNoaWxkcmVuXG4gICAgICAgID8gKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gX2dldENoaWxkcmVuKG5vZGUpO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZHJlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjaGlsZHJlbjtcbiAgICAgICAgfVxuICAgICAgICA6IF9nZXRDaGlsZHJlbjtcbiAgICBjb25zdCBub2RlUHJvdG8gPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgZ2V0IGtleSgpIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdCBwYXNzIHBhcmVudCBvciByZWxhdGVkIHRoaW5ncyB0byBpdFxuICAgICAgICAgICAgLy8gdGhlIGtleSBuZWVkIHRvIGJlIHNwZWNpZmllZCBleHBsaWNpdGx5XG4gICAgICAgICAgICByZXR1cm4gZ2V0S2V5KHRoaXMucmF3Tm9kZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXREaXNhYmxlZCh0aGlzLnJhd05vZGUpO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgaXNHcm91cCgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRJc0dyb3VwKHRoaXMucmF3Tm9kZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBpc0xlYWYoKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNMZWFmKHRoaXMucmF3Tm9kZSwgZ2V0Q2hpbGRyZW4pO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgc2hhbGxvd0xvYWRlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1NoYWxsb3dMb2FkZWQodGhpcy5yYXdOb2RlLCBnZXRDaGlsZHJlbik7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBpZ25vcmVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldElnbm9yZWQodGhpcy5yYXdOb2RlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29udGFpbnMobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5zKHRoaXMsIG5vZGUpO1xuICAgICAgICB9XG4gICAgfSwgbW92ZU1ldGhvZHMpO1xuICAgIGNvbnN0IHRyZWVOb2RlcyA9IGNyZWF0ZVRyZWVOb2RlcyhyYXdOb2RlcywgdHJlZU5vZGVNYXAsIGxldmVsVHJlZU5vZGVNYXAsIG5vZGVQcm90bywgZ2V0Q2hpbGRyZW4pO1xuICAgIGZ1bmN0aW9uIGdldE5vZGUoa2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT09IG51bGwgfHwga2V5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgdG1Ob2RlID0gdHJlZU5vZGVNYXAuZ2V0KGtleSk7XG4gICAgICAgIGlmICh0bU5vZGUgJiYgIXRtTm9kZS5pc0dyb3VwICYmICF0bU5vZGUuaWdub3JlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRtTm9kZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gX2dldE5vZGUoa2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT09IG51bGwgfHwga2V5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgdG1Ob2RlID0gdHJlZU5vZGVNYXAuZ2V0KGtleSk7XG4gICAgICAgIGlmICh0bU5vZGUgJiYgIXRtTm9kZS5pZ25vcmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdG1Ob2RlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRQcmV2KGtleSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBub2RlID0gX2dldE5vZGUoa2V5KTtcbiAgICAgICAgaWYgKCFub2RlKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBub2RlLmdldFByZXYob3B0aW9ucyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldE5leHQoa2V5LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBfZ2V0Tm9kZShrZXkpO1xuICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG5vZGUuZ2V0TmV4dChvcHRpb25zKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0UGFyZW50KGtleSkge1xuICAgICAgICBjb25zdCBub2RlID0gX2dldE5vZGUoa2V5KTtcbiAgICAgICAgaWYgKCFub2RlKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBub2RlLmdldFBhcmVudCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRDaGlsZChrZXkpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IF9nZXROb2RlKGtleSk7XG4gICAgICAgIGlmICghbm9kZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbm9kZS5nZXRDaGlsZCgpO1xuICAgIH1cbiAgICBjb25zdCB0cmVlbWF0ZSA9IHtcbiAgICAgICAgdHJlZU5vZGVzLFxuICAgICAgICB0cmVlTm9kZU1hcCxcbiAgICAgICAgbGV2ZWxUcmVlTm9kZU1hcCxcbiAgICAgICAgbWF4TGV2ZWw6IE1hdGgubWF4KC4uLmxldmVsVHJlZU5vZGVNYXAua2V5cygpKSxcbiAgICAgICAgZ2V0Q2hpbGRyZW4sXG4gICAgICAgIGdldEZsYXR0ZW5lZE5vZGVzKGV4cGFuZGVkS2V5cykge1xuICAgICAgICAgICAgcmV0dXJuIGZsYXR0ZW4odHJlZU5vZGVzLCBleHBhbmRlZEtleXMpO1xuICAgICAgICB9LFxuICAgICAgICBnZXROb2RlLFxuICAgICAgICBnZXRQcmV2LFxuICAgICAgICBnZXROZXh0LFxuICAgICAgICBnZXRQYXJlbnQsXG4gICAgICAgIGdldENoaWxkLFxuICAgICAgICBnZXRGaXJzdEF2YWlsYWJsZU5vZGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0Rmlyc3RBdmFpbGFibGVOb2RlKHRyZWVOb2Rlcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFBhdGgoa2V5LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRQYXRoKGtleSwgb3B0aW9ucywgdHJlZW1hdGUpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDaGVja2VkS2V5cyhjaGVja2VkS2V5cywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgICAgICBjb25zdCB7IGNhc2NhZGUgPSB0cnVlLCBsZWFmT25seSA9IGZhbHNlLCBjaGVja1N0cmF0ZWd5ID0gJ2FsbCcsIGFsbG93Tm90TG9hZGVkID0gZmFsc2UgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgICByZXR1cm4gZ2V0Q2hlY2tlZEtleXMoe1xuICAgICAgICAgICAgICAgIGNoZWNrZWRLZXlzOiB1bndyYXBDaGVja2VkS2V5cyhjaGVja2VkS2V5cyksXG4gICAgICAgICAgICAgICAgaW5kZXRlcm1pbmF0ZUtleXM6IHVud3JhcEluZGV0ZXJtaW5hdGVLZXlzKGNoZWNrZWRLZXlzKSxcbiAgICAgICAgICAgICAgICBjYXNjYWRlLFxuICAgICAgICAgICAgICAgIGxlYWZPbmx5LFxuICAgICAgICAgICAgICAgIGNoZWNrU3RyYXRlZ3ksXG4gICAgICAgICAgICAgICAgYWxsb3dOb3RMb2FkZWRcbiAgICAgICAgICAgIH0sIHRyZWVtYXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hlY2soa2V5c1RvQ2hlY2ssIGNoZWNrZWRLZXlzLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY2FzY2FkZSA9IHRydWUsIGxlYWZPbmx5ID0gZmFsc2UsIGNoZWNrU3RyYXRlZ3kgPSAnYWxsJywgYWxsb3dOb3RMb2FkZWQgPSBmYWxzZSB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgIHJldHVybiBnZXRDaGVja2VkS2V5cyh7XG4gICAgICAgICAgICAgICAgY2hlY2tlZEtleXM6IHVud3JhcENoZWNrZWRLZXlzKGNoZWNrZWRLZXlzKSxcbiAgICAgICAgICAgICAgICBpbmRldGVybWluYXRlS2V5czogdW53cmFwSW5kZXRlcm1pbmF0ZUtleXMoY2hlY2tlZEtleXMpLFxuICAgICAgICAgICAgICAgIGtleXNUb0NoZWNrOiBrZXlzVG9DaGVjayA9PT0gdW5kZWZpbmVkIHx8IGtleXNUb0NoZWNrID09PSBudWxsXG4gICAgICAgICAgICAgICAgICAgID8gW11cbiAgICAgICAgICAgICAgICAgICAgOiB0b0FycmF5KGtleXNUb0NoZWNrKSxcbiAgICAgICAgICAgICAgICBjYXNjYWRlLFxuICAgICAgICAgICAgICAgIGxlYWZPbmx5LFxuICAgICAgICAgICAgICAgIGNoZWNrU3RyYXRlZ3ksXG4gICAgICAgICAgICAgICAgYWxsb3dOb3RMb2FkZWRcbiAgICAgICAgICAgIH0sIHRyZWVtYXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5jaGVjayhrZXlzVG9VbmNoZWNrLCBjaGVja2VkS2V5cywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgICAgICBjb25zdCB7IGNhc2NhZGUgPSB0cnVlLCBsZWFmT25seSA9IGZhbHNlLCBjaGVja1N0cmF0ZWd5ID0gJ2FsbCcsIGFsbG93Tm90TG9hZGVkID0gZmFsc2UgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgICByZXR1cm4gZ2V0Q2hlY2tlZEtleXMoe1xuICAgICAgICAgICAgICAgIGNoZWNrZWRLZXlzOiB1bndyYXBDaGVja2VkS2V5cyhjaGVja2VkS2V5cyksXG4gICAgICAgICAgICAgICAgaW5kZXRlcm1pbmF0ZUtleXM6IHVud3JhcEluZGV0ZXJtaW5hdGVLZXlzKGNoZWNrZWRLZXlzKSxcbiAgICAgICAgICAgICAgICBrZXlzVG9VbmNoZWNrOiBrZXlzVG9VbmNoZWNrID09PSBudWxsIHx8IGtleXNUb1VuY2hlY2sgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA/IFtdXG4gICAgICAgICAgICAgICAgICAgIDogdG9BcnJheShrZXlzVG9VbmNoZWNrKSxcbiAgICAgICAgICAgICAgICBjYXNjYWRlLFxuICAgICAgICAgICAgICAgIGxlYWZPbmx5LFxuICAgICAgICAgICAgICAgIGNoZWNrU3RyYXRlZ3ksXG4gICAgICAgICAgICAgICAgYWxsb3dOb3RMb2FkZWRcbiAgICAgICAgICAgIH0sIHRyZWVtYXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Tm9uTGVhZktleXMob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0Tm9uTGVhZktleXModHJlZU5vZGVzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHRyZWVtYXRlO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW4odHJlZU5vZGVzLCBleHBhbmRlZEtleXMpIHtcbiAgICBjb25zdCBleHBhbmRlZEtleVNldCA9IGV4cGFuZGVkS2V5cyA/IG5ldyBTZXQoZXhwYW5kZWRLZXlzKSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBmbGF0dGVuZWROb2RlcyA9IFtdO1xuICAgIGZ1bmN0aW9uIHRyYXZlcnNlKHRyZWVOb2Rlcykge1xuICAgICAgICB0cmVlTm9kZXMuZm9yRWFjaCgodHJlZU5vZGUpID0+IHtcbiAgICAgICAgICAgIGZsYXR0ZW5lZE5vZGVzLnB1c2godHJlZU5vZGUpO1xuICAgICAgICAgICAgaWYgKHRyZWVOb2RlLmlzTGVhZiB8fCAhdHJlZU5vZGUuY2hpbGRyZW4gfHwgdHJlZU5vZGUuaWdub3JlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodHJlZU5vZGUuaXNHcm91cCkge1xuICAgICAgICAgICAgICAgIC8vIGdyb3VwIG5vZGUgc2hvdWxkbid0IGJlIGV4cGFuZGVkXG4gICAgICAgICAgICAgICAgdHJhdmVyc2UodHJlZU5vZGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgICAvLyBub3JtYWwgbm9uLWxlYWYgbm9kZVxuICAgICAgICAgICAgZXhwYW5kZWRLZXlTZXQgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIGV4cGFuZGVkS2V5U2V0Lmhhcyh0cmVlTm9kZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgdHJhdmVyc2UodHJlZU5vZGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdHJhdmVyc2UodHJlZU5vZGVzKTtcbiAgICByZXR1cm4gZmxhdHRlbmVkTm9kZXM7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0Rmlyc3RBdmFpbGFibGVOb2RlKG5vZGVzKSB7XG4gICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3Qgbm9kZSA9IG5vZGVzWzBdO1xuICAgIGlmIChub2RlLmlzR3JvdXAgfHwgbm9kZS5pZ25vcmVkIHx8IG5vZGUuZGlzYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuZ2V0TmV4dCgpO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbn1cbmZ1bmN0aW9uIHJhd0dldE5leHQobm9kZSwgbG9vcCkge1xuICAgIGNvbnN0IHNpYnMgPSBub2RlLnNpYmxpbmdzO1xuICAgIGNvbnN0IGwgPSBzaWJzLmxlbmd0aDtcbiAgICBjb25zdCB7IGluZGV4IH0gPSBub2RlO1xuICAgIGlmIChsb29wKSB7XG4gICAgICAgIHJldHVybiBzaWJzWyhpbmRleCArIDEpICUgbF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoaW5kZXggPT09IHNpYnMubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gc2lic1tpbmRleCArIDFdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1vdmUoZnJvbU5vZGUsIGRpciwgeyBsb29wID0gZmFsc2UsIGluY2x1ZGVEaXNhYmxlZCA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGNvbnN0IGl0ZXJhdGUgPSBkaXIgPT09ICdwcmV2JyA/IHJhd0dldFByZXYgOiByYXdHZXROZXh0O1xuICAgIGNvbnN0IGdldENoaWxkT3B0aW9ucyA9IHtcbiAgICAgICAgcmV2ZXJzZTogZGlyID09PSAncHJldidcbiAgICB9O1xuICAgIGxldCBtZWV0ID0gZmFsc2U7XG4gICAgbGV0IGVuZE5vZGUgPSBudWxsO1xuICAgIGZ1bmN0aW9uIHRyYXZlcnNlKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChub2RlID09PSBmcm9tTm9kZSkge1xuICAgICAgICAgICAgaWYgKCFtZWV0KSB7XG4gICAgICAgICAgICAgICAgbWVldCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghZnJvbU5vZGUuZGlzYWJsZWQgJiYgIWZyb21Ob2RlLmlzR3JvdXApIHtcbiAgICAgICAgICAgICAgICBlbmROb2RlID0gZnJvbU5vZGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCghbm9kZS5kaXNhYmxlZCB8fCBpbmNsdWRlRGlzYWJsZWQpICYmXG4gICAgICAgICAgICAgICAgIW5vZGUuaWdub3JlZCAmJlxuICAgICAgICAgICAgICAgICFub2RlLmlzR3JvdXApIHtcbiAgICAgICAgICAgICAgICBlbmROb2RlID0gbm9kZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUuaXNHcm91cCkge1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBnZXRDaGlsZChub2RlLCBnZXRDaGlsZE9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKGNoaWxkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZW5kTm9kZSA9IGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJhdmVyc2UoaXRlcmF0ZShub2RlLCBsb29wKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0Tm9kZSA9IGl0ZXJhdGUobm9kZSwgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKG5leHROb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdHJhdmVyc2UobmV4dE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gcmF3R2V0UGFyZW50KG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQuaXNHcm91cCkge1xuICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZShpdGVyYXRlKHBhcmVudCwgbG9vcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsb29wKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlKGl0ZXJhdGUobm9kZSwgdHJ1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmF2ZXJzZShmcm9tTm9kZSk7XG4gICAgcmV0dXJuIGVuZE5vZGU7XG59XG5mdW5jdGlvbiByYXdHZXRQcmV2KG5vZGUsIGxvb3ApIHtcbiAgICBjb25zdCBzaWJzID0gbm9kZS5zaWJsaW5ncztcbiAgICBjb25zdCBsID0gc2licy5sZW5ndGg7XG4gICAgY29uc3QgeyBpbmRleCB9ID0gbm9kZTtcbiAgICBpZiAobG9vcCkge1xuICAgICAgICByZXR1cm4gc2lic1soaW5kZXggLSAxICsgbCkgJSBsXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gc2lic1tpbmRleCAtIDFdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJhd0dldFBhcmVudChub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUucGFyZW50O1xufVxuZnVuY3Rpb24gZ2V0Q2hpbGQobm9kZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgeyByZXZlcnNlID0gZmFsc2UgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gbm9kZTtcbiAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IGNoaWxkcmVuO1xuICAgICAgICBjb25zdCBzdGFydCA9IHJldmVyc2UgPyBsZW5ndGggLSAxIDogMDtcbiAgICAgICAgY29uc3QgZW5kID0gcmV2ZXJzZSA/IC0xIDogbGVuZ3RoO1xuICAgICAgICBjb25zdCBkZWx0YSA9IHJldmVyc2UgPyAtMSA6IDE7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSAhPT0gZW5kOyBpICs9IGRlbHRhKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKCFjaGlsZC5kaXNhYmxlZCAmJiAhY2hpbGQuaWdub3JlZCkge1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5pc0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkSW5Hcm91cCA9IGdldENoaWxkKGNoaWxkLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkSW5Hcm91cCAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZEluR3JvdXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZXhwb3J0IGNvbnN0IG1vdmVNZXRob2RzID0ge1xuICAgIGdldENoaWxkKCkge1xuICAgICAgICBpZiAodGhpcy5pZ25vcmVkKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBnZXRDaGlsZCh0aGlzKTtcbiAgICB9LFxuICAgIGdldFBhcmVudCgpIHtcbiAgICAgICAgY29uc3QgeyBwYXJlbnQgfSA9IHRoaXM7XG4gICAgICAgIGlmIChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQuaXNHcm91cCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5nZXRQYXJlbnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgIH0sXG4gICAgZ2V0TmV4dChvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIG1vdmUodGhpcywgJ25leHQnLCBvcHRpb25zKTtcbiAgICB9LFxuICAgIGdldFByZXYob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBtb3ZlKHRoaXMsICdwcmV2Jywgb3B0aW9ucyk7XG4gICAgfVxufTtcbiIsImV4cG9ydCBmdW5jdGlvbiBnZXRQYXRoKGtleSwgeyBpbmNsdWRlR3JvdXAgPSBmYWxzZSwgaW5jbHVkZVNlbGYgPSB0cnVlIH0sIHRyZWVNYXRlKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHRyZWVOb2RlTWFwID0gdHJlZU1hdGUudHJlZU5vZGVNYXA7XG4gICAgbGV0IHRyZWVOb2RlID0ga2V5ID09PSBudWxsIHx8IGtleSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IChfYSA9IHRyZWVOb2RlTWFwLmdldChrZXkpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xuICAgIGNvbnN0IG1lcmdlZFBhdGggPSB7XG4gICAgICAgIGtleVBhdGg6IFtdLFxuICAgICAgICB0cmVlTm9kZVBhdGg6IFtdLFxuICAgICAgICB0cmVlTm9kZTogdHJlZU5vZGVcbiAgICB9O1xuICAgIGlmICh0cmVlTm9kZSA9PT0gbnVsbCB8fCB0cmVlTm9kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdHJlZU5vZGUuaWdub3JlZCkge1xuICAgICAgICBtZXJnZWRQYXRoLnRyZWVOb2RlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIG1lcmdlZFBhdGg7XG4gICAgfVxuICAgIHdoaWxlICh0cmVlTm9kZSkge1xuICAgICAgICBpZiAoIXRyZWVOb2RlLmlnbm9yZWQgJiYgKGluY2x1ZGVHcm91cCB8fCAhdHJlZU5vZGUuaXNHcm91cCkpIHtcbiAgICAgICAgICAgIG1lcmdlZFBhdGgudHJlZU5vZGVQYXRoLnB1c2godHJlZU5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRyZWVOb2RlID0gdHJlZU5vZGUucGFyZW50O1xuICAgIH1cbiAgICBtZXJnZWRQYXRoLnRyZWVOb2RlUGF0aC5yZXZlcnNlKCk7XG4gICAgaWYgKCFpbmNsdWRlU2VsZilcbiAgICAgICAgbWVyZ2VkUGF0aC50cmVlTm9kZVBhdGgucG9wKCk7XG4gICAgbWVyZ2VkUGF0aC5rZXlQYXRoID0gbWVyZ2VkUGF0aC50cmVlTm9kZVBhdGgubWFwKCh0cmVlTm9kZSkgPT4gdHJlZU5vZGUua2V5KTtcbiAgICByZXR1cm4gbWVyZ2VkUGF0aDtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiB0b0FycmF5KGFyZykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZykpXG4gICAgICAgIHJldHVybiBhcmc7XG4gICAgcmV0dXJuIFthcmddO1xufVxuLy8gRG8gbm90IHVzZSBlbnVtIGZvciBsaW50IHBsdWdpbiBoYXMgZXJyb3JcbmV4cG9ydCBjb25zdCBUUkFWRVJTRV9DT01NQU5EID0ge1xuICAgIFNUT1A6ICdTVE9QJ1xufTtcbmV4cG9ydCBmdW5jdGlvbiB0cmF2ZXJzZVdpdGhDYih0cmVlTm9kZSwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBjb21tYW5kID0gY2FsbGJhY2sodHJlZU5vZGUpO1xuICAgIGlmICh0cmVlTm9kZS5jaGlsZHJlbiAhPT0gdW5kZWZpbmVkICYmIGNvbW1hbmQgIT09IFRSQVZFUlNFX0NPTU1BTkQuU1RPUCkge1xuICAgICAgICB0cmVlTm9kZS5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZE5vZGUpID0+IHRyYXZlcnNlV2l0aENiKGNoaWxkTm9kZSwgY2FsbGJhY2spKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9uTGVhZktleXModHJlZU5vZGVzLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IHByZXNlcnZlR3JvdXAgPSBmYWxzZSB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBrZXlzID0gW107XG4gICAgY29uc3QgY2IgPSBwcmVzZXJ2ZUdyb3VwXG4gICAgICAgID8gKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmICghbm9kZS5pc0xlYWYpIHtcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2gobm9kZS5rZXkpO1xuICAgICAgICAgICAgICAgIHRyYXZlcnNlKG5vZGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIDogKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmICghbm9kZS5pc0xlYWYpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUuaXNHcm91cClcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKG5vZGUua2V5KTtcbiAgICAgICAgICAgICAgICB0cmF2ZXJzZShub2RlLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICBmdW5jdGlvbiB0cmF2ZXJzZShub2Rlcykge1xuICAgICAgICBub2Rlcy5mb3JFYWNoKGNiKTtcbiAgICB9XG4gICAgdHJhdmVyc2UodHJlZU5vZGVzKTtcbiAgICByZXR1cm4ga2V5cztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0xlYWYocmF3Tm9kZSwgZ2V0Q2hpbGRyZW4pIHtcbiAgICBjb25zdCB7IGlzTGVhZiB9ID0gcmF3Tm9kZTtcbiAgICBpZiAoaXNMZWFmICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiBpc0xlYWY7XG4gICAgZWxzZSBpZiAoIWdldENoaWxkcmVuKHJhd05vZGUpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdEdldENoaWxkcmVuKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5jaGlsZHJlbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0R2V0S2V5KG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5rZXk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNJZ25vcmVkKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NoYWxsb3dMb2FkZWQocmF3Tm9kZSwgZ2V0Q2hpbGRyZW4pIHtcbiAgICBjb25zdCB7IGlzTGVhZiB9ID0gcmF3Tm9kZTtcbiAgICBpZiAoaXNMZWFmID09PSBmYWxzZSAmJiAhQXJyYXkuaXNBcnJheShnZXRDaGlsZHJlbihyYXdOb2RlKSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Rpc2FibGVkKHJhd05vZGUpIHtcbiAgICByZXR1cm4gcmF3Tm9kZS5kaXNhYmxlZCA9PT0gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0V4cGlsaWNpdGx5Tm90TG9hZGVkKHJhd05vZGUsIGdldENoaWxkcmVuKSB7XG4gICAgcmV0dXJuIChyYXdOb2RlLmlzTGVhZiA9PT0gZmFsc2UgJiYgIUFycmF5LmlzQXJyYXkoZ2V0Q2hpbGRyZW4ocmF3Tm9kZSkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc05vZGVJbnZhbGlkKHJhd05vZGUsIGdldENoaWxkcmVuKSB7XG4gICAgaWYgKHJhd05vZGUuaXNMZWFmID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gZ2V0Q2hpbGRyZW4ocmF3Tm9kZSk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSAmJiBjaGlsZHJlbi5sZW5ndGggPiAwKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bndyYXBDaGVja2VkS2V5cyhyZXN1bHQpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkIHx8IHJlc3VsdCA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdCkpXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgcmV0dXJuIChfYSA9IHJlc3VsdC5jaGVja2VkS2V5cykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG59XG5leHBvcnQgZnVuY3Rpb24gdW53cmFwSW5kZXRlcm1pbmF0ZUtleXMocmVzdWx0KSB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCB8fCByZXN1bHQgPT09IG51bGwgfHwgQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIChfYSA9IHJlc3VsdC5pbmRldGVybWluYXRlS2V5cykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2Uob3JpZ2luYWxLZXlzLCBrZXlzVG9BZGQpIHtcbiAgICBjb25zdCBzZXQgPSBuZXcgU2V0KG9yaWdpbmFsS2V5cyk7XG4gICAga2V5c1RvQWRkLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBpZiAoIXNldC5oYXMoa2V5KSkge1xuICAgICAgICAgICAgc2V0LmFkZChrZXkpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oc2V0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtaW51cyhvcmlnaW5hbEtleXMsIGtleXNUb1JlbW92ZSkge1xuICAgIGNvbnN0IHNldCA9IG5ldyBTZXQob3JpZ2luYWxLZXlzKTtcbiAgICBrZXlzVG9SZW1vdmUuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGlmIChzZXQuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHNldC5kZWxldGUoa2V5KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnJheS5mcm9tKHNldCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNHcm91cChyYXdOb2RlKSB7XG4gICAgcmV0dXJuIChyYXdOb2RlID09PSBudWxsIHx8IHJhd05vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJhd05vZGUudHlwZSkgPT09ICdncm91cCc7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5kZXhHZXR0ZXIodHJlZU5vZGVzKSB7XG4gICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuICAgIHRyZWVOb2Rlcy5mb3JFYWNoKCh0cmVlTm9kZSwgaSkgPT4ge1xuICAgICAgICBtYXAuc2V0KHRyZWVOb2RlLmtleSwgaSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIChrZXkpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gbWFwLmdldChrZXkpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsOyB9O1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L3N0cmljdC1ib29sZWFuLWV4cHJlc3Npb25zICovXG5pbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHJlbmRlclNsb3QsIGgsIG9uTW91bnRlZCwgcmVmLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyB1c2VTc3JBZGFwdGVyIH0gZnJvbSAnQGNzcy1yZW5kZXIvdnVlMy1zc3InO1xuaW1wb3J0IHsgYywgY3NzckFuY2hvck1ldGFOYW1lIH0gZnJvbSAnLi4vLi4vc2hhcmVkJztcbmNvbnN0IGhpZGRlbkF0dHIgPSAndi1oaWRkZW4nO1xuY29uc3Qgc3R5bGUgPSBjKCdbdi1oaWRkZW5dJywge1xuICAgIGRpc3BsYXk6ICdub25lIWltcG9ydGFudCdcbn0pO1xuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgICBuYW1lOiAnT3ZlcmZsb3cnLFxuICAgIHByb3BzOiB7XG4gICAgICAgIGdldENvdW50ZXI6IEZ1bmN0aW9uLFxuICAgICAgICBnZXRUYWlsOiBGdW5jdGlvbixcbiAgICAgICAgdXBkYXRlQ291bnRlcjogRnVuY3Rpb24sXG4gICAgICAgIG9uVXBkYXRlT3ZlcmZsb3c6IEZ1bmN0aW9uXG4gICAgfSxcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgICAgIGNvbnN0IHNlbGZSZWYgPSByZWYobnVsbCk7XG4gICAgICAgIGNvbnN0IGNvdW50ZXJSZWYgPSByZWYobnVsbCk7XG4gICAgICAgIGZ1bmN0aW9uIGRlcml2ZUNvdW50ZXIoKSB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBzZWxmIH0gPSBzZWxmUmVmO1xuICAgICAgICAgICAgY29uc3QgeyBnZXRDb3VudGVyLCBnZXRUYWlsIH0gPSBwcm9wcztcbiAgICAgICAgICAgIGxldCBjb3VudGVyO1xuICAgICAgICAgICAgaWYgKGdldENvdW50ZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBjb3VudGVyID0gZ2V0Q291bnRlcigpO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXJSZWYudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNlbGYgfHwgIWNvdW50ZXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGNvdW50ZXIuaGFzQXR0cmlidXRlKGhpZGRlbkF0dHIpKSB7XG4gICAgICAgICAgICAgICAgY291bnRlci5yZW1vdmVBdHRyaWJ1dGUoaGlkZGVuQXR0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBzZWxmO1xuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyV2lkdGggPSBzZWxmLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgY29uc3QgY2hpbGRXaWR0aHMgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IHRhaWwgPSBzbG90cy50YWlsID8gZ2V0VGFpbCA9PT0gbnVsbCB8fCBnZXRUYWlsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBnZXRUYWlsKCkgOiBudWxsO1xuICAgICAgICAgICAgbGV0IGNoaWxkV2lkdGhTdW0gPSB0YWlsID8gdGFpbC5vZmZzZXRXaWR0aCA6IDA7XG4gICAgICAgICAgICBsZXQgb3ZlcmZsb3cgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGxlbiA9IHNlbGYuY2hpbGRyZW4ubGVuZ3RoIC0gKHNsb3RzLnRhaWwgPyAxIDogMCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbiAtIDE7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChpIDwgMClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGlsZC5oYXNBdHRyaWJ1dGUoaGlkZGVuQXR0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZShoaWRkZW5BdHRyLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoaWxkLmhhc0F0dHJpYnV0ZShoaWRkZW5BdHRyKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZC5yZW1vdmVBdHRyaWJ1dGUoaGlkZGVuQXR0cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkV2lkdGggPSBjaGlsZC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICBjaGlsZFdpZHRoU3VtICs9IGNoaWxkV2lkdGg7XG4gICAgICAgICAgICAgICAgY2hpbGRXaWR0aHNbaV0gPSBjaGlsZFdpZHRoO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZFdpZHRoU3VtID4gY29udGFpbmVyV2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB1cGRhdGVDb3VudGVyIH0gPSBwcm9wcztcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGk7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN0Q291bnQgPSBsZW4gLSAxIC0gajtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVDb3VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVDb3VudGVyKHJlc3RDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyLnRleHRDb250ZW50ID0gYCR7cmVzdENvdW50fWA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudGVyV2lkdGggPSBjb3VudGVyLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRXaWR0aFN1bSAtPSBjaGlsZFdpZHRoc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZFdpZHRoU3VtICsgY291bnRlcldpZHRoIDw9IGNvbnRhaW5lcldpZHRoIHx8IGogPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhaWwgdG9vIGxvbmcgb3IgMXN0IGVsZW1lbnQgdG9vIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2Ugb25seSBjb25zaWRlciB0YWlsIG5vd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhaWwuc3R5bGUubWF4V2lkdGggPSBgJHtjb250YWluZXJXaWR0aCAtIGNvdW50ZXJXaWR0aH1weGA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWlsLnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhaWwuc3R5bGUubWF4V2lkdGggPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgb25VcGRhdGVPdmVyZmxvdyB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAoIW92ZXJmbG93KSB7XG4gICAgICAgICAgICAgICAgaWYgKG9uVXBkYXRlT3ZlcmZsb3cgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZU92ZXJmbG93KGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY291bnRlci5zZXRBdHRyaWJ1dGUoaGlkZGVuQXR0ciwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9uVXBkYXRlT3ZlcmZsb3cgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZU92ZXJmbG93KHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzc3JBZGFwdGVyID0gdXNlU3NyQWRhcHRlcigpO1xuICAgICAgICBzdHlsZS5tb3VudCh7XG4gICAgICAgICAgICBpZDogJ3Z1ZXVjL292ZXJmbG93JyxcbiAgICAgICAgICAgIGhlYWQ6IHRydWUsXG4gICAgICAgICAgICBhbmNob3JNZXRhTmFtZTogY3NzckFuY2hvck1ldGFOYW1lLFxuICAgICAgICAgICAgc3NyOiBzc3JBZGFwdGVyXG4gICAgICAgIH0pO1xuICAgICAgICBvbk1vdW50ZWQoZGVyaXZlQ291bnRlcik7XG4gICAgICAgIC8vIGJlc2lkZXMgb25Nb3VudGVkLCBvdGhlciBjYXNlIHNob3VsZCBiZSBtYW51YWxseSB0cmlnZ2VyZWQsIG9yIHdlIHNob3VkIHdhdGNoIGl0ZW1zXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWxmUmVmLFxuICAgICAgICAgICAgY291bnRlclJlZixcbiAgICAgICAgICAgIHN5bmM6IGRlcml2ZUNvdW50ZXJcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyAkc2xvdHMgfSA9IHRoaXM7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgbmV4dFRpY2sodGhpcy5zeW5jKTtcbiAgICAgICAgLy8gSXQgc2hvdWxkbid0IGhhdmUgYm9yZGVyXG4gICAgICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICAgICAgICBjbGFzczogJ3Ytb3ZlcmZsb3cnLFxuICAgICAgICAgICAgcmVmOiAnc2VsZlJlZidcbiAgICAgICAgfSwgW1xuICAgICAgICAgICAgcmVuZGVyU2xvdCgkc2xvdHMsICdkZWZhdWx0JyksXG4gICAgICAgICAgICAvLyAkc2xvdHMuY291bnRlciBzaG91bGQgb25seSBoYXMgMSBlbGVtZW50XG4gICAgICAgICAgICAkc2xvdHMuY291bnRlclxuICAgICAgICAgICAgICAgID8gJHNsb3RzLmNvdW50ZXIoKVxuICAgICAgICAgICAgICAgIDogaCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2NvdW50ZXJSZWYnXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvLyAkc2xvdHMudGFpbCBzaG91bGQgb25seSBoYXMgMSBlbGVtZW50XG4gICAgICAgICAgICAkc2xvdHMudGFpbCA/ICRzbG90cy50YWlsKCkgOiBudWxsXG4gICAgICAgIF0pO1xuICAgIH1cbn0pO1xuIiwiZnVuY3Rpb24gbG93Qml0KG4pIHtcbiAgICByZXR1cm4gbiAmIC1uO1xufVxuZXhwb3J0IGNsYXNzIEZpbndlY2tUcmVlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbCBsZW5ndGggb2YgdGhlIGFycmF5XG4gICAgICogQHBhcmFtIG1pbiBtaW4gdmFsdWUgb2YgdGhlIGFycmF5XG4gICAgICovXG4gICAgY29uc3RydWN0b3IobCwgbWluKSB7XG4gICAgICAgIHRoaXMubCA9IGw7XG4gICAgICAgIHRoaXMubWluID0gbWluO1xuICAgICAgICBjb25zdCBmdCA9IG5ldyBBcnJheShsICsgMSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbCArIDE7ICsraSkge1xuICAgICAgICAgICAgZnRbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnQgPSBmdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGFycltpXSBieSBuLCBzdGFydCBmcm9tIDBcbiAgICAgKiBAcGFyYW0gaSB0aGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgdG8gYmUgYWRkZWRcbiAgICAgKiBAcGFyYW0gbiB0aGUgdmFsdWUgdG8gYmUgYWRkZWRcbiAgICAgKi9cbiAgICBhZGQoaSwgbikge1xuICAgICAgICBpZiAobiA9PT0gMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgeyBsLCBmdCB9ID0gdGhpcztcbiAgICAgICAgaSArPSAxO1xuICAgICAgICB3aGlsZSAoaSA8PSBsKSB7XG4gICAgICAgICAgICBmdFtpXSArPSBuO1xuICAgICAgICAgICAgaSArPSBsb3dCaXQoaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBpbmRleCBpXG4gICAgICogQHBhcmFtIGkgaW5kZXhcbiAgICAgKiBAcmV0dXJucyB2YWx1ZSBvZiB0aGUgaW5kZXhcbiAgICAgKi9cbiAgICBnZXQoaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdW0oaSArIDEpIC0gdGhpcy5zdW0oaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3VtIG9mIGZpcnN0IGkgZWxlbWVudHNcbiAgICAgKiBAcGFyYW0gaSBjb3VudCBvZiBoZWFkIGVsZW1lbnRzIHRvIGJlIGFkZGVkXG4gICAgICogQHJldHVybnMgdGhlIHN1bSBvZiBmaXJzdCBpIGVsZW1lbnRzXG4gICAgICovXG4gICAgc3VtKGkpIHtcbiAgICAgICAgaWYgKGkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGkgPSB0aGlzLmw7XG4gICAgICAgIGlmIChpIDw9IDApXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgY29uc3QgeyBmdCwgbWluLCBsIH0gPSB0aGlzO1xuICAgICAgICBpZiAoaSA+IGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1tGaW53ZWNrVHJlZS5zdW1dOiBgaWAgaXMgbGFyZ2VyIHRoYW4gbGVuZ3RoLicpO1xuICAgICAgICBsZXQgcmV0ID0gaSAqIG1pbjtcbiAgICAgICAgd2hpbGUgKGkgPiAwKSB7XG4gICAgICAgICAgICByZXQgKz0gZnRbaV07XG4gICAgICAgICAgICBpIC09IGxvd0JpdChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxhcmdlc3QgY291bnQgb2YgaGVhZCBlbGVtZW50cyB3aG9zZSBzdW0gYXJlIDw9IHRocmVzaG9sZFxuICAgICAqIEBwYXJhbSB0aHJlc2hvbGRcbiAgICAgKiBAcmV0dXJucyB0aGUgbGFyZ2VzdCBjb3VudCBvZiBoZWFkIGVsZW1lbnRzIHdob3NlIHN1bSBhcmUgPD0gdGhyZXNob2xkXG4gICAgICovXG4gICAgZ2V0Qm91bmQodGhyZXNob2xkKSB7XG4gICAgICAgIGxldCBsID0gMDtcbiAgICAgICAgbGV0IHIgPSB0aGlzLmw7XG4gICAgICAgIHdoaWxlIChyID4gbCkge1xuICAgICAgICAgICAgY29uc3QgbSA9IE1hdGguZmxvb3IoKGwgKyByKSAvIDIpO1xuICAgICAgICAgICAgY29uc3Qgc3VtTSA9IHRoaXMuc3VtKG0pO1xuICAgICAgICAgICAgaWYgKHN1bU0gPiB0aHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICByID0gbTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHN1bU0gPCB0aHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICBpZiAobCA9PT0gbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdW0obCArIDEpIDw9IHRocmVzaG9sZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsICsgMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGwgPSBtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGw7XG4gICAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdm9pZCAqL1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L3Jlc3RyaWN0LXBsdXMtb3BlcmFuZHMgKi9cbmltcG9ydCB7IG1lcmdlUHJvcHMsIGNvbXB1dGVkLCBkZWZpbmVDb21wb25lbnQsIHJlZiwgb25Nb3VudGVkLCBoLCBvbkFjdGl2YXRlZCwgb25EZWFjdGl2YXRlZCB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyBiZWZvcmVOZXh0RnJhbWVPbmNlLCBkZXB4LCBweGZ5IH0gZnJvbSAnc2VlbWx5JztcbmltcG9ydCB7IHVzZU1lbW8gfSBmcm9tICd2b29rcyc7XG5pbXBvcnQgeyB1c2VTc3JBZGFwdGVyIH0gZnJvbSAnQGNzcy1yZW5kZXIvdnVlMy1zc3InO1xuaW1wb3J0IFZSZXNpemVPYnNlcnZlciBmcm9tICcuLi8uLi9yZXNpemUtb2JzZXJ2ZXIvc3JjL1ZSZXNpemVPYnNlcnZlcic7XG5pbXBvcnQgeyBjLCBjc3NyQW5jaG9yTWV0YU5hbWUsIEZpbndlY2tUcmVlIH0gZnJvbSAnLi4vLi4vc2hhcmVkJztcbmltcG9ydCB7IGVuc3VyZU1heWJlVG91Y2gsIGVuc3VyZVdoZWVsU2NhbGUgfSBmcm9tICcuL2NvbmZpZyc7XG5jb25zdCBzdHlsZXMgPSBjKCcudi12bCcsIHtcbiAgICBtYXhIZWlnaHQ6ICdpbmhlcml0JyxcbiAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICBvdmVyZmxvdzogJ2F1dG8nLFxuICAgIG1pbldpZHRoOiAnMXB4JyAvLyBhIHplcm8gd2lkdGggY29udGFpbmVyIHdvbid0IGJlIHNjcm9sbGFibGVcbn0sIFtcbiAgICBjKCcmOm5vdCgudi12bC0tc2hvdy1zY3JvbGxiYXIpJywge1xuICAgICAgICBzY3JvbGxiYXJXaWR0aDogJ25vbmUnXG4gICAgfSwgW1xuICAgICAgICBjKCcmOjotd2Via2l0LXNjcm9sbGJhciwgJjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2stcGllY2UsICY6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iJywge1xuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgfSlcbiAgICBdKVxuXSk7XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICAgIG5hbWU6ICdWaXJ0dWFsTGlzdCcsXG4gICAgaW5oZXJpdEF0dHJzOiBmYWxzZSxcbiAgICBwcm9wczoge1xuICAgICAgICBzaG93U2Nyb2xsYmFyOiB7XG4gICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogQXJyYXksXG4gICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBbXVxuICAgICAgICB9LFxuICAgICAgICAvLyBpdCBpcyBzdXBwb3NlIHRvIGJlIHRoZSBtaW4gaGVpZ2h0XG4gICAgICAgIGl0ZW1TaXplOiB7XG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBpdGVtUmVzaXphYmxlOiBCb29sZWFuLFxuICAgICAgICBpdGVtc1N0eWxlOiBbU3RyaW5nLCBPYmplY3RdLFxuICAgICAgICB2aXNpYmxlSXRlbXNUYWc6IHtcbiAgICAgICAgICAgIHR5cGU6IFtTdHJpbmcsIE9iamVjdF0sXG4gICAgICAgICAgICBkZWZhdWx0OiAnZGl2J1xuICAgICAgICB9LFxuICAgICAgICB2aXNpYmxlSXRlbXNQcm9wczogT2JqZWN0LFxuICAgICAgICBpZ25vcmVJdGVtUmVzaXplOiBCb29sZWFuLFxuICAgICAgICBvblNjcm9sbDogRnVuY3Rpb24sXG4gICAgICAgIG9uV2hlZWw6IEZ1bmN0aW9uLFxuICAgICAgICBvblJlc2l6ZTogRnVuY3Rpb24sXG4gICAgICAgIGRlZmF1bHRTY3JvbGxLZXk6IFtOdW1iZXIsIFN0cmluZ10sXG4gICAgICAgIGRlZmF1bHRTY3JvbGxJbmRleDogTnVtYmVyLFxuICAgICAgICBrZXlGaWVsZDoge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgZGVmYXVsdDogJ2tleSdcbiAgICAgICAgfSxcbiAgICAgICAgLy8gV2hldGhlciBpdCBpcyBhIGdvb2QgQVBJP1xuICAgICAgICAvLyBSZXNpemVPYnNlcnZlciArIGZvb3RlciAmIGhlYWRlciBpcyBub3QgZW5vdWdoLlxuICAgICAgICAvLyBUb28gY29tcGxleCBmb3Igc2ltcGxlIGNhc2VcbiAgICAgICAgcGFkZGluZ1RvcDoge1xuICAgICAgICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IDBcbiAgICAgICAgfSxcbiAgICAgICAgcGFkZGluZ0JvdHRvbToge1xuICAgICAgICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IDBcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0dXAocHJvcHMpIHtcbiAgICAgICAgY29uc3Qgc3NyQWRhcHRlciA9IHVzZVNzckFkYXB0ZXIoKTtcbiAgICAgICAgc3R5bGVzLm1vdW50KHtcbiAgICAgICAgICAgIGlkOiAndnVldWMvdmlydHVhbC1saXN0JyxcbiAgICAgICAgICAgIGhlYWQ6IHRydWUsXG4gICAgICAgICAgICBhbmNob3JNZXRhTmFtZTogY3NzckFuY2hvck1ldGFOYW1lLFxuICAgICAgICAgICAgc3NyOiBzc3JBZGFwdGVyXG4gICAgICAgIH0pO1xuICAgICAgICBvbk1vdW50ZWQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBkZWZhdWx0U2Nyb2xsSW5kZXgsIGRlZmF1bHRTY3JvbGxLZXkgfSA9IHByb3BzO1xuICAgICAgICAgICAgaWYgKGRlZmF1bHRTY3JvbGxJbmRleCAhPT0gdW5kZWZpbmVkICYmIGRlZmF1bHRTY3JvbGxJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvKHsgaW5kZXg6IGRlZmF1bHRTY3JvbGxJbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRlZmF1bHRTY3JvbGxLZXkgIT09IHVuZGVmaW5lZCAmJiBkZWZhdWx0U2Nyb2xsS2V5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG8oeyBrZXk6IGRlZmF1bHRTY3JvbGxLZXkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgaXNEZWFjdGl2YXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgYWN0aXZhdGVTdGF0ZUluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIG9uQWN0aXZhdGVkKCgpID0+IHtcbiAgICAgICAgICAgIGlzRGVhY3RpdmF0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghYWN0aXZhdGVTdGF0ZUluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZhdGVTdGF0ZUluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZW1vdW50XG4gICAgICAgICAgICBzY3JvbGxUbyh7IHRvcDogc2Nyb2xsVG9wUmVmLnZhbHVlLCBsZWZ0OiBzY3JvbGxMZWZ0IH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgb25EZWFjdGl2YXRlZCgoKSA9PiB7XG4gICAgICAgICAgICBpc0RlYWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghYWN0aXZhdGVTdGF0ZUluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZhdGVTdGF0ZUluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGtleUluZGV4TWFwUmVmID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgY29uc3QgeyBrZXlGaWVsZCB9ID0gcHJvcHM7XG4gICAgICAgICAgICBwcm9wcy5pdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIG1hcC5zZXQoaXRlbVtrZXlGaWVsZF0sIGluZGV4KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG1hcDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxpc3RFbFJlZiA9IHJlZihudWxsKTtcbiAgICAgICAgY29uc3QgbGlzdEhlaWdodFJlZiA9IHJlZih1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBrZXlUb0hlaWdodE9mZnNldCA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgZmlud2Vja1RyZWVSZWYgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGl0ZW1zLCBpdGVtU2l6ZSwga2V5RmllbGQgfSA9IHByb3BzO1xuICAgICAgICAgICAgY29uc3QgZnQgPSBuZXcgRmlud2Vja1RyZWUoaXRlbXMubGVuZ3RoLCBpdGVtU2l6ZSk7XG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGl0ZW1ba2V5RmllbGRdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodE9mZnNldCA9IGtleVRvSGVpZ2h0T2Zmc2V0LmdldChrZXkpO1xuICAgICAgICAgICAgICAgIGlmIChoZWlnaHRPZmZzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmdC5hZGQoaW5kZXgsIGhlaWdodE9mZnNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZnQ7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmaW53ZWNrVHJlZVVwZGF0ZVRyaWdnZXIgPSByZWYoMCk7XG4gICAgICAgIGxldCBzY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgY29uc3Qgc2Nyb2xsVG9wUmVmID0gcmVmKDApO1xuICAgICAgICBjb25zdCBzdGFydEluZGV4UmVmID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoZmlud2Vja1RyZWVSZWYudmFsdWUuZ2V0Qm91bmQoc2Nyb2xsVG9wUmVmLnZhbHVlIC0gZGVweChwcm9wcy5wYWRkaW5nVG9wKSkgLSAxLCAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0SXRlbXNSZWYgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBsaXN0SGVpZ2h0IH0gPSBsaXN0SGVpZ2h0UmVmO1xuICAgICAgICAgICAgaWYgKGxpc3RIZWlnaHQgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBjb25zdCB7IGl0ZW1zLCBpdGVtU2l6ZSB9ID0gcHJvcHM7XG4gICAgICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gc3RhcnRJbmRleFJlZi52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGVuZEluZGV4ID0gTWF0aC5taW4oc3RhcnRJbmRleCArIE1hdGguY2VpbChsaXN0SGVpZ2h0IC8gaXRlbVNpemUgKyAxKSwgaXRlbXMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBjb25zdCB2aWV3cG9ydEl0ZW1zID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8PSBlbmRJbmRleDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmlld3BvcnRJdGVtcy5wdXNoKGl0ZW1zW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2aWV3cG9ydEl0ZW1zO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2Nyb2xsVG8gPSAob3B0aW9ucywgeSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvUG9zaXRpb24ob3B0aW9ucywgeSwgJ2F1dG8nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGxlZnQsIHRvcCwgaW5kZXgsIGtleSwgcG9zaXRpb24sIGJlaGF2aW9yLCBkZWJvdW5jZSA9IHRydWUgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgICBpZiAobGVmdCAhPT0gdW5kZWZpbmVkIHx8IHRvcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9Qb3NpdGlvbihsZWZ0LCB0b3AsIGJlaGF2aW9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb0luZGV4KGluZGV4LCBiZWhhdmlvciwgZGVib3VuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b0luZGV4ID0ga2V5SW5kZXhNYXBSZWYudmFsdWUuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHRvSW5kZXggIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9JbmRleCh0b0luZGV4LCBiZWhhdmlvciwgZGVib3VuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocG9zaXRpb24gPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9Qb3NpdGlvbigwLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgYmVoYXZpb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocG9zaXRpb24gPT09ICd0b3AnKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9Qb3NpdGlvbigwLCAwLCBiZWhhdmlvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGxldCBhbmNob3JJbmRleDtcbiAgICAgICAgbGV0IGFuY2hvclRpbWVySWQgPSBudWxsO1xuICAgICAgICBmdW5jdGlvbiBzY3JvbGxUb0luZGV4KGluZGV4LCBiZWhhdmlvciwgZGVib3VuY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IGZ0IH0gPSBmaW53ZWNrVHJlZVJlZjtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFRvcCA9IGZ0LnN1bShpbmRleCkgKyBkZXB4KHByb3BzLnBhZGRpbmdUb3ApO1xuICAgICAgICAgICAgaWYgKCFkZWJvdW5jZSkge1xuICAgICAgICAgICAgICAgIGxpc3RFbFJlZi52YWx1ZS5zY3JvbGxUbyh7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogdGFyZ2V0VG9wLFxuICAgICAgICAgICAgICAgICAgICBiZWhhdmlvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYW5jaG9ySW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICBpZiAoYW5jaG9yVGltZXJJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGFuY2hvclRpbWVySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhbmNob3JUaW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhbmNob3JJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yVGltZXJJZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfSwgMTYpOyAvLyB1c2UgMCBtcyBtYXkgYmUgZWFsaWVyIHRoYW4gcmVzaXplIGNhbGxiYWNrLi4uXG4gICAgICAgICAgICAgICAgY29uc3QgeyBzY3JvbGxUb3AsIG9mZnNldEhlaWdodCB9ID0gbGlzdEVsUmVmLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRUb3AgPiBzY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbVNpemUgPSBmdC5nZXQoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0VG9wICsgaXRlbVNpemUgPD0gc2Nyb2xsVG9wICsgb2Zmc2V0SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0RWxSZWYudmFsdWUuc2Nyb2xsVG8oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB0YXJnZXRUb3AgKyBpdGVtU2l6ZSAtIG9mZnNldEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWhhdmlvclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RFbFJlZi52YWx1ZS5zY3JvbGxUbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB0YXJnZXRUb3AsXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWhhdmlvclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsVG9Qb3NpdGlvbihsZWZ0LCB0b3AsIGJlaGF2aW9yKSB7XG4gICAgICAgICAgICBsaXN0RWxSZWYudmFsdWUuc2Nyb2xsVG8oe1xuICAgICAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICAgICAgdG9wLFxuICAgICAgICAgICAgICAgIGJlaGF2aW9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVJdGVtUmVzaXplKGtleSwgZW50cnkpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgaWYgKGlzRGVhY3RpdmF0ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHByb3BzLmlnbm9yZUl0ZW1SZXNpemUpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGlzSGlkZUJ5VlNob3coZW50cnkudGFyZ2V0KSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBmdCB9ID0gZmlud2Vja1RyZWVSZWY7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGtleUluZGV4TWFwUmVmLnZhbHVlLmdldChrZXkpO1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNIZWlnaHQgPSBmdC5nZXQoaW5kZXgpO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gKF9jID0gKF9iID0gKF9hID0gZW50cnkuYm9yZGVyQm94U2l6ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hWzBdKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYmxvY2tTaXplKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBlbnRyeS5jb250ZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICBpZiAoaGVpZ2h0ID09PSBwcmV2aW91c0hlaWdodClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvLyBoZWlnaHQgb2Zmc2V0IGJhc2VkIG9uIGl0ZW1TaXplXG4gICAgICAgICAgICAvLyB1c2VkIHdoZW4gcmVidWlsZCB0aGUgZmlud2VjayB0cmVlXG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBoZWlnaHQgLSBwcm9wcy5pdGVtU2l6ZTtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBrZXlUb0hlaWdodE9mZnNldC5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGtleVRvSGVpZ2h0T2Zmc2V0LnNldChrZXksIGhlaWdodCAtIHByb3BzLml0ZW1TaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGRlbHRhIGhlaWdodCBiYXNlZCBvbiBmaW53ZWNrIHRyZWUgZGF0YVxuICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBoZWlnaHQgLSBwcmV2aW91c0hlaWdodDtcbiAgICAgICAgICAgIGlmIChkZWx0YSA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBmdC5hZGQoaW5kZXgsIGRlbHRhKTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RFbCA9IGxpc3RFbFJlZi52YWx1ZTtcbiAgICAgICAgICAgIGlmIChsaXN0RWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChhbmNob3JJbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzSGVpZ2h0U3VtID0gZnQuc3VtKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RFbC5zY3JvbGxUb3AgPiBwcmV2aW91c0hlaWdodFN1bSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEVsLnNjcm9sbEJ5KDAsIGRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgYW5jaG9ySW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RFbC5zY3JvbGxCeSgwLCBkZWx0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggPT09IGFuY2hvckluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0hlaWdodFN1bSA9IGZ0LnN1bShpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVpZ2h0ICsgcHJldmlvdXNIZWlnaHRTdW0gPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGUsIGxpc3RFbCBzaG91bGRuJ3QgaGF2ZSBib3JkZXIsIG5vciBvZmZzZXRIZWlnaHQgd29uJ3QgYmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3JyZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEVsLnNjcm9sbFRvcCArIGxpc3RFbC5vZmZzZXRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0RWwuc2Nyb2xsQnkoMCwgZGVsdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN5bmNWaWV3cG9ydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmlud2Vja1RyZWVVcGRhdGVUcmlnZ2VyLnZhbHVlKys7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWF5VXNlV2hlZWwgPSAhZW5zdXJlTWF5YmVUb3VjaCgpO1xuICAgICAgICBsZXQgd2hlZWxDYXRjaGVkID0gZmFsc2U7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUxpc3RTY3JvbGwoZSkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgKF9hID0gcHJvcHMub25TY3JvbGwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHByb3BzLCBlKTtcbiAgICAgICAgICAgIGlmICghbWF5VXNlV2hlZWwgfHwgIXdoZWVsQ2F0Y2hlZCkge1xuICAgICAgICAgICAgICAgIHN5bmNWaWV3cG9ydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUxpc3RXaGVlbChlKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoX2EgPSBwcm9wcy5vbldoZWVsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChwcm9wcywgZSk7XG4gICAgICAgICAgICBpZiAobWF5VXNlV2hlZWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0RWwgPSBsaXN0RWxSZWYudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RFbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmRlbHRhWCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RFbC5zY3JvbGxUb3AgPT09IDAgJiYgZS5kZWx0YVkgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaXN0RWwuc2Nyb2xsVG9wICsgbGlzdEVsLm9mZnNldEhlaWdodCA+PSBsaXN0RWwuc2Nyb2xsSGVpZ2h0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5kZWx0YVkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RFbC5zY3JvbGxUb3AgKz0gZS5kZWx0YVkgLyBlbnN1cmVXaGVlbFNjYWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RFbC5zY3JvbGxMZWZ0ICs9IGUuZGVsdGFYIC8gZW5zdXJlV2hlZWxTY2FsZSgpO1xuICAgICAgICAgICAgICAgICAgICBzeW5jVmlld3BvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hlZWxDYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlTmV4dEZyYW1lT25jZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVlbENhdGNoZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUxpc3RSZXNpemUoZW50cnkpIHtcbiAgICAgICAgICAgIGlmIChpc0RlYWN0aXZhdGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIC8vIExpc3QgaXMgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgIGlmIChpc0hpZGVCeVZTaG93KGVudHJ5LnRhcmdldCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gSWYgaGVpZ2h0IGlzIHNhbWUsIHJldHVyblxuICAgICAgICAgICAgaWYgKGVudHJ5LmNvbnRlbnRSZWN0LmhlaWdodCA9PT0gbGlzdEhlaWdodFJlZi52YWx1ZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsaXN0SGVpZ2h0UmVmLnZhbHVlID0gZW50cnkuY29udGVudFJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgY29uc3QgeyBvblJlc2l6ZSB9ID0gcHJvcHM7XG4gICAgICAgICAgICBpZiAob25SZXNpemUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBvblJlc2l6ZShlbnRyeSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gc3luY1ZpZXdwb3J0KCkge1xuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogbGlzdEVsIH0gPSBsaXN0RWxSZWY7XG4gICAgICAgICAgICAvLyBzb21ldGltZSByZWYgZWwgY2FuIGJlIG51bGxcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9UdVNpbXBsZS9uYWl2ZS11aS9pc3N1ZXMvODExXG4gICAgICAgICAgICBpZiAobGlzdEVsID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgc2Nyb2xsVG9wUmVmLnZhbHVlID0gbGlzdEVsLnNjcm9sbFRvcDtcbiAgICAgICAgICAgIHNjcm9sbExlZnQgPSBsaXN0RWwuc2Nyb2xsTGVmdDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBpc0hpZGVCeVZTaG93KGVsKSB7XG4gICAgICAgICAgICBsZXQgY3Vyc29yID0gZWw7XG4gICAgICAgICAgICB3aGlsZSAoY3Vyc29yICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnNvci5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIGN1cnNvciA9IGN1cnNvci5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsaXN0SGVpZ2h0OiBsaXN0SGVpZ2h0UmVmLFxuICAgICAgICAgICAgbGlzdFN0eWxlOiB7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdhdXRvJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGtleVRvSW5kZXg6IGtleUluZGV4TWFwUmVmLFxuICAgICAgICAgICAgaXRlbXNTdHlsZTogY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgaXRlbVJlc2l6YWJsZSB9ID0gcHJvcHM7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gcHhmeShmaW53ZWNrVHJlZVJlZi52YWx1ZS5zdW0oKSk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtZXhwcmVzc2lvbnNcbiAgICAgICAgICAgICAgICBmaW53ZWNrVHJlZVVwZGF0ZVRyaWdnZXIudmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuaXRlbXNTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm94U2l6aW5nOiAnY29udGVudC1ib3gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBpdGVtUmVzaXphYmxlID8gJycgOiBoZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IGl0ZW1SZXNpemFibGUgPyBoZWlnaHQgOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6IHB4ZnkocHJvcHMucGFkZGluZ1RvcCksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nQm90dG9tOiBweGZ5KHByb3BzLnBhZGRpbmdCb3R0b20pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB2aXNpYmxlSXRlbXNTdHlsZTogY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLWV4cHJlc3Npb25zXG4gICAgICAgICAgICAgICAgZmlud2Vja1RyZWVVcGRhdGVUcmlnZ2VyLnZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoJHtweGZ5KGZpbndlY2tUcmVlUmVmLnZhbHVlLnN1bShzdGFydEluZGV4UmVmLnZhbHVlKSl9KWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB2aWV3cG9ydEl0ZW1zOiB2aWV3cG9ydEl0ZW1zUmVmLFxuICAgICAgICAgICAgbGlzdEVsUmVmLFxuICAgICAgICAgICAgaXRlbXNFbFJlZjogcmVmKG51bGwpLFxuICAgICAgICAgICAgc2Nyb2xsVG8sXG4gICAgICAgICAgICBoYW5kbGVMaXN0UmVzaXplLFxuICAgICAgICAgICAgaGFuZGxlTGlzdFNjcm9sbCxcbiAgICAgICAgICAgIGhhbmRsZUxpc3RXaGVlbCxcbiAgICAgICAgICAgIGhhbmRsZUl0ZW1SZXNpemVcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBpdGVtUmVzaXphYmxlLCBrZXlGaWVsZCwga2V5VG9JbmRleCwgdmlzaWJsZUl0ZW1zVGFnIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gaChWUmVzaXplT2JzZXJ2ZXIsIHtcbiAgICAgICAgICAgIG9uUmVzaXplOiB0aGlzLmhhbmRsZUxpc3RSZXNpemVcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGgoJ2RpdicsIG1lcmdlUHJvcHModGhpcy4kYXR0cnMsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFsndi12bCcsIHRoaXMuc2hvd1Njcm9sbGJhciAmJiAndi12bC0tc2hvdy1zY3JvbGxiYXInXSxcbiAgICAgICAgICAgICAgICAgICAgb25TY3JvbGw6IHRoaXMuaGFuZGxlTGlzdFNjcm9sbCxcbiAgICAgICAgICAgICAgICAgICAgb25XaGVlbDogdGhpcy5oYW5kbGVMaXN0V2hlZWwsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2xpc3RFbFJlZidcbiAgICAgICAgICAgICAgICB9KSwgW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLmxlbmd0aCAhPT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiAnaXRlbXNFbFJlZicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6ICd2LXZsLWl0ZW1zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5pdGVtc1N0eWxlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaCh2aXNpYmxlSXRlbXNUYWcsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3YtdmwtdmlzaWJsZS1pdGVtcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB0aGlzLnZpc2libGVJdGVtc1N0eWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy52aXNpYmxlSXRlbXNQcm9wcyksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gdGhpcy52aWV3cG9ydEl0ZW1zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gaXRlbVtrZXlGaWVsZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGtleVRvSW5kZXguZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtVk5vZGUgPSB0aGlzLiRzbG90cy5kZWZhdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtUmVzaXphYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgoVlJlc2l6ZU9ic2VydmVyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXNpemU6IChlbnRyeSkgPT4gdGhpcy5oYW5kbGVJdGVtUmVzaXplKGtleSwgZW50cnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBpdGVtVk5vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1WTm9kZS5rZXkgPSBrZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVZOb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoX2IgPSAoX2EgPSB0aGlzLiRzbG90cykuZW1wdHkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hKVxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbiIsImxldCBtYXliZVRvdWNoO1xuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZU1heWJlVG91Y2goKSB7XG4gICAgaWYgKG1heWJlVG91Y2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoJ21hdGNoTWVkaWEnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgbWF5YmVUb3VjaCA9IHdpbmRvdy5tYXRjaE1lZGlhKCcocG9pbnRlcjpjb2Fyc2UpJykubWF0Y2hlcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1heWJlVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWF5YmVUb3VjaDtcbn1cbmxldCB3aGVlbFNjYWxlO1xuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZVdoZWVsU2NhbGUoKSB7XG4gICAgaWYgKHdoZWVsU2NhbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3aGVlbFNjYWxlID0gJ2Nocm9tZScgaW4gd2luZG93XG4gICAgICAgICAgICA/IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXG4gICAgICAgICAgICA6IDE7XG4gICAgfVxuICAgIHJldHVybiB3aGVlbFNjYWxlO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9