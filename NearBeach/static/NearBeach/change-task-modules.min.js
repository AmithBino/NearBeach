"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[3844],{622:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ce});var n=a(6252);const s={class:"card"},i={class:"card-body"},l=(0,n._)("ul",{class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},[(0,n.kq)(" CHANGE TASK LINKS "),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"change-task-links-tab","data-bs-toggle":"tab","data-bs-target":"#change_task_links",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Change Task Links ")]),(0,n.kq)(" DESCRIPTION "),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"description-tab","data-bs-toggle":"tab","data-bs-target":"#description",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Description ")]),(0,n.kq)(" MISC "),(0,n._)("li",{class:"nav-item",role:"presentation"},[(0,n._)("button",{class:"nav-link",id:"misc-tab","data-bs-toggle":"tab","data-bs-target":"#misc",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Misc ")])],-1),o=(0,n._)("hr",null,null,-1),c={class:"tab-content",id:"misc_module_content"},r={class:"tab-pane fade active show",id:"change_task_links",role:"tabpanel","aria-labelledby":"contact-tab"},d={class:"tab-pane fade",id:"description",role:"tabpanel","aria-labelledby":"home-tab"},k={class:"tab-pane fade",id:"misc",role:"tabpanel","aria-labelledby":"home-tab"},u={name:"ChangeTaskDescription"};var h=a(3744);const g=(0,h.Z)(u,[["render",function(e,t,a,s,i,l){return(0,n.wg)(),(0,n.iD)("h1",null,"Description")}]]),b=(0,n.Uk)(" Change Task Links "),_=(0,n._)("p",{class:"text-instructions"}," The following are links to other change tasks. You can either block an existing change task in the future. Or can set it will be Blocked by a change task in the past. ",-1),p={key:0,class:"requirement-item-spacer"},m=[(0,n._)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this change task. ",-1)],v={key:1},f={class:"row submit-row"},C={class:"col-md-12"},T=(0,n._)("hr",null,null,-1);var y=a(5169),w=a(6542),D=a(9669),I=a.n(D),L=a(3577),R=a(9963);const S={class:"modal fade",id:"newChangeTaskLinkModal",tabindex:"-1","aria-labelledby":"linkModal","aria-hidden":"true"},Z={class:"modal-dialog modal-lg"},j={class:"modal-content"},B={class:"modal-header"},M=(0,n.Uk)(" New Change Task Link Wizard "),O=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"linkCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),U={class:"modal-body"},q={class:"row"},x=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Relationship"),(0,n._)("p",{class:"text-instructions"}," Please indicate if you are blocking future Changes Tasks, or if a past Change Task is blocking current Change Task. ")],-1),W={class:"col-md-8"},E=(0,n.Uk)(" Current change task "),$=(0,n._)("br",null,null,-1),N=(0,n._)("hr",null,null,-1),A={class:"row"},H=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Select Links"),(0,n._)("p",{class:"text-instructions"}," Please select which of the change tasks you want to connect to this change task. ")],-1),P={class:"col-md-8"},K={key:0,class:"alert alert-warning"},z={class:"form-check"},J=["value","id"],Y=["for"],F={class:"modal-footer"},G=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),V=["disabled"];var Q=a(5808),X=a(9860),ee=a(4250);const te=a(9669),ae={name:"NewChangeTaskLinkWizard",components:{Icon:w.JO,NSelect:X.Z},data:()=>({changeTaskRelation:[{value:"blocked_by",label:"Is Blocked By"},{value:"blocking",label:"Is Currently Blocking"}],changeTaskRelationModel:"blocking",changeTaskResults:[],filteredChangeTaskResults:[],linkModel:[]}),computed:{...(0,ee.Se)({destination:"getDestination",endDate:"getChangeTaskEndDate",locationId:"getLocationId",rootUrl:"getRootUrl",startDate:"getChangeTaskStartDate",staticUrl:"getStaticUrl"})},watch:{changeTaskRelationModel(){"blocking"===this.changeTaskRelationModel?this.filterBlocking():this.filterBlockedBy()}},mixins:[Q.Z],methods:{checkSelected(e){return this.linkModel.includes(e)?"row change-task--detail change-task--selected":"row change-task--detail"},filterBlockedBy(){this.filteredChangeTaskResults=this.changeTaskResults.filter((e=>new Date(e.fields.change_task_end_date).getTime()<=this.startDate.getTime()))},filterBlocking(){this.filteredChangeTaskResults=this.changeTaskResults.filter((e=>new Date(e.fields.change_task_start_date).getTime()>=this.endDate.getTime()))},getAllChangeTasks(){te.post(`${this.rootUrl}change_task_information/${this.locationId}/get_change_task_list/`).then((e=>{this.changeTaskResults=e.data,this.filterBlocking()}))},saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append("change_task",t)})),e.set("object_relation",this.changeTaskRelationModel),te.post(`${this.rootUrl}object_data/change_task/${this.locationId}/add_link/`,e).then((()=>{this.$emit("update_link_results",{}),document.getElementById("linkCloseButton").click()}))}},mounted(){setTimeout((()=>{this.getAllChangeTasks()}),200)}},ne=(0,h.Z)(ae,[["render",function(e,t,a,s,i,l){const o=(0,n.up)("Icon"),c=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",S,[(0,n._)("div",Z,[(0,n._)("div",j,[(0,n._)("div",B,[(0,n._)("h2",null,[(0,n.Wm)(o,{icon:e.icons.linkOut},null,8,["icon"]),M]),O]),(0,n._)("div",U,[(0,n.kq)(" CHOOSE RELATIONSHIP TYPE "),(0,n._)("div",q,[x,(0,n._)("div",W,[E,$,(0,n.Wm)(c,{options:i.changeTaskRelation,value:i.changeTaskRelationModel,"onUpdate:value":t[0]||(t[0]=e=>i.changeTaskRelationModel=e),class:"object-selection"},null,8,["options","value"])])]),N,(0,n.kq)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,n._)("div",A,[H,(0,n._)("div",P,[0===i.filteredChangeTaskResults.length?((0,n.wg)(),(0,n.iD)("div",K," Sorry - there are no results. ")):(0,n.kq)("v-if",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.filteredChangeTaskResults,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.pk,class:(0,L.normalizeClass)(l.checkSelected(e.pk))},[(0,n._)("div",z,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",value:e.pk,id:`checkbox_change_task_${e.pk}`,"onUpdate:modelValue":t[1]||(t[1]=e=>i.linkModel=e)},null,8,J),[[R.vModelCheckbox,i.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`checkbox_change_task_${e.pk}`}," Change Task "+(0,L.toDisplayString)(e.pk)+" - "+(0,L.toDisplayString)(e.fields.change_task_title),9,Y)])],2)))),128))])])]),(0,n._)("div",F,[G,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:0==i.linkModel.length,onClick:t[2]||(t[2]=(...e)=>l.saveLinks&&l.saveLinks(...e))}," Save changes ",8,V)])])])])}]]);var se=a(7794);const ie={name:"ChangeTaskLinkList",components:{NewChangeTaskLinkWizardVue:ne,Icon:w.JO,SubObjectLinks:se.Z},mixins:[Q.Z],data:()=>({linkResults:[],translateStatus:{1:"Draft",2:"Waiting for approval",3:"Approved",4:"Started",5:"Finished",6:"Rejected",7:"Paused",8:"Ready for QA"}}),computed:{...(0,ee.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{newLink(){new y.u_(document.getElementById("newChangeTaskLinkModal")).show()},updateLinkResults(){this.linkResults=[],I().post(`${this.rootUrl}object_data/change_task/${this.locationId}/object_link_list/`).then((e=>{this.linkResults=e.data.map((e=>{let t=e;return t.object_status=this.translateStatus[e.object_status],t}))}))}},mounted(){setTimeout((()=>{this.updateLinkResults()}),200)}},le={name:"ChangeTaskMisc"},oe={name:"ChangeTaskModules",components:{ChangeTaskDesctiption:g,ChangeTaskLinkListVue:(0,h.Z)(ie,[["render",function(e,t,a,s,i,l){const o=(0,n.up)("Icon"),c=(0,n.up)("sub-object-links"),r=(0,n.up)("new-change-task-link-wizard-vue");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h2",null,[(0,n.Wm)(o,{icon:e.icons.linkOut},null,8,["icon"]),b]),_,(0,n.kq)(" OBJECT LINKS "),0==i.linkResults.length?((0,n.wg)(),(0,n.iD)("div",p,m)):((0,n.wg)(),(0,n.iD)("div",v,[(0,n.kq)(" Is Blocked By "),(0,n.Wm)(c,{title:"Is Blocked By","link-results":i.linkResults.filter((t=>"Block"===t.link_relationship&&t.parent_link!==e.destination))},null,8,["link-results"]),(0,n.kq)(" Is Currently Blocking "),(0,n.Wm)(c,{title:"Is Currently Blocking","link-results":i.linkResults.filter((t=>"Block"===t.link_relationship&&t.parent_link===e.destination))},null,8,["link-results"])])),(0,n.kq)(" Submit Button "),(0,n._)("div",f,[(0,n._)("div",C,[e.userLevel>1?((0,n.wg)(),(0,n.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>l.newLink&&l.newLink(...e))},"Create new Link")):(0,n.kq)("v-if",!0)])]),T,(0,n.kq)(" MODAL FOR NEW CHANGE TASK LINKS "),(0,n.Wm)(r,{onUpdate_link_results:l.updateLinkResults},null,8,["onUpdate_link_results"])])}]]),ChangeTaskMisc:(0,h.Z)(le,[["render",function(e,t,a,s,i,l){return(0,n.wg)(),(0,n.iD)("h1",null,"Misc")}]])}},ce=(0,h.Z)(oe,[["render",function(e,t,a,u,h,g){const b=(0,n.up)("change-task-link-list-vue"),_=(0,n.up)("change-task-desctiption"),p=(0,n.up)("change-task-misc");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",i,[l,o,(0,n._)("div",c,[(0,n._)("div",r,[(0,n.Wm)(b)]),(0,n._)("div",d,[(0,n.Wm)(_)]),(0,n._)("div",k,[(0,n.Wm)(p)])])])])}]])},7794:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(6252),s=a(3577);const i={key:0},l={class:"col-md-10 object-link--details"},o=["href"],c={class:"object-link--link"},r={class:"object-link--title"},d={class:"col-md-2 object-link--status"},k=(0,n._)("span",null,"Object Status: ",-1),u={key:0,class:"object-link--remove"},h={key:1,class:"spacer-extra"};var g=a(4250),b=a(6542),_=a(5808);const p={name:"SubObjectLinks",components:{Icon:b.JO},mixins:[_.Z],props:{linkResults:{type:Array,default:()=>[]},title:{type:String,default:"Relates"}},computed:{...(0,g.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{removeLink(e){let t=new FormData;t.set("link_id",e.object_id),t.set("link_connection",e.object_type===this.destination?"meta_object":e.object_type),axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_link/`,t).then((()=>{this.$emit("update_link_results")}))}}},m=(0,a(3744).Z)(p,[["render",function(e,t,a,g,b,_){const p=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)(n.HY,null,[a.linkResults.length>0?((0,n.wg)(),(0,n.iD)("h3",i,(0,s.toDisplayString)(a.title),1)):(0,n.kq)("v-if",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.linkResults,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.pk,class:"row object-link"},[(0,n.kq)(" Object ID + Title "),(0,n._)("div",l,[(0,n._)("a",{href:`${this.rootUrl}${t.object_type}_information/${t.object_id}/`,target:"_blank",rel:"noopener noreferrer"},[(0,n._)("div",c,(0,s.toDisplayString)(t.object_type)+" - "+(0,s.toDisplayString)(t.object_id),1),(0,n._)("div",r,(0,s.toDisplayString)(t.object_title),1)],8,o)]),(0,n.kq)(" Object Status "),(0,n._)("div",d,[k,(0,n._)("span",null,(0,s.toDisplayString)(t.object_status),1)]),(0,n.kq)(" Object Delete "),e.userLevel>=2?((0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(p,{icon:e.icons.trashCan,onClick:e=>_.removeLink(t)},null,8,["icon","onClick"])])):(0,n.kq)("v-if",!0)])))),128)),a.linkResults.length>0?((0,n.wg)(),(0,n.iD)("div",h)):(0,n.kq)("v-if",!0)],64)}]])},5808:(e,t,a)=>{a.d(t,{Z:()=>R});var n=a(3985),s=a(5555),i=a(1826),l=a(6443),o=a(1327),c=a(8521),r=a(1056),d=a(4324),k=a(9672),u=a(9867),h=a(1239),g=a(5004),b=a(1321),_=a(1216),p=a(5550),m=a(7702),v=a(7903),f=a(2606),C=a(3843),T=a(2393),y=a(3360),w=a(9714),D=a(1323),I=a(2610),L=a(5968);const R={data:()=>({icons:{arrowUp:n.Z,bugIcon:s.Z,bxBriefcase:i.Z,cardChecklist:l.Z,clipboardIcon:o.Z,documentPdf:c.Z,documentText:r.Z,folderIcon:d.Z,groupPresentation:k.Z,imageIcon:u.Z,infoCircle:h.Z,linkIcon:g.Z,linkIcon2:b.Z,linkOut:_.Z,mailIcon:p.Z,microsoftExcel:m.Z,microsoftPowerpoint:v.Z,microsoftWord:f.Z,noteAdd:C.Z,objectStorage:T.Z,passwordIcon:y.Z,trashCan:w.Z,userIcon:D.Z,usersIcon:I.Z,xCircle:L.Z}})}}}]);