"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[5510],{9530:(t,e,a)=>{a.d(e,{Z:()=>_});var s=a(6252),l=a(3577);const o={class:"row"},r={class:"col-md-4"},i=(0,s._)("strong",null,"Between Dates",-1),d={class:"text-instructions"},n={class:"col-md-4"},u={class:"form-group"},c={class:"col-md-4"},h={class:"form-group"};var D=a(9974),p=a(4028),m=a(2587),M=a(212),k=a(431);const g={name:"BetweenDates",setup:()=>({v$:(0,p.ZP)()}),components:{NDatePicker:D.Z,ValidationRendering:M.Z},mixins:[k.Z],props:{destination:{type:String,default:""},endDateModel:{type:Number,default:()=>{let t=new Date;return t.setHours(16),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),new Date(t.setDate(t.getDate()+14)),t.getTime()}},noBackDating:{type:Boolean,default:!0},startDateModel:{type:Number,default:()=>{let t=new Date;return t.setHours(9),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}}},validations:{localEndDateModel:{required:m.C1},localStartDateModel:{required:m.C1}},data(){return{localEndDateModel:this.endDateModel,localStartDateModel:this.startDateModel}},methods:{emitDates(){this.$emit("update_dates",{start_date:this.localStartDateModel,end_date:this.localEndDateModel})},endDateDisabled(t){let e=!1;return this.noBackDating||(e=this.disableDate(t)),t<=this.startDateModel-864e5||e},startDateDisabled(t){let e=!1;return this.noBackDating||(e=this.disableDate(t)),t>this.endDateModel||e}},watch:{localEndDateModel(){this.localEndDateModel<this.localStartDateModel&&(this.localEndDateModel=this.localStartDateModel()),this.emitDates()},localStartDateModel(){this.localEndDateModel<this.localStartDateModel&&(this.localStartDateModel=this.localEndDateModel()),this.emitDates()}},mounted(){this.emitDates()}},_=(0,a(3744).Z)(g,[["render",function(t,e,a,D,p,m){const M=(0,s.up)("validation-rendering"),k=(0,s.up)("n-date-picker");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[i,(0,s._)("p",d," Choose the start and end date of the "+(0,l.toDisplayString)(a.destination)+". Please note the end date can not be earlier than the start date. They can be equal. ",1)]),(0,s._)("div",n,[(0,s._)("div",u,[(0,s._)("label",null,[(0,s.Uk)((0,l.toDisplayString)(a.destination)+" Start Date: ",1),(0,s.Wm)(M,{"error-list":D.v$.localStartDateModel.$errors},null,8,["error-list"])]),(0,s.Wm)(k,{type:"datetime",value:p.localStartDateModel,"onUpdate:value":e[0]||(e[0]=t=>p.localStartDateModel=t),class:"form-control","is-date-disabled":m.startDateDisabled,"is-time-disabled":m.startDateDisabled},null,8,["value","is-date-disabled","is-time-disabled"])])]),(0,s._)("div",c,[(0,s._)("div",h,[(0,s._)("label",null,[(0,s.Uk)((0,l.toDisplayString)(a.destination)+" End Date: ",1),(0,s.Wm)(M,{"error-list":D.v$.localEndDateModel.$errors},null,8,["error-list"])]),(0,s.Wm)(k,{type:"datetime",value:p.localEndDateModel,"onUpdate:value":e[1]||(e[1]=t=>p.localEndDateModel=t),class:"form-control","is-date-disabled":m.endDateDisabled,"is-time-disabled":m.endDateDisabled},null,8,["value","is-date-disabled","is-time-disabled"])])])])}]])},4766:(t,e,a)=>{a.r(e),a.d(e,{default:()=>A});var s=a(6252),l=a(9963);const o={class:"card"},r={class:"card-body"},i=(0,s._)("h1",null,"New Task",-1),d=(0,s._)("hr",null,null,-1),n={class:"row"},u=(0,s._)("div",{class:"col-md-4"},[(0,s._)("h2",null,"Description"),(0,s._)("p",{class:"text-instructions"}," To create a new task, fill out the form and submit at the bottom of the page. "),(0,s._)("p",{class:"text-instructions"},[(0,s._)("strong",null,"Note: "),(0,s.Uk)("Media files can not be uploaded until AFTER you save. This is a security feature. ")])],-1),c={class:"col-md-8",style:{"min-height":"610px"}},h={class:"form-group"},D=(0,s.Uk)("Task Short Description: "),p=(0,s._)("br",null,null,-1),m=(0,s.Uk)(" Task Long Description: "),M=(0,s._)("br",null,null,-1),k=["src"],g=(0,s._)("hr",null,null,-1),_=(0,s._)("hr",null,null,-1),v=(0,s._)("hr",null,null,-1),S=(0,s._)("hr",null,null,-1),b={class:"row submit-row"},f={class:"col-md-12"};var w=a(4028),y=a(2587),E=a(212),T=a(7267),$=a(9530),U=a(9878),q=a(3871),N=a(3058);const C=a(9669),Z={name:"NewTask",setup:()=>({v$:(0,w.ZP)()}),components:{BetweenDates:$.Z,GetStakeholders:q.Z,GroupPermissions:U.Z,editor:T.Z,ValidationRendering:E.Z},props:{groupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userGroupResults:{type:Array,default:()=>[]}},data:()=>({groupModel:{},stakeholderModel:"",taskDescriptionModel:"",taskEndDateModel:"",taskShortDescriptionModel:"",taskStartDateModel:""}),mixins:[N.Z],validations:{groupModel:{required:y.C1},stakeholderModel:{required:y.C1},taskDescriptionModel:{required:y.C1,maxLength:(0,y.BS)(63e4)},taskEndDateModel:{required:y.C1},taskShortDescriptionModel:{required:y.C1},taskStartDateModel:{required:y.C1}},methods:{submitNewTask:async function(){if(!await this.v$.$validate()&&(this.v$.groupModel.$error.length>0||this.v$.stakeholderModel.length>0||this.v$.taskDescriptionModel.length>0||this.v$.taskEndDateModel.length>0||this.v$.taskShortDescriptionModel.length>0||this.v$.taskStartDateModel.length>0))return void this.showValidationErrorModal();const t=new FormData;t.set("organisation",this.stakeholderModel),t.set("task_long_description",this.taskDescriptionModel),t.set("task_end_date",this.taskEndDateModel.toISOString()),t.set("task_short_description",this.taskShortDescriptionModel),t.set("task_start_date",this.taskStartDateModel.toISOString()),this.groupModel.forEach(((e,a)=>{t.append("group_list",e)})),C.post("save/",t).then((t=>{window.location.href=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateDates(t){this.taskEndDateModel=new Date(t.end_date),this.taskStartDateModel=new Date(t.start_date)},updateGroupModel(t){this.groupModel=t},updateStakeholderModel(t){this.stakeholderModel=t}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},A=(0,a(3744).Z)(Z,[["render",function(t,e,a,w,y,E){const T=(0,s.up)("validation-rendering"),$=(0,s.up)("editor"),U=(0,s.up)("get-stakeholders"),q=(0,s.up)("between-dates"),N=(0,s.up)("group-permissions");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[i,d,(0,s._)("div",n,[(0,s.kq)(" DESCRIPTION "),u,(0,s.kq)(" Task FORM "),(0,s._)("div",c,[(0,s.kq)(" TASK NAME "),(0,s._)("div",h,[(0,s._)("label",null,[D,(0,s.Wm)(T,{"error-list":w.v$.taskShortDescriptionModel.$errors},null,8,["error-list"])]),(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>y.taskShortDescriptionModel=t),class:"form-control"},null,512),[[l.vModelText,y.taskShortDescriptionModel]])]),p,(0,s.kq)(" TASK DESCRIPTION "),(0,s._)("label",null,[m,(0,s.Wm)(T,{"error-list":w.v$.taskDescriptionModel.$errors},null,8,["error-list"])]),M,(0,s._)("img",{src:`${a.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,k),(0,s.Wm)($,{init:{height:500,menubar:!1,plugins:["lists","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:y.taskDescriptionModel,"onUpdate:modelValue":e[1]||(e[1]=t=>y.taskDescriptionModel=t)},null,8,["modelValue"])])]),(0,s.kq)(" STAKEHOLDER ORGANISATION "),g,(0,s.Wm)(U,{onUpdate_stakeholder_model:e[2]||(e[2]=t=>E.updateStakeholderModel(t)),"is-dirty":w.v$.stakeholderModel.$error.length>0},null,8,["is-dirty"]),(0,s.kq)(" START DATE & END DATE "),_,(0,s.Wm)(q,{destination:"task",onUpdate_dates:e[3]||(e[3]=t=>E.updateDates(t))}),(0,s.kq)(" Group Permissions "),v,(0,s.Wm)(N,{"group-results":a.groupResults,destination:"task","user-group-results":a.userGroupResults,onUpdate_group_model:e[4]||(e[4]=t=>E.updateGroupModel(t)),"is-dirty":w.v$.groupModel.$error.length>0},null,8,["group-results","user-group-results","is-dirty"]),(0,s.kq)(" Submit Button "),S,(0,s._)("div",b,[(0,s._)("div",f,[(0,s._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[5]||(e[5]=(...t)=>E.submitNewTask&&E.submitNewTask(...t))},"Create new Task")])])])])}]])},431:(t,e,a)=>{a.d(e,{Z:()=>l});var s=a(7126);const l={methods:{getNiceDate:t=>s.ou.fromISO(t).toLocaleString(s.ou.DATETIME_MED),disableDate(t){const e=new Date;return e.setMilliseconds(0),e.setSeconds(0),e.setHours(0),t<=e.getTime()-36e5}}}}}]);