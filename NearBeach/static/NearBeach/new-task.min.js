"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[5510],{9530:(t,e,a)=>{a.d(e,{Z:()=>_});var s=a(6252),l=a(3577);const o={class:"row"},r={class:"col-md-4"},i=(0,s._)("strong",null,"Between Dates",-1),d={class:"text-instructions"},n={class:"col-md-4"},u={class:"form-group"},c={class:"col-md-4"},h={class:"form-group"};var D=a(8946),p=a(5705),m=a(760),M=a(212),k=a(431);const g={name:"BetweenDates",setup:()=>({v$:(0,p.ZP)()}),components:{NDatePicker:D.Z,ValidationRendering:M.Z},mixins:[k.Z],props:{destination:{type:String,default:""},endDateModel:{type:Number,default:()=>{let t=new Date;return t.setHours(16),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),new Date(t.setDate(t.getDate()+14)),t.getTime()}},noBackDating:{type:Boolean,default:!0},startDateModel:{type:Number,default:()=>{let t=new Date;return t.setHours(9),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}}},validations:{localEndDateModel:{required:m.C1},localStartDateModel:{required:m.C1}},data(){return{localEndDateModel:this.endDateModel,localStartDateModel:this.startDateModel}},methods:{emitDates(){this.$emit("update_dates",{start_date:this.localStartDateModel,end_date:this.localEndDateModel})},endDateDisabled(t){let e=!1;return this.noBackDating||(e=this.disableDate(t)),t<=this.startDateModel-864e5||e},startDateDisabled(t){let e=!1;return this.noBackDating||(e=this.disableDate(t)),t>this.endDateModel||e}},watch:{localEndDateModel(){this.localEndDateModel<this.localStartDateModel&&(this.localEndDateModel=this.localStartDateModel()),this.emitDates()},localStartDateModel(){this.localEndDateModel<this.localStartDateModel&&(this.localStartDateModel=this.localEndDateModel()),this.emitDates()}},mounted(){this.emitDates()}},_=(0,a(3744).Z)(g,[["render",function(t,e,a,D,p,m){const M=(0,s.up)("validation-rendering"),k=(0,s.up)("n-date-picker");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[i,(0,s._)("p",d," Choose the start and end date of the "+(0,l.toDisplayString)(a.destination)+". Please note the end date can not be earlier than the start date. They can be equal. ",1)]),(0,s._)("div",n,[(0,s._)("div",u,[(0,s._)("label",null,[(0,s.Uk)((0,l.toDisplayString)(a.destination)+" Start Date: ",1),(0,s.Wm)(M,{"error-list":D.v$.localStartDateModel.$errors},null,8,["error-list"])]),(0,s.Wm)(k,{type:"datetime",value:p.localStartDateModel,"onUpdate:value":e[0]||(e[0]=t=>p.localStartDateModel=t),class:"form-control","is-date-disabled":m.startDateDisabled,"is-time-disabled":m.startDateDisabled},null,8,["value","is-date-disabled","is-time-disabled"])])]),(0,s._)("div",c,[(0,s._)("div",h,[(0,s._)("label",null,[(0,s.Uk)((0,l.toDisplayString)(a.destination)+" End Date: ",1),(0,s.Wm)(M,{"error-list":D.v$.localEndDateModel.$errors},null,8,["error-list"])]),(0,s.Wm)(k,{type:"datetime",value:p.localEndDateModel,"onUpdate:value":e[1]||(e[1]=t=>p.localEndDateModel=t),class:"form-control","is-date-disabled":m.endDateDisabled,"is-time-disabled":m.endDateDisabled},null,8,["value","is-date-disabled","is-time-disabled"])])])])}]])},4766:(t,e,a)=>{a.r(e),a.d(e,{default:()=>C});var s=a(6252),l=a(9963);const o={class:"card"},r={class:"card-body"},i=(0,s._)("h1",null,"New Task",-1),d=(0,s._)("hr",null,null,-1),n={class:"row"},u=(0,s._)("div",{class:"col-md-4"},[(0,s._)("h2",null,"Description"),(0,s._)("p",{class:"text-instructions"}," To create a new task, fill out the form and submit at the bottom of the page. "),(0,s._)("p",{class:"text-instructions"},[(0,s._)("strong",null,"Note: "),(0,s.Uk)("Media files can not be uploaded until AFTER you save. This is a security feature. ")])],-1),c={class:"col-md-8",style:{"min-height":"610px"}},h={class:"form-group"},D=(0,s._)("br",null,null,-1),p=(0,s._)("br",null,null,-1),m=["src"],M=(0,s._)("hr",null,null,-1),k=(0,s._)("hr",null,null,-1),g=(0,s._)("hr",null,null,-1),_=(0,s._)("hr",null,null,-1),v={class:"row submit-row"},S={class:"col-md-12"};var b=a(5705),f=a(760),w=a(212),y=a(7267),E=a(9530),T=a(9878),$=a(3871),U=a(3058);const q=a(9669),N={name:"NewTask",setup:()=>({v$:(0,b.ZP)()}),components:{BetweenDates:E.Z,GetStakeholders:$.Z,GroupPermissions:T.Z,editor:y.Z,ValidationRendering:w.Z},props:{groupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userGroupResults:{type:Array,default:()=>[]}},data:()=>({groupModel:{},stakeholderModel:"",taskDescriptionModel:"",taskEndDateModel:"",taskShortDescriptionModel:"",taskStartDateModel:""}),mixins:[U.Z],validations:{groupModel:{required:f.C1},stakeholderModel:{required:f.C1},taskDescriptionModel:{required:f.C1,maxLength:(0,f.BS)(63e4)},taskEndDateModel:{required:f.C1},taskShortDescriptionModel:{required:f.C1},taskStartDateModel:{required:f.C1}},methods:{submitNewTask:async function(){if(!await this.v$.$validate()&&(this.v$.groupModel.$error.length>0||this.v$.stakeholderModel.length>0||this.v$.taskDescriptionModel.length>0||this.v$.taskEndDateModel.length>0||this.v$.taskShortDescriptionModel.length>0||this.v$.taskStartDateModel.length>0))return void this.showValidationErrorModal();const t=new FormData;t.set("organisation",this.stakeholderModel),t.set("task_long_description",this.taskDescriptionModel),t.set("task_end_date",this.taskEndDateModel.toISOString()),t.set("task_short_description",this.taskShortDescriptionModel),t.set("task_start_date",this.taskStartDateModel.toISOString()),this.groupModel.forEach(((e,a)=>{t.append("group_list",e)})),q.post("save/",t).then((t=>{window.location.href=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateDates(t){this.taskEndDateModel=new Date(t.end_date),this.taskStartDateModel=new Date(t.start_date)},updateGroupModel(t){this.groupModel=t},updateStakeholderModel(t){this.stakeholderModel=t}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},C=(0,a(3744).Z)(N,[["render",function(t,e,a,b,f,w){const y=(0,s.up)("validation-rendering"),E=(0,s.up)("editor"),T=(0,s.up)("get-stakeholders"),$=(0,s.up)("between-dates"),U=(0,s.up)("group-permissions");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[i,d,(0,s._)("div",n,[(0,s.kq)(" DESCRIPTION "),u,(0,s.kq)(" Task FORM "),(0,s._)("div",c,[(0,s.kq)(" TASK NAME "),(0,s._)("div",h,[(0,s._)("label",null,[(0,s.Uk)("Task Short Description: "),(0,s.Wm)(y,{"error-list":b.v$.taskShortDescriptionModel.$errors},null,8,["error-list"])]),(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>f.taskShortDescriptionModel=t),class:"form-control"},null,512),[[l.vModelText,f.taskShortDescriptionModel]])]),D,(0,s.kq)(" TASK DESCRIPTION "),(0,s._)("label",null,[(0,s.Uk)(" Task Long Description: "),(0,s.Wm)(y,{"error-list":b.v$.taskDescriptionModel.$errors},null,8,["error-list"])]),p,(0,s._)("img",{src:`${a.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,m),(0,s.Wm)(E,{init:{height:500,menubar:!1,plugins:["lists","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:f.taskDescriptionModel,"onUpdate:modelValue":e[1]||(e[1]=t=>f.taskDescriptionModel=t)},null,8,["modelValue"])])]),(0,s.kq)(" STAKEHOLDER ORGANISATION "),M,(0,s.Wm)(T,{onUpdate_stakeholder_model:e[2]||(e[2]=t=>w.updateStakeholderModel(t)),"is-dirty":b.v$.stakeholderModel.$error.length>0},null,8,["is-dirty"]),(0,s.kq)(" START DATE & END DATE "),k,(0,s.Wm)($,{destination:"task",onUpdate_dates:e[3]||(e[3]=t=>w.updateDates(t))}),(0,s.kq)(" Group Permissions "),g,(0,s.Wm)(U,{"group-results":a.groupResults,destination:"task","user-group-results":a.userGroupResults,onUpdate_group_model:e[4]||(e[4]=t=>w.updateGroupModel(t)),"is-dirty":b.v$.groupModel.$error.length>0},null,8,["group-results","user-group-results","is-dirty"]),(0,s.kq)(" Submit Button "),_,(0,s._)("div",v,[(0,s._)("div",S,[(0,s._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[5]||(e[5]=(...t)=>w.submitNewTask&&w.submitNewTask(...t))},"Create new Task")])])])])}]])},431:(t,e,a)=>{a.d(e,{Z:()=>l});var s=a(7126);const l={methods:{getNiceDate:t=>s.ou.fromISO(t).toLocaleString(s.ou.DATETIME_MED),disableDate(t){const e=new Date;return e.setMilliseconds(0),e.setSeconds(0),e.setHours(0),t<=e.getTime()-36e5}}}}}]);