"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[9616],{9822:(t,e,o)=>{o.d(e,{Z:()=>I});var s=o(6252),a=o(9963);const l={class:"row"},i=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"New Customer"),(0,s._)("p",{class:"text-instructions"}," Please fill out the following details. "),(0,s._)("strong",null,"Please Note:"),(0,s._)("p",{class:"text-instructions"}," Customers do not go through a duplication process. Please search for the potential customer first before adding them into NearBeach. ")],-1),n={class:"col-md-8"},r={class:"row"},d={class:"form-group col-sm-3"},c=(0,s.Uk)(" Title: "),u={key:0,class:"error"},m={class:"form-group col-sm-4"},p=(0,s.Uk)(" First Name: "),_={key:0,class:"error"},g={class:"form-group col-sm-5"},h=(0,s.Uk)(" Last Name: "),b={key:0,class:"error"},v=(0,s._)("br",null,null,-1),f={class:"form-group col-sm-8"},k=(0,s.Uk)(" Email: "),y={key:0,class:"error"},w={key:1,class:"error"},M=(0,s._)("br",null,null,-1);o(5169);var D=o(9860),N=o(4028),q=o(2587);o(9669);const C={name:"NewCustomerForm",setup:()=>({v$:(0,N.ZP)()}),components:{NSelect:D.Z},props:{flagValidationCheck:{type:Boolean,default:!1},organisationName:{type:String,default:""},titleList:{type:Array,default:()=>[]}},data:()=>({customerEmailModel:"",customerFirstNameModel:"",customerLastNameModel:"",organisationModel:{},searchTimeout:"",titleFixList:[],titleModel:[]}),validations:{customerEmailModel:{required:q.C1,email:q.Do},customerFirstNameModel:{required:q.C1},customerLastNameModel:{required:q.C1},titleModel:{required:q.C1}},methods:{},watch:{customerEmailModel(){this.$emit("update_customer_data",{field:"customerEmailModel",value:this.customerEmailModel})},customerFirstNameModel(){this.$emit("update_customer_data",{field:"customerFirstNameModel",value:this.customerFirstNameModel})},customerLastNameModel(){this.$emit("update_customer_data",{field:"customerLastNameModel",value:this.customerLastNameModel})},flagValidationCheck(){this.flagValidationCheck&&this.v$.$touch()},titleModel(){this.$emit("update_customer_data",{field:"titleModel",value:this.titleModel})}},mounted(){this.titleFixList=this.titleList.map((t=>({value:t.pk,label:t.fields.title})))}},I=(0,o(3744).Z)(C,[["render",function(t,e,o,D,N,q){const C=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",l,[i,(0,s._)("div",n,[(0,s.kq)(" CUSTOMER DETAILS "),(0,s._)("div",r,[(0,s._)("div",d,[(0,s._)("label",null,[c,D.v$.titleModel.$error?((0,s.wg)(),(0,s.iD)("span",u," Please supply ")):(0,s.kq)("v-if",!0)]),(0,s.Wm)(C,{options:N.titleFixList,label:"title",placeholder:"",value:N.titleModel,"onUpdate:value":e[0]||(e[0]=t=>N.titleModel=t)},null,8,["options","value"])]),(0,s._)("div",m,[(0,s._)("label",null,[p,D.v$.customerFirstNameModel.$error?((0,s.wg)(),(0,s.iD)("span",_," Please supply ")):(0,s.kq)("v-if",!0)]),(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>N.customerFirstNameModel=t)},null,512),[[a.vModelText,N.customerFirstNameModel]])]),(0,s._)("div",g,[(0,s._)("label",null,[h,D.v$.customerLastNameModel.$error?((0,s.wg)(),(0,s.iD)("span",b," Please supply ")):(0,s.kq)("v-if",!0)]),(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>N.customerLastNameModel=t)},null,512),[[a.vModelText,N.customerLastNameModel]])])]),v,(0,s.kq)(" Customer Email "),(0,s._)("div",f,[(0,s._)("label",null,[k,D.v$.customerEmailModel.$error?((0,s.wg)(),(0,s.iD)("span",y," Please supply ")):(0,s.kq)("v-if",!0),D.v$.customerEmailModel.$error?((0,s.wg)(),(0,s.iD)("span",w," Please format as Email ")):(0,s.kq)("v-if",!0)]),(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>N.customerEmailModel=t)},null,512),[[a.vModelText,N.customerEmailModel]])]),M])])}]])},6783:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Dt});var s=o(6252);const a={class:"card"},l={class:"card-body"},i=(0,s._)("ul",{class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},[(0,s.kq)(" Organisation Contacts "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"organisation-contacts-tab","data-bs-toggle":"tab","data-bs-target":"#organisation-contacts",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Organisation Contacts ")]),(0,s.kq)(" Document Uploads "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"document-uploads-tab","data-bs-toggle":"tab","data-bs-target":"#document-uploads",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Document Uploads ")]),(0,s.kq)(" Associated Projects & Tasks "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"associated-objects-tab","data-bs-toggle":"tab","data-bs-target":"#associated-objects",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Associated Objects ")]),(0,s.kq)(" Misc Modules "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"misc-modules-tab","data-bs-toggle":"tab","data-bs-target":"#misc-modules",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Misc ")]),(0,s.kq)(" Notes Modules "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"notes-modules-tab","data-bs-toggle":"tab","data-bs-target":"#notes-modules",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Notes ")])],-1),n=(0,s._)("hr",null,null,-1),r={class:"tab-content",id:"misc_module_content"},d={class:"tab-pane fade",id:"organisation-contacts",role:"tabpanel","aria-labelledby":"profile-tab"},c=(0,s.Uk)(" Contacts"),u=(0,s._)("p",{class:"text-instructions"}," Below are a list of contacts who are connected to this organisation. ",-1),m={key:0},p={key:1,class:"row submit-row"},_={class:"col-md-12"},g={class:"tab-pane fade",id:"document-uploads",role:"tabpanel","aria-labelledby":"profile-tab"},h={class:"tab-pane fade",id:"associated-objects",role:"tabpanel","aria-labelledby":"profile-tab"},b={class:"tab-pane fade",id:"misc-modules",role:"tabpanel","aria-labelledby":"profile-tab"},v={class:"tab-pane fade",id:"notes-modules",role:"tabpanel","aria-labelledby":"profile-tab"};var f=o(5169),k=o(6542),y=o(7115);const w={class:"modal fade",id:"addCustomerModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},M={class:"modal-dialog modal-xl modal-fullscreen-xl-down"},D={class:"modal-content"},N={class:"modal-header"},q=(0,s.Uk)(" Add Customer Wizard "),C=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addCustomerCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),I={class:"modal-body"},E={class:"modal-footer"},L=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var Z=o(9669),j=o.n(Z),R=o(9822),U=o(4250),S=o(4028),$=o(2587),O=o(5808);const T={name:"NewCustomerModal",setup:()=>({v$:(0,S.ZP)()}),components:{Icon:k.JO,NewCustomerForm:R.Z},props:{organisationId:{type:Number,default:0},titleList:{type:Array,default:()=>[]}},mixins:[O.Z],data:()=>({customerEmailModel:"",customerFirstNameModel:"",customerLastNameModel:"",flagValidationCheck:!1,organisationModel:{},titleModel:[]}),validations:{customerEmailModel:{required:$.C1,email:$.Do},customerFirstNameModel:{required:$.C1},customerLastNameModel:{required:$.C1},titleModel:{required:$.C1}},computed:{...(0,U.Se)({rootUrl:"getRootUrl"})},methods:{submitNewCustomer:async function(){if(this.flagValidationCheck=!0,setTimeout((()=>{this.flagValidationCheck=!1}),100),!await this.v$.$validate())return document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",void new f.u_(document.getElementById("errorModal")).show();const t=new FormData;t.set("customer_title",this.titleModel),t.set("customer_first_name",this.customerFirstNameModel),t.set("customer_last_name",this.customerLastNameModel),t.set("customer_email",this.customerEmailModel),t.set("organisation",this.organisationId),j().post(`${this.rootUrl}new_customer/save/`,t).then((t=>{window.location.href=t.data})).catch((t=>{}))},updateCustomerData(t){this[t.field]=t.value}}};var x=o(3744);const F=(0,x.Z)(T,[["render",function(t,e,o,a,l,i){const n=(0,s.up)("Icon"),r=(0,s.up)("new-customer-form");return(0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",M,[(0,s._)("div",D,[(0,s._)("div",N,[(0,s._)("h2",null,[(0,s.Wm)(n,{icon:t.icons.userIcon},null,8,["icon"]),q]),C]),(0,s._)("div",I,[(0,s.Wm)(r,{"title-list":o.titleList,"flag-validation-check":l.flagValidationCheck,onUpdate_customer_data:e[0]||(e[0]=t=>i.updateCustomerData(t))},null,8,["title-list","flag-validation-check"])]),(0,s._)("div",E,[(0,s._)("a",{href:"javascript:void(0)",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>i.submitNewCustomer&&i.submitNewCustomer(...t))},"Add Contact"),L])])])])}]]);var P=o(6291),A=o(2731),W=o(3577);const B=(0,s.Uk)(" Associated Objects "),H={key:0},V={key:1,class:"row"},Y=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Project"),(0,s._)("p",{class:"text-instructions"}," The following are current OPEN projects associated with the organisation. ")],-1),J={class:"col-md-8"},K={class:"table"},G=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td",null,"Project Information"),(0,s._)("td",null,"Status")])],-1),X=["href"],z=(0,s._)("div",{class:"spacer"},null,-1),Q={class:"small-text"},tt={key:2},et={key:3,class:"row"},ot=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Requirement"),(0,s._)("p",{class:"text-instructions"}," The following are current OPEN requirements associated with the organisation. ")],-1),st={class:"col-md-8"},at={class:"table"},lt=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td",null,"Requirement Information")])],-1),it=["href"],nt=(0,s._)("div",{class:"spacer"},null,-1),rt={class:"small-text"},dt={key:4},ct={key:5,class:"row"},ut=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Task"),(0,s._)("p",{class:"text-instructions"}," The following are current OPEN tasks associated with the organisation. ")],-1),mt={class:"col-md-8"},pt={class:"table"},_t=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td",null,"Task Information"),(0,s._)("td",null,"Status")])],-1),gt=["href"],ht=(0,s._)("div",{class:"spacer"},null,-1),bt={class:"small-text"},vt={key:6,class:"spacer"},ft={key:7,class:"alert alert-info"},kt={name:"AssociatedObjects",components:{Icon:k.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},mixins:[O.Z],data:()=>({projectResults:[],requirementResults:[],taskResults:[]}),computed:{...(0,U.Se)({rootUrl:"getRootUrl"})},methods:{getAssociatedObjectResults(){j().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/associated_objects/`).then((t=>{this.projectResults=t.data.project,this.requirementResults=t.data.requirement,this.taskResults=t.data.task})).catch((t=>{}))},getFriendlyDate:t=>new Date(t).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},mounted(){setTimeout((()=>{this.getAssociatedObjectResults()}),200)}},yt=(0,x.Z)(kt,[["render",function(t,e,o,a,l,i){const n=(0,s.up)("Icon");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,[(0,s.Wm)(n,{icon:t.icons.objectStorage},null,8,["icon"]),B]),l.projectResults.length+l.taskResults.length>0?((0,s.wg)(),(0,s.iD)("hr",H)):(0,s.kq)("v-if",!0),(0,s.kq)(" Project Results "),l.projectResults.length>0?((0,s.wg)(),(0,s.iD)("div",V,[Y,(0,s._)("div",J,[(0,s._)("table",K,[G,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.projectResults,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.project_id},[(0,s._)("td",null,[(0,s._)("a",{href:`${t.rootUrl}project_information/${e.project_id}/`},[(0,s._)("p",null,(0,W.toDisplayString)(e.project_name),1),z,(0,s._)("p",Q," Project "+(0,W.toDisplayString)(e.project_id)+" - End Date: "+(0,W.toDisplayString)(i.getFriendlyDate(e.project_end_date)),1)],8,X)]),(0,s._)("td",null,(0,W.toDisplayString)(e.project_status),1)])))),128))])])])])):(0,s.kq)("v-if",!0),(0,s.kq)(" THE FOLLOWING HR WILL NEED TO BE FIXED! "),l.projectResults.length>0?((0,s.wg)(),(0,s.iD)("hr",tt)):(0,s.kq)("v-if",!0),(0,s.kq)(" Requirement Results "),l.requirementResults.length>0?((0,s.wg)(),(0,s.iD)("div",et,[ot,(0,s._)("div",st,[(0,s._)("table",at,[lt,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.requirementResults,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.requirement_id},[(0,s._)("td",null,[(0,s._)("a",{href:`${t.rootUrl}requirement_information/${e.requirement_id}/`},[(0,s._)("p",null,(0,W.toDisplayString)(e.requirement_title),1),nt,(0,s._)("p",rt," Requirement "+(0,W.toDisplayString)(e.requirement_id),1)],8,it)])])))),128))])])])])):(0,s.kq)("v-if",!0),(0,s.kq)(" THE FOLLOWING HR WILL NEED TO BE FIXED! "),l.projectResults.length>0?((0,s.wg)(),(0,s.iD)("hr",dt)):(0,s.kq)("v-if",!0),(0,s.kq)(" Task Results "),l.taskResults.length>0?((0,s.wg)(),(0,s.iD)("div",ct,[ut,(0,s._)("div",mt,[(0,s._)("table",pt,[_t,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.taskResults,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.task_id},[(0,s._)("td",null,[(0,s._)("a",{href:`${t.rootUrl}task_information/${e.task_id}/`},[(0,s._)("p",null,(0,W.toDisplayString)(e.task_short_description),1),ht,(0,s._)("p",bt," Task "+(0,W.toDisplayString)(e.task_id)+" - End Date: "+(0,W.toDisplayString)(i.getFriendlyDate(e.task_end_date)),1)],8,gt)]),(0,s._)("td",null,(0,W.toDisplayString)(e.task_status),1)])))),128))])])])])):(0,s.kq)("v-if",!0),(0,s.kq)(" Only show when there are no associated tasks "),l.projectResults.length+l.taskResults.length===0?((0,s.wg)(),(0,s.iD)("div",vt)):(0,s.kq)("v-if",!0),l.projectResults.length+l.taskResults.length===0?((0,s.wg)(),(0,s.iD)("div",ft,' There are currently no Objects associated with this Organisation. You can create some new objects by click on the "New Objects" menu item. ')):(0,s.kq)("v-if",!0)])}]]);var wt=o(7101);const Mt={name:"OrganisationModules",components:{AssociatedObjects:yt,CustomersListModule:y.Z,DocumentsModule:wt.Z,Icon:k.JO,MiscModule:A.Z,NewCustomerModal:F,NotesModule:P.Z},props:{customerResults:{type:Array,default:()=>[]},destination:{type:String,default:""},locationId:{type:Number,default:0},staticUrl:{type:String,default:"/"},rootUrl:{type:String,default:"/"},titleList:{type:Array,default:()=>[]},userLevel:{type:Number,default:0}},computed:{},mixins:[O.Z],methods:{addNewContact(){new f.u_(document.getElementById("addCustomerModal")).show()}},mounted(){this.$store.commit({type:"updateUrl",staticUrl:this.staticUrl,rootUrl:this.rootUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},Dt=(0,x.Z)(Mt,[["render",function(t,e,o,f,k,y){const w=(0,s.up)("Icon"),M=(0,s.up)("customers-list-module"),D=(0,s.up)("documents-module"),N=(0,s.up)("associated-objects"),q=(0,s.up)("misc-module"),C=(0,s.up)("notes-module"),I=(0,s.up)("new-customer-modal");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",l,[(0,s.kq)(" The MENU Items "),i,n,(0,s.kq)(" The Modules "),(0,s._)("div",r,[(0,s._)("div",d,[(0,s._)("h2",null,[(0,s.Wm)(w,{icon:t.icons.userIcon},null,8,["icon"]),c]),u,(0,s.Wm)(M,{"customer-results":o.customerResults},null,8,["customer-results"]),(0,s.kq)(" ADD CUSTOMER BUTTON "),(0,s.kq)(" ADD IN PERMISSIONS "),o.userLevel>1?((0,s.wg)(),(0,s.iD)("hr",m)):(0,s.kq)("v-if",!0),o.userLevel>1?((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",_,[(0,s._)("button",{class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>y.addNewContact&&y.addNewContact(...t))}," Add Contact ")])])):(0,s.kq)("v-if",!0)]),(0,s._)("div",g,[(0,s.Wm)(D,{destination:o.destination,"location-id":o.locationId},null,8,["destination","location-id"])]),(0,s._)("div",h,[(0,s.Wm)(N,{destination:o.destination,"location-id":o.locationId},null,8,["destination","location-id"])]),(0,s._)("div",b,[(0,s.Wm)(q,{destination:o.destination,"location-id":o.locationId},null,8,["destination","location-id"])]),(0,s._)("div",v,[(0,s.Wm)(C,{"location-id":o.locationId,destination:o.destination},null,8,["location-id","destination"])])])]),(0,s.kq)(" MODALS "),(0,s.Wm)(I,{"organisation-id":o.locationId,"title-list":o.titleList},null,8,["organisation-id","title-list"])])}]])},3058:(t,e,o)=>{o.d(e,{Z:()=>a});var s=o(5169);const a={methods:{showErrorModal(t,e,o){new s.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${e}-${o}<hr>${t}`,new s.u_(document.getElementById("errorModal")).show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new s.u_(document.getElementById("errorModal")).show()}}}},5808:(t,e,o)=>{o.d(e,{Z:()=>I});var s=o(3985),a=o(5555),l=o(1826),i=o(6443),n=o(1327),r=o(8521),d=o(1056),c=o(4324),u=o(9672),m=o(9867),p=o(1239),_=o(5004),g=o(1321),h=o(1216),b=o(5550),v=o(7702),f=o(7903),k=o(2606),y=o(3843),w=o(2393),M=o(3360),D=o(9714),N=o(1323),q=o(2610),C=o(5968);const I={data:()=>({icons:{arrowUp:s.Z,bugIcon:a.Z,bxBriefcase:l.Z,cardChecklist:i.Z,clipboardIcon:n.Z,documentPdf:r.Z,documentText:d.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:m.Z,infoCircle:p.Z,linkIcon:_.Z,linkIcon2:g.Z,linkOut:h.Z,mailIcon:b.Z,microsoftExcel:v.Z,microsoftPowerpoint:f.Z,microsoftWord:k.Z,noteAdd:y.Z,objectStorage:w.Z,passwordIcon:M.Z,trashCan:D.Z,userIcon:N.Z,usersIcon:q.Z,xCircle:C.Z}})}}}]);